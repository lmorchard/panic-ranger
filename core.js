!function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n=window.webpackJsonp;window.webpackJsonp=function(i,r,s){for(var a,u,l,c=0,h=[];c<i.length;c++)u=i[c],o[u]&&h.push(o[u][0]),o[u]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);for(n&&n(i,r,s);h.length;)h.shift()();if(s)for(c=0;c<s.length;c++)l=e(e.s=s[c]);return l};var i={},o={7:0};e.e=function(t){function n(){a.onerror=a.onload=null,clearTimeout(u);var e=o[t];0!==e&&(e&&e[1](new Error("Loading chunk "+t+" failed.")),o[t]=void 0)}var i=o[t];if(0===i)return new Promise(function(t){t()});if(i)return i[2];var r=new Promise(function(e,n){i=o[t]=[e,n]});i[2]=r;var s=document.getElementsByTagName("head")[0],a=document.createElement("script");a.type="text/javascript",a.charset="utf-8",a.async=!0,a.timeout=12e4,e.nc&&a.setAttribute("nonce",e.nc),a.src=e.p+""+t+".bundle.js";var u=setTimeout(n,12e4);return a.onerror=a.onload=n,s.appendChild(a),r},e.m=t,e.c=i,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e.oe=function(t){throw console.error(t),t},e(e.s=77)}([/*!*************************!*\
  !*** ./src/lib/core.js ***!
  \*************************/
/*! exports provided: Messages, World, Component, System, registerComponent, getComponent, registerSystem, getSystem */
/*! all exports used */
function(t,e,n){"use strict";function i(t,e){R[t]=e}function o(t){return R[t]}function r(t,e){z[t]=e}function s(t){return z[t]}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"Messages",function(){return T}),n.d(e,"World",function(){return A}),n.d(e,"Component",function(){return P}),n.d(e,"System",function(){return O}),e.registerComponent=i,e.getComponent=o,e.registerSystem=r,e.getSystem=s;var a=n(/*! babel-runtime/helpers/extends */60),u=n.n(a),l=n(/*! babel-runtime/helpers/classCallCheck */1),c=n.n(l),h=n(/*! babel-runtime/helpers/createClass */2),d=n.n(h),f=1e3/60,p=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)},m=void 0,v=void 0,y=void 0,g=void 0,_=void 0,b=void 0,w=void 0,x=void 0,S=void 0,k=void 0,C=void 0,E=void 0,M=void 0,T={ENTITY_INSERT:"entity_insert",ENTITY_DESTROY:"entity_destroy"},A=function(){function t(e){var n=this;c()(this,t),e=e||{},this.isRunning=!1,this.isPaused=!1,this.debug=!1,this.systems={},e.systems&&this.addSystems(e.systems),this.store={},this.subscribers={},this.tickDuration=f,this.maxTickDelta=5*f,this.tickAccumulator=0,this.lastTickTime=0,this.lastDrawTime=0,this.boundTickLoop=function(){return n.tickLoop()},this.boundDrawLoop=function(t){return n.drawLoop(t)},this.reset()}return d()(t,[{key:"start",value:function(){if(!this.isRunning){this.isRunning=!0;for(var t in this.systems)this.systems[t].initialize();return this.lastTickTime=Date.now(),this.lastDrawTime=0,setTimeout(this.boundTickLoop,this.tickDuration),p(this.boundDrawLoop),this}}},{key:"stop",value:function(){return this.isRunning=!1,this}},{key:"pause",value:function(){return this.isPaused=!0,this}},{key:"resume",value:function(){return this.isPaused=!1,this}},{key:"reset",value:function(){this.store={},this.lastEntityId=0}},{key:"subscribe",value:function(t,e){return this.subscribers[t]||(this.subscribers[t]=[]),this.subscribers[t].push(e),this}},{key:"unsubscribe",value:function(){return this}},{key:"publish",value:function(t,e){if(this.subscribers[t]){for(C=0,M;M=this.subscribers[t][C];C++)M(t,e);return this}}},{key:"addSystems",value:function(t){for(y in t)g=t[y],_=s(y),v=new _(g),v.setWorld(this),this.systems[y]=v}},{key:"getSystem",value:function(t){return this.systems[t]}},{key:"tick",value:function(t){x=t/1e3;for(y in this.systems)this.systems[y].updateStart(x);for(y in this.systems)this.systems[y].update(x);for(y in this.systems)this.systems[y].updateEnd(x)}},{key:"tickLoop",value:function(){if(w=Date.now(),x=Math.min(w-this.lastTickTime,this.maxTickDelta),this.lastTickTime=w,!this.isPaused)for(this.tickAccumulator+=x;this.tickAccumulator>this.tickDuration;)this.tick(this.tickDuration),this.tickAccumulator-=this.tickDuration;this.isRunning&&setTimeout(this.boundTickLoop,this.tickDuration)}},{key:"draw",value:function(t){x=t/1e3;for(y in this.systems)this.systems[y].drawStart(x);for(y in this.systems)this.systems[y].draw(x);for(y in this.systems)this.systems[y].drawEnd(x)}},{key:"drawLoop",value:function(t){this.lastDrawTime||(this.lastDrawTime=t),x=t-this.lastDrawTime,this.lastDrawTime=t,this.isPaused||this.draw(x),this.isRunning&&p(this.boundDrawLoop)}},{key:"generateEntityId",value:function(){return++this.lastEntityId}},{key:"insert",value:function(){for(var t=[],e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];for(C=0;E=n[C];C++){m=this.generateEntityId();for(b in E)S=E[b],this.addComponent(m,b,S);this.world&&this.world.publish(T.ENTITY_INSERT,m),t.push(m)}return t.length>1?t:t[0]}},{key:"destroy",value:function(t){this.world&&this.world.publish(T.ENTITY_DESTROY,t);for(b in this.store)this.removeComponent(t,b)}},{key:"addComponent",value:function(t,e,n){var i=o(e),r=i.create(n);this.store[e]||(this.store[e]={}),this.store[e][t]=r}},{key:"removeComponent",value:function(t,e){t in this.store[e]&&delete this.store[e][t]}},{key:"hasComponent",value:function(t,e){return e in this.store&&t in this.store[e]}},{key:"get",value:function(t,e){return this.store[t]?e?this.store[t][e]:this.store[t]:null}}]),t}(),P=function(){function t(){c()(this,t)}return d()(t,null,[{key:"defaults",value:function(){return{}}},{key:"create",value:function(t){return u()({},this.defaults(),t||{})}}]),t}(),O=function(){function t(e){c()(this,t),this.options=u()({},this.defaultOptions(),e||{}),this.debug=this.options.debug||!1}return d()(t,[{key:"defaultOptions",value:function(){return{}}},{key:"setWorld",value:function(t){this.world=t}},{key:"matchComponent",value:function(){return""}},{key:"initialize",value:function(){}},{key:"getMatchingComponents",value:function(){return this.world.get(this.matchComponent())}},{key:"updateStart",value:function(){}},{key:"update",value:function(t){k=this.getMatchingComponents();for(m in k)this.updateComponent(t,m,k[m])}},{key:"updateComponent",value:function(){}},{key:"updateEnd",value:function(){}},{key:"drawStart",value:function(){}},{key:"draw",value:function(){}},{key:"getDebugGraphics",value:function(){}},{key:"drawEnd",value:function(){}}]),t}(),R={},z={}},/*!**************************************************************!*\
  !*** ./node_modules/babel-runtime/helpers/classCallCheck.js ***!
  \**************************************************************/
/*! no static exports found */
/*! exports used: default */
function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},/*!***********************************************************!*\
  !*** ./node_modules/babel-runtime/helpers/createClass.js ***!
  \***********************************************************/
/*! no static exports found */
/*! exports used: default */
function(t,e,n){"use strict";e.__esModule=!0;var i=n(/*! ../core-js/object/define-property */84),o=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,o.default)(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}()},/*!***********************************************************************!*\
  !*** ./node_modules/babel-runtime/core-js/object/get-prototype-of.js ***!
  \***********************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){t.exports={default:n(/*! core-js/library/fn/object/get-prototype-of */87),__esModule:!0}},/*!*************************************************************************!*\
  !*** ./node_modules/babel-runtime/helpers/possibleConstructorReturn.js ***!
  \*************************************************************************/
/*! no static exports found */
/*! exports used: default */
function(t,e,n){"use strict";e.__esModule=!0;var i=n(/*! ../helpers/typeof */67),o=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":(0,o.default)(e))&&"function"!=typeof e?t:e}},/*!********************************************************!*\
  !*** ./node_modules/babel-runtime/helpers/inherits.js ***!
  \********************************************************/
/*! no static exports found */
/*! exports used: default */
function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var o=n(/*! ../core-js/object/set-prototype-of */110),r=i(o),s=n(/*! ../core-js/object/create */114),a=i(s),u=n(/*! ../helpers/typeof */67),l=i(u);e.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":(0,l.default)(e)));t.prototype=(0,a.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(r.default?(0,r.default)(t,e):t.__proto__=e)}},/*!*******************************************************!*\
  !*** ./node_modules/core-js/library/modules/_core.js ***!
  \*******************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e){var n=t.exports={version:"2.5.0"};"number"==typeof __e&&(__e=n)},/*!*********************************!*\
  !*** ./src/plugins/position.js ***!
  \*********************************/
/*! exports provided: Position, PositionSystem */
/*! all exports used */
function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"Position",function(){return y}),n.d(e,"PositionSystem",function(){return x});var i=n(/*! babel-runtime/helpers/get */25),o=n.n(i),r=n(/*! babel-runtime/core-js/object/get-prototype-of */3),s=n.n(r),a=n(/*! babel-runtime/helpers/classCallCheck */1),u=n.n(a),l=n(/*! babel-runtime/helpers/createClass */2),c=n.n(l),h=n(/*! babel-runtime/helpers/possibleConstructorReturn */4),d=n.n(h),f=n(/*! babel-runtime/helpers/inherits */5),p=n.n(f),m=n(/*! ../lib/core */0),v=n(/*! ../lib/QuadTree */120),y=function(t){function e(){return u()(this,e),d()(this,(e.__proto__||s()(e)).apply(this,arguments))}return p()(e,t),c()(e,null,[{key:"defaults",value:function(){return{x:0,y:0,rotation:0}}}]),e}(m.Component);Object(m.registerComponent)("Position",y);var g=void 0,_=void 0,b=void 0,w=void 0,x=function(t){function e(){return u()(this,e),d()(this,(e.__proto__||s()(e)).apply(this,arguments))}return p()(e,t),c()(e,[{key:"defaultOptions",value:function(){return{quadtreeMaxAge:2,quadtreeObjectsPerNode:5,quadtreeMaxLevels:5}}},{key:"matchComponent",value:function(){return"Position"}},{key:"initialize",value:function(){this.bounds={left:0,top:0,right:0,bottom:0,width:0,height:0},this.quadtree=new v.a(-1e3,-1e3,2e3,2e3,this.options.quadtreeObjectsPerNode,this.options.quadtreeMaxLevels)}},{key:"update",value:function(t){this.updateBounds(),this.resetQuadtree(t),o()(e.prototype.__proto__||s()(e.prototype),"update",this).call(this,t)}},{key:"resetQuadtree",value:function(){this.quadtree.reset(this.bounds.left,this.bounds.top,this.bounds.width,this.bounds.height,this.options.quadtreeObjectsPerNode,this.options.quadtreeMaxLevels)}},{key:"updateBounds",value:function(){this.bounds.left=this.bounds.top=this.bounds.right=this.bounds.bottom=null,w=this.getMatchingComponents();for(g in w)b=w[g],(null===this.bounds.left||b.left<this.bounds.left)&&(this.bounds.left=b.left),(null===this.bounds.top||b.top<this.bounds.top)&&(this.bounds.top=b.top),(null===this.bounds.right||b.right>this.bounds.right)&&(this.bounds.right=b.right),(null===this.bounds.bottom||b.bottom>this.bounds.bottom)&&(this.bounds.bottom=b.bottom);this.bounds.width=this.bounds.right-this.bounds.left,this.bounds.height=this.bounds.bottom-this.bounds.top}},{key:"updateComponent",value:function(t,e,n){if(_=this.world.get("Sprite",e)){var i=_.width/2,o=_.height/2;n.entityId=e,n.width=_.width,n.height=_.height,n.left=n.x-i,n.top=n.y-o,n.right=n.x+i,n.bottom=n.y+o,this.quadtree.insert(n)}}},{key:"draw",value:function(){var t=this.getDebugGraphics();if(t){t.lineStyle(4,8921634),w=this.getMatchingComponents();for(g in w)b=w[g],_=this.world.get("Sprite",g),t.drawCircle(b.x,b.y,_.width/2),t.moveTo(b.x-20,b.y),t.lineTo(b.x+20,b.y),t.moveTo(b.x,b.y-20),t.lineTo(b.x,b.y+20);t.lineStyle(4,2263074),this.drawDebugQuadtreeNode(t,this.quadtree),t.lineStyle(4,16777011),t.moveTo(-20,0),t.lineTo(20,0),t.moveTo(0,-20),t.lineTo(0,20),t.moveTo(0,0),t.drawRect(this.bounds.left,this.bounds.top,this.bounds.width,this.bounds.height)}}},{key:"drawDebugQuadtreeNode",value:function(t,e){e&&(t.lineStyle(4,8926088),t.drawRect(e.bounds.left,e.bounds.top,e.bounds.width,e.bounds.height),t.lineStyle(4,1122850),e.objects.forEach(function(e){return t.drawRect(e.left,e.top,e.width,e.height)}),this.drawDebugQuadtreeNode(t,e.nodes[0]),this.drawDebugQuadtreeNode(t,e.nodes[1]),this.drawDebugQuadtreeNode(t,e.nodes[2]),this.drawDebugQuadtreeNode(t,e.nodes[3]))}}]),e}(m.System);Object(m.registerSystem)("Position",x)},/*!*******************************!*\
  !*** ./src/plugins/motion.js ***!
  \*******************************/
/*! exports provided: Motion, MotionSystem */
/*! all exports used */
function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"Motion",function(){return m}),n.d(e,"MotionSystem",function(){return v});var i=n(/*! babel-runtime/core-js/object/get-prototype-of */3),o=n.n(i),r=n(/*! babel-runtime/helpers/classCallCheck */1),s=n.n(r),a=n(/*! babel-runtime/helpers/createClass */2),u=n.n(a),l=n(/*! babel-runtime/helpers/possibleConstructorReturn */4),c=n.n(l),h=n(/*! babel-runtime/helpers/inherits */5),d=n.n(h),f=n(/*! ../lib/core */0),p=(n(/*! ./position */7),2*Math.PI),m=function(t){function e(){return s()(this,e),c()(this,(e.__proto__||o()(e)).apply(this,arguments))}return d()(e,t),u()(e,null,[{key:"defaults",value:function(){return{dx:0,dy:0,drotation:0}}}]),e}(f.Component);f.registerComponent("Motion",m);var v=function(t){function e(){return s()(this,e),c()(this,(e.__proto__||o()(e)).apply(this,arguments))}return d()(e,t),u()(e,[{key:"matchComponent",value:function(){return"Motion"}},{key:"updateComponent",value:function(t,e,n){var i=this.world.get("Position",e);i.x+=n.dx*t,i.y+=n.dy*t,i.rotation=(i.rotation+n.drotation*t)%p,i.rotation<0&&(i.rotation+=p)}}]),e}(f.System);f.registerSystem("Motion",v)},/*!******************************************************!*\
  !*** ./node_modules/core-js/library/modules/_wks.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){var i=n(/*! ./_shared */48)("wks"),o=n(/*! ./_uid */41),r=n(/*! ./_global */12).Symbol,s="function"==typeof r;(t.exports=function(t){return i[t]||(i[t]=s&&r[t]||(s?r:o)("Symbol."+t))}).store=i},/*!*********************************************************!*\
  !*** ./node_modules/core-js/library/modules/_export.js ***!
  \*********************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){var i=n(/*! ./_global */12),o=n(/*! ./_core */6),r=n(/*! ./_ctx */42),s=n(/*! ./_hide */22),a=function(t,e,n){var u,l,c,h=t&a.F,d=t&a.G,f=t&a.S,p=t&a.P,m=t&a.B,v=t&a.W,y=d?o:o[e]||(o[e]={}),g=y.prototype,_=d?i:f?i[e]:(i[e]||{}).prototype;d&&(n=e);for(u in n)(l=!h&&_&&void 0!==_[u])&&u in y||(c=l?_[u]:n[u],y[u]=d&&"function"!=typeof _[u]?n[u]:m&&l?r(c,i):v&&_[u]==c?function(t){var e=function(e,n,i){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,i)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(c):p&&"function"==typeof c?r(Function.call,c):c,p&&((y.virtual||(y.virtual={}))[u]=c,t&a.R&&g&&!g[u]&&s(g,u,c)))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,t.exports=a},/*!*************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_to-iobject.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){var i=n(/*! ./_iobject */64),o=n(/*! ./_defined */45);t.exports=function(t){return i(o(t))}},/*!*********************************************************!*\
  !*** ./node_modules/core-js/library/modules/_global.js ***!
  \*********************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},/*!************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_object-dp.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){var i=n(/*! ./_an-object */23),o=n(/*! ./_ie8-dom-define */61),r=n(/*! ./_to-primitive */43),s=Object.defineProperty;e.f=n(/*! ./_descriptors */14)?Object.defineProperty:function(t,e,n){if(i(t),e=r(e,!0),i(n),o)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},/*!**************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_descriptors.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){t.exports=!n(/*! ./_fails */24)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},/*!**************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_object-keys.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){var i=n(/*! ./_object-keys-internal */63),o=n(/*! ./_enum-bug-keys */49);t.exports=Object.keys||function(t){return i(t,o)}},/*!******************************************************!*\
  !*** ./node_modules/core-js/library/modules/_has.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},/*!*****************************!*\
  !*** ./src/lib/Vector2D.js ***!
  \*****************************/
/*! exports provided: default */
/*! exports used: default */
function(t,e,n){"use strict";function i(t,e){this.x=t||0,this.y=e||0}e.a=i,i.cloneFrom=function(t){return new i(t.x,t.y)},i.fromArray=function(t){return new i(t[0],t[1])},i.zero=new i(0,0),i.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},i.prototype.addScalar=function(t){return this.x+=t,this.y+=t,this},i.prototype.eq=function(t){return t.x===this.x&&t.y===this.y},i.prototype.subtract=function(t){return this.x-=t.x,this.y-=t.y,this},i.prototype.clone=function(){return new i(this.x,this.y)},i.prototype.set=function(t){return this.x=t.x,this.y=t.y,this},i.prototype.setValues=function(t,e){return this.x=t,this.y=e,this},i.prototype.dist=function(t){return Math.sqrt((t.x-this.x)*(t.x-this.x)+(t.y-this.y)*(t.y-this.y))},i.prototype.normalise=function(){return this.normalize()},i.prototype.normalize=function(){if(!this.isZero()){var t=this.magnitude();this.x/=t,this.y/=t}return this},i.prototype.isZero=function(){return 0===this.x&&0===this.y},i.prototype.reverse=function(){return this.x=-this.x,this.y=-this.y,this},i.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},i.prototype.toArray=function(){return[this.x,this.y]},i.prototype.angle=function(){return Math.atan2(this.y,this.x)},i.prototype.rotate=function(t){var e=Math.cos(t),n=Math.sin(t);return this.setValues(this.x*e-this.y*n,this.x*n+this.y*e)},i.prototype.angleTo=function(t){return Math.atan2(t.y-this.y,t.x-this.x)},i.prototype.rotateAround=function(t,e){return this.subtract(t).rotate(e).add(t)},i.prototype.multiplyScalar=function(t){return this.x*=t,this.y*=t,this},i.prototype.multiply=function(t){return this.x*=t.x,this.y*=t.y,this},i.prototype.divide=function(t){return this.x/=t.x,this.y/=t.y,this},i.prototype.divideScalar=function(t){return this.x/=t,this.y/=t,this},i.prototype.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},i.prototype.dot=function(t){return this.x*t.x+this.y*t.y}},/*!*******************************!*\
  !*** ./src/plugins/datGui.js ***!
  \*******************************/
/*! exports provided: DatGui */
/*! all exports used */
function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"DatGui",function(){return v});var i=n(/*! babel-runtime/core-js/object/get-prototype-of */3),o=n.n(i),r=n(/*! babel-runtime/helpers/classCallCheck */1),s=n.n(r),a=n(/*! babel-runtime/helpers/createClass */2),u=n.n(a),l=n(/*! babel-runtime/helpers/possibleConstructorReturn */4),c=n.n(l),h=n(/*! babel-runtime/helpers/inherits */5),d=n.n(h),f=n(/*! ../lib/core */0),p=n(/*! dat-gui */121),m=n.n(p),v=function(t){function e(){return s()(this,e),c()(this,(e.__proto__||o()(e)).apply(this,arguments))}return d()(e,t),u()(e,[{key:"initialize",value:function(){this.gui=new m.a.GUI}}]),e}(f.System);f.registerSystem("DatGui",v)},/*!**********************************!*\
  !*** ./src/plugins/drawStats.js ***!
  \**********************************/
/*! exports provided: DrawStats */
/*! all exports used */
function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"DrawStats",function(){return v});var i=n(/*! babel-runtime/core-js/object/get-prototype-of */3),o=n.n(i),r=n(/*! babel-runtime/helpers/classCallCheck */1),s=n.n(r),a=n(/*! babel-runtime/helpers/createClass */2),u=n.n(a),l=n(/*! babel-runtime/helpers/possibleConstructorReturn */4),c=n.n(l),h=n(/*! babel-runtime/helpers/inherits */5),d=n.n(h),f=n(/*! ../lib/core */0),p=n(/*! stats-js */124),m=n.n(p),v=function(t){function e(){return s()(this,e),c()(this,(e.__proto__||o()(e)).apply(this,arguments))}return d()(e,t),u()(e,[{key:"initialize",value:function(){this.drawStats=new m.a,this.drawStats.setMode(0),this.drawStats.domElement.style.position="absolute",this.drawStats.domElement.style.left="0px",this.drawStats.domElement.style.top="0px",document.body.appendChild(this.drawStats.domElement),this.tickStats=new m.a,this.tickStats.setMode(0),this.tickStats.domElement.style.position="absolute",this.tickStats.domElement.style.left="0px",this.tickStats.domElement.style.top="55px",document.body.appendChild(this.tickStats.domElement)}},{key:"updateStart",value:function(){this.tickStats.begin()}},{key:"updateEnd",value:function(){this.tickStats.end()}},{key:"drawStart",value:function(){this.drawStats.begin()}},{key:"drawEnd",value:function(){this.drawStats.end()}}]),e}(f.System);f.registerSystem("DrawStats",v)},/*!************************************!*\
  !*** ./src/plugins/memoryStats.js ***!
  \************************************/
/*! exports provided: MemoryStatsSystem */
/*! all exports used */
function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"MemoryStatsSystem",function(){return v});var i=n(/*! babel-runtime/core-js/object/get-prototype-of */3),o=n.n(i),r=n(/*! babel-runtime/helpers/classCallCheck */1),s=n.n(r),a=n(/*! babel-runtime/helpers/createClass */2),u=n.n(a),l=n(/*! babel-runtime/helpers/possibleConstructorReturn */4),c=n.n(l),h=n(/*! babel-runtime/helpers/inherits */5),d=n.n(h),f=n(/*! ../lib/core */0),p=n(/*! memory-stats */127),m=n.n(p),v=function(t){function e(){return s()(this,e),c()(this,(e.__proto__||o()(e)).apply(this,arguments))}return d()(e,t),u()(e,[{key:"initialize",value:function(){this.stats=new m.a,this.stats.domElement.style.position="fixed",this.stats.domElement.style.left="85px",this.stats.domElement.style.top="0px",document.body.appendChild(this.stats.domElement)}},{key:"draw",value:function(){this.stats.update()}}]),e}(f.System);f.registerSystem("MemoryStats",v)},/*!*****************************!*\
  !*** ./src/plugins/name.js ***!
  \*****************************/
/*! exports provided: Name */
/*! all exports used */
function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"Name",function(){return p});var i=n(/*! babel-runtime/core-js/object/get-prototype-of */3),o=n.n(i),r=n(/*! babel-runtime/helpers/classCallCheck */1),s=n.n(r),a=n(/*! babel-runtime/helpers/createClass */2),u=n.n(a),l=n(/*! babel-runtime/helpers/possibleConstructorReturn */4),c=n.n(l),h=n(/*! babel-runtime/helpers/inherits */5),d=n.n(h),f=n(/*! ../lib/core */0),p=function(t){function e(){return s()(this,e),c()(this,(e.__proto__||o()(e)).apply(this,arguments))}return d()(e,t),u()(e,null,[{key:"defaults",value:function(){return{name:"unnamed"}}},{key:"findEntityByName",value:function(t,e){var n=t.get("Name");for(var i in n){if(n[i].name===e)return i}}}]),e}(f.Component);f.registerComponent("Name",p)},/*!*******************************************************!*\
  !*** ./node_modules/core-js/library/modules/_hide.js ***!
  \*******************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){var i=n(/*! ./_object-dp */13),o=n(/*! ./_property-desc */32);t.exports=n(/*! ./_descriptors */14)?function(t,e,n){return i.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},/*!************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_an-object.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){var i=n(/*! ./_is-object */31);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},/*!********************************************************!*\
  !*** ./node_modules/core-js/library/modules/_fails.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},/*!***************************************************!*\
  !*** ./node_modules/babel-runtime/helpers/get.js ***!
  \***************************************************/
/*! no static exports found */
/*! exports used: default */
function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var o=n(/*! ../core-js/object/get-prototype-of */3),r=i(o),s=n(/*! ../core-js/object/get-own-property-descriptor */117),a=i(s);e.default=function t(e,n,i){null===e&&(e=Function.prototype);var o=(0,a.default)(e,n);if(void 0===o){var s=(0,r.default)(e);return null===s?void 0:t(s,n,i)}if("value"in o)return o.value;var u=o.get;if(void 0!==u)return u.call(i)}},/*!*******************************!*\
  !*** ./src/plugins/health.js ***!
  \*******************************/
/*! exports provided: MSG_DAMAGE, MSG_HEAL, Health, HealthSystem */
/*! all exports used */
function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"MSG_DAMAGE",function(){return y}),n.d(e,"MSG_HEAL",function(){return g}),n.d(e,"Health",function(){return b}),n.d(e,"HealthSystem",function(){return w});var i=n(/*! babel-runtime/core-js/object/get-prototype-of */3),o=n.n(i),r=n(/*! babel-runtime/helpers/classCallCheck */1),s=n.n(r),a=n(/*! babel-runtime/helpers/createClass */2),u=n.n(a),l=n(/*! babel-runtime/helpers/possibleConstructorReturn */4),c=n.n(l),h=n(/*! babel-runtime/helpers/get */25),d=n.n(h),f=n(/*! babel-runtime/helpers/inherits */5),p=n.n(f),m=n(/*! ../lib/core */0),v=n(/*! ./spawn */27),y="healthDamage",g="healthHeal",_=void 0,b=function(t){function e(){return s()(this,e),c()(this,(e.__proto__||o()(e)).apply(this,arguments))}return p()(e,t),u()(e,null,[{key:"defaults",value:function(){return{max:1e3,current:null,show_bar:!0}}},{key:"create",value:function(t){var n=d()(e.__proto__||o()(e),"create",this).call(this,t);return n.current=n.max,n}}]),e}(m.Component);Object(m.registerComponent)("Health",b);var w=function(t){function e(){return s()(this,e),c()(this,(e.__proto__||o()(e)).apply(this,arguments))}return p()(e,t),u()(e,[{key:"initialize",value:function(){var t=this;this.world.subscribe(y,function(e,n){(_=t.world.get("Health",n.to))&&(_.current-=n.amount)}).subscribe(g,function(e,n){(_=t.world.get("Health",n.to))&&(_.current+=n.amount)})}},{key:"matchComponent",value:function(){return"Health"}},{key:"updateComponent",value:function(t,e,n){null===n.current&&(n.current=n.max),n.current<0&&this.world.publish(v.MSG_DESTROY,e)}}]),e}(m.System);Object(m.registerSystem)("Health",w)},/*!******************************!*\
  !*** ./src/plugins/spawn.js ***!
  \******************************/
/*! exports provided: MSG_SPAWN, MSG_DESTROY, MSG_DESPAWN, MSG_CAPTURE_CAMERA, Spawn, SpawnSystem */
/*! all exports used */
function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"MSG_SPAWN",function(){return p}),n.d(e,"MSG_DESTROY",function(){return m}),n.d(e,"MSG_DESPAWN",function(){return v}),n.d(e,"MSG_CAPTURE_CAMERA",function(){return y}),n.d(e,"Spawn",function(){return _}),n.d(e,"SpawnSystem",function(){return b});var i=n(/*! babel-runtime/core-js/object/get-prototype-of */3),o=n.n(i),r=n(/*! babel-runtime/helpers/classCallCheck */1),s=n.n(r),a=n(/*! babel-runtime/helpers/createClass */2),u=n.n(a),l=n(/*! babel-runtime/helpers/possibleConstructorReturn */4),c=n.n(l),h=n(/*! babel-runtime/helpers/inherits */5),d=n.n(h),f=n(/*! ../lib/core */0),p="spawnSpawn",m="spawnDestroy",v="spawnDespawn",y="spawnCaptureCamera",g=void 0,_=function(t){function e(){return s()(this,e),c()(this,(e.__proto__||o()(e)).apply(this,arguments))}return d()(e,t),u()(e,null,[{key:"defaults",value:function(){return{ttl:null,age:0,destroy:!1,tombstone:null}}}]),e}(f.Component);Object(f.registerComponent)("Spawn",_);var b=function(t){function e(){return s()(this,e),c()(this,(e.__proto__||o()(e)).apply(this,arguments))}return d()(e,t),u()(e,[{key:"defaultOptions",value:function(){return{}}},{key:"initialize",value:function(){var t=this;this.world.subscribe(m,function(e,n){(g=t.world.get("Spawn",n))&&(g.destroy=!0)})}},{key:"matchComponent",value:function(){return"Spawn"}},{key:"updateComponent",value:function(t,e,n){n.spawned||(n.spawned=!0,this.world.publish(p,e),n.captureCamera&&this.world.publish(y,e)),null!==n.ttl&&(n.age+=t,n.age>=n.ttl&&(n.destroy=!0)),n.destroy&&(null!==n.tombstone&&this.world.insert("function"==typeof n.tombstone?n.tombstone(n,e):n.tombstone),this.world.publish(v,e),this.world.destroy(e))}}]),e}(f.System);Object(f.registerSystem)("Spawn",b)},/*!*******************************!*\
  !*** ./src/plugins/seeker.js ***!
  \*******************************/
/*! exports provided: Seeker, SeekerSystem */
/*! all exports used */
function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"Seeker",function(){return m}),n.d(e,"SeekerSystem",function(){return v});var i=n(/*! babel-runtime/core-js/object/get-prototype-of */3),o=n.n(i),r=n(/*! babel-runtime/helpers/classCallCheck */1),s=n.n(r),a=n(/*! babel-runtime/helpers/createClass */2),u=n.n(a),l=n(/*! babel-runtime/helpers/possibleConstructorReturn */4),c=n.n(l),h=n(/*! babel-runtime/helpers/inherits */5),d=n.n(h),f=n(/*! ../lib/core */0),p=(n(/*! ../plugins/position */7),n(/*! ../plugins/motion */8),n(/*! ../lib/Vector2D */17)),m=function(t){function e(){return s()(this,e),c()(this,(e.__proto__||o()(e)).apply(this,arguments))}return d()(e,t),u()(e,null,[{key:"defaults",value:function(){return{active:!0,targetName:null,targetEntityId:null,targetPosition:null,acquisitionDelay:0,radPerSec:Math.PI}}}]),e}(f.Component);f.registerComponent("Seeker",m);var v=function(t){function e(){return s()(this,e),c()(this,(e.__proto__||o()(e)).apply(this,arguments))}return d()(e,t),u()(e,[{key:"matchComponent",value:function(){return"Seeker"}},{key:"initialize",value:function(){this.vSeeker=new p.a,this.vTarget=new p.a}},{key:"updateComponent",value:function(t,e,n){if(n.active){if(n.targetName&&!n.targetEntityId&&(n.targetEntityId=f.getComponent("Name").findEntityByName(this.world,n.targetName)),n.acquisitionDelay>0)return void(n.acquisitionDelay-=t);var i=this.world.get("Position",e),o=this.world.get("Motion",e);if(i&&o){var r=n.targetPosition;if(r||(r=this.world.get("Position",n.targetEntityId)),r){this.vSeeker.setValues(i.x,i.y),this.vTarget.setValues(r.x,r.y);var s=this.vSeeker.angleTo(this.vTarget);s<0&&(s+=2*Math.PI);var a=s<i.rotation?-1:1,u=Math.abs(s-i.rotation);u>Math.PI&&(a=0-a);var l=a*Math.min(n.radPerSec,u/t),c=l-o.drotation;Math.abs(c)>n.radPerSec&&(c>0?c=n.radPerSec:c<0&&(c=0-n.radPerSec)),o.drotation+=c}}}}}]),e}(f.System);f.registerSystem("Seeker",v)},/*!*********************************!*\
  !*** ./src/plugins/thruster.js ***!
  \*********************************/
/*! exports provided: Thruster, ThrusterSystem */
/*! all exports used */
function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"Thruster",function(){return m}),n.d(e,"ThrusterSystem",function(){return v});var i=n(/*! babel-runtime/core-js/object/get-prototype-of */3),o=n.n(i),r=n(/*! babel-runtime/helpers/classCallCheck */1),s=n.n(r),a=n(/*! babel-runtime/helpers/createClass */2),u=n.n(a),l=n(/*! babel-runtime/helpers/possibleConstructorReturn */4),c=n.n(l),h=n(/*! babel-runtime/helpers/inherits */5),d=n.n(h),f=n(/*! ../lib/core */0),p=(n(/*! ./position */7),n(/*! ./motion */8),n(/*! ../lib/Vector2D */17)),m=function(t){function e(){return s()(this,e),c()(this,(e.__proto__||o()(e)).apply(this,arguments))}return d()(e,t),u()(e,null,[{key:"defaults",value:function(){return{active:!0,stop:!1,useBrakes:!0,deltaV:0,maxV:0}}}]),e}(f.Component);f.registerComponent("Thruster",m);var v=function(t){function e(){return s()(this,e),c()(this,(e.__proto__||o()(e)).apply(this,arguments))}return d()(e,t),u()(e,[{key:"matchComponent",value:function(){return"Thruster"}},{key:"initialize",value:function(){this.vInertia=new p.a,this.vThrust=new p.a,this.vBrakes=new p.a}},{key:"updateComponent",value:function(t,e,n){if(n.active){var i=this.world.get("Position",e),o=this.world.get("Motion",e);if(i&&o){this.vInertia.setValues(o.dx,o.dy);var r=t*n.deltaV;if(n.stop||(this.vThrust.setValues(r,0),this.vThrust.rotate(i.rotation),this.vInertia.add(this.vThrust)),n.useBrakes){var s=n.stop?0:n.maxV,a=this.vInertia.magnitude(),u=a-s;if(u>0){var l=Math.min(r,u);this.vBrakes.setValues(this.vInertia.x,this.vInertia.y),this.vBrakes.normalize(),this.vBrakes.multiplyScalar(0-l),this.vInertia.add(this.vBrakes)}n.stop&&0===a&&(n.active=!1)}o.dx=this.vInertia.x,o.dy=this.vInertia.y}}}}]),e}(f.System);f.registerSystem("Thruster",v)},/*!**************************************!*\
  !*** ./src/plugins/viewportWebGL.js ***!
  \**************************************/
/*! exports provided: ViewportWebGL, WebGLSprite, registerSprite, getSprite */
/*! all exports used */
function(t,e,n){"use strict";function i(t,e){j[t]=e}function o(t){return t in j?j[t]:j.default}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"ViewportWebGL",function(){return I}),n.d(e,"WebGLSprite",function(){return D}),e.registerSprite=i,e.getSprite=o;var r=n(/*! babel-runtime/helpers/get */25),s=n.n(r),a=n(/*! babel-runtime/helpers/toConsumableArray */130),u=n.n(a),l=n(/*! babel-runtime/core-js/object/keys */38),c=n.n(l),h=n(/*! babel-runtime/core-js/object/values */140),d=n.n(h),f=n(/*! babel-runtime/core-js/object/assign */40),p=n.n(f),m=n(/*! babel-runtime/core-js/object/get-prototype-of */3),v=n.n(m),y=n(/*! babel-runtime/helpers/classCallCheck */1),g=n.n(y),_=n(/*! babel-runtime/helpers/createClass */2),b=n.n(_),w=n(/*! babel-runtime/helpers/possibleConstructorReturn */4),x=n.n(w),S=n(/*! babel-runtime/helpers/inherits */5),k=n.n(S),C=n(/*! ../lib/core */0),E=2*Math.PI,M={5126:1,35664:2,35665:3,35666:4},T=void 0,A=void 0,P=void 0,O=void 0,R=void 0,z=function(t){t||(t=event);var e=t.wheelDelta,n=t.detail;return n?e?e/n/40*n>0?1:-1:-n/3:e/120},I=function(t){function e(){return g()(this,e),x()(this,(e.__proto__||v()(e)).apply(this,arguments))}return k()(e,t),b()(e,[{key:"defaultOptions",value:function(){return{lineWidth:2,zoom:1,zoomMin:.1,zoomMax:10,zoomWheelFactor:.05,gridEnabled:!0,gridSize:250,gridColor:2236962,followEnabled:!0,followName:null,followEntityId:null}}},{key:"initialize",value:function(){var t=this;this.container=document.querySelector(this.options.container),this.canvas=document.createElement("canvas"),this.container.appendChild(this.canvas),this.initWebGL(this.canvas),this.scene={};var e={resize:function(e){t.updateMetrics(e)},orientationchange:function(e){t.updateMetrics(e)},mousedown:function(e){t.onMouseDown(e)},mousemove:function(e){t.onMouseMove(e)},mouseup:function(e){t.onMouseUp(e)}};for(var n in e)this.canvas.addEventListener(n,e[n],!1);var i=function(e){return t.onMouseWheel(e)};window.addEventListener?(window.addEventListener("mousewheel",i,!1),window.addEventListener("DOMMouseScroll",i,!1)):window.attachEvent&&window.attachEvent("onmousewheel",i),this.followEnabled=this.options.followEnabled,this.zoom=this.options.zoom,this.followEntityId=this.options.followEntityId,this.gridEnabled=this.options.gridEnabled,this.lineWidth=this.options.lineWidth,this.cursorRawX=0,this.cursorRawY=0,this.cursorChanged=!1,this.cursorPosition={x:0,y:0},this.cameraX=0,this.cameraY=0,this.debugDummySprite={size:100},this.updateMetrics()}},{key:"onMouseWheel",value:function(t){this.zoom+=z(t)*this.options.zoomWheelFactor,this.zoom<this.options.zoomMin&&(this.zoom=this.options.zoomMin),this.zoom>this.options.zoomMax&&(this.zoom=this.options.zoomMax)}},{key:"onMouseDown",value:function(t){this.setCursor(t.clientX,t.clientY),this.world.publish("mouseDown",this.cursorPosition)}},{key:"onMouseMove",value:function(t){this.setCursor(t.clientX,t.clientY),this.world.publish("mouseMove",this.cursorPosition)}},{key:"onMouseUp",value:function(t){this.setCursor(t.clientX,t.clientY,!0),this.world.publish("mouseUp",this.cursorPosition)}},{key:"setCursor",value:function(t,e){var n=this.container.offsetWidth,i=this.container.offsetHeight;this.cursorRawX=t,this.cursorRawY=e;var o=(t-n/2)/this.zoom+this.cameraX,r=(e-i/2)/this.zoom+this.cameraY;return this.cursorChanged=!1,o===this.cursorPosition.x&&r===this.cursorPosition.y||(this.cursorChanged=!0,this.cursorPosition.x=o,this.cursorPosition.y=r),this.cursorPosition}},{key:"updateMetrics",value:function(){var t=this.container.offsetWidth,e=this.container.offsetHeight;this.visibleWidth=t/this.zoom,this.visibleHeight=e/this.zoom,this.visibleLeft=0-this.visibleWidth/2+this.cameraX,this.visibleTop=0-this.visibleHeight/2+this.cameraY,this.visibleRight=this.visibleLeft+this.visibleWidth,this.visibleBottom=this.visibleTop+this.visibleHeight}},{key:"update",value:function(t){this.updateMetrics(),this.setCursor(this.cursorRawX,this.cursorRawY),this.world.publish("mouseMove",this.cursorPosition),P=this.world.get("Sprite")||{};for(T in this.scene)T in P||delete this.scene[T];for(T in P)O=P[T],A=this.world.get("Position",T),T in this.scene||(this.scene[T]={position:[0,0],shape:o(O.name)(O,T,t)}),R=this.scene[T],O.visible=A.right>this.visibleLeft&&A.left<this.visibleRight&&A.bottom>this.visibleTop&&A.top<this.visibleBottom,R.visible=O.visible,R.position[0]=A.x,R.position[1]=A.y,R.rotation=A.rotation,R.scale=O.size,R.color=[O.color/256/256%256/256,O.color/256%256/256,O.color%256/256,1]}},{key:"draw",value:function(){this.followEntity(),this.canvas.width=this.container.offsetWidth,this.canvas.height=this.container.offsetHeight,this.setUniforms({uLineWidth:[.001*this.lineWidth],uCameraZoom:[this.zoom],uCameraOrigin:[this.cameraX,this.cameraY],uViewportSize:[this.canvas.clientWidth,this.canvas.clientHeight]});var t=this.calculateBufferSizeForScene();t>this.buffer.length&&(this.buffer=new Float32Array(Math.max(1.5*t,2*this.buffer.length)));var e=this.fillBufferFromScene();this.gl.bufferData(this.gl.ARRAY_BUFFER,this.buffer,this.gl.STATIC_DRAW),this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height),this.gl.clearColor(0,0,0,.5),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,e)}},{key:"followEntity",value:function(){if(!this.followEnabled)return void(this.cameraX=this.cameraY=0);if(this.options.followName&&!this.followEntityId&&(this.followEntityId=C.getComponent("Name").findEntityByName(this.world,this.options.followName)),this.followEntityId){var t=this.world.get("Position",this.followEntityId);t&&(this.cameraX=t.x,this.cameraY=t.y,this.setCursor(this.cursorRawX,this.cursorRawY))}}},{key:"initWebGL",value:function(t){var e=this.gl=t.getContext("webgl",{antialias:!0,preserveDrawingBuffer:!0,premultipliedAlpha:!0}),n=this.createProgram(this.createShader(e.VERTEX_SHADER,N),this.createShader(e.FRAGMENT_SHADER,L));e.useProgram(n),e.bindBuffer(e.ARRAY_BUFFER,e.createBuffer());for(var i=e.getProgramParameter(n,e.ACTIVE_ATTRIBUTES),o={},r=0,s=0;s<i;s++){var a=e.getActiveAttrib(n,s);r+=M[a.type],o[a.name]=s}for(var u=0,l=0;l<i;l++){var c=e.getActiveAttrib(n,l),h=M[c.type];e.vertexAttribPointer(l,h,e.FLOAT,!1,4*r,4*u),e.enableVertexAttribArray(l),u+=h}for(var d={},f=e.getProgramParameter(n,e.ACTIVE_UNIFORMS),m=0;m<f;m++){var v=e.getActiveUniform(n,m);d[v.name]=e.getUniformLocation(n,v.name)}var y=new Float32Array(2e5);p()(this,{gl:e,uniforms:d,attribs:o,vertexSize:r,buffer:y})}},{key:"createShader",value:function(t,e){var n=this.gl.createShader(t);if(this.gl.shaderSource(n,e),this.gl.compileShader(n),this.gl.getShaderParameter(n,this.gl.COMPILE_STATUS))return n;this.gl.deleteShader(n)}},{key:"createProgram",value:function(t,e){var n=this.gl.createProgram();if(this.gl.attachShader(n,t),this.gl.attachShader(n,e),this.gl.linkProgram(n),this.gl.getProgramParameter(n,this.gl.LINK_STATUS))return n;this.gl.deleteProgram(n)}},{key:"calculateBufferSizeForScene",value:function(){var t=this;return d()(this.scene).reduce(function(e,n){return e+(n.shape.length-.5)*t.vertexSize*4},0)}},{key:"fillBufferFromScene",value:function(){var t=this,e=0,n=0,i=void 0,o=void 0,r=void 0,s=void 0,a=void 0,u=void 0,l=void 0,h=void 0,d=void 0,f=c()(this.scene);f.sort();for(var p=f.map(function(e){return t.scene[e]}),m=function(i,c){e++,t.buffer[n++]=c,t.buffer[n++]=o[i-1][0],t.buffer[n++]=o[i-1][1],t.buffer[n++]=o[i][0],t.buffer[n++]=o[i][1],t.buffer[n++]=r[0],t.buffer[n++]=r[1],t.buffer[n++]=s,t.buffer[n++]=a,t.buffer[n++]=u[0],t.buffer[n++]=u[1],t.buffer[n++]=l,t.buffer[n++]=h,t.buffer[n++]=d[0],t.buffer[n++]=d[1],t.buffer[n++]=d[2],t.buffer[n++]=d[3]},v=0;v<p.length;v++){var y=p[v];i=y.visible,o=y.shape;var g=y.position;r=void 0===g?[0,0]:g;var _=y.scale;s=void 0===_?0:_;var b=y.rotation;a=void 0===b?0:b;var w=y.deltaPosition;u=void 0===w?[0,0]:w;var x=y.deltaScale;l=void 0===x?0:x;var S=y.deltaRotation;h=void 0===S?0:S;var k=y.color;if(d=void 0===k?[1,1,1,1]:k,i){m(1,0);for(var C=1;C<o.length;C+=1)m(C,0),m(C,1),m(C,2),m(C,3);m(o.length-1,3)}}return e}},{key:"setUniforms",value:function(t){var e=this;c()(t).forEach(function(n){var i;return(i=e.gl["uniform"+t[n].length+"f"]).call.apply(i,[e.gl,e.uniforms[n]].concat(u()(t[n])))})}}]),e}(C.System);C.registerSystem("ViewportWebGL",I);var N="\n// see also: http://m1el.github.io/woscope-how/\nprecision mediump float;\n#define EPS 1E-6\n#define PI 3.141592653589793\n#define PI_2 6.283185307179586\n#define PI_H 1.5707963267948966\n#define PI_Q 0.7853981633974483\n\nuniform float uTime;\nuniform float uLineWidth;\nuniform float uCameraZoom;\nuniform float uCameraRotation;\nuniform vec2 uCameraOrigin;\nuniform vec2 uViewportSize;\n\nattribute float aIdx;\nattribute vec4 aLine;\nattribute vec4 aTransform;\nattribute vec4 aDeltaTransform;\nattribute vec4 aColor;\n\nvarying vec4 uvl;\nvarying vec4 vColor;\nvarying float vLen;\n\nvoid main () {\n  float c, s;\n\n  mat3 mViewportToClipSpace = mat3(\n    2.0 / uViewportSize.x, 0, 0,\n    0, -2.0 / uViewportSize.y, 0,\n    0, 0, 0\n  );\n\n  c = cos(uCameraRotation);\n  s = sin(uCameraRotation);\n  mat3 mCameraRotation = mat3(\n    c, -s, 0.0,\n    s, c, 0.0,\n    0.0, 0.0, 1.0\n  );\n\n  mat3 mCameraOrigin = mat3(\n    1.0, 0.0, 0.0,\n    0.0, 1.0, 0.0,\n    -uCameraOrigin.x, -uCameraOrigin.y, 1.0\n  );\n\n  mat3 mCameraZoom = mat3(\n    uCameraZoom, 0.0, 0.0,\n    0.0, uCameraZoom, 0.0,\n    0.0, 0.0, 1.0\n  );\n\n  c = cos(-aTransform.w + PI_H + (aDeltaTransform.w * uTime));\n  s = sin(-aTransform.w + PI_H + (aDeltaTransform.w * uTime));\n  mat3 mRotation = mat3(\n    c, -s, 0.0,\n    s, c, 0.0,\n    0.0, 0.0, 1.0\n  );\n\n  mat3 mPosition = mat3(\n    1.0, 0.0, 0.0,\n    0.0, 1.0, 0.0,\n    aTransform.x + (aDeltaTransform.x * uTime), aTransform.y + (aDeltaTransform.y * uTime), 1.0\n  );\n\n  mat3 mScale = mat3(\n    aTransform.z + (aDeltaTransform.z * uTime), 0.0, 0.0,\n    0.0, aTransform.z + (aDeltaTransform.z * uTime), 0.0,\n    0.0, 0.0, 1.0\n  );\n\n  // TODO: Move some of these matrices into JS?\n  mat3 mAll = mViewportToClipSpace\n    * mCameraZoom * mCameraRotation * mCameraOrigin\n    * mPosition * mScale * mRotation;\n\n  vec2 tStart = (mAll * vec3(aLine.xy, 1)).xy;\n  vec2 tEnd = (mAll * vec3(aLine.zw, 1)).xy;\n\n  float tang;\n  vec2 current;\n  float idx = aIdx;\n  if (idx >= 2.0) {\n    current = tEnd;\n    tang = 1.0;\n  } else {\n    current = tStart;\n    tang = -1.0;\n  }\n\n  float side = (mod(idx, 2.0)-0.5)*2.0;\n  vec2 dir = tEnd-tStart;\n\n  vColor = aColor;\n\n  uvl.xy = vec2(tang, side);\n  uvl.w = floor(aIdx / 4.0 + 0.5);\n  uvl.z = length(dir);\n  if (uvl.z > EPS) {\n    dir = dir / uvl.z;\n  } else {\n    // If the segment is too short draw a square;\n    dir = vec2(1.0, 0.0);\n  }\n  vec2 norm = vec2(-dir.y, dir.x);\n  gl_Position = vec4((current+(tang*dir+norm*side)*uLineWidth),0.0,1.0);\n}\n",L="\nprecision mediump float;\nvarying vec4 vColor;\n\nvoid main (void)\n{\n    gl_FragColor = vColor;\n}\n",D=function(t){function e(){return g()(this,e),x()(this,(e.__proto__||v()(e)).apply(this,arguments))}return k()(e,t),b()(e,null,[{key:"defaults",value:function(){return{name:null,color:16777215,size:100,width:null,height:null,drawn:!1,visible:!1}}},{key:"create",value:function(t){var n=s()(e.__proto__||v()(e),"create",this).call(this,t);return n.width||(n.width=n.size),n.height||(n.height=n.size),n}}]),e}(C.Component);C.registerComponent("Sprite",D);for(var j={},B=[[-.5,0],[.5,0],[0,0],[0,-.5],[0,.5],[0,0]],F=0;F<8;F++){var H=F*(E/8);B.push([.5*Math.cos(H),.5*Math.sin(H)])}B.push([.5,0]),i("default",function(){return B});var V=[[0,.5],[.125,.4167],[.25,0],[.375,-.1667],[.25,-.5],[.125,-.5],[.0625,-.25],[-.0625,-.25],[-.125,-.5],[-.25,-.5],[-.375,-.1667],[-.25,0],[-.125,.4167],[0,.5]];i("hero",function(){return V});var W=[[-.5,0],[-.375,-.5],[-.25,-.5],[-.0625,.25],[.0625,.25],[.25,-.5],[.375,-.5],[.5,0],[.375,.5],[.25,.5],[.0625,-.25],[-.0625,-.25],[-.25,.5],[-.375,.5],[-.5,0]];i("repulsor",function(){return W}),i("asteroid",function(t){var e=void 0;if(!t.points){var n=7+Math.floor(8*Math.random()),i=E/n;for(t.points=[],e=0;e<n;e++){var o=e*i,r=Math.random()*(.5-.35)+.35;t.points.push([r*Math.cos(o),r*Math.sin(o)])}t.points.push(t.points[0])}return t.points}),i("mine",function(t){if(!t.drawn){var e=10+Math.floor(10*Math.random());e%2!=0&&e++;var n=E/e,i=!1;t.legs=[];for(var o=0;o<e;o++){var r=i?.1:.5*Math.random()+.1,s=o*n;t.legs.push([r*Math.cos(s),r*Math.sin(s)]),i=!i}t.legs.push([t.legs[0][0],t.legs[0][1]]),t.shape=t.legs,t.drawn=!0}return t.shape})},/*!************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_is-object.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},/*!****************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_property-desc.js ***!
  \****************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},/*!*************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_object-pie.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e){e.f={}.propertyIsEnumerable},/*!************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_to-object.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){var i=n(/*! ./_defined */45);t.exports=function(t){return Object(i(t))}},/*!*******************************!*\
  !*** ./src/plugins/bounce.js ***!
  \*******************************/
/*! exports provided: BounceComponent, BounceSystem */
/*! all exports used */
function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"BounceComponent",function(){return v}),n.d(e,"BounceSystem",function(){return y});var i=n(/*! babel-runtime/core-js/object/get-prototype-of */3),o=n.n(i),r=n(/*! babel-runtime/helpers/classCallCheck */1),s=n.n(r),a=n(/*! babel-runtime/helpers/createClass */2),u=n.n(a),l=n(/*! babel-runtime/helpers/possibleConstructorReturn */4),c=n.n(l),h=n(/*! babel-runtime/helpers/inherits */5),d=n.n(h),f=n(/*! ../lib/core */0),p=(n(/*! ./position */7),n(/*! ./motion */8),n(/*! ./health */26)),m=n(/*! ../lib/Vector2D */17),v=function(t){function e(){return s()(this,e),c()(this,(e.__proto__||o()(e)).apply(this,arguments))}return d()(e,t),u()(e,null,[{key:"defaults",value:function(){return{mass:1e3}}}]),e}(f.Component);f.registerComponent("Bounce",v);var y=function(t){function e(){return s()(this,e),c()(this,(e.__proto__||o()(e)).apply(this,arguments))}return d()(e,t),u()(e,[{key:"matchComponent",value:function(){return"Bounce"}},{key:"initialize",value:function(){this.dn=new m.a,this.dt=new m.a,this.mt=new m.a,this.v1=new m.a,this.v2=new m.a,this.v1n=new m.a,this.v1t=new m.a,this.v2n=new m.a,this.v2t=new m.a}},{key:"update",value:function(t){var e=this.world,n=this.getMatchingComponents(),i={};for(var o in n){var r=e.get("Collidable",o);for(var s in r.inCollisionWith){var a=[o,s];a.sort(),i[a.join(":")]=a}}for(var u in i){var l=i[u][0],c=e.get("Bounce",l);if(c){var h=i[u][1],d=e.get("Bounce",h);d&&this.resolveElasticCollision(t,l,c,h,d)}}}},{key:"resolveElasticCollision",value:function(t,e,n,i,o){var r=this.world,s=r.get("Position",e),a=r.get("Sprite",e),u=r.get("Motion",e),l=r.get("Position",i),c=r.get("Sprite",i),h=r.get("Motion",i);this.dn.setValues(s.x-l.x,s.y-l.y);var d=this.dn.magnitude();this.dn.normalize(),this.dt.setValues(this.dn.y,-this.dn.x),0===d&&(l.x+=.01);var f=n.mass,p=o.mass,m=f+p;if(this.mt.setValues(this.dn.x*(a.width+c.width-d)*1.1,this.dn.y*(a.height+c.height-d)*1.1),this.v1.setValues(u?u.dx:0,u?u.dy:0),this.v2.setValues(h?h.dx:0,h?h.dy:0),this.v1n.setValues(this.dn.x*this.v1.dot(this.dn),this.dn.y*this.v1.dot(this.dn)),this.v1t.setValues(this.dt.x*this.v1.dot(this.dt),this.dt.y*this.v1.dot(this.dt)),this.v2n.setValues(this.dn.x*this.v2.dot(this.dn),this.dn.y*this.v2.dot(this.dn)),this.v2t.setValues(this.dt.x*this.v2.dot(this.dt),this.dt.y*this.v2.dot(this.dt)),u){var v=(f-p)/m*this.v1n.magnitude()+2*p/m*this.v2n.magnitude();u.dx=this.v1t.x+this.dn.x*v,u.dy=this.v1t.y+this.dn.y*v,this.processDamage(e,i,u,n,f)}if(h){var y=(p-f)/m*this.v2n.magnitude()+2*f/m*this.v1n.magnitude();h.dx=this.v2t.x-this.dn.x*y,h.dy=this.v2t.y-this.dn.y*y,this.processDamage(i,e,h,o,f)}}},{key:"processDamage",value:function(t,e,n,i,o){if(i.damage){var r=Math.sqrt(n.dx*n.dx+n.dy*n.dy)*i.damage*o;this.world.publish(p.MSG_DAMAGE,{to:t,from:e,amount:r/2}),this.world.publish(p.MSG_DAMAGE,{to:e,from:t,amount:r/2})}}}]),e}(f.System);f.registerSystem("Bounce",y)},/*!************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_iterators.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e){t.exports={}},/*!**********************************!*\
  !*** ./src/plugins/collision.js ***!
  \**********************************/
/*! exports provided: Collidable, CollisionSystem */
/*! all exports used */
function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"Collidable",function(){return p}),n.d(e,"CollisionSystem",function(){return C});var i=n(/*! babel-runtime/core-js/object/get-prototype-of */3),o=n.n(i),r=n(/*! babel-runtime/helpers/classCallCheck */1),s=n.n(r),a=n(/*! babel-runtime/helpers/createClass */2),u=n.n(a),l=n(/*! babel-runtime/helpers/possibleConstructorReturn */4),c=n.n(l),h=n(/*! babel-runtime/helpers/inherits */5),d=n.n(h),f=n(/*! ../lib/core */0),p=function(t){function e(){return s()(this,e),c()(this,(e.__proto__||o()(e)).apply(this,arguments))}return d()(e,t),u()(e,null,[{key:"defaults",value:function(){return{inCollision:!1,inCollisionWith:{}}}}]),e}(f.Component);f.registerComponent("Collidable",p);var m=void 0,v=void 0,y=void 0,g=void 0,_=void 0,b=void 0,w=void 0,x=void 0,S=void 0,k=void 0,C=function(t){function e(){return s()(this,e),c()(this,(e.__proto__||o()(e)).apply(this,arguments))}return d()(e,t),u()(e,[{key:"defaultOptions",value:function(){return{positionSystemName:"Position"}}},{key:"matchComponent",value:function(){return"Collidable"}},{key:"initialize",value:function(){var t=this;this.positionSystem=this.world.getSystem(this.options.positionSystemName),this.width=this.options.width,this.height=this.options.height,this.retrieveBounds={},this.checkCollisionBound=function(e,n){return t.checkCollision(e,n)}}},{key:"update",value:function(){v=this.getMatchingComponents();for(y in v){m=v[y],m.inCollision=!1;for(g in m.inCollisionWith)delete m.inCollisionWith[g]}for(y in v)(_=this.world.get("Position",y))&&this.positionSystem.quadtree.iterate(_,this.checkCollisionBound,_)}},{key:"checkCollision",value:function(t,e){e.entityId!==t.entityId&&(b=this.world.get("Collidable",e.entityId),w=this.world.get("Collidable",t.entityId),b&&w&&(x=e.x-t.x,S=e.y-t.y,k=(e.width+t.width)/2,x*x+S*S>k*k||(b.inCollision=!0,b.inCollisionWith[t.entityId]=1,w.inCollision=!0,w.inCollisionWith[e.entityId]=1)))}},{key:"draw",value:function(){var t=this.getDebugGraphics();if(t){t.lineStyle(4,10066329);var e=this.world.get("Collidable");for(var n in e){var i=e[n],o=this.world.get("Position",n);i.inCollision&&t.drawCircle(o.x,o.y,40)}}}}]),e}(f.System);f.registerSystem("Collision",C)},/*!***********************************************************!*\
  !*** ./node_modules/babel-runtime/core-js/object/keys.js ***!
  \***********************************************************/
/*! no static exports found */
/*! exports used: default */
function(t,e,n){t.exports={default:n(/*! core-js/library/fn/object/keys */125),__esModule:!0}},/*!********************************************!*\
  !*** ./src/plugins/playerInputSteering.js ***!
  \********************************************/
/*! exports provided: PlayerInputSteering, PlayerInputSteeringSystem */
/*! all exports used */
function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"PlayerInputSteering",function(){return g}),n.d(e,"PlayerInputSteeringSystem",function(){return b});var i=n(/*! babel-runtime/core-js/object/keys */38),o=n.n(i),r=n(/*! babel-runtime/helpers/get */25),s=n.n(r),a=n(/*! babel-runtime/core-js/object/get-prototype-of */3),u=n.n(a),l=n(/*! babel-runtime/helpers/classCallCheck */1),c=n.n(l),h=n(/*! babel-runtime/helpers/createClass */2),d=n.n(h),f=n(/*! babel-runtime/helpers/possibleConstructorReturn */4),p=n.n(f),m=n(/*! babel-runtime/helpers/inherits */5),v=n.n(m),y=n(/*! ../lib/core */0),g=function(t){function e(){return c()(this,e),p()(this,(e.__proto__||u()(e)).apply(this,arguments))}return v()(e,t),d()(e,null,[{key:"defaults",value:function(){return{active:!0,radPerSec:2*Math.PI}}}]),e}(y.Component);Object(y.registerComponent)("PlayerInputSteering",g);var _=2*Math.PI,b=function(t){function e(){return c()(this,e),p()(this,(e.__proto__||u()(e)).apply(this,arguments))}return v()(e,t),d()(e,[{key:"defaultOptions",value:function(){return{gamepadDeadzone:.2}}},{key:"matchComponent",value:function(){return"PlayerInputSteering"}},{key:"initialize",value:function(){var t=this;this.gamepad={active:!1},this.pointer={active:!1,x:0,y:0},this.keys={active:!1},this.touch={active:!1,x:0,y:0},this.world.subscribe("mouseDown",function(e,n){return t.setPointer(!0,n)}).subscribe("mouseUp",function(e,n){return t.setPointer(!1,n)}).subscribe("mouseMove",function(e,n){return t.setPointer(t.pointer.active,n)});var e={keydown:this.handleKeyDown,keyup:this.handleKeyUp};o()(e).forEach(function(n){return window.addEventListener(n,e[n].bind(t))})}},{key:"setPointer",value:function(t,e){this.pointer.active=t,this.pointer.x=e.x,this.pointer.y=e.y}},{key:"update",value:function(t){this.updateGamepads(t),this.updateKeyboard(t),s()(e.prototype.__proto__||u()(e.prototype),"update",this).call(this,t)}},{key:"updateComponent",value:function(t,e,n){var i=this.world.get("Thruster",e),o=this.world.get("Motion",e);return i.active=!0,i.stop=!1,this.keys.active?this.updateComponentFromKeyboard(t,e,n):this.pointer.active?this.updateComponentFromPointer(t,e,n):this.gamepad.active?this.updateComponentFromGamepad(t,e,n):(i.stop=!0,void(o.drotation=0))}},{key:"updateComponentFromPointer",value:function(t,e,n){var i=this.world.get("Position",e);this.updateMotionFromTargetAngle(t,e,n,Math.atan2(this.pointer.y-i.y,this.pointer.x-i.x))}},{key:"updateComponentFromGamepad",value:function(t,e,n){this.updateMotionFromTargetAngle(t,e,n,Math.atan2(this.gamepad.axis1,this.gamepad.axis0))}},{key:"updateComponentFromKeyboard",value:function(t,e,n){var i=this.world.get("Thruster",e),o=this.world.get("Motion",e),r=this.keys[65]||this.keys[37]||this.gamepad.button13,s=this.keys[68]||this.keys[39]||this.gamepad.button14;this.keys[87]||this.keys[38]||this.gamepad.button11?i.active=!0:i.stop=!0;var a=r?-1:s?1:0,u=a*n.radPerSec;o.drotation=u}},{key:"updateGamepads",value:function(){for(var t=this,e=navigator.getGamepads?navigator.getGamepads():[],n=0;n<e.length;n++){var i=e[n];if(i&&i.connected){i.buttons.forEach(function(e,n){return t.gamepad["button"+n]=e.pressed}),i.axes.forEach(function(e,n){return t.gamepad["axis"+n]=e});break}}o()(this.gamepad).forEach(function(e){t.gamepad[e]||delete t.gamepad[e]});var r=this.gamepad.axis0,s=this.gamepad.axis1;this.gamepad.active=(Math.abs(r)>0||Math.abs(s)>0)&&Math.sqrt(r*r+s*s)>this.options.gamepadDeadzone}},{key:"updateKeyboard",value:function(){var t=this.keys[65]||this.keys[37]||this.gamepad.button13,e=this.keys[68]||this.keys[39]||this.gamepad.button14,n=this.keys[87]||this.keys[38]||this.gamepad.button11,i=this.keys[83]||this.keys[40]||this.gamepad.button12;this.keys.active=t||e||n||i}},{key:"handleKeyDown",value:function(t){this.keys[t.keyCode]=!0,t.preventDefault()}},{key:"handleKeyUp",value:function(t){delete this.keys[t.keyCode],t.preventDefault()}},{key:"updateMotionFromTargetAngle",value:function(t,e,n,i){var o=this.world.get("Position",e),r=this.world.get("Motion",e),s=i<0?i+_:i,a=s<o.rotation?-1:1,u=Math.abs(s-o.rotation);u>Math.PI&&(a=0-a);var l=a*Math.min(n.radPerSec,u/t),c=l-r.drotation;Math.abs(c)>n.radPerSec&&(c>0?c=n.radPerSec:c<0&&(c=0-n.radPerSec)),r.drotation+=c}}]),e}(y.System);Object(y.registerSystem)("PlayerInputSteering",b)},/*!*************************************************************!*\
  !*** ./node_modules/babel-runtime/core-js/object/assign.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){t.exports={default:n(/*! core-js/library/fn/object/assign */78),__esModule:!0}},/*!******************************************************!*\
  !*** ./node_modules/core-js/library/modules/_uid.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},/*!******************************************************!*\
  !*** ./node_modules/core-js/library/modules/_ctx.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){var i=n(/*! ./_a-function */80);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,o){return t.call(e,n,i,o)}}return function(){return t.apply(e,arguments)}}},/*!***************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_to-primitive.js ***!
  \***************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){var i=n(/*! ./_is-object */31);t.exports=function(t,e){if(!i(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!i(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!i(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!i(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},/*!******************************************************!*\
  !*** ./node_modules/core-js/library/modules/_cof.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},/*!**********************************************************!*\
  !*** ./node_modules/core-js/library/modules/_defined.js ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},/*!*************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_to-integer.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},/*!*************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_shared-key.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){var i=n(/*! ./_shared */48)("keys"),o=n(/*! ./_uid */41);t.exports=function(t){return i[t]||(i[t]=o(t))}},/*!*********************************************************!*\
  !*** ./node_modules/core-js/library/modules/_shared.js ***!
  \*********************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){var i=n(/*! ./_global */12),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});t.exports=function(t){return o[t]||(o[t]={})}},/*!****************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_enum-bug-keys.js ***!
  \****************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},/*!**************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_object-gops.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e){e.f=Object.getOwnPropertySymbols},/*!*************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_object-sap.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){var i=n(/*! ./_export */10),o=n(/*! ./_core */6),r=n(/*! ./_fails */24);t.exports=function(t,e){var n=(o.Object||{})[t]||Object[t],s={};s[t]=e(n),i(i.S+i.F*r(function(){n(1)}),"Object",s)}},/*!**********************************************************!*\
  !*** ./node_modules/core-js/library/modules/_library.js ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e){t.exports=!0},/*!****************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_object-create.js ***!
  \****************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){var i=n(/*! ./_an-object */23),o=n(/*! ./_object-dps */93),r=n(/*! ./_enum-bug-keys */49),s=n(/*! ./_shared-key */47)("IE_PROTO"),a=function(){},u=function(){var t,e=n(/*! ./_dom-create */62)("iframe"),i=r.length;for(e.style.display="none",n(/*! ./_html */94).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;i--;)delete u.prototype[r[i]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(a.prototype=i(t),n=new a,a.prototype=null,n[s]=t):n=u(),void 0===e?n:o(n,e)}},/*!********************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_set-to-string-tag.js ***!
  \********************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){var i=n(/*! ./_object-dp */13).f,o=n(/*! ./_has */16),r=n(/*! ./_wks */9)("toStringTag");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,r)&&i(t,r,{configurable:!0,value:e})}},/*!**********************************************************!*\
  !*** ./node_modules/core-js/library/modules/_wks-ext.js ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){e.f=n(/*! ./_wks */9)},/*!*************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_wks-define.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){var i=n(/*! ./_global */12),o=n(/*! ./_core */6),r=n(/*! ./_library */52),s=n(/*! ./_wks-ext */55),a=n(/*! ./_object-dp */13).f;t.exports=function(t){var e=o.Symbol||(o.Symbol=r?{}:i.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:s.f(t)})}},/*!**************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_object-gopd.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){var i=n(/*! ./_object-pie */33),o=n(/*! ./_property-desc */32),r=n(/*! ./_to-iobject */11),s=n(/*! ./_to-primitive */43),a=n(/*! ./_has */16),u=n(/*! ./_ie8-dom-define */61),l=Object.getOwnPropertyDescriptor;e.f=n(/*! ./_descriptors */14)?l:function(t,e){if(t=r(t),e=s(e,!0),u)try{return l(t,e)}catch(t){}if(a(t,e))return o(!i.f.call(t,e),t[e])}},/*!***********************************!*\
  !*** ./src/plugins/hordeSpawn.js ***!
  \***********************************/
/*! exports provided: HordeSpawn, HordeSpawnSystem */
/*! all exports used */
function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"HordeSpawn",function(){return b}),n.d(e,"HordeSpawnSystem",function(){return w});var i=n(/*! babel-runtime/core-js/object/keys */38),o=n.n(i),r=n(/*! babel-runtime/core-js/object/get-prototype-of */3),s=n.n(r),a=n(/*! babel-runtime/helpers/classCallCheck */1),u=n.n(a),l=n(/*! babel-runtime/helpers/createClass */2),c=n.n(l),h=n(/*! babel-runtime/helpers/possibleConstructorReturn */4),d=n.n(h),f=n(/*! babel-runtime/helpers/inherits */5),p=n.n(f),m=n(/*! ../lib/core */0),v=n(/*! ./spawn */27),y=void 0,g=void 0,_=void 0,b=function(t){function e(){return u()(this,e),d()(this,(e.__proto__||s()(e)).apply(this,arguments))}return p()(e,t),c()(e,null,[{key:"defaults",value:function(){return{age:0}}}]),e}(m.Component);Object(m.registerComponent)("HordeSpawn",b);var w=function(t){function e(){return u()(this,e),d()(this,(e.__proto__||s()(e)).apply(this,arguments))}return p()(e,t),c()(e,[{key:"defaultOptions",value:function(){return{viewportSystemName:"ViewportPixi",minCount:100,offscreenTTL:1,spawnMargin:100,spawn:function(){}}}},{key:"initialize",value:function(){this.spawnCount=0,this.viewportSystem=this.world.getSystem(this.options.viewportSystemName)}},{key:"matchComponent",value:function(){return"HordeSpawn"}},{key:"update",value:function(t){g=this.getMatchingComponents()||{},this.spawnCount=o()(g).length,this.spawnCount<this.options.minCount&&this.spawnOffscreen();for(y in g)this.updateComponent(t,y,g[y])}},{key:"updateComponent",value:function(t,e,n){_=this.world.get("Sprite",e),_.visible?n.age=0:(n.age+=t,n.age>=this.options.offscreenTTL&&this.world.publish(v.MSG_DESTROY,e))}},{key:"spawnOffscreen",value:function(){var t=this.viewportSystem,e=t.visibleLeft,n=t.visibleRight,i=t.visibleTop,o=t.visibleBottom,r=this.options.spawnMargin,s=n+r-(e-r),a=o+r-(i-r),u=Math.random(),l=void 0,c=void 0;u<.5?c=i-r+Math.random()*a:l=e-r+Math.random()*s,u<.25?l=e-r:u<.5?l=n+r:c=u<.75?i-r:o+r,this.options.spawn(l,c)}}]),e}(m.System);Object(m.registerSystem)("HordeSpawn",w)},/*!*********************************!*\
  !*** ./src/plugins/repulsor.js ***!
  \*********************************/
/*! exports provided: Repulsor, RepulsorSystem */
/*! all exports used */
function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"Repulsor",function(){return p}),n.d(e,"RepulsorSystem",function(){return T});var i=n(/*! babel-runtime/core-js/object/get-prototype-of */3),o=n.n(i),r=n(/*! babel-runtime/helpers/classCallCheck */1),s=n.n(r),a=n(/*! babel-runtime/helpers/createClass */2),u=n.n(a),l=n(/*! babel-runtime/helpers/possibleConstructorReturn */4),c=n.n(l),h=n(/*! babel-runtime/helpers/inherits */5),d=n.n(h),f=n(/*! ../lib/core */0),p=function(t){function e(){return s()(this,e),c()(this,(e.__proto__||o()(e)).apply(this,arguments))}return d()(e,t),u()(e,null,[{key:"defaults",value:function(){return{active:!0,range:500,force:200}}}]),e}(f.Component);Object(f.registerComponent)("Repulsor",p);var m=void 0,v=void 0,y=void 0,g=void 0,_=void 0,b=void 0,w=void 0,x=void 0,S=void 0,k=void 0,C=void 0,E=void 0,M={},T=function(t){function e(){return s()(this,e),c()(this,(e.__proto__||o()(e)).apply(this,arguments))}return d()(e,t),u()(e,[{key:"defaultOptions",value:function(){return{positionSystemName:"Position"}}},{key:"matchComponent",value:function(){return"Repulsor"}},{key:"initialize",value:function(){var t=this;this.positionSystem=this.world.getSystem(this.options.positionSystemName),this.applyRepulsionBound=function(e,n){return t.applyRepulsion(e,n)}}},{key:"updateComponent",value:function(t,e,n){n.active&&(g=this.world.get("Position",e),M.left=g.left-n.range,M.right=g.right+n.range,M.top=g.top-n.range,M.bottom=g.bottom+n.range,this.positionSystem.quadtree.iterate(M,this.applyRepulsionBound,e))}},{key:"applyRepulsion",value:function(t,e){y!==t.entityId&&(w=this.world.get("Sprite",t.entityId),"mine"===w.name&&(_=this.world.get("Repulsor",e),b=this.world.get("Position",e),x=this.world.get("Position",t.entityId),S=this.world.get("Motion",t.entityId),(E=(x.x-b.x)*(x.x-b.x)+(x.y-b.y)*(x.y-b.y))>_.range*_.range||(k=Math.atan2(b.y-x.y,b.x-x.x),C=-_.force,S.dx+=C*Math.cos(k),S.dy+=C*Math.sin(k))))}},{key:"draw",value:function(){var t=this.getDebugGraphics();if(t){t.lineStyle(4,8921634),m=this.getMatchingComponents();for(y in m)v=m[y],g=this.world.get("Position",y),t.drawCircle(g.x,g.y,v.range)}}}]),e}(f.System);Object(f.registerSystem)("Repulsor",T)},/*!*******************************************************!*\
  !*** ./node_modules/babel-runtime/helpers/extends.js ***!
  \*******************************************************/
/*! no static exports found */
/*! exports used: default */
function(t,e,n){"use strict";e.__esModule=!0;var i=n(/*! ../core-js/object/assign */40),o=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=o.default||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}},/*!*****************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_ie8-dom-define.js ***!
  \*****************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){t.exports=!n(/*! ./_descriptors */14)&&!n(/*! ./_fails */24)(function(){/*! ./_dom-create */
return 7!=Object.defineProperty(n(62)("div"),"a",{get:function(){return 7}}).a})},/*!*************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_dom-create.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){var i=n(/*! ./_is-object */31),o=n(/*! ./_global */12).document,r=i(o)&&i(o.createElement);t.exports=function(t){return r?o.createElement(t):{}}},/*!***********************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_object-keys-internal.js ***!
  \***********************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){var i=n(/*! ./_has */16),o=n(/*! ./_to-iobject */11),r=n(/*! ./_array-includes */82)(!1),s=n(/*! ./_shared-key */47)("IE_PROTO");t.exports=function(t,e){var n,a=o(t),u=0,l=[];for(n in a)n!=s&&i(a,n)&&l.push(n);for(;e.length>u;)i(a,n=e[u++])&&(~r(l,n)||l.push(n));return l}},/*!**********************************************************!*\
  !*** ./node_modules/core-js/library/modules/_iobject.js ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){var i=n(/*! ./_cof */44);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},/*!************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_to-length.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){var i=n(/*! ./_to-integer */46),o=Math.min;t.exports=function(t){return t>0?o(i(t),9007199254740991):0}},/*!*************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_object-gpo.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){var i=n(/*! ./_has */16),o=n(/*! ./_to-object */34),r=n(/*! ./_shared-key */47)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),i(t,r)?t[r]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},/*!******************************************************!*\
  !*** ./node_modules/babel-runtime/helpers/typeof.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var o=n(/*! ../core-js/symbol/iterator */89),r=i(o),s=n(/*! ../core-js/symbol */99),a=i(s),u="function"==typeof a.default&&"symbol"==typeof r.default?function(t){return typeof t}:function(t){return t&&"function"==typeof a.default&&t.constructor===a.default&&t!==a.default.prototype?"symbol":typeof t};e.default="function"==typeof a.default&&"symbol"===u(r.default)?function(t){return void 0===t?"undefined":u(t)}:function(t){return t&&"function"==typeof a.default&&t.constructor===a.default&&t!==a.default.prototype?"symbol":void 0===t?"undefined":u(t)}},/*!*********************************************************************!*\
  !*** ./node_modules/core-js/library/modules/es6.string.iterator.js ***!
  \*********************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){"use strict";var i=n(/*! ./_string-at */91)(!0);n(/*! ./_iter-define */69)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this._i+=t.length,{value:t,done:!1})})},/*!**************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_iter-define.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){"use strict";var i=n(/*! ./_library */52),o=n(/*! ./_export */10),r=n(/*! ./_redefine */70),s=n(/*! ./_hide */22),a=n(/*! ./_has */16),u=n(/*! ./_iterators */36),l=n(/*! ./_iter-create */92),c=n(/*! ./_set-to-string-tag */54),h=n(/*! ./_object-gpo */66),d=n(/*! ./_wks */9)("iterator"),f=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(t,e,n,m,v,y,g){l(n,e,m);var _,b,w,x=function(t){if(!f&&t in E)return E[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},S=e+" Iterator",k="values"==v,C=!1,E=t.prototype,M=E[d]||E["@@iterator"]||v&&E[v],T=M||x(v),A=v?k?x("entries"):T:void 0,P="Array"==e?E.entries||M:M;if(P&&(w=h(P.call(new t)))!==Object.prototype&&w.next&&(c(w,S,!0),i||a(w,d)||s(w,d,p)),k&&M&&"values"!==M.name&&(C=!0,T=function(){return M.call(this)}),i&&!g||!f&&!C&&E[d]||s(E,d,T),u[e]=T,u[S]=p,v)if(_={values:k?T:x("values"),keys:y?T:x("keys"),entries:A},g)for(b in _)b in E||r(E,b,_[b]);else o(o.P+o.F*(f||C),e,_);return _}},/*!***********************************************************!*\
  !*** ./node_modules/core-js/library/modules/_redefine.js ***!
  \***********************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){t.exports=n(/*! ./_hide */22)},/*!**************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_object-gopn.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){var i=n(/*! ./_object-keys-internal */63),o=n(/*! ./_enum-bug-keys */49).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,o)}},/*!***********************************!*\
  !*** ./src/plugins/expiration.js ***!
  \***********************************/
/*! exports provided: Expiration, ExpirationSystem */
/*! all exports used */
function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"Expiration",function(){return p}),n.d(e,"ExpirationSystem",function(){return m});var i=n(/*! babel-runtime/core-js/object/get-prototype-of */3),o=n.n(i),r=n(/*! babel-runtime/helpers/classCallCheck */1),s=n.n(r),a=n(/*! babel-runtime/helpers/createClass */2),u=n.n(a),l=n(/*! babel-runtime/helpers/possibleConstructorReturn */4),c=n.n(l),h=n(/*! babel-runtime/helpers/inherits */5),d=n.n(h),f=n(/*! ../lib/core */0),p=function(t){function e(){return s()(this,e),c()(this,(e.__proto__||o()(e)).apply(this,arguments))}return d()(e,t),u()(e,null,[{key:"defaults",value:function(){return{ttl:0,age:0}}}]),e}(f.Component);f.registerComponent("Expiration",p);var m=function(t){function e(){return s()(this,e),c()(this,(e.__proto__||o()(e)).apply(this,arguments))}return d()(e,t),u()(e,[{key:"matchComponent",value:function(){return"Expiration"}},{key:"updateComponent",value:function(t,e,n){n.age+=t,n.age>=n.ttl&&this.world.destroy(e)}}]),e}(f.System);f.registerSystem("Expiration",m)},/*!********************************!*\
  !*** ./src/plugins/orbiter.js ***!
  \********************************/
/*! exports provided: Orbiter, OrbiterSystem */
/*! all exports used */
function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"Orbiter",function(){return m}),n.d(e,"OrbiterSystem",function(){return v});var i=n(/*! babel-runtime/core-js/object/get-prototype-of */3),o=n.n(i),r=n(/*! babel-runtime/helpers/classCallCheck */1),s=n.n(r),a=n(/*! babel-runtime/helpers/createClass */2),u=n.n(a),l=n(/*! babel-runtime/helpers/possibleConstructorReturn */4),c=n.n(l),h=n(/*! babel-runtime/helpers/inherits */5),d=n.n(h),f=n(/*! ../lib/core */0),p=(n(/*! ./position */7),n(/*! ../lib/Vector2D */17)),m=function(t){function e(){return s()(this,e),c()(this,(e.__proto__||o()(e)).apply(this,arguments))}return d()(e,t),u()(e,null,[{key:"defaults",value:function(){return{name:null,entityId:null,angle:0,rotate:!0,radPerSec:Math.PI/4}}}]),e}(f.Component);f.registerComponent("Orbiter",m);var v=function(t){function e(){return s()(this,e),c()(this,(e.__proto__||o()(e)).apply(this,arguments))}return d()(e,t),u()(e,[{key:"matchComponent",value:function(){return"Orbiter"}},{key:"initialize",value:function(){this.vOrbited=new p.a,this.vOrbiter=new p.a,this.vOld=new p.a}},{key:"updateComponent",value:function(t,e,n){n.name&&!n.entityId&&(n.entityId=f.getComponent("Name").findEntityByName(this.world,n.name));var i=this.world.get("Position",e),o=this.world.get("Position",n.entityId);this.vOrbited.setValues(o.x,o.y),this.vOrbiter.setValues(i.x,i.y);var r=t*n.radPerSec;this.vOrbiter.rotateAround(this.vOrbited,r),this.vOld.setValues(i.x,i.y),i.x=this.vOrbiter.x,i.y=this.vOrbiter.y,n.rotate&&(i.rotation=this.vOld.angleTo(this.vOrbiter))}}]),e}(f.System);f.registerSystem("Orbiter",v)},/*!************************************!*\
  !*** ./src/plugins/pathfinding.js ***!
  \************************************/
/*! exports provided: Pathfinder, SpaceTree, PathfindingSystem */
/*! all exports used */
function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"Pathfinder",function(){return p}),n.d(e,"SpaceTree",function(){return m}),n.d(e,"PathfindingSystem",function(){return v});var i=n(/*! babel-runtime/core-js/object/get-prototype-of */3),o=n.n(i),r=n(/*! babel-runtime/helpers/classCallCheck */1),s=n.n(r),a=n(/*! babel-runtime/helpers/createClass */2),u=n.n(a),l=n(/*! babel-runtime/helpers/possibleConstructorReturn */4),c=n.n(l),h=n(/*! babel-runtime/helpers/inherits */5),d=n.n(h),f=n(/*! ../lib/core */0),p=function(t){function e(){return s()(this,e),c()(this,(e.__proto__||o()(e)).apply(this,arguments))}return d()(e,t),u()(e,null,[{key:"defaults",value:function(){return{width:5e3,height:5e3}}}]),e}(f.Component);f.registerComponent("Pathfinder",p);var m=function(){function t(e,n,i,o,r,a){var u=this,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:4;s()(this,t);var c=e.bounds;this.x=n||c.x,this.y=i||c.y,this.width=o||c.width,this.height=r||c.height,this.right=this.x+this.width,this.bottom=this.y+this.height,this.level=a||0,this.empty=!0,this.full=!1,this.children=[];var h=0;if(e.iterate({x:this.x,y:this.y,right:this.right,bottom:this.bottom},function(t){var e=2*Math.abs(t.x-u.x),n=2*Math.abs(t.y-u.y),i=t.right-t.x+u.width,o=t.bottom-t.y+u.height;e<i&&n<o&&(h++,t.x<=u.x&&t.y<=u.y&&t.right>=u.right&&t.bottom>=u.bottom&&(u.full=!0))}),0===h)return void(this.empty=!0);this.empty=!1,!this.full&&this.level<l&&this.split(e)}return u()(t,[{key:"split",value:function(e){var n=this.width/2,i=this.height/2;this.children[0]=new t(e,this.x,this.y,n,i,this.level+1),this.children[1]=new t(e,this.x+n,this.y,n,i,this.level+1),this.children[2]=new t(e,this.x,this.y+i,n,i,this.level+1),this.children[3]=new t(e,this.x+n,this.y+i,n,i,this.level+1)}}]),t}(),v=function(t){function e(){return s()(this,e),c()(this,(e.__proto__||o()(e)).apply(this,arguments))}return d()(e,t),u()(e,[{key:"matchComponent",value:function(){return"Pathfinder"}},{key:"initialize",value:function(){}},{key:"update",value:function(){}},{key:"draw",value:function(t){if(this.debug){var e=this.world.getSystem("ViewportCanvas"),n=e.ctx;n.save(),e.centerAndZoom(t),e.followEntity(t),n.restore()}}}]),e}(f.System);f.registerSystem("Pathfinding",v)},/*!*********************************!*\
  !*** ./src/plugins/steering.js ***!
  \*********************************/
/*! exports provided: Steering, SteeringSystem */
/*! all exports used */
function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"Steering",function(){return v}),n.d(e,"SteeringSystem",function(){return y});var i=n(/*! babel-runtime/core-js/object/get-prototype-of */3),o=n.n(i),r=n(/*! babel-runtime/helpers/classCallCheck */1),s=n.n(r),a=n(/*! babel-runtime/helpers/createClass */2),u=n.n(a),l=n(/*! babel-runtime/helpers/possibleConstructorReturn */4),c=n.n(l),h=n(/*! babel-runtime/helpers/inherits */5),d=n.n(h),f=n(/*! ../lib/core */0),p=(n(/*! ../plugins/position */7),n(/*! ../plugins/motion */8),n(/*! ../lib/Vector2D */17)),m=2*Math.PI,v=function(t){function e(){return s()(this,e),c()(this,(e.__proto__||o()(e)).apply(this,arguments))}return d()(e,t),u()(e,null,[{key:"defaults",value:function(){return{sensorRange:350,obstacleRepel:[400,2.1]}}}]),e}(f.Component);f.registerComponent("Steering",v);var y=function(t){function e(){return s()(this,e),c()(this,(e.__proto__||o()(e)).apply(this,arguments))}return d()(e,t),u()(e,[{key:"matchComponent",value:function(){return"Steering"}},{key:"initialize",value:function(){this.seekFactor=1,this.pushFactor=7,this.avoidFactor=10,this.avoidSeeAhead=500,this.avoidRayWidthFactor=1.5,this.vTarget=new p.a,this.vectors={avoid:new p.a,push:new p.a,seek:new p.a,flee:new p.a,wander:new p.a,evade:new p.a,pursue:new p.a}}},{key:"updateComponent",value:function(t,e,n){this.vTarget.setValues(0,0);for(var i in this.vectors)this.vectors[i].setValues(0,0),this[i](this.vectors[i],t,e,n),this.vTarget.add(this.vectors[i]);this.applySteering(t,e,n)}},{key:"avoid",value:function(t,e,n,i){var o=this;this.debug&&(i.vectors=[]);var r=this.world.get("Sprite",n),s=this.world.get("Position",n);if(this.lookForObstacle(n,s,r,i)){var a=i.sensorRange;this.world.getSystem("Collision").quadtree.iterate({x:s.x-a/2,y:s.y-a/2,width:a,height:a},function(e){if(n!==e.entityId){var a=o.world.get("Position",e.entityId);if(a){var u=o.world.get("Sprite",e.entityId),l=i.obstacleRepel[0],c=i.obstacleRepel[1],h=s.x-a.x,d=s.y-a.y,f=r.size/2+u.size/2,p=Math.sqrt(h*h+d*d)-f;if(p<=0&&(p=.01),!(p>i.sensorRange)){var m=-0/Math.pow(p,0)+l/Math.pow(p,c);t.x+=h*m,t.y+=d*m,o.debug&&i.vectors.push([a.x,a.y,m])}}}})}}},{key:"push",value:function(){}},{key:"avoid_ray",value:function(t,e,n,i){var o=this.world.get("Sprite",n),r=this.world.get("Position",n),s=this.lookForObstacle(n,r,o,i);if(s){var a=s[0],u=s[1],l=s[2],c=a.sprite.size/2+o.size*this.avoidRayWidthFactor,h=Math.sqrt(Math.pow(a.position.x-u,2)+Math.pow(a.position.y-l,2)),d=Math.asin(c/h);isNaN(d)&&(d=.66*Math.PI);var f=Math.atan2(a.position.y-l,a.position.x-u),p=f+d;Math.min(m-Math.abs(r.rotation-p),Math.abs(r.rotation-p))>d&&(p=f-d),t.setValues(this.avoidFactor,0),t.rotate(p)}}},{key:"lookForObstacle",value:function(t,e,n,i){var o=n.size*this.avoidRayWidthFactor,r=new p.a;r.setValues(o,0),r.rotate(e.rotation),this.debug&&(i.hitCircles=[]);for(var s=void 0,a=void 0,u=void 0,l=this.avoidSeeAhead/o,c=0;c<l;c++)if(a=e.x+r.x*c,u=e.y+r.y*c,s=this.searchCircleForObstacle(i,t,a,u,o))return[s,a,u];return null}},{key:"searchCircleForObstacle",value:function(t,e,n,i,o){this.debug&&t.hitCircles.push([n,i,o]);var r=[];return this.world.getSystem("Collision").quadtree.iterate({x:n-o/2,y:i-o/2,width:o,height:o},function(t){if(e!==t.entityId){var s=t.position.x-n,a=t.position.y-i,u=s*s+a*a,l=(o+t.sprite.size)/2;u<l*l&&r.push([u,t])}}),r.sort(function(t,e){return e[0]-t[0]}),r.length?r[0][1]:null}},{key:"seek",value:function(t,e,n,i){if(i.seekTargetName&&!i.seekTargetEntityId&&(i.seekTargetEntityId=f.getComponent("Name").findEntityByName(this.world,i.seekTargetName)),i.seekTargetEntityId){var o=this.world.get("Position",n);if(o){var r=i.targetPosition;r||(r=this.world.get("Position",i.seekTargetEntityId)),r&&(t.setValues(r.x-o.x,r.y-o.y),t.normalize(),t.multiplyScalar(this.seekFactor))}}}},{key:"flee",value:function(){}},{key:"wander",value:function(){}},{key:"evade",value:function(){}},{key:"pursue",value:function(){}},{key:"applySteering",value:function(t,e,n){var i=this.world.get("Motion",e),o=0;if(!this.vTarget.isZero()){var r=this.world.get("Position",e),s=this.vTarget.angle();s<0&&(s+=2*Math.PI),this.debug&&(n.targetAngle=s);var a=s<r.rotation?-1:1,u=Math.abs(s-r.rotation);u>Math.PI&&(a=0-a),o=a*Math.min(n.radPerSec,u/t)}var l=o-i.drotation;Math.abs(l)>n.radPerSec&&(l>0?l=n.radPerSec:l<0&&(l=0-n.radPerSec)),i.drotation+=l}},{key:"draw",value:function(){this.debug}},{key:"drawSteeringVsPosition",value:function(t,e,n){this.drawAngle(t,n,n.rotation,"#ddd"),e.targetAngle&&this.drawAngle(t,n,e.targetAngle,"#dd0")}},{key:"drawAngle",value:function(t,e,n,i){var o=new p.a;o.setValues(this.avoidSeeAhead,0),o.rotate(n),t.strokeStyle=i,t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(e.x+o.x,e.y+o.y),t.stroke()}}]),e}(f.System);f.registerSystem("Steering",y)},/*!***************************************!*\
  !*** ./src/plugins/viewportCanvas.js ***!
  \***************************************/
/*! exports provided: CanvasSprite, ViewportCanvas, registerSprite, getSprite */
/*! all exports used */
function(t,e,n){"use strict";function i(t,e){C[t]=e}function o(t){return C[t]}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"CanvasSprite",function(){return x}),n.d(e,"ViewportCanvas",function(){return k}),e.registerSprite=i,e.getSprite=o;var r=n(/*! babel-runtime/helpers/extends */60),s=n.n(r),a=n(/*! babel-runtime/core-js/object/assign */40),u=n.n(a),l=n(/*! babel-runtime/core-js/object/get-prototype-of */3),c=n.n(l),h=n(/*! babel-runtime/helpers/classCallCheck */1),d=n.n(h),f=n(/*! babel-runtime/helpers/createClass */2),p=n.n(f),m=n(/*! babel-runtime/helpers/possibleConstructorReturn */4),v=n.n(m),y=n(/*! babel-runtime/helpers/get */25),g=n.n(y),_=n(/*! babel-runtime/helpers/inherits */5),b=n.n(_),w=n(/*! ../lib/core */0),x=function(t){function e(){return d()(this,e),v()(this,(e.__proto__||c()(e)).apply(this,arguments))}return b()(e,t),p()(e,null,[{key:"defaults",value:function(){return{name:null,color:"#fff",size:100,width:null,height:null}}},{key:"create",value:function(t){var n=g()(e.__proto__||c()(e),"create",this).call(this,t);return n.width||(n.width=n.size),n.height||(n.height=n.size),n}}]),e}(w.Component);w.registerComponent("Sprite",x);var S=function(t){t||(t=event);var e=t.wheelDelta,n=t.detail;return n?e?e/n/40*n>0?1:-1:-n/3:e/120},k=function(t){function e(){return d()(this,e),v()(this,(e.__proto__||c()(e)).apply(this,arguments))}return b()(e,t),p()(e,[{key:"defaultOptions",value:function(){return{lineWidth:1.5,zoom:1,zoomMin:.1,zoomMax:10,zoomWheelFactor:.025,gridEnabled:!0,gridSize:500,gridColor:"#111",followEnabled:!0,followName:null,followEntityId:null}}},{key:"initialize",value:function(){var t=this;this.container=document.querySelector(this.options.container),this.canvas=document.createElement("canvas"),this.container.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d");var e={resize:function(e){t.updateMetrics(e)},orientationchange:function(e){t.updateMetrics(e)},mousedown:function(e){t.onMouseDown(e)},mousemove:function(e){t.onMouseMove(e)},mouseup:function(e){t.onMouseUp(e)}};for(var n in e)this.canvas.addEventListener(n,e[n],!1);var i=function(e){return t.onMouseWheel(e)};window.addEventListener?(window.addEventListener("mousewheel",i,!1),window.addEventListener("DOMMouseScroll",i,!1)):window.attachEvent&&window.attachEvent("onmousewheel",i),this.followEnabled=this.options.followEnabled,this.zoom=this.options.zoom,this.followEntityId=this.options.followEntityId,this.gridEnabled=this.options.gridEnabled,this.lineWidth=this.options.lineWidth,this.cursorRawX=0,this.cursorRawY=0,this.cursorChanged=!1,this.cursorPosition={x:0,y:0},this.cameraX=0,this.cameraY=0,this.debugDummySprite={size:100}}},{key:"draw",value:function(t){this.updateMetrics(),this.ctx.save(),this.clear(),this.centerAndZoom(t),this.followEntity(t),this.gridEnabled&&this.drawBackdrop(t),this.drawScene(t),this.world.debug&&this.drawDebugCursor(),this.ctx.restore()}},{key:"onMouseWheel",value:function(t){this.zoom+=S(t)*this.options.zoomWheelFactor,this.zoom<this.options.zoomMin&&(this.zoom=this.options.zoomMin),this.zoom>this.options.zoomMax&&(this.zoom=this.options.zoomMax)}},{key:"onMouseDown",value:function(t){this.setCursor(t.clientX,t.clientY),this.world.publish("mouseDown",this.cursorPosition)}},{key:"onMouseMove",value:function(t){this.setCursor(t.clientX,t.clientY)}},{key:"onMouseUp",value:function(t){this.setCursor(t.clientX,t.clientY),this.world.publish("mouseUp",this.cursorPosition)}},{key:"update",value:function(){this.cursorChanged&&(this.cursorChanged=!1,this.world.publish("mouseMove",this.cursorPosition))}},{key:"setCursor",value:function(t,e){var n=this.container.offsetWidth,i=this.container.offsetHeight;this.cursorRawX=t,this.cursorRawY=e;var o=(t-n/2)/this.zoom+this.cameraX,r=(e-i/2)/this.zoom+this.cameraY;o===this.cursorPosition.x&&r===this.cursorPosition.y||(this.cursorChanged=!0,this.cursorPosition.x=o,this.cursorPosition.y=r)}},{key:"updateMetrics",value:function(){var t=this.container.offsetWidth,e=this.container.offsetHeight;this.canvas.width=t,this.canvas.height=e,this.visibleWidth=t/this.zoom,this.visibleHeight=e/this.zoom,this.visibleLeft=0-this.visibleWidth/2+this.cameraX,this.visibleTop=0-this.visibleHeight/2+this.cameraY,this.visibleRight=this.visibleLeft+this.visibleWidth,this.visibleBottom=this.visibleTop+this.visibleHeight}},{key:"clear",value:function(){this.ctx.fillStyle="rgba(0, 0, 0, 1.0)",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}},{key:"centerAndZoom",value:function(){this.ctx.translate(this.canvas.width/2,this.canvas.height/2),this.ctx.scale(this.zoom,this.zoom)}},{key:"followEntity",value:function(){if(!this.followEnabled)return void(this.cameraX=this.cameraY=0);if(this.options.followName&&!this.followEntityId&&(this.followEntityId=w.getComponent("Name").findEntityByName(this.world,this.options.followName)),this.followEntityId){var t=this.world.get("Position",this.followEntityId);t&&(this.cameraX=t.x,this.cameraY=t.y,this.setCursor(this.cursorRawX,this.cursorRawY),this.ctx.translate(0-this.cameraX,0-this.cameraY))}}},{key:"drawDebugCursor",value:function(){var t=this.ctx;t.save(),t.strokeStyle="#f0f",t.lineWidth=this.lineWidth/this.zoom,t.translate(this.cursorPosition.x,this.cursorPosition.y),t.beginPath(),t.moveTo(-20,0),t.lineTo(20,0),t.moveTo(0,-20),t.lineTo(0,20),t.strokeRect(-10,-10,20,20),t.stroke(),t.restore()}},{key:"drawBackdrop",value:function(){var t=this.options.gridSize,e=this.visibleLeft%t,n=this.visibleTop%t,i=this.ctx;i.save(),i.beginPath(),i.strokeStyle=this.options.gridColor,i.lineWidth=this.lineWidth/this.zoom;for(var o=this.visibleLeft-e;o<this.visibleRight;o+=t)i.moveTo(o,this.visibleTop),i.lineTo(o,this.visibleBottom);for(var r=this.visibleTop-n;r<this.visibleBottom;r+=t)i.moveTo(this.visibleLeft,r),i.lineTo(this.visibleRight,r);i.stroke(),i.restore()}},{key:"drawScene",value:function(t){var e=this.world.get("Position");for(var n in e)this.drawSprite(t,n,e[n])}},{key:"drawSprite",value:function(t,e,n){var i=this.world.get("Sprite",e);i||(i=x.defaults());var r=o(i.name);r||(r=o("default"));var s=this.ctx;s.save(),s.translate(n.x,n.y),s.rotate(n.rotation+Math.PI/2),s.scale(i.size/100,i.size/100),s.lineWidth=this.lineWidth/this.zoom/(i.size/100),s.strokeStyle=i.color,r(s,t,i,e),s.restore()}}]),e}(w.System);w.registerSystem("ViewportCanvas",k);var C={},E=2*Math.PI;i("default",function(t){t.beginPath(),t.arc(0,0,50,0,E,!0),t.moveTo(0,0),t.lineTo(0,-50),t.moveTo(0,0),t.stroke()}),i("sun",function(t){t.beginPath(),t.arc(0,0,50,0,E,!0),t.stroke()}),i("enemyscout",function(t){t.beginPath(),t.moveTo(0,-50),t.lineTo(-45,50),t.lineTo(-12.5,12.5),t.lineTo(0,25),t.lineTo(12.5,12.5),t.lineTo(45,50),t.lineTo(0,-50),t.moveTo(0,-50),t.stroke()}),i("hero",function(t){t.rotate(Math.PI),t.beginPath(),t.moveTo(-12.5,-50),t.lineTo(-25,-50),t.lineTo(-50,0),t.arc(0,0,50,Math.PI,0,!0),t.lineTo(25,-50),t.lineTo(12.5,-50),t.lineTo(25,0),t.arc(0,0,25,0,Math.PI,!0),t.lineTo(-12.5,-50),t.stroke()}),i("asteroid",function(t,e,n){var i=void 0;if(!n.points){var o=7+Math.floor(8*Math.random()),r=E/o;for(n.points=[],i=0;i<o;i++){var s=i*r,a=15*Math.random()+35;n.points.push([a*Math.cos(s),a*Math.sin(s)])}}for(t.beginPath(),t.moveTo(n.points[0][0],n.points[0][1]),i=0;i<n.points.length;i++)t.lineTo(n.points[i][0],n.points[i][1]);t.lineTo(n.points[0][0],n.points[0][1]),t.stroke()}),i("explosion",function(t,e,n){var i=void 0,o=void 0;if(!n.initialized)for(n.initialized=!0,u()(n,s()({ttl:2,radius:100,maxParticles:25,maxParticleSize:4,maxVelocity:300,color:"#f00",age:0,stop:!1},n)),n.particles=[],o=0;o<n.maxParticles;o++)n.particles.push({free:!0});for(o=0;o<n.particles.length;o++)i=n.particles[o],!n.stop&&i.free?(i.velocity=n.maxVelocity*Math.random(),i.angle=2*Math.PI*Math.random(),i.dx=0-i.velocity*Math.sin(i.angle),i.dy=i.velocity*Math.cos(i.angle),i.distance=i.x=i.y=0,i.maxDistance=n.radius*Math.random(),i.size=n.maxParticleSize,i.free=!1):i.free||(i.x+=i.dx*e,i.y+=i.dy*e,i.distance+=i.velocity*e,i.distance>=i.maxDistance&&(i.distance=i.maxDistance,i.free=!0));n.age+=e,n.age>=n.ttl&&(n.stop=!0);var r=Math.max(0,1-n.age/n.ttl);for(t.save(),t.strokeStyle=n.color,t.fillStyle=n.color,o=0;o<n.particles.length;o++)i=n.particles[o],i.free||(t.globalAlpha=(1-i.distance/i.maxDistance)*r,t.beginPath(),t.moveTo(0,0),t.lineWidth=i.size,t.lineTo(i.x,i.y),t.stroke());t.restore()})},/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** multi ./src/lib/core.js ./src/plugins/bounce.js ./src/plugins/collision.js ./src/plugins/datGui.js ./src/plugins/drawStats.js ./src/plugins/expiration.js ./src/plugins/health.js ./src/plugins/hordeSpawn.js ./src/plugins/memoryStats.js ./src/plugins/motion.js ./src/plugins/name.js ./src/plugins/orbiter.js ./src/plugins/pathfinding.js ./src/plugins/playerInputSteering.js ./src/plugins/position.js ./src/plugins/repulsor.js ./src/plugins/seeker.js ./src/plugins/spawn.js ./src/plugins/steering.js ./src/plugins/thruster.js ./src/plugins/viewportCanvas.js ./src/plugins/viewportPixi.js ./src/plugins/viewportWebGL.js ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){n(/*! ./src/lib/core.js */0),n(/*! ./src/plugins/bounce.js */35),n(/*! ./src/plugins/collision.js */37),n(/*! ./src/plugins/datGui.js */18),n(/*! ./src/plugins/drawStats.js */19),n(/*! ./src/plugins/expiration.js */72),n(/*! ./src/plugins/health.js */26),n(/*! ./src/plugins/hordeSpawn.js */58),n(/*! ./src/plugins/memoryStats.js */20),n(/*! ./src/plugins/motion.js */8),n(/*! ./src/plugins/name.js */21),n(/*! ./src/plugins/orbiter.js */73),n(/*! ./src/plugins/pathfinding.js */74),n(/*! ./src/plugins/playerInputSteering.js */39),n(/*! ./src/plugins/position.js */7),n(/*! ./src/plugins/repulsor.js */59),n(/*! ./src/plugins/seeker.js */28),n(/*! ./src/plugins/spawn.js */27),n(/*! ./src/plugins/steering.js */75),n(/*! ./src/plugins/thruster.js */29),n(/*! ./src/plugins/viewportCanvas.js */76),n(/*! ./src/plugins/viewportPixi.js */128),t.exports=n(/*! ./src/plugins/viewportWebGL.js */30)},/*!**********************************************************!*\
  !*** ./node_modules/core-js/library/fn/object/assign.js ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){n(/*! ../../modules/es6.object.assign */79),t.exports=n(/*! ../../modules/_core */6).Object.assign},/*!*******************************************************************!*\
  !*** ./node_modules/core-js/library/modules/es6.object.assign.js ***!
  \*******************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){var i=n(/*! ./_export */10);i(i.S+i.F,"Object",{assign:n(/*! ./_object-assign */81)})},/*!*************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_a-function.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},/*!****************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_object-assign.js ***!
  \****************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){"use strict";var i=n(/*! ./_object-keys */15),o=n(/*! ./_object-gops */50),r=n(/*! ./_object-pie */33),s=n(/*! ./_to-object */34),a=n(/*! ./_iobject */64),u=Object.assign;t.exports=!u||n(/*! ./_fails */24)(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=i})?function(t,e){for(var n=s(t),u=arguments.length,l=1,c=o.f,h=r.f;u>l;)for(var d,f=a(arguments[l++]),p=c?i(f).concat(c(f)):i(f),m=p.length,v=0;m>v;)h.call(f,d=p[v++])&&(n[d]=f[d]);return n}:u},/*!*****************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_array-includes.js ***!
  \*****************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){var i=n(/*! ./_to-iobject */11),o=n(/*! ./_to-length */65),r=n(/*! ./_to-absolute-index */83);t.exports=function(t){return function(e,n,s){var a,u=i(e),l=o(u.length),c=r(s,l);if(t&&n!=n){for(;l>c;)if((a=u[c++])!=a)return!0}else for(;l>c;c++)if((t||c in u)&&u[c]===n)return t||c||0;return!t&&-1}}},/*!********************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_to-absolute-index.js ***!
  \********************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){var i=n(/*! ./_to-integer */46),o=Math.max,r=Math.min;t.exports=function(t,e){return t=i(t),t<0?o(t+e,0):r(t,e)}},/*!**********************************************************************!*\
  !*** ./node_modules/babel-runtime/core-js/object/define-property.js ***!
  \**********************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){t.exports={default:n(/*! core-js/library/fn/object/define-property */85),__esModule:!0}},/*!*******************************************************************!*\
  !*** ./node_modules/core-js/library/fn/object/define-property.js ***!
  \*******************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){n(/*! ../../modules/es6.object.define-property */86);var i=n(/*! ../../modules/_core */6).Object;t.exports=function(t,e,n){return i.defineProperty(t,e,n)}},/*!****************************************************************************!*\
  !*** ./node_modules/core-js/library/modules/es6.object.define-property.js ***!
  \****************************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){var i=n(/*! ./_export */10);i(i.S+i.F*!n(/*! ./_descriptors */14),"Object",{defineProperty:n(/*! ./_object-dp */13).f})},/*!********************************************************************!*\
  !*** ./node_modules/core-js/library/fn/object/get-prototype-of.js ***!
  \********************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){n(/*! ../../modules/es6.object.get-prototype-of */88),t.exports=n(/*! ../../modules/_core */6).Object.getPrototypeOf},/*!*****************************************************************************!*\
  !*** ./node_modules/core-js/library/modules/es6.object.get-prototype-of.js ***!
  \*****************************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){var i=n(/*! ./_to-object */34),o=n(/*! ./_object-gpo */66);n(/*! ./_object-sap */51)("getPrototypeOf",function(){return function(t){return o(i(t))}})},/*!***************************************************************!*\
  !*** ./node_modules/babel-runtime/core-js/symbol/iterator.js ***!
  \***************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){t.exports={default:n(/*! core-js/library/fn/symbol/iterator */90),__esModule:!0}},/*!************************************************************!*\
  !*** ./node_modules/core-js/library/fn/symbol/iterator.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){n(/*! ../../modules/es6.string.iterator */68),n(/*! ../../modules/web.dom.iterable */95),t.exports=n(/*! ../../modules/_wks-ext */55).f("iterator")},/*!************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_string-at.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){var i=n(/*! ./_to-integer */46),o=n(/*! ./_defined */45);t.exports=function(t){return function(e,n){var r,s,a=String(o(e)),u=i(n),l=a.length;return u<0||u>=l?t?"":void 0:(r=a.charCodeAt(u),r<55296||r>56319||u+1===l||(s=a.charCodeAt(u+1))<56320||s>57343?t?a.charAt(u):r:t?a.slice(u,u+2):s-56320+(r-55296<<10)+65536)}}},/*!**************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_iter-create.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){"use strict";var i=n(/*! ./_object-create */53),o=n(/*! ./_property-desc */32),r=n(/*! ./_set-to-string-tag */54),s={};n(/*! ./_hide */22)(s,n(/*! ./_wks */9)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=i(s,{next:o(1,n)}),r(t,e+" Iterator")}},/*!*************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_object-dps.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){var i=n(/*! ./_object-dp */13),o=n(/*! ./_an-object */23),r=n(/*! ./_object-keys */15);t.exports=n(/*! ./_descriptors */14)?Object.defineProperties:function(t,e){o(t);for(var n,s=r(e),a=s.length,u=0;a>u;)i.f(t,n=s[u++],e[n]);return t}},/*!*******************************************************!*\
  !*** ./node_modules/core-js/library/modules/_html.js ***!
  \*******************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){var i=n(/*! ./_global */12).document;t.exports=i&&i.documentElement},/*!******************************************************************!*\
  !*** ./node_modules/core-js/library/modules/web.dom.iterable.js ***!
  \******************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){n(/*! ./es6.array.iterator */96);for(var i=n(/*! ./_global */12),o=n(/*! ./_hide */22),r=n(/*! ./_iterators */36),s=n(/*! ./_wks */9)("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<a.length;u++){var l=a[u],c=i[l],h=c&&c.prototype;h&&!h[s]&&o(h,s,l),r[l]=r.Array}},/*!********************************************************************!*\
  !*** ./node_modules/core-js/library/modules/es6.array.iterator.js ***!
  \********************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){"use strict";var i=n(/*! ./_add-to-unscopables */97),o=n(/*! ./_iter-step */98),r=n(/*! ./_iterators */36),s=n(/*! ./_to-iobject */11);t.exports=n(/*! ./_iter-define */69)(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,o(1)):"keys"==e?o(0,n):"values"==e?o(0,t[n]):o(0,[n,t[n]])},"values"),r.Arguments=r.Array,i("keys"),i("values"),i("entries")},/*!*********************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_add-to-unscopables.js ***!
  \*********************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e){t.exports=function(){}},/*!************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_iter-step.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},/*!******************************************************!*\
  !*** ./node_modules/babel-runtime/core-js/symbol.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){t.exports={default:n(/*! core-js/library/fn/symbol */100),__esModule:!0}},/*!*********************************************************!*\
  !*** ./node_modules/core-js/library/fn/symbol/index.js ***!
  \*********************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){n(/*! ../../modules/es6.symbol */101),n(/*! ../../modules/es6.object.to-string */107),n(/*! ../../modules/es7.symbol.async-iterator */108),n(/*! ../../modules/es7.symbol.observable */109),t.exports=n(/*! ../../modules/_core */6).Symbol},/*!************************************************************!*\
  !*** ./node_modules/core-js/library/modules/es6.symbol.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){"use strict";var i=n(/*! ./_global */12),o=n(/*! ./_has */16),r=n(/*! ./_descriptors */14),s=n(/*! ./_export */10),a=n(/*! ./_redefine */70),u=n(/*! ./_meta */102).KEY,l=n(/*! ./_fails */24),c=n(/*! ./_shared */48),h=n(/*! ./_set-to-string-tag */54),d=n(/*! ./_uid */41),f=n(/*! ./_wks */9),p=n(/*! ./_wks-ext */55),m=n(/*! ./_wks-define */56),v=n(/*! ./_keyof */103),y=n(/*! ./_enum-keys */104),g=n(/*! ./_is-array */105),_=n(/*! ./_an-object */23),b=n(/*! ./_to-iobject */11),w=n(/*! ./_to-primitive */43),x=n(/*! ./_property-desc */32),S=n(/*! ./_object-create */53),k=n(/*! ./_object-gopn-ext */106),C=n(/*! ./_object-gopd */57),E=n(/*! ./_object-dp */13),M=n(/*! ./_object-keys */15),T=C.f,A=E.f,P=k.f,O=i.Symbol,R=i.JSON,z=R&&R.stringify,I=f("_hidden"),N=f("toPrimitive"),L={}.propertyIsEnumerable,D=c("symbol-registry"),j=c("symbols"),B=c("op-symbols"),F=Object.prototype,H="function"==typeof O,V=i.QObject,W=!V||!V.prototype||!V.prototype.findChild,G=r&&l(function(){return 7!=S(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=T(F,e);i&&delete F[e],A(t,e,n),i&&t!==F&&A(F,e,i)}:A,X=function(t){var e=j[t]=S(O.prototype);return e._k=t,e},Y=H&&"symbol"==typeof O.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof O},U=function(t,e,n){return t===F&&U(B,e,n),_(t),e=w(e,!0),_(n),o(j,e)?(n.enumerable?(o(t,I)&&t[I][e]&&(t[I][e]=!1),n=S(n,{enumerable:x(0,!1)})):(o(t,I)||A(t,I,x(1,{})),t[I][e]=!0),G(t,e,n)):A(t,e,n)},q=function(t,e){_(t);for(var n,i=y(e=b(e)),o=0,r=i.length;r>o;)U(t,n=i[o++],e[n]);return t},K=function(t,e){return void 0===e?S(t):q(S(t),e)},J=function(t){var e=L.call(this,t=w(t,!0));return!(this===F&&o(j,t)&&!o(B,t))&&(!(e||!o(this,t)||!o(j,t)||o(this,I)&&this[I][t])||e)},Q=function(t,e){if(t=b(t),e=w(e,!0),t!==F||!o(j,e)||o(B,e)){var n=T(t,e);return!n||!o(j,e)||o(t,I)&&t[I][e]||(n.enumerable=!0),n}},Z=function(t){for(var e,n=P(b(t)),i=[],r=0;n.length>r;)o(j,e=n[r++])||e==I||e==u||i.push(e);return i},$=function(t){for(var e,n=t===F,i=P(n?B:b(t)),r=[],s=0;i.length>s;)!o(j,e=i[s++])||n&&!o(F,e)||r.push(j[e]);return r};H||(O=function(){if(this instanceof O)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0),e=function(n){this===F&&e.call(B,n),o(this,I)&&o(this[I],t)&&(this[I][t]=!1),G(this,t,x(1,n))};return r&&W&&G(F,t,{configurable:!0,set:e}),X(t)},a(O.prototype,"toString",function(){return this._k}),C.f=Q,E.f=U,n(/*! ./_object-gopn */71).f=k.f=Z,n(/*! ./_object-pie */33).f=J,n(/*! ./_object-gops */50).f=$,r&&!n(/*! ./_library */52)&&a(F,"propertyIsEnumerable",J,!0),p.f=function(t){return X(f(t))}),s(s.G+s.W+s.F*!H,{Symbol:O});for(var tt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;tt.length>et;)f(tt[et++]);for(var nt=M(f.store),it=0;nt.length>it;)m(nt[it++]);s(s.S+s.F*!H,"Symbol",{for:function(t){return o(D,t+="")?D[t]:D[t]=O(t)},keyFor:function(t){if(Y(t))return v(D,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){W=!0},useSimple:function(){W=!1}}),s(s.S+s.F*!H,"Object",{create:K,defineProperty:U,defineProperties:q,getOwnPropertyDescriptor:Q,getOwnPropertyNames:Z,getOwnPropertySymbols:$}),R&&s(s.S+s.F*(!H||l(function(){var t=O();return"[null]"!=z([t])||"{}"!=z({a:t})||"{}"!=z(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!Y(t)){for(var e,n,i=[t],o=1;arguments.length>o;)i.push(arguments[o++]);return e=i[1],"function"==typeof e&&(n=e),!n&&g(e)||(e=function(t,e){if(n&&(e=n.call(this,t,e)),!Y(e))return e}),i[1]=e,z.apply(R,i)}}}),O.prototype[N]||n(/*! ./_hide */22)(O.prototype,N,O.prototype.valueOf),h(O,"Symbol"),h(Math,"Math",!0),h(i.JSON,"JSON",!0)},/*!*******************************************************!*\
  !*** ./node_modules/core-js/library/modules/_meta.js ***!
  \*******************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){var i=n(/*! ./_uid */41)("meta"),o=n(/*! ./_is-object */31),r=n(/*! ./_has */16),s=n(/*! ./_object-dp */13).f,a=0,u=Object.isExtensible||function(){return!0},l=!n(/*! ./_fails */24)(function(){return u(Object.preventExtensions({}))}),c=function(t){s(t,i,{value:{i:"O"+ ++a,w:{}}})},h=function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!r(t,i)){if(!u(t))return"F";if(!e)return"E";c(t)}return t[i].i},d=function(t,e){if(!r(t,i)){if(!u(t))return!0;if(!e)return!1;c(t)}return t[i].w},f=function(t){return l&&p.NEED&&u(t)&&!r(t,i)&&c(t),t},p=t.exports={KEY:i,NEED:!1,fastKey:h,getWeak:d,onFreeze:f}},/*!********************************************************!*\
  !*** ./node_modules/core-js/library/modules/_keyof.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){var i=n(/*! ./_object-keys */15),o=n(/*! ./_to-iobject */11);t.exports=function(t,e){for(var n,r=o(t),s=i(r),a=s.length,u=0;a>u;)if(r[n=s[u++]]===e)return n}},/*!************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_enum-keys.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){var i=n(/*! ./_object-keys */15),o=n(/*! ./_object-gops */50),r=n(/*! ./_object-pie */33);t.exports=function(t){var e=i(t),n=o.f;if(n)for(var s,a=n(t),u=r.f,l=0;a.length>l;)u.call(t,s=a[l++])&&e.push(s);return e}},/*!***********************************************************!*\
  !*** ./node_modules/core-js/library/modules/_is-array.js ***!
  \***********************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){var i=n(/*! ./_cof */44);t.exports=Array.isArray||function(t){return"Array"==i(t)}},/*!******************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_object-gopn-ext.js ***!
  \******************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){var i=n(/*! ./_to-iobject */11),o=n(/*! ./_object-gopn */71).f,r={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(t){try{return o(t)}catch(t){return s.slice()}};t.exports.f=function(t){return s&&"[object Window]"==r.call(t)?a(t):o(i(t))}},/*!**********************************************************************!*\
  !*** ./node_modules/core-js/library/modules/es6.object.to-string.js ***!
  \**********************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e){},/*!***************************************************************************!*\
  !*** ./node_modules/core-js/library/modules/es7.symbol.async-iterator.js ***!
  \***************************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){n(/*! ./_wks-define */56)("asyncIterator")},/*!***********************************************************************!*\
  !*** ./node_modules/core-js/library/modules/es7.symbol.observable.js ***!
  \***********************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){n(/*! ./_wks-define */56)("observable")},/*!***********************************************************************!*\
  !*** ./node_modules/babel-runtime/core-js/object/set-prototype-of.js ***!
  \***********************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){t.exports={default:n(/*! core-js/library/fn/object/set-prototype-of */111),__esModule:!0}},/*!********************************************************************!*\
  !*** ./node_modules/core-js/library/fn/object/set-prototype-of.js ***!
  \********************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){n(/*! ../../modules/es6.object.set-prototype-of */112),t.exports=n(/*! ../../modules/_core */6).Object.setPrototypeOf},/*!*****************************************************************************!*\
  !*** ./node_modules/core-js/library/modules/es6.object.set-prototype-of.js ***!
  \*****************************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){var i=n(/*! ./_export */10);i(i.S,"Object",{setPrototypeOf:n(/*! ./_set-proto */113).set})},/*!************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_set-proto.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){var i=n(/*! ./_is-object */31),o=n(/*! ./_an-object */23),r=function(t,e){if(o(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{i=n(/*! ./_ctx */42)(Function.call,n(/*! ./_object-gopd */57).f(Object.prototype,"__proto__").set,2),i(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return r(t,n),e?t.__proto__=n:i(t,n),t}}({},!1):void 0),check:r}},/*!*************************************************************!*\
  !*** ./node_modules/babel-runtime/core-js/object/create.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){t.exports={default:n(/*! core-js/library/fn/object/create */115),__esModule:!0}},/*!**********************************************************!*\
  !*** ./node_modules/core-js/library/fn/object/create.js ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){n(/*! ../../modules/es6.object.create */116);var i=n(/*! ../../modules/_core */6).Object;t.exports=function(t,e){return i.create(t,e)}},/*!*******************************************************************!*\
  !*** ./node_modules/core-js/library/modules/es6.object.create.js ***!
  \*******************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){var i=n(/*! ./_export */10);i(i.S,"Object",{create:n(/*! ./_object-create */53)})},/*!**********************************************************************************!*\
  !*** ./node_modules/babel-runtime/core-js/object/get-own-property-descriptor.js ***!
  \**********************************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){t.exports={default:n(/*! core-js/library/fn/object/get-own-property-descriptor */118),__esModule:!0}},/*!*******************************************************************************!*\
  !*** ./node_modules/core-js/library/fn/object/get-own-property-descriptor.js ***!
  \*******************************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){n(/*! ../../modules/es6.object.get-own-property-descriptor */119);var i=n(/*! ../../modules/_core */6).Object;t.exports=function(t,e){return i.getOwnPropertyDescriptor(t,e)}},/*!****************************************************************************************!*\
  !*** ./node_modules/core-js/library/modules/es6.object.get-own-property-descriptor.js ***!
  \****************************************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){var i=n(/*! ./_to-iobject */11),o=n(/*! ./_object-gopd */57).f;n(/*! ./_object-sap */51)("getOwnPropertyDescriptor",function(){return function(t,e){return o(i(t),e)}})},/*!*****************************!*\
  !*** ./src/lib/QuadTree.js ***!
  \*****************************/
/*! exports provided: default */
/*! exports used: default */
function(t,e,n){"use strict";/**
 * @author       Timo Hausmann
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2014 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */
function i(t,e,n,i,o,r,s,a){this.maxObjects=10,this.maxLevels=4,this.level=0,this.bounds={},this.objects=[],this.nodes=[],this._empty=[],this.root=a||this,this.entityMap={},this.reset(t,e,n,i,o,r,s)}e.a=i,i.prototype={reset:function(t,e,n,i,o,r,s){this.maxObjects=o||10,this.maxLevels=r||4,this.level=s||0,this.bounds={width:n,height:i,subWidth:Math.floor(n/2),subHeight:Math.floor(i/2),left:Math.round(t),top:Math.round(e),midX:Math.round(t+n/2),midY:Math.round(e+i/2),right:Math.round(t+n),bottom:Math.round(e+i)},this.objects.length=0,this.nodes.length=0},split:function(){this.nodes[0]=new i(this.bounds.left+this.bounds.subWidth,this.bounds.top,this.bounds.subWidth,this.bounds.subHeight,this.maxObjects,this.maxLevels,this.level+1,this.root),this.nodes[1]=new i(this.bounds.left,this.bounds.top,this.bounds.subWidth,this.bounds.subHeight,this.maxObjects,this.maxLevels,this.level+1,this.root),this.nodes[2]=new i(this.bounds.left,this.bounds.top+this.bounds.subHeight,this.bounds.subWidth,this.bounds.subHeight,this.maxObjects,this.maxLevels,this.level+1,this.root),this.nodes[3]=new i(this.bounds.left+this.bounds.subWidth,this.bounds.top+this.bounds.subHeight,this.bounds.subWidth,this.bounds.subHeight,this.maxObjects,this.maxLevels,this.level+1,this.root)},insert:function(t){var e,n=0;if(null!=this.nodes[0]&&-1!==(e=this.getIndex(t)))return void this.nodes[e].insert(t);var i=this.root.entityMap[t.entityId];if(i!==this){if(i){var o=i.objects.indexOf(t);-1!==o&&i.objects.splice(o,1)}if(this.objects.push(t),this.objects.length>this.maxObjects&&this.level<this.maxLevels)for(null==this.nodes[0]&&this.split();n<this.objects.length;)e=this.getIndex(this.objects[n]),-1!==e?this.nodes[e].insert(this.objects.splice(n,1)[0]):n++}},getIndex:function(t){if(t.left<this.bounds.midX&&t.right<this.bounds.midX){if(t.top<this.bounds.midY&&t.bottom<this.bounds.midY)return 1;if(t.top>this.bounds.midY)return 2}else if(t.left>this.bounds.midX){if(t.top<this.bounds.midY&&t.bottom<this.bounds.midY)return 0;if(t.top>this.bounds.midY)return 3}return-1},iterate:function(t,e,n){for(var i=this.getIndex(t),o=0;o<this.objects.length;o++)e(this.objects[o],n);this.nodes[0]&&(-1!==i?this.nodes[i].iterate(t,e,n):(this.nodes[0].iterate(t,e,n),this.nodes[1].iterate(t,e,n),this.nodes[2].iterate(t,e,n),this.nodes[3].iterate(t,e,n)))},clear:function(){this.objects.length=0;for(var t=this.nodes.length;t--;)this.nodes[t].clear(),this.nodes.splice(t,1);this.nodes.length=0}}},/*!***************************************!*\
  !*** ./node_modules/dat-gui/index.js ***!
  \***************************************/
/*! no static exports found */
/*! exports used: default */
function(t,e,n){t.exports=n(/*! ./vendor/dat.gui */122),t.exports.color=n(/*! ./vendor/dat.color */123)},/*!************************************************!*\
  !*** ./node_modules/dat-gui/vendor/dat.gui.js ***!
  \************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e){var n=t.exports=n||{};n.gui=n.gui||{},n.utils=n.utils||{},n.controllers=n.controllers||{},n.dom=n.dom||{},n.color=n.color||{},n.utils.css=function(){return{load:function(t,e){e=e||document;var n=e.createElement("link");n.type="text/css",n.rel="stylesheet",n.href=t,e.getElementsByTagName("head")[0].appendChild(n)},inject:function(t,e){e=e||document;var n=document.createElement("style");n.type="text/css",n.innerHTML=t,e.getElementsByTagName("head")[0].appendChild(n)}}}(),n.utils.common=function(){var t=Array.prototype.forEach,e=Array.prototype.slice;return{BREAK:{},extend:function(t){return this.each(e.call(arguments,1),function(e){for(var n in e)this.isUndefined(e[n])||(t[n]=e[n])},this),t},defaults:function(t){return this.each(e.call(arguments,1),function(e){for(var n in e)this.isUndefined(t[n])&&(t[n]=e[n])},this),t},compose:function(){var t=e.call(arguments);return function(){for(var n=e.call(arguments),i=t.length-1;i>=0;i--)n=[t[i].apply(this,n)];return n[0]}},each:function(e,n,i){if(t&&e.forEach===t)e.forEach(n,i);else if(e.length===e.length+0){for(var o=0,r=e.length;o<r;o++)if(o in e&&n.call(i,e[o],o)===this.BREAK)return}else for(var o in e)if(n.call(i,e[o],o)===this.BREAK)return},defer:function(t){setTimeout(t,0)},toArray:function(t){return t.toArray?t.toArray():e.call(t)},isUndefined:function(t){return void 0===t},isNull:function(t){return null===t},isNaN:function(t){return t!==t},isArray:Array.isArray||function(t){return t.constructor===Array},isObject:function(t){return t===Object(t)},isNumber:function(t){return t===t+0},isString:function(t){return t===t+""},isBoolean:function(t){return!1===t||!0===t},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)}}}(),n.controllers.Controller=function(t){var e=function(t,e){this.initialValue=t[e],this.domElement=document.createElement("div"),this.object=t,this.property=e,this.__onChange=void 0,this.__onFinishChange=void 0};return t.extend(e.prototype,{onChange:function(t){return this.__onChange=t,this},onFinishChange:function(t){return this.__onFinishChange=t,this},setValue:function(t){return this.object[this.property]=t,this.__onChange&&this.__onChange.call(this,t),this.updateDisplay(),this},getValue:function(){return this.object[this.property]},updateDisplay:function(){return this},isModified:function(){return this.initialValue!==this.getValue()}}),e}(n.utils.common),n.dom.dom=function(t){function e(e){if("0"===e||t.isUndefined(e))return 0;var n=e.match(o);return t.isNull(n)?0:parseFloat(n[1])}var n={HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},i={};t.each(n,function(e,n){t.each(e,function(t){i[t]=n})});var o=/(\d+(\.\d+)?)px/,r={makeSelectable:function(t,e){void 0!==t&&void 0!==t.style&&(t.onselectstart=e?function(){return!1}:function(){},t.style.MozUserSelect=e?"auto":"none",t.style.KhtmlUserSelect=e?"auto":"none",t.unselectable=e?"on":"off")},makeFullscreen:function(e,n,i){t.isUndefined(n)&&(n=!0),t.isUndefined(i)&&(i=!0),e.style.position="absolute",n&&(e.style.left=0,e.style.right=0),i&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,n,o,r){o=o||{};var s=i[n];if(!s)throw new Error("Event type "+n+" not supported.");var a=document.createEvent(s);switch(s){case"MouseEvents":var u=o.x||o.clientX||0,l=o.y||o.clientY||0;a.initMouseEvent(n,o.bubbles||!1,o.cancelable||!0,window,o.clickCount||1,0,0,u,l,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var c=a.initKeyboardEvent||a.initKeyEvent;t.defaults(o,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),c(n,o.bubbles||!1,o.cancelable,window,o.ctrlKey,o.altKey,o.shiftKey,o.metaKey,o.keyCode,o.charCode);break;default:a.initEvent(n,o.bubbles||!1,o.cancelable||!0)}t.defaults(a,r),e.dispatchEvent(a)},bind:function(t,e,n,i){return i=i||!1,t.addEventListener?t.addEventListener(e,n,i):t.attachEvent&&t.attachEvent("on"+e,n),r},unbind:function(t,e,n,i){return i=i||!1,t.removeEventListener?t.removeEventListener(e,n,i):t.detachEvent&&t.detachEvent("on"+e,n),r},addClass:function(t,e){if(void 0===t.className)t.className=e;else if(t.className!==e){var n=t.className.split(/ +/);-1==n.indexOf(e)&&(n.push(e),t.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return r},removeClass:function(t,e){if(e)if(void 0===t.className);else if(t.className===e)t.removeAttribute("class");else{var n=t.className.split(/ +/),i=n.indexOf(e);-1!=i&&(n.splice(i,1),t.className=n.join(" "))}else t.className=void 0;return r},hasClass:function(t,e){return new RegExp("(?:^|\\s+)"+e+"(?:\\s+|$)").test(t.className)||!1},getWidth:function(t){var n=getComputedStyle(t);return e(n["border-left-width"])+e(n["border-right-width"])+e(n["padding-left"])+e(n["padding-right"])+e(n.width)},getHeight:function(t){var n=getComputedStyle(t);return e(n["border-top-width"])+e(n["border-bottom-width"])+e(n["padding-top"])+e(n["padding-bottom"])+e(n.height)},getOffset:function(t){var e={left:0,top:0};if(t.offsetParent)do{e.left+=t.offsetLeft,e.top+=t.offsetTop}while(t=t.offsetParent);return e},isActive:function(t){return t===document.activeElement&&(t.type||t.href)}};return r}(n.utils.common),n.controllers.OptionController=function(t,e,n){var i=function(t,o,r){i.superclass.call(this,t,o);var s=this;if(this.__select=document.createElement("select"),n.isArray(r)){var a={};n.each(r,function(t){a[t]=t}),r=a}n.each(r,function(t,e){var n=document.createElement("option");n.innerHTML=e,n.setAttribute("value",t),s.__select.appendChild(n)}),this.updateDisplay(),e.bind(this.__select,"change",function(){var t=this.options[this.selectedIndex].value;s.setValue(t)}),this.domElement.appendChild(this.__select)};return i.superclass=t,n.extend(i.prototype,t.prototype,{setValue:function(t){var e=i.superclass.prototype.setValue.call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),e},updateDisplay:function(){return this.__select.value=this.getValue(),i.superclass.prototype.updateDisplay.call(this)}}),i}(n.controllers.Controller,n.dom.dom,n.utils.common),n.controllers.NumberController=function(t,e){function n(t){return t=t.toString(),t.indexOf(".")>-1?t.length-t.indexOf(".")-1:0}var i=function(t,o,r){i.superclass.call(this,t,o),r=r||{},this.__min=r.min,this.__max=r.max,this.__step=r.step,e.isUndefined(this.__step)?0==this.initialValue?this.__impliedStep=1:this.__impliedStep=Math.pow(10,Math.floor(Math.log(this.initialValue)/Math.LN10))/10:this.__impliedStep=this.__step,this.__precision=n(this.__impliedStep)};return i.superclass=t,e.extend(i.prototype,t.prototype,{setValue:function(t){return void 0!==this.__min&&t<this.__min?t=this.__min:void 0!==this.__max&&t>this.__max&&(t=this.__max),void 0!==this.__step&&t%this.__step!=0&&(t=Math.round(t/this.__step)*this.__step),i.superclass.prototype.setValue.call(this,t)},min:function(t){return this.__min=t,this},max:function(t){return this.__max=t,this},step:function(t){return this.__step=t,this}}),i}(n.controllers.Controller,n.utils.common),n.controllers.NumberControllerBox=function(t,e,n){function i(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}var o=function(t,i,r){function s(){var t=parseFloat(d.__input.value);n.isNaN(t)||d.setValue(t)}function a(){s(),d.__onFinishChange&&d.__onFinishChange.call(d,d.getValue())}function u(t){e.bind(window,"mousemove",l),e.bind(window,"mouseup",c),h=t.clientY}function l(t){var e=h-t.clientY;d.setValue(d.getValue()+e*d.__impliedStep),h=t.clientY}function c(){e.unbind(window,"mousemove",l),e.unbind(window,"mouseup",c)}this.__truncationSuspended=!1,o.superclass.call(this,t,i,r);var h,d=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),e.bind(this.__input,"change",s),e.bind(this.__input,"blur",a),e.bind(this.__input,"mousedown",u),e.bind(this.__input,"keydown",function(t){13===t.keyCode&&(d.__truncationSuspended=!0,this.blur(),d.__truncationSuspended=!1)}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return o.superclass=t,n.extend(o.prototype,t.prototype,{updateDisplay:function(){return this.__input.value=this.__truncationSuspended?this.getValue():i(this.getValue(),this.__precision),o.superclass.prototype.updateDisplay.call(this)}}),o}(n.controllers.NumberController,n.dom.dom,n.utils.common),n.controllers.NumberControllerSlider=function(t,e,n,i,o){function r(t,e,n,i,o){return i+(t-e)/(n-e)*(o-i)}var s=function(t,n,i,o,a){function u(t){e.bind(window,"mousemove",l),e.bind(window,"mouseup",c),l(t)}function l(t){t.preventDefault();var n=e.getOffset(h.__background),i=e.getWidth(h.__background);return h.setValue(r(t.clientX,n.left,n.left+i,h.__min,h.__max)),!1}function c(){e.unbind(window,"mousemove",l),e.unbind(window,"mouseup",c),h.__onFinishChange&&h.__onFinishChange.call(h,h.getValue())}s.superclass.call(this,t,n,{min:i,max:o,step:a});var h=this;this.__background=document.createElement("div"),this.__foreground=document.createElement("div"),e.bind(this.__background,"mousedown",u),e.addClass(this.__background,"slider"),e.addClass(this.__foreground,"slider-fg"),this.updateDisplay(),this.__background.appendChild(this.__foreground),this.domElement.appendChild(this.__background)};return s.superclass=t,s.useDefaultStyles=function(){n.inject(".slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}")},i.extend(s.prototype,t.prototype,{updateDisplay:function(){var t=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*t+"%",s.superclass.prototype.updateDisplay.call(this)}}),s}(n.controllers.NumberController,n.dom.dom,n.utils.css,n.utils.common),n.controllers.FunctionController=function(t,e,n){var i=function(t,n,o){i.superclass.call(this,t,n);var r=this;this.__button=document.createElement("div"),this.__button.innerHTML=void 0===o?"Fire":o,e.bind(this.__button,"click",function(t){return t.preventDefault(),r.fire(),!1}),e.addClass(this.__button,"button"),this.domElement.appendChild(this.__button)};return i.superclass=t,n.extend(i.prototype,t.prototype,{fire:function(){this.__onChange&&this.__onChange.call(this),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.getValue().call(this.object)}}),i}(n.controllers.Controller,n.dom.dom,n.utils.common),n.controllers.BooleanController=function(t,e,n){var i=function(t,n){function o(){r.setValue(!r.__prev)}i.superclass.call(this,t,n);var r=this;this.__prev=this.getValue(),this.__checkbox=document.createElement("input"),this.__checkbox.setAttribute("type","checkbox"),e.bind(this.__checkbox,"change",o,!1),this.domElement.appendChild(this.__checkbox),this.updateDisplay()};return i.superclass=t,n.extend(i.prototype,t.prototype,{setValue:function(t){var e=i.superclass.prototype.setValue.call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),e},updateDisplay:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0):this.__checkbox.checked=!1,i.superclass.prototype.updateDisplay.call(this)}}),i}(n.controllers.Controller,n.dom.dom,n.utils.common),n.color.toString=function(t){return function(e){if(1==e.a||t.isUndefined(e.a)){for(var n=e.hex.toString(16);n.length<6;)n="0"+n;return"#"+n}return"rgba("+Math.round(e.r)+","+Math.round(e.g)+","+Math.round(e.b)+","+e.a+")"}}(n.utils.common),n.color.interpret=function(t,e){var n,i,o=function(){i=!1;var t=arguments.length>1?e.toArray(arguments):arguments[0];return e.each(r,function(o){if(o.litmus(t))return e.each(o.conversions,function(o,r){if(n=o.read(t),!1===i&&!1!==n)return i=n,n.conversionName=r,n.conversion=o,e.BREAK}),e.BREAK}),i},r=[{litmus:e.isString,conversions:{THREE_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString())}},write:t},SIX_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9]{6})$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString())}},write:t},CSS_RGB:{read:function(t){var e=t.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:t},CSS_RGBA:{read:function(t){var e=t.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:t}}},{litmus:e.isNumber,conversions:{HEX:{read:function(t){return{space:"HEX",hex:t,conversionName:"HEX"}},write:function(t){return t.hex}}}},{litmus:e.isArray,conversions:{RGB_ARRAY:{read:function(t){return 3==t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2]}},write:function(t){return[t.r,t.g,t.b]}},RGBA_ARRAY:{read:function(t){return 4==t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2],a:t[3]}},write:function(t){return[t.r,t.g,t.b,t.a]}}}},{litmus:e.isObject,conversions:{RGBA_OBJ:{read:function(t){return!!(e.isNumber(t.r)&&e.isNumber(t.g)&&e.isNumber(t.b)&&e.isNumber(t.a))&&{space:"RGB",r:t.r,g:t.g,b:t.b,a:t.a}},write:function(t){return{r:t.r,g:t.g,b:t.b,a:t.a}}},RGB_OBJ:{read:function(t){return!!(e.isNumber(t.r)&&e.isNumber(t.g)&&e.isNumber(t.b))&&{space:"RGB",r:t.r,g:t.g,b:t.b}},write:function(t){return{r:t.r,g:t.g,b:t.b}}},HSVA_OBJ:{read:function(t){return!!(e.isNumber(t.h)&&e.isNumber(t.s)&&e.isNumber(t.v)&&e.isNumber(t.a))&&{space:"HSV",h:t.h,s:t.s,v:t.v,a:t.a}},write:function(t){return{h:t.h,s:t.s,v:t.v,a:t.a}}},HSV_OBJ:{read:function(t){return!!(e.isNumber(t.h)&&e.isNumber(t.s)&&e.isNumber(t.v))&&{space:"HSV",h:t.h,s:t.s,v:t.v}},write:function(t){return{h:t.h,s:t.s,v:t.v}}}}}];return o}(n.color.toString,n.utils.common),n.GUI=n.gui.GUI=function(t,e,n,i,o,r,s,a,u,l,c,h,d,f,p){function m(t,e,n,r){if(void 0===e[n])throw new Error("Object "+e+' has no property "'+n+'"');var s;if(r.color)s=new c(e,n);else{var a=[e,n].concat(r.factoryArgs);s=i.apply(t,a)}r.before instanceof o&&(r.before=r.before.__li),g(t,s),f.addClass(s.domElement,"c");var u=document.createElement("span");f.addClass(u,"property-name"),u.innerHTML=s.property;var l=document.createElement("div");l.appendChild(u),l.appendChild(s.domElement);var h=v(t,l,r.before);return f.addClass(h,N.CLASS_CONTROLLER_ROW),f.addClass(h,typeof s.getValue()),y(t,h,s),t.__controllers.push(s),s}function v(t,e,n){var i=document.createElement("li");return e&&i.appendChild(e),n?t.__ul.insertBefore(i,params.before):t.__ul.appendChild(i),t.onResize(),i}function y(t,e,n){if(n.__li=e,n.__gui=t,p.extend(n,{options:function(e){return arguments.length>1?(n.remove(),m(t,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[p.toArray(arguments)]})):p.isArray(e)||p.isObject(e)?(n.remove(),m(t,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[e]})):void 0},name:function(t){return n.__li.firstElementChild.firstElementChild.innerHTML=t,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof u){var i=new a(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});p.each(["updateDisplay","onChange","onFinishChange"],function(t){var e=n[t],o=i[t];n[t]=i[t]=function(){var t=Array.prototype.slice.call(arguments);return e.apply(n,t),o.apply(i,t)}}),f.addClass(e,"has-slider"),n.domElement.insertBefore(i.domElement,n.domElement.firstElementChild)}else if(n instanceof a){var o=function(e){return p.isNumber(n.__min)&&p.isNumber(n.__max)?(n.remove(),m(t,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]})):e};n.min=p.compose(o,n.min),n.max=p.compose(o,n.max)}else n instanceof r?(f.bind(e,"click",function(){f.fakeEvent(n.__checkbox,"click")}),f.bind(n.__checkbox,"click",function(t){t.stopPropagation()})):n instanceof s?(f.bind(e,"click",function(){f.fakeEvent(n.__button,"click")}),f.bind(e,"mouseover",function(){f.addClass(n.__button,"hover")}),f.bind(e,"mouseout",function(){f.removeClass(n.__button,"hover")})):n instanceof c&&(f.addClass(e,"color"),n.updateDisplay=p.compose(function(t){return e.style.borderLeftColor=n.__color.toString(),t},n.updateDisplay),n.updateDisplay());n.setValue=p.compose(function(e){return t.getRoot().__preset_select&&n.isModified()&&E(t.getRoot(),!0),e},n.setValue)}function g(t,e){var n=t.getRoot(),i=n.__rememberedObjects.indexOf(e.object);if(-1!=i){var o=n.__rememberedObjectIndecesToControllers[i];if(void 0===o&&(o={},n.__rememberedObjectIndecesToControllers[i]=o),o[e.property]=e,n.load&&n.load.remembered){var r,s=n.load.remembered;if(s[t.preset])r=s[t.preset];else{if(!s[P])return;r=s[P]}if(r[i]&&void 0!==r[i][e.property]){var a=r[i][e.property];e.initialValue=a,e.setValue(a)}}}}function _(t,e){return document.location.href+"."+e}function b(t){function e(){l.style.display=t.useLocalStorage?"block":"none"}var n=t.__save_row=document.createElement("li");f.addClass(t.domElement,"has-save"),t.__ul.insertBefore(n,t.__ul.firstChild),f.addClass(n,"save-row");var i=document.createElement("span");i.innerHTML="&nbsp;",f.addClass(i,"button gears");var o=document.createElement("span");o.innerHTML="Save",f.addClass(o,"button"),f.addClass(o,"save");var r=document.createElement("span");r.innerHTML="New",f.addClass(r,"button"),f.addClass(r,"save-as");var s=document.createElement("span");s.innerHTML="Revert",f.addClass(s,"button"),f.addClass(s,"revert");var a=t.__preset_select=document.createElement("select");if(t.load&&t.load.remembered?p.each(t.load.remembered,function(e,n){k(t,n,n==t.preset)}):k(t,P,!1),f.bind(a,"change",function(){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].innerHTML=t.__preset_select[e].value;t.preset=this.value}),n.appendChild(a),n.appendChild(i),n.appendChild(o),n.appendChild(r),n.appendChild(s),O){var u=document.getElementById("dg-save-locally"),l=document.getElementById("dg-local-explain");u.style.display="block";var c=document.getElementById("dg-local-storage");"true"===localStorage.getItem(_(t,"isLocal"))&&c.setAttribute("checked","checked"),e(),f.bind(c,"change",function(){t.useLocalStorage=!t.useLocalStorage,e()})}var h=document.getElementById("dg-new-constructor");f.bind(h,"keydown",function(t){!t.metaKey||67!==t.which&&67!=t.keyCode||T.hide()}),f.bind(i,"click",function(){h.innerHTML=JSON.stringify(t.getSaveObject(),void 0,2),T.show(),h.focus(),h.select()}),f.bind(o,"click",function(){t.save()}),f.bind(r,"click",function(){var e=prompt("Enter a new preset name.");e&&t.saveAs(e)}),f.bind(s,"click",function(){t.revert()})}function w(t){function e(e){return e.preventDefault(),o=e.clientX,f.addClass(t.__closeButton,N.CLASS_DRAG),f.bind(window,"mousemove",n),f.bind(window,"mouseup",i),!1}function n(e){return e.preventDefault(),t.width+=o-e.clientX,t.onResize(),o=e.clientX,!1}function i(){f.removeClass(t.__closeButton,N.CLASS_DRAG),f.unbind(window,"mousemove",n),f.unbind(window,"mouseup",i)}t.__resize_handle=document.createElement("div"),p.extend(t.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});var o;f.bind(t.__resize_handle,"mousedown",e),f.bind(t.__closeButton,"mousedown",e),t.domElement.insertBefore(t.__resize_handle,t.domElement.firstElementChild)}function x(t,e){t.domElement.style.width=e+"px",t.__save_row&&t.autoPlace&&(t.__save_row.style.width=e+"px"),t.__closeButton&&(t.__closeButton.style.width=e+"px")}function S(t,e){var n={};return p.each(t.__rememberedObjects,function(i,o){var r={},s=t.__rememberedObjectIndecesToControllers[o];p.each(s,function(t,n){r[n]=e?t.initialValue:t.getValue()}),n[o]=r}),n}function k(t,e,n){var i=document.createElement("option");i.innerHTML=e,i.value=e,t.__preset_select.appendChild(i),n&&(t.__preset_select.selectedIndex=t.__preset_select.length-1)}function C(t){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].value==t.preset&&(t.__preset_select.selectedIndex=e)}function E(t,e){var n=t.__preset_select[t.__preset_select.selectedIndex];n.innerHTML=e?n.value+"*":n.value}function M(t){0!=t.length&&h(function(){M(t)}),p.each(t,function(t){t.updateDisplay()})}t.inject(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear;border:0;position:absolute;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-x:hidden}.dg.a.has-save ul{margin-top:27px}.dg.a.has-save ul.closed{margin-top:0}.dg.a .save-row{position:fixed;top:0;z-index:1002}.dg li{-webkit-transition:height 0.1s ease-out;-o-transition:height 0.1s ease-out;-moz-transition:height 0.1s ease-out;transition:height 0.1s ease-out}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;overflow:hidden;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li > *{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:9px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2fa1d6}.dg .cr.number input[type=text]{color:#2fa1d6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2fa1d6}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n");var T,A,P="Default",O=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(t){return!1}}(),R=!0,z=!1,I=[],N=function(t){function e(){localStorage.setItem(_(n,"gui"),JSON.stringify(n.getSaveObject()))}var n=this;this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),f.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],t=t||{},t=p.defaults(t,{autoPlace:!0,width:N.DEFAULT_WIDTH}),t=p.defaults(t,{resizable:t.autoPlace,hideable:t.autoPlace}),p.isUndefined(t.load)?t.load={preset:P}:t.preset&&(t.load.preset=t.preset),p.isUndefined(t.parent)&&t.hideable&&I.push(this),t.resizable=p.isUndefined(t.parent)&&t.resizable,t.autoPlace&&p.isUndefined(t.scrollable)&&(t.scrollable=!0);var i=O&&"true"===localStorage.getItem(_(this,"isLocal"));if(Object.defineProperties(this,{parent:{get:function(){return t.parent}},scrollable:{get:function(){return t.scrollable}},autoPlace:{get:function(){return t.autoPlace}},preset:{get:function(){return n.parent?n.getRoot().preset:t.load.preset},set:function(e){n.parent?n.getRoot().preset=e:t.load.preset=e,C(this),n.revert()}},width:{get:function(){return t.width},set:function(e){t.width=e,x(n,e)}},name:{get:function(){return t.name},set:function(e){t.name=e,r&&(r.innerHTML=t.name)}},closed:{get:function(){return t.closed},set:function(e){t.closed=e,t.closed?f.addClass(n.__ul,N.CLASS_CLOSED):f.removeClass(n.__ul,N.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=e?N.TEXT_OPEN:N.TEXT_CLOSED)}},load:{get:function(){return t.load}},useLocalStorage:{get:function(){return i},set:function(t){O&&(i=t,t?f.bind(window,"unload",e):f.unbind(window,"unload",e),localStorage.setItem(_(n,"isLocal"),t))}}}),p.isUndefined(t.parent)){if(t.closed=!1,f.addClass(this.domElement,N.CLASS_MAIN),f.makeSelectable(this.domElement,!1),O&&i){n.useLocalStorage=!0;var o=localStorage.getItem(_(this,"gui"));o&&(t.load=JSON.parse(o))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=N.TEXT_CLOSED,f.addClass(this.__closeButton,N.CLASS_CLOSE_BUTTON),this.domElement.appendChild(this.__closeButton),f.bind(this.__closeButton,"click",function(){n.closed=!n.closed})}else{void 0===t.closed&&(t.closed=!0);var r=document.createTextNode(t.name);f.addClass(r,"controller-name");var s=v(n,r),a=function(t){return t.preventDefault(),n.closed=!n.closed,!1};f.addClass(this.__ul,N.CLASS_CLOSED),f.addClass(s,"title"),f.bind(s,"click",a),t.closed||(this.closed=!1)}t.autoPlace&&(p.isUndefined(t.parent)&&(R&&(A=document.createElement("div"),f.addClass(A,"dg"),f.addClass(A,N.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(A),R=!1),A.appendChild(this.domElement),f.addClass(this.domElement,N.CLASS_AUTO_PLACE)),this.parent||x(n,t.width)),f.bind(window,"resize",function(){n.onResize()}),f.bind(this.__ul,"webkitTransitionEnd",function(){n.onResize()}),f.bind(this.__ul,"transitionend",function(){n.onResize()}),f.bind(this.__ul,"oTransitionEnd",function(){n.onResize()}),this.onResize(),t.resizable&&w(this);n.getRoot();t.parent||function(){var t=n.getRoot();t.width+=1,p.defer(function(){t.width-=1})}()};return N.toggleHide=function(){z=!z,p.each(I,function(t){t.domElement.style.zIndex=z?-999:999,t.domElement.style.opacity=z?0:1})},N.CLASS_AUTO_PLACE="a",N.CLASS_AUTO_PLACE_CONTAINER="ac",N.CLASS_MAIN="main",N.CLASS_CONTROLLER_ROW="cr",N.CLASS_TOO_TALL="taller-than-window",N.CLASS_CLOSED="closed",N.CLASS_CLOSE_BUTTON="close-button",N.CLASS_DRAG="drag",N.DEFAULT_WIDTH=245,N.TEXT_CLOSED="Close Controls",N.TEXT_OPEN="Open Controls",f.bind(window,"keydown",function(t){"text"===document.activeElement.type||72!==t.which&&72!=t.keyCode||N.toggleHide()},!1),p.extend(N.prototype,{add:function(t,e){return m(this,t,e,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(t,e){return m(this,t,e,{color:!0})},remove:function(t){this.__ul.removeChild(t.__li),this.__controllers.slice(this.__controllers.indexOf(t),1);var e=this;p.defer(function(){e.onResize()})},destroy:function(){this.autoPlace&&A.removeChild(this.domElement)},addFolder:function(t){if(void 0!==this.__folders[t])throw new Error('You already have a folder in this GUI by the name "'+t+'"');var e={name:t,parent:this};e.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[t]&&(e.closed=this.load.folders[t].closed,e.load=this.load.folders[t]);var n=new N(e);this.__folders[t]=n;var i=v(this,n.domElement);return f.addClass(i,"folder"),n},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var t=this.getRoot();if(t.scrollable){var e=f.getOffset(t.__ul).top,n=0;p.each(t.__ul.childNodes,function(e){t.autoPlace&&e===t.__save_row||(n+=f.getHeight(e))}),window.innerHeight-e-20<n?(f.addClass(t.domElement,N.CLASS_TOO_TALL),t.__ul.style.height=window.innerHeight-e-20+"px"):(f.removeClass(t.domElement,N.CLASS_TOO_TALL),t.__ul.style.height="auto")}t.__resize_handle&&p.defer(function(){t.__resize_handle.style.height=t.__ul.offsetHeight+"px"}),t.__closeButton&&(t.__closeButton.style.width=t.width+"px")},remember:function(){if(p.isUndefined(T)&&(T=new d,T.domElement.innerHTML='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>'),this.parent)throw new Error("You can only call remember on a top level GUI.");var t=this;p.each(Array.prototype.slice.call(arguments),function(e){0==t.__rememberedObjects.length&&b(t),-1==t.__rememberedObjects.indexOf(e)&&t.__rememberedObjects.push(e)}),this.autoPlace&&x(this,this.width)},getRoot:function(){for(var t=this;t.parent;)t=t.parent;return t},getSaveObject:function(){var t=this.load;return t.closed=this.closed,this.__rememberedObjects.length>0&&(t.preset=this.preset,t.remembered||(t.remembered={}),t.remembered[this.preset]=S(this)),t.folders={},p.each(this.__folders,function(e,n){t.folders[n]=e.getSaveObject()}),t},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=S(this),E(this,!1)},saveAs:function(t){this.load.remembered||(this.load.remembered={},this.load.remembered[P]=S(this,!0)),this.load.remembered[t]=S(this),this.preset=t,k(this,t,!0)},revert:function(t){p.each(this.__controllers,function(e){this.getRoot().load.remembered?g(t||this.getRoot(),e):e.setValue(e.initialValue)},this),p.each(this.__folders,function(t){t.revert(t)}),t||E(this.getRoot(),!1)},listen:function(t){var e=0==this.__listening.length;this.__listening.push(t),e&&M(this.__listening)}}),N}(n.utils.css,0,0,n.controllers.factory=function(t,e,n,i,o,r,s){return function(a,u){var l=a[u];return s.isArray(arguments[2])||s.isObject(arguments[2])?new t(a,u,arguments[2]):s.isNumber(l)?s.isNumber(arguments[2])&&s.isNumber(arguments[3])?new n(a,u,arguments[2],arguments[3]):new e(a,u,{min:arguments[2],max:arguments[3]}):s.isString(l)?new i(a,u):s.isFunction(l)?new o(a,u,""):s.isBoolean(l)?new r(a,u):void 0}}(n.controllers.OptionController,n.controllers.NumberControllerBox,n.controllers.NumberControllerSlider,n.controllers.StringController=function(t,e,n){var i=function(t,n){function o(){s.setValue(s.__input.value)}function r(){s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}i.superclass.call(this,t,n);var s=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),e.bind(this.__input,"keyup",o),e.bind(this.__input,"change",o),e.bind(this.__input,"blur",r),e.bind(this.__input,"keydown",function(t){13===t.keyCode&&this.blur()}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return i.superclass=t,n.extend(i.prototype,t.prototype,{updateDisplay:function(){return e.isActive(this.__input)||(this.__input.value=this.getValue()),i.superclass.prototype.updateDisplay.call(this)}}),i}(n.controllers.Controller,n.dom.dom,n.utils.common),n.controllers.FunctionController,n.controllers.BooleanController,n.utils.common),n.controllers.Controller,n.controllers.BooleanController,n.controllers.FunctionController,n.controllers.NumberControllerBox,n.controllers.NumberControllerSlider,n.controllers.OptionController,n.controllers.ColorController=function(t,e,n,i,o){function r(t,e,n,i){t.style.background="",o.each(u,function(o){t.style.cssText+="background: "+o+"linear-gradient("+e+", "+n+" 0%, "+i+" 100%); "})}function s(t){t.style.background="",t.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",t.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var a=function(t,u){function l(t){f(t),e.bind(window,"mousemove",f),e.bind(window,"mouseup",c)}function c(){e.unbind(window,"mousemove",f),e.unbind(window,"mouseup",c)}function h(){var t=i(this.value);!1!==t?(m.__color.__state=t,m.setValue(m.__color.toOriginal())):this.value=m.__color.toString()}function d(){e.unbind(window,"mousemove",p),e.unbind(window,"mouseup",d)}function f(t){t.preventDefault();var n=e.getWidth(m.__saturation_field),i=e.getOffset(m.__saturation_field),o=(t.clientX-i.left+document.body.scrollLeft)/n,r=1-(t.clientY-i.top+document.body.scrollTop)/n;return r>1?r=1:r<0&&(r=0),o>1?o=1:o<0&&(o=0),m.__color.v=r,m.__color.s=o,m.setValue(m.__color.toOriginal()),!1}function p(t){t.preventDefault();var n=e.getHeight(m.__hue_field),i=e.getOffset(m.__hue_field),o=1-(t.clientY-i.top+document.body.scrollTop)/n;return o>1?o=1:o<0&&(o=0),m.__color.h=360*o,m.setValue(m.__color.toOriginal()),!1}a.superclass.call(this,t,u),this.__color=new n(this.getValue()),this.__temp=new n(0);var m=this;this.domElement=document.createElement("div"),e.makeSelectable(this.domElement,!1),this.__selector=document.createElement("div"),this.__selector.className="selector",this.__saturation_field=document.createElement("div"),this.__saturation_field.className="saturation-field",this.__field_knob=document.createElement("div"),this.__field_knob.className="field-knob",this.__field_knob_border="2px solid ",this.__hue_knob=document.createElement("div"),this.__hue_knob.className="hue-knob",this.__hue_field=document.createElement("div"),this.__hue_field.className="hue-field",this.__input=document.createElement("input"),this.__input.type="text",this.__input_textShadow="0 1px 1px ",e.bind(this.__input,"keydown",function(t){13===t.keyCode&&h.call(this)}),e.bind(this.__input,"blur",h),e.bind(this.__selector,"mousedown",function(t){e.addClass(this,"drag").bind(window,"mouseup",function(t){e.removeClass(m.__selector,"drag")})});var v=document.createElement("div");o.extend(this.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),o.extend(this.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:this.__field_knob_border+(this.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),o.extend(this.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),o.extend(this.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),o.extend(v.style,{width:"100%",height:"100%",background:"none"}),r(v,"top","rgba(0,0,0,0)","#000"),o.extend(this.__hue_field.style,{width:"15px",height:"100px",display:"inline-block",border:"1px solid #555",cursor:"ns-resize"}),s(this.__hue_field),o.extend(this.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:this.__input_textShadow+"rgba(0,0,0,0.7)"}),e.bind(this.__saturation_field,"mousedown",l),e.bind(this.__field_knob,"mousedown",l),e.bind(this.__hue_field,"mousedown",function(t){p(t),e.bind(window,"mousemove",p),e.bind(window,"mouseup",d)}),this.__saturation_field.appendChild(v),this.__selector.appendChild(this.__field_knob),this.__selector.appendChild(this.__saturation_field),this.__selector.appendChild(this.__hue_field),this.__hue_field.appendChild(this.__hue_knob),this.domElement.appendChild(this.__input),this.domElement.appendChild(this.__selector),this.updateDisplay()};a.superclass=t,o.extend(a.prototype,t.prototype,{updateDisplay:function(){var t=i(this.getValue());if(!1!==t){var e=!1;o.each(n.COMPONENTS,function(n){if(!o.isUndefined(t[n])&&!o.isUndefined(this.__color.__state[n])&&t[n]!==this.__color.__state[n])return e=!0,{}},this),e&&o.extend(this.__color.__state,t)}o.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var s=this.__color.v<.5||this.__color.s>.5?255:0,a=255-s;o.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toString(),border:this.__field_knob_border+"rgb("+s+","+s+","+s+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,r(this.__saturation_field,"left","#fff",this.__temp.toString()),o.extend(this.__input.style,{backgroundColor:this.__input.value=this.__color.toString(),color:"rgb("+s+","+s+","+s+")",textShadow:this.__input_textShadow+"rgba("+a+","+a+","+a+",.7)"})}});var u=["-moz-","-o-","-webkit-","-ms-",""];return a}(n.controllers.Controller,n.dom.dom,n.color.Color=function(t,e,n,i){function o(t,e,n){Object.defineProperty(t,e,{get:function(){return"RGB"===this.__state.space?this.__state[e]:(s(this,e,n),this.__state[e])},set:function(t){"RGB"!==this.__state.space&&(s(this,e,n),this.__state.space="RGB"),this.__state[e]=t}})}function r(t,e){Object.defineProperty(t,e,{get:function(){return"HSV"===this.__state.space?this.__state[e]:(a(this),this.__state[e])},set:function(t){"HSV"!==this.__state.space&&(a(this),this.__state.space="HSV"),this.__state[e]=t}})}function s(t,n,o){if("HEX"===t.__state.space)t.__state[n]=e.component_from_hex(t.__state.hex,o);else{if("HSV"!==t.__state.space)throw"Corrupted color state";i.extend(t.__state,e.hsv_to_rgb(t.__state.h,t.__state.s,t.__state.v))}}function a(t){var n=e.rgb_to_hsv(t.r,t.g,t.b);i.extend(t.__state,{s:n.s,v:n.v}),i.isNaN(n.h)?i.isUndefined(t.__state.h)&&(t.__state.h=0):t.__state.h=n.h}var u=function(){if(this.__state=t.apply(this,arguments),!1===this.__state)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};return u.COMPONENTS=["r","g","b","h","s","v","hex","a"],i.extend(u.prototype,{toString:function(){return n(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),o(u.prototype,"r",2),o(u.prototype,"g",1),o(u.prototype,"b",0),r(u.prototype,"h"),r(u.prototype,"s"),r(u.prototype,"v"),Object.defineProperty(u.prototype,"a",{get:function(){return this.__state.a},set:function(t){this.__state.a=t}}),Object.defineProperty(u.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=e.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(t){this.__state.space="HEX",this.__state.hex=t}}),u}(n.color.interpret,n.color.math=function(){var t;return{hsv_to_rgb:function(t,e,n){var i=Math.floor(t/60)%6,o=t/60-Math.floor(t/60),r=n*(1-e),s=n*(1-o*e),a=n*(1-(1-o)*e),u=[[n,a,r],[s,n,r],[r,n,a],[r,s,n],[a,r,n],[n,r,s]][i];return{r:255*u[0],g:255*u[1],b:255*u[2]}},rgb_to_hsv:function(t,e,n){var i,o,r=Math.min(t,e,n),s=Math.max(t,e,n),a=s-r;return 0==s?{h:NaN,s:0,v:0}:(o=a/s,i=t==s?(e-n)/a:e==s?2+(n-t)/a:4+(t-e)/a,i/=6,i<0&&(i+=1),{h:360*i,s:o,v:s/255})},rgb_to_hex:function(t,e,n){var i=this.hex_with_component(0,2,t);return i=this.hex_with_component(i,1,e),i=this.hex_with_component(i,0,n)},component_from_hex:function(t,e){return t>>8*e&255},hex_with_component:function(e,n,i){return i<<(t=8*n)|e&~(255<<t)}}}(),n.color.toString,n.utils.common),n.color.interpret,n.utils.common),n.utils.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){window.setTimeout(t,1e3/60)}}(),n.dom.CenteredDiv=function(t,e){var n=function(){this.backgroundElement=document.createElement("div"),e.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear"}),t.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),e.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var n=this;t.bind(this.backgroundElement,"click",function(){n.hide()})};return n.prototype.show=function(){var t=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),e.defer(function(){t.backgroundElement.style.opacity=1,t.domElement.style.opacity=1,t.domElement.style.webkitTransform="scale(1)"})},n.prototype.hide=function(){var e=this,n=function(){e.domElement.style.display="none",e.backgroundElement.style.display="none",t.unbind(e.domElement,"webkitTransitionEnd",n),t.unbind(e.domElement,"transitionend",n),t.unbind(e.domElement,"oTransitionEnd",n)};t.bind(this.domElement,"webkitTransitionEnd",n),t.bind(this.domElement,"transitionend",n),t.bind(this.domElement,"oTransitionEnd",n),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"},n.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-t.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-t.getHeight(this.domElement)/2+"px"},n}(n.dom.dom,n.utils.common),n.dom.dom,n.utils.common)},/*!**************************************************!*\
  !*** ./node_modules/dat-gui/vendor/dat.color.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e){var n=t.exports=n||{};n.color=n.color||{},n.utils=n.utils||{},n.utils.common=function(){var t=Array.prototype.forEach,e=Array.prototype.slice;return{BREAK:{},extend:function(t){return this.each(e.call(arguments,1),function(e){for(var n in e)this.isUndefined(e[n])||(t[n]=e[n])},this),t},defaults:function(t){return this.each(e.call(arguments,1),function(e){for(var n in e)this.isUndefined(t[n])&&(t[n]=e[n])},this),t},compose:function(){var t=e.call(arguments);return function(){for(var n=e.call(arguments),i=t.length-1;i>=0;i--)n=[t[i].apply(this,n)];return n[0]}},each:function(e,n,i){if(t&&e.forEach===t)e.forEach(n,i);else if(e.length===e.length+0){for(var o=0,r=e.length;o<r;o++)if(o in e&&n.call(i,e[o],o)===this.BREAK)return}else for(var o in e)if(n.call(i,e[o],o)===this.BREAK)return},defer:function(t){setTimeout(t,0)},toArray:function(t){return t.toArray?t.toArray():e.call(t)},isUndefined:function(t){return void 0===t},isNull:function(t){return null===t},isNaN:function(t){return t!==t},isArray:Array.isArray||function(t){return t.constructor===Array},isObject:function(t){return t===Object(t)},isNumber:function(t){return t===t+0},isString:function(t){return t===t+""},isBoolean:function(t){return!1===t||!0===t},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)}}}(),n.color.toString=function(t){return function(e){if(1==e.a||t.isUndefined(e.a)){for(var n=e.hex.toString(16);n.length<6;)n="0"+n;return"#"+n}return"rgba("+Math.round(e.r)+","+Math.round(e.g)+","+Math.round(e.b)+","+e.a+")"}}(n.utils.common),n.Color=n.color.Color=function(t,e,n,i){function o(t,e,n){Object.defineProperty(t,e,{get:function(){return"RGB"===this.__state.space?this.__state[e]:(s(this,e,n),this.__state[e])},set:function(t){"RGB"!==this.__state.space&&(s(this,e,n),this.__state.space="RGB"),this.__state[e]=t}})}function r(t,e){Object.defineProperty(t,e,{get:function(){return"HSV"===this.__state.space?this.__state[e]:(a(this),this.__state[e])},set:function(t){"HSV"!==this.__state.space&&(a(this),this.__state.space="HSV"),this.__state[e]=t}})}function s(t,n,o){if("HEX"===t.__state.space)t.__state[n]=e.component_from_hex(t.__state.hex,o);else{if("HSV"!==t.__state.space)throw"Corrupted color state";i.extend(t.__state,e.hsv_to_rgb(t.__state.h,t.__state.s,t.__state.v))}}function a(t){var n=e.rgb_to_hsv(t.r,t.g,t.b);i.extend(t.__state,{s:n.s,v:n.v}),i.isNaN(n.h)?i.isUndefined(t.__state.h)&&(t.__state.h=0):t.__state.h=n.h}var u=function(){if(this.__state=t.apply(this,arguments),!1===this.__state)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};return u.COMPONENTS=["r","g","b","h","s","v","hex","a"],i.extend(u.prototype,{toString:function(){return n(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),o(u.prototype,"r",2),o(u.prototype,"g",1),o(u.prototype,"b",0),r(u.prototype,"h"),r(u.prototype,"s"),r(u.prototype,"v"),Object.defineProperty(u.prototype,"a",{get:function(){return this.__state.a},set:function(t){this.__state.a=t}}),Object.defineProperty(u.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=e.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(t){this.__state.space="HEX",this.__state.hex=t}}),u}(n.color.interpret=function(t,e){var n,i,o=function(){i=!1;var t=arguments.length>1?e.toArray(arguments):arguments[0];return e.each(r,function(o){if(o.litmus(t))return e.each(o.conversions,function(o,r){if(n=o.read(t),!1===i&&!1!==n)return i=n,n.conversionName=r,n.conversion=o,e.BREAK}),e.BREAK}),i},r=[{litmus:e.isString,conversions:{THREE_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString())}},write:t},SIX_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9]{6})$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString())}},write:t},CSS_RGB:{read:function(t){var e=t.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:t},CSS_RGBA:{read:function(t){var e=t.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:t}}},{litmus:e.isNumber,conversions:{HEX:{read:function(t){return{space:"HEX",hex:t,conversionName:"HEX"}},write:function(t){return t.hex}}}},{litmus:e.isArray,conversions:{RGB_ARRAY:{read:function(t){return 3==t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2]}},write:function(t){return[t.r,t.g,t.b]}},RGBA_ARRAY:{read:function(t){return 4==t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2],a:t[3]}},write:function(t){return[t.r,t.g,t.b,t.a]}}}},{litmus:e.isObject,conversions:{RGBA_OBJ:{read:function(t){return!!(e.isNumber(t.r)&&e.isNumber(t.g)&&e.isNumber(t.b)&&e.isNumber(t.a))&&{space:"RGB",r:t.r,g:t.g,b:t.b,a:t.a}},write:function(t){return{r:t.r,g:t.g,b:t.b,a:t.a}}},RGB_OBJ:{read:function(t){return!!(e.isNumber(t.r)&&e.isNumber(t.g)&&e.isNumber(t.b))&&{space:"RGB",r:t.r,g:t.g,b:t.b}},write:function(t){return{r:t.r,g:t.g,b:t.b}}},HSVA_OBJ:{read:function(t){return!!(e.isNumber(t.h)&&e.isNumber(t.s)&&e.isNumber(t.v)&&e.isNumber(t.a))&&{space:"HSV",h:t.h,s:t.s,v:t.v,a:t.a}},write:function(t){return{h:t.h,s:t.s,v:t.v,a:t.a}}},HSV_OBJ:{read:function(t){return!!(e.isNumber(t.h)&&e.isNumber(t.s)&&e.isNumber(t.v))&&{space:"HSV",h:t.h,s:t.s,v:t.v}},write:function(t){return{h:t.h,s:t.s,v:t.v}}}}}];return o}(n.color.toString,n.utils.common),n.color.math=function(){var t;return{hsv_to_rgb:function(t,e,n){var i=Math.floor(t/60)%6,o=t/60-Math.floor(t/60),r=n*(1-e),s=n*(1-o*e),a=n*(1-(1-o)*e),u=[[n,a,r],[s,n,r],[r,n,a],[r,s,n],[a,r,n],[n,r,s]][i];return{r:255*u[0],g:255*u[1],b:255*u[2]}},rgb_to_hsv:function(t,e,n){var i,o,r=Math.min(t,e,n),s=Math.max(t,e,n),a=s-r;return 0==s?{h:NaN,s:0,v:0}:(o=a/s,i=t==s?(e-n)/a:e==s?2+(n-t)/a:4+(t-e)/a,i/=6,i<0&&(i+=1),{h:360*i,s:o,v:s/255})},rgb_to_hex:function(t,e,n){var i=this.hex_with_component(0,2,t);return i=this.hex_with_component(i,1,e),i=this.hex_with_component(i,0,n)},component_from_hex:function(t,e){return t>>8*e&255},hex_with_component:function(e,n,i){return i<<(t=8*n)|e&~(255<<t)}}}(),n.color.toString,n.utils.common)},/*!**************************************************!*\
  !*** ./node_modules/stats-js/build/stats.min.js ***!
  \**************************************************/
/*! no static exports found */
/*! exports used: default */
function(t,e){var n=function(){var t=Date.now(),e=t,n=0,i=1/0,o=0,r=0,s=1/0,a=0,u=0,l=0,c=document.createElement("div");c.id="stats",c.addEventListener("mousedown",function(t){t.preventDefault(),g(++l%2)},!1),c.style.cssText="width:80px;opacity:0.9;cursor:pointer";var h=document.createElement("div");h.id="fps",h.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",c.appendChild(h);var d=document.createElement("div");d.id="fpsText",d.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",d.innerHTML="FPS",h.appendChild(d);var f=document.createElement("div");for(f.id="fpsGraph",f.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff",h.appendChild(f);74>f.children.length;){var p=document.createElement("span");p.style.cssText="width:1px;height:30px;float:left;background-color:#113",f.appendChild(p)}var m=document.createElement("div");m.id="ms",m.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",c.appendChild(m);var v=document.createElement("div");v.id="msText",v.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",v.innerHTML="MS",m.appendChild(v);var y=document.createElement("div");for(y.id="msGraph",y.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",m.appendChild(y);74>y.children.length;)p=document.createElement("span"),p.style.cssText="width:1px;height:30px;float:left;background-color:#131",y.appendChild(p);var g=function(t){switch(l=t){case 0:h.style.display="block",m.style.display="none";break;case 1:h.style.display="none",m.style.display="block"}};return{REVISION:12,domElement:c,setMode:g,begin:function(){t=Date.now()},end:function(){var l=Date.now();n=l-t,i=Math.min(i,n),o=Math.max(o,n),v.textContent=n+" MS ("+i+"-"+o+")";var c=Math.min(30,30-n/200*30);return y.appendChild(y.firstChild).style.height=c+"px",u++,l>e+1e3&&(r=Math.round(1e3*u/(l-e)),s=Math.min(s,r),a=Math.max(a,r),d.textContent=r+" FPS ("+s+"-"+a+")",c=Math.min(30,30-r/100*30),f.appendChild(f.firstChild).style.height=c+"px",e=l,u=0),l},update:function(){t=this.end()}}};"object"==typeof t&&(t.exports=n)},/*!********************************************************!*\
  !*** ./node_modules/core-js/library/fn/object/keys.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){n(/*! ../../modules/es6.object.keys */126),t.exports=n(/*! ../../modules/_core */6).Object.keys},/*!*****************************************************************!*\
  !*** ./node_modules/core-js/library/modules/es6.object.keys.js ***!
  \*****************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){var i=n(/*! ./_to-object */34),o=n(/*! ./_object-keys */15);n(/*! ./_object-sap */51)("keys",function(){return function(t){return o(i(t))}})},/*!***************************************************!*\
  !*** ./node_modules/memory-stats/memory-stats.js ***!
  \***************************************************/
/*! no static exports found */
/*! exports used: default */
function(t,e){function n(){var t=100,e=0,n=document.createElement("div");n.id="stats",n.style.cssText="width:80px;opacity:0.9;cursor:pointer";var i=document.createElement("div");i.id="ms",i.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;",n.appendChild(i);var o=document.createElement("div");o.id="msText",o.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",o.innerHTML="Memory",i.appendChild(o);var r=document.createElement("div");for(r.id="msGraph",r.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",i.appendChild(r);r.children.length<74;){var s=document.createElement("span");s.style.cssText="width:1px;height:30px;float:left;background-color:#131",r.appendChild(s)}var a=function(t,e,n){var i=t.appendChild(t.firstChild);i.style.height=e+"px",n&&(i.style.backgroundColor=n)};window.performance&&!performance.memory&&(performance.memory={usedJSHeapSize:0}),0===performance.memory.totalJSHeapSize&&console.warn("totalJSHeapSize === 0... performance.memory is only available in Chrome .");var u=Date.now(),l=performance.memory.usedJSHeapSize;return{domElement:n,update:function(){if(!(Date.now()-u<1e3/30)){u=Date.now();var n=performance.memory.usedJSHeapSize-l;l=performance.memory.usedJSHeapSize;var i=n<0?"#830":"#131",s=performance.memory.usedJSHeapSize;t=Math.min(t,s),e=Math.max(e,s),o.textContent="Mem: "+function(t,e){var n=["Bytes","KB","MB","GB","TB"];if(0==t)return"n/a";e=void 0!==e?e:0;var i=Math.pow(10,e),o=Math.floor(Math.log(t)/Math.log(1024));return Math.round(t*i/Math.pow(1024,o))/i+" "+n[o]}(s,2);a(r,30*(1-s/31457280%1),i)}}}}t.exports=n},/*!*************************************!*\
  !*** ./src/plugins/viewportPixi.js ***!
  \*************************************/
/*! exports provided: ViewportPixi, CanvasSprite, registerSprite, getSprite */
/*! all exports used */
function(t,e,n){"use strict";function i(t,e){R[t]=e}function o(t){return R[t]}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"ViewportPixi",function(){return P}),n.d(e,"CanvasSprite",function(){return O}),e.registerSprite=i,e.getSprite=o;var r=n(/*! babel-runtime/core-js/object/assign */40),s=n.n(r),a=n(/*! babel-runtime/helpers/get */25),u=n.n(a),l=n(/*! babel-runtime/core-js/object/keys */38),c=n.n(l),h=n(/*! babel-runtime/core-js/object/get-prototype-of */3),d=n.n(h),f=n(/*! babel-runtime/helpers/classCallCheck */1),p=n.n(f),m=n(/*! babel-runtime/helpers/createClass */2),v=n.n(m),y=n(/*! babel-runtime/helpers/possibleConstructorReturn */4),g=n.n(y),_=n(/*! babel-runtime/helpers/inherits */5),b=n.n(_),w=n(/*! ../lib/core */0),x=n(/*! ../lib/utils */129),S=2*Math.PI,k=void 0,C=void 0,E=void 0,M=void 0,T=void 0,A=function(t){t||(t=event);var e=t.wheelDelta,n=t.detail;return n?e?e/n/40*n>0?1:-1:-n/3:e/120},P=function(t){function e(){return p()(this,e),g()(this,(e.__proto__||d()(e)).apply(this,arguments))}return b()(e,t),v()(e,[{key:"defaultOptions",value:function(){return{lineWidth:5,zoom:1,zoomMin:.1,zoomMax:10,zoomWheelFactor:.05,gridEnabled:!0,gridSize:250,gridColor:2236962,followEnabled:!0,followName:null,followEntityId:null}}},{key:"initialize",value:function(){var t=this;this.container=document.querySelector(this.options.container),this.renderer=PIXI.autoDetectRenderer(this.container.offsetWidth,this.container.offsetHeight,{antialias:!0}),this.renderer.autoResize=!0,this.canvas=this.renderer.view,this.container.appendChild(this.canvas),this.stage=new PIXI.Container,this.stage.filters=[],this.healthBarGraphics=new PIXI.Graphics,this.stage.addChild(this.healthBarGraphics),this.backdrop=new PIXI.Graphics,this.stage.addChild(this.backdrop),this.graphics={};var e={resize:function(e){t.updateMetrics(e)},orientationchange:function(e){t.updateMetrics(e)},mousedown:function(e){t.onMouseDown(e)},mousemove:function(e){t.onMouseMove(e)},mouseup:function(e){t.onMouseUp(e)}};for(var n in e)this.canvas.addEventListener(n,e[n],!1);var i=function(e){return t.onMouseWheel(e)};window.addEventListener?(window.addEventListener("mousewheel",i,!1),window.addEventListener("DOMMouseScroll",i,!1)):window.attachEvent&&window.attachEvent("onmousewheel",i),this.followEnabled=this.options.followEnabled,this.zoom=this.options.zoom,this.followEntityId=this.options.followEntityId,this.gridEnabled=this.options.gridEnabled,this.lineWidth=this.options.lineWidth,this.cursorRawX=0,this.cursorRawY=0,this.cursorChanged=!1,this.cursorPosition={x:0,y:0},this.cameraX=0,this.cameraY=0,this.debugDummySprite={size:100},this.updateMetrics()}},{key:"onMouseWheel",value:function(t){this.zoom+=A(t)*this.options.zoomWheelFactor,this.zoom<this.options.zoomMin&&(this.zoom=this.options.zoomMin),this.zoom>this.options.zoomMax&&(this.zoom=this.options.zoomMax)}},{key:"onMouseDown",value:function(t){this.setCursor(t.clientX,t.clientY),this.world.publish("mouseDown",this.cursorPosition)}},{key:"onMouseMove",value:function(t){this.setCursor(t.clientX,t.clientY),this.world.publish("mouseMove",this.cursorPosition)}},{key:"onMouseUp",value:function(t){this.setCursor(t.clientX,t.clientY),this.world.publish("mouseUp",this.cursorPosition)}},{key:"setCursor",value:function(t,e){var n=this.container.offsetWidth,i=this.container.offsetHeight;this.cursorRawX=t,this.cursorRawY=e;var o=(t-n/2)/this.zoom+this.cameraX,r=(e-i/2)/this.zoom+this.cameraY;return this.cursorChanged=!1,o===this.cursorPosition.x&&r===this.cursorPosition.y||(this.cursorChanged=!0,this.cursorPosition.x=o,this.cursorPosition.y=r),this.cursorPosition}},{key:"updateMetrics",value:function(){var t=this.container.offsetWidth,e=this.container.offsetHeight;this.visibleWidth=t/this.zoom,this.visibleHeight=e/this.zoom,this.visibleLeft=0-this.visibleWidth/2+this.cameraX,this.visibleTop=0-this.visibleHeight/2+this.cameraY,this.visibleRight=this.visibleLeft+this.visibleWidth,this.visibleBottom=this.visibleTop+this.visibleHeight}},{key:"update",value:function(){var t=this;this.updateMetrics(),this.setCursor(this.cursorRawX,this.cursorRawY),this.world.publish("mouseMove",this.cursorPosition);var e=this.world.get("Sprite")||{};for(E in e)M=this.world.get("Position",E),T=e[E],T.visible=M.right>this.visibleLeft&&M.left<this.visibleRight&&M.bottom>this.visibleTop&&M.top<this.visibleBottom;c()(this.graphics).filter(function(t){return!(t in e)}).forEach(function(e){t.stage.removeChild(t.graphics[e]),delete t.graphics[e]}),c()(e).filter(function(e){return!(e in t.graphics)}).forEach(function(e){t.stage.addChild(t.graphics[e]=new PIXI.Graphics)})}},{key:"draw",value:function(t){this.followEntity(),this.drawBackdrop(t);for(var e in this.graphics)this.drawSprite(this.graphics[e],e,t);this.stage.setTransform(this.container.offsetWidth/2-this.cameraX*this.zoom,this.container.offsetHeight/2-this.cameraY*this.zoom,this.zoom,this.zoom),this.renderer.resize(this.container.offsetWidth,this.container.offsetHeight),this.renderer.render(this.stage)}},{key:"drawSprite",value:function(t,e,n){var i=this.world.get("Sprite",e);if(i){var r=this.world.get("Position",e),s=o(i.name);return s||(s=o("default")),t.position.x=Math.floor(r.x),t.position.y=Math.floor(r.y),t.rotation=r.rotation+Math.PI/2,t.scale.x=t.scale.y=i.size/100,t.lineStyle(this.lineWidth/(i.size/100),i.color),s(t,i,e,n,this.world),i.drawn=!0,t}}},{key:"followEntity",value:function(){if(!this.followEnabled)return void(this.cameraX=this.cameraY=0);if(this.options.followName&&!this.followEntityId&&(this.followEntityId=w.getComponent("Name").findEntityByName(this.world,this.options.followName)),this.followEntityId){var t=this.world.get("Position",this.followEntityId);t&&(this.cameraX=t.x,this.cameraY=t.y,this.setCursor(this.cursorRawX,this.cursorRawY))}}},{key:"drawBackdrop",value:function(){var t=this.backdrop;if(!this.gridEnabled)return void(t.visible=!1);var e=this.options.gridSize,n=this.visibleLeft%e,i=this.visibleTop%e;t.visible=!0,t.clear(),t.lineStyle(5,this.options.gridColor),t.position.x=this.visibleLeft,t.position.y=this.visibleTop;for(var o=-n;o<this.visibleWidth;o+=e)t.moveTo(o,0),t.lineTo(o,this.visibleHeight+e);for(var r=-i;r<this.visibleHeight;r+=e)t.moveTo(0,r),t.lineTo(this.visibleWidth+e,r)}}]),e}(w.System);w.registerSystem("ViewportPixi",P);var O=function(t){function e(){return p()(this,e),g()(this,(e.__proto__||d()(e)).apply(this,arguments))}return b()(e,t),v()(e,null,[{key:"defaults",value:function(){return{name:null,color:16777215,size:100,width:null,height:null,drawn:!1,visible:!1}}},{key:"create",value:function(t){var n=u()(e.__proto__||d()(e),"create",this).call(this,t);return n.width||(n.width=n.size),n.height||(n.height=n.size),n}}]),e}(w.Component);w.registerComponent("Sprite",O);for(var R={},z=[-50,0,50,0,0,0,0,-50,0,50,0,0],I=0;I<8;I++){var N=I*(S/8);z.push(50*Math.cos(N)),z.push(50*Math.sin(N))}z.push(50),z.push(0),i("default",function(t,e){e.drawn||t.drawPolygon(z)}),i("sun",function(t,e){e.drawn||t.arc(0,0,50,0,S,!0)}),i("enemyscout",function(t,e){e.drawn||(t.moveTo(0,-50),t.lineTo(-45,50),t.lineTo(-12.5,12.5),t.lineTo(0,25),t.lineTo(12.5,12.5),t.lineTo(45,50),t.lineTo(0,-50),t.moveTo(0,-50))}),i("enemywing",function(t,e){e.drawn||(t.lineColor=2263074,t.moveTo(-50,0),t.lineTo(-37.5,-37.5),t.lineTo(0,50),t.lineTo(37.5,-37.5),t.lineTo(50,0),t.lineTo(37.5,50),t.lineTo(25,50),t.lineTo(0,0),t.lineTo(-25,50),t.lineTo(-37.5,50),t.lineTo(-50,0))});for(var L=[-50,0,-37.5,-50,-25,-50,-6.25,25,6.25,25,25,-50,37.5,-50,50,0,37.5,50,25,50,6.25,-25,-6.25,-25,-25,50,-37.5,50,-50,0],D=[],j=0;j<8;j++){var B=j*(S/8);D.push(Math.cos(B)),D.push(Math.sin(B))}D.push(D[0]),D.push(D[1]),i("repulsor",function(t,e,n,i,o){if(!e.drawn){e.rings=[{t:0,startR:0,endR:500,startO:1,endO:0,endT:1500},{t:250,startR:0,endR:500,startO:1,endO:0,endT:1500},{t:500,startR:0,endR:500,startO:1,endO:0,endT:1500}]}var r=o.get("Repulsor",n);r&&e.rings.forEach(function(t){return t.endR=r.range}),t.clear(),t.lineStyle(5/(e.size/100),2263074),t.drawPolygon(L);var s=Math.floor(1e3*i);e.rings.forEach(function(n){if(n.t+=s,n.t>=n.endT&&(n.t=0),e.visible){var i=Object(x.a)(n.startR,n.endR,n.t/n.endT),o=Object(x.a)(n.startO,n.endO,n.t/n.endT);t.lineStyle(5/(e.size/100),2263074,o),t.moveTo(-i,0),t.drawPolygon(D.map(function(t){return i*t}))}})});var F=[-50,0,-37.5,-37.5,0,-50,37.5,-37.5,50,0,37.5,50,25,50,12.5,12.5,5,25,-5,25,-12.5,12.5,-25,50,-37.5,50,-50,0];i("hero",function(t,e){e.drawn||t.drawPolygon(F)}),i("asteroid",function(t,e){if(!e.drawn){var n=10+Math.floor(8*Math.random()),i=S/n,o=void 0,r=[];for(o=0;o<n;o++){var s=o*i,a=15*Math.random()+35;r.push(a*Math.cos(s)),r.push(a*Math.sin(s))}r.push(r[0]),r.push(r[1]),t.drawPolygon(r)}}),i("mine",function(t,e){if(!e.drawn){var n=10+Math.floor(10*Math.random());n%2!=0&&n++;var i=S/n,o=!1;e.legs=[];for(var r=0;r<n;r++){var s=o?10:50*Math.random()+10,a=r*i;e.legs.push(s*Math.cos(a)),e.legs.push(s*Math.sin(a)),o=!o}e.legs.push(e.legs[0]),e.legs.push(e.legs[1])}e.drawn&&Math.random()>.15||(t.clear(),t.lineStyle(5/(e.size/100),16720418),t.drawPolygon(e.legs.map(function(t){return t*(.9+.5*Math.random())})))}),i("explosion",function(t,e,n,i){if(!e.drawn)for(s()(e,{ttl:2,radius:100,maxParticles:25,maxParticleSize:4,maxVelocity:300,age:0,alpha:0,stop:!1,particles:[]},e),k=0;k<e.maxParticles;k++)e.particles.push({free:!0});for(k=0;k<e.particles.length;k++)C=e.particles[k],!e.stop&&C.free?(C.velocity=e.maxVelocity*Math.random(),C.angle=2*Math.PI*Math.random(),C.dx=0-C.velocity*Math.sin(C.angle),C.dy=C.velocity*Math.cos(C.angle),C.distance=C.x=C.y=0,C.maxDistance=e.radius*Math.random(),C.size=e.maxParticleSize,C.free=!1):C.free||(C.x+=C.dx*i,C.y+=C.dy*i,C.distance+=C.velocity*i,C.distance>=C.maxDistance&&(C.distance=C.maxDistance,C.free=!0));for(e.age+=i,e.age>=e.ttl&&(e.stop=!0),e.alpha=Math.max(0,1-e.age/e.ttl),t.clear(),k=0;k<e.particles.length;k++)C=e.particles[k],C.free||(t.lineStyle(5/(e.size/100),e.color,(1-C.distance/C.maxDistance)*e.alpha),t.moveTo(0,0),t.lineTo(C.x,C.y))})},/*!**************************!*\
  !*** ./src/lib/utils.js ***!
  \**************************/
/*! exports provided: lerp */
/*! exports used: lerp */
function(t,e,n){"use strict";function i(t,e,n){return(1-n)*t+n*e}e.a=i},/*!*****************************************************************!*\
  !*** ./node_modules/babel-runtime/helpers/toConsumableArray.js ***!
  \*****************************************************************/
/*! no static exports found */
/*! exports used: default */
function(t,e,n){"use strict";e.__esModule=!0;var i=n(/*! ../core-js/array/from */131),o=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return(0,o.default)(t)}},/*!**********************************************************!*\
  !*** ./node_modules/babel-runtime/core-js/array/from.js ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){t.exports={default:n(/*! core-js/library/fn/array/from */132),__esModule:!0}},/*!*******************************************************!*\
  !*** ./node_modules/core-js/library/fn/array/from.js ***!
  \*******************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){n(/*! ../../modules/es6.string.iterator */68),n(/*! ../../modules/es6.array.from */133),t.exports=n(/*! ../../modules/_core */6).Array.from},/*!****************************************************************!*\
  !*** ./node_modules/core-js/library/modules/es6.array.from.js ***!
  \****************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){"use strict";var i=n(/*! ./_ctx */42),o=n(/*! ./_export */10),r=n(/*! ./_to-object */34),s=n(/*! ./_iter-call */134),a=n(/*! ./_is-array-iter */135),u=n(/*! ./_to-length */65),l=n(/*! ./_create-property */136),c=n(/*! ./core.get-iterator-method */137);o(o.S+o.F*!n(/*! ./_iter-detect */139)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,o,h,d=r(t),f="function"==typeof this?this:Array,p=arguments.length,m=p>1?arguments[1]:void 0,v=void 0!==m,y=0,g=c(d);if(v&&(m=i(m,p>2?arguments[2]:void 0,2)),void 0==g||f==Array&&a(g))for(e=u(d.length),n=new f(e);e>y;y++)l(n,y,v?m(d[y],y):d[y]);else for(h=g.call(d),n=new f;!(o=h.next()).done;y++)l(n,y,v?s(h,m,[o.value,y],!0):o.value);return n.length=y,n}})},/*!************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_iter-call.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){var i=n(/*! ./_an-object */23);t.exports=function(t,e,n,o){try{return o?e(i(n)[0],n[1]):e(n)}catch(e){var r=t.return;throw void 0!==r&&i(r.call(t)),e}}},/*!****************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_is-array-iter.js ***!
  \****************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){var i=n(/*! ./_iterators */36),o=n(/*! ./_wks */9)("iterator"),r=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||r[o]===t)}},/*!******************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_create-property.js ***!
  \******************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){"use strict";var i=n(/*! ./_object-dp */13),o=n(/*! ./_property-desc */32);t.exports=function(t,e,n){e in t?i.f(t,e,o(0,n)):t[e]=n}},/*!**************************************************************************!*\
  !*** ./node_modules/core-js/library/modules/core.get-iterator-method.js ***!
  \**************************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){var i=n(/*! ./_classof */138),o=n(/*! ./_wks */9)("iterator"),r=n(/*! ./_iterators */36);t.exports=n(/*! ./_core */6).getIteratorMethod=function(t){if(void 0!=t)return t[o]||t["@@iterator"]||r[i(t)]}},/*!**********************************************************!*\
  !*** ./node_modules/core-js/library/modules/_classof.js ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){var i=n(/*! ./_cof */44),o=n(/*! ./_wks */9)("toStringTag"),r="Arguments"==i(function(){return arguments}()),s=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=s(e=Object(t),o))?n:r?i(e):"Object"==(a=i(e))&&"function"==typeof e.callee?"Arguments":a}},/*!**************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_iter-detect.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){var i=n(/*! ./_wks */9)("iterator"),o=!1;try{var r=[7][i]();r.return=function(){o=!0},Array.from(r,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var r=[7],s=r[i]();s.next=function(){return{done:n=!0}},r[i]=function(){return s},t(r)}catch(t){}return n}},/*!*************************************************************!*\
  !*** ./node_modules/babel-runtime/core-js/object/values.js ***!
  \*************************************************************/
/*! no static exports found */
/*! exports used: default */
function(t,e,n){t.exports={default:n(/*! core-js/library/fn/object/values */141),__esModule:!0}},/*!**********************************************************!*\
  !*** ./node_modules/core-js/library/fn/object/values.js ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){n(/*! ../../modules/es7.object.values */142),t.exports=n(/*! ../../modules/_core */6).Object.values},/*!*******************************************************************!*\
  !*** ./node_modules/core-js/library/modules/es7.object.values.js ***!
  \*******************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){var i=n(/*! ./_export */10),o=n(/*! ./_object-to-array */143)(!1);i(i.S,"Object",{values:function(t){return o(t)}})},/*!******************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_object-to-array.js ***!
  \******************************************************************/
/*! no static exports found */
/*! all exports used */
function(t,e,n){var i=n(/*! ./_object-keys */15),o=n(/*! ./_to-iobject */11),r=n(/*! ./_object-pie */33).f;t.exports=function(t){return function(e){for(var n,s=o(e),a=i(s),u=a.length,l=0,c=[];u>l;)r.call(s,n=a[l++])&&c.push(t?[n,s[n]]:s[n]);return c}}}]);
//# sourceMappingURL=core.js.map