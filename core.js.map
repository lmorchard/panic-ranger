{"version":3,"sources":["webpack:///core.js","webpack:///webpack/bootstrap a77a3cc81af269a6e1e5","webpack:///./src/lib/core.js","webpack:///./node_modules/babel-runtime/helpers/classCallCheck.js","webpack:///./node_modules/babel-runtime/helpers/createClass.js","webpack:///./node_modules/babel-runtime/core-js/object/get-prototype-of.js","webpack:///./node_modules/babel-runtime/helpers/possibleConstructorReturn.js","webpack:///./node_modules/babel-runtime/helpers/inherits.js","webpack:///./node_modules/core-js/library/modules/_core.js","webpack:///./src/plugins/position.js","webpack:///./src/plugins/motion.js","webpack:///./node_modules/core-js/library/modules/_wks.js","webpack:///./node_modules/core-js/library/modules/_export.js","webpack:///./node_modules/core-js/library/modules/_to-iobject.js","webpack:///./node_modules/core-js/library/modules/_global.js","webpack:///./node_modules/core-js/library/modules/_object-dp.js","webpack:///./node_modules/core-js/library/modules/_descriptors.js","webpack:///./node_modules/core-js/library/modules/_object-keys.js","webpack:///./node_modules/core-js/library/modules/_has.js","webpack:///./src/lib/Vector2D.js","webpack:///./src/plugins/datGui.js","webpack:///./src/plugins/drawStats.js","webpack:///./src/plugins/memoryStats.js","webpack:///./src/plugins/name.js","webpack:///./node_modules/core-js/library/modules/_hide.js","webpack:///./node_modules/core-js/library/modules/_an-object.js","webpack:///./node_modules/core-js/library/modules/_fails.js","webpack:///./node_modules/babel-runtime/helpers/get.js","webpack:///./src/plugins/health.js","webpack:///./src/plugins/spawn.js","webpack:///./src/plugins/seeker.js","webpack:///./src/plugins/thruster.js","webpack:///./src/plugins/viewportWebGL.js","webpack:///./node_modules/core-js/library/modules/_is-object.js","webpack:///./node_modules/core-js/library/modules/_property-desc.js","webpack:///./node_modules/core-js/library/modules/_object-pie.js","webpack:///./node_modules/core-js/library/modules/_to-object.js","webpack:///./src/plugins/bounce.js","webpack:///./node_modules/core-js/library/modules/_iterators.js","webpack:///./src/plugins/collision.js","webpack:///./node_modules/babel-runtime/core-js/object/keys.js","webpack:///./src/plugins/playerInputSteering.js","webpack:///./node_modules/babel-runtime/core-js/object/assign.js","webpack:///./node_modules/core-js/library/modules/_uid.js","webpack:///./node_modules/core-js/library/modules/_ctx.js","webpack:///./node_modules/core-js/library/modules/_to-primitive.js","webpack:///./node_modules/core-js/library/modules/_cof.js","webpack:///./node_modules/core-js/library/modules/_defined.js","webpack:///./node_modules/core-js/library/modules/_to-integer.js","webpack:///./node_modules/core-js/library/modules/_shared-key.js","webpack:///./node_modules/core-js/library/modules/_shared.js","webpack:///./node_modules/core-js/library/modules/_enum-bug-keys.js","webpack:///./node_modules/core-js/library/modules/_object-gops.js","webpack:///./node_modules/core-js/library/modules/_object-sap.js","webpack:///./node_modules/core-js/library/modules/_library.js","webpack:///./node_modules/core-js/library/modules/_object-create.js","webpack:///./node_modules/core-js/library/modules/_set-to-string-tag.js","webpack:///./node_modules/core-js/library/modules/_wks-ext.js","webpack:///./node_modules/core-js/library/modules/_wks-define.js","webpack:///./node_modules/core-js/library/modules/_object-gopd.js","webpack:///./src/plugins/hordeSpawn.js","webpack:///./src/plugins/repulsor.js","webpack:///./node_modules/babel-runtime/helpers/extends.js","webpack:///./node_modules/core-js/library/modules/_ie8-dom-define.js","webpack:///./node_modules/core-js/library/modules/_dom-create.js","webpack:///./node_modules/core-js/library/modules/_object-keys-internal.js","webpack:///./node_modules/core-js/library/modules/_iobject.js","webpack:///./node_modules/core-js/library/modules/_to-length.js","webpack:///./node_modules/core-js/library/modules/_object-gpo.js","webpack:///./node_modules/babel-runtime/helpers/typeof.js","webpack:///./node_modules/core-js/library/modules/es6.string.iterator.js","webpack:///./node_modules/core-js/library/modules/_iter-define.js","webpack:///./node_modules/core-js/library/modules/_redefine.js","webpack:///./node_modules/core-js/library/modules/_object-gopn.js","webpack:///./src/plugins/expiration.js","webpack:///./src/plugins/orbiter.js","webpack:///./src/plugins/pathfinding.js","webpack:///./src/plugins/steering.js","webpack:///./src/plugins/viewportCanvas.js","webpack:///./node_modules/core-js/library/fn/object/assign.js","webpack:///./node_modules/core-js/library/modules/es6.object.assign.js","webpack:///./node_modules/core-js/library/modules/_a-function.js","webpack:///./node_modules/core-js/library/modules/_object-assign.js","webpack:///./node_modules/core-js/library/modules/_array-includes.js","webpack:///./node_modules/core-js/library/modules/_to-absolute-index.js","webpack:///./node_modules/babel-runtime/core-js/object/define-property.js","webpack:///./node_modules/core-js/library/fn/object/define-property.js","webpack:///./node_modules/core-js/library/modules/es6.object.define-property.js","webpack:///./node_modules/core-js/library/fn/object/get-prototype-of.js","webpack:///./node_modules/core-js/library/modules/es6.object.get-prototype-of.js","webpack:///./node_modules/babel-runtime/core-js/symbol/iterator.js","webpack:///./node_modules/core-js/library/fn/symbol/iterator.js","webpack:///./node_modules/core-js/library/modules/_string-at.js","webpack:///./node_modules/core-js/library/modules/_iter-create.js","webpack:///./node_modules/core-js/library/modules/_object-dps.js","webpack:///./node_modules/core-js/library/modules/_html.js","webpack:///./node_modules/core-js/library/modules/web.dom.iterable.js","webpack:///./node_modules/core-js/library/modules/es6.array.iterator.js","webpack:///./node_modules/core-js/library/modules/_add-to-unscopables.js","webpack:///./node_modules/core-js/library/modules/_iter-step.js","webpack:///./node_modules/babel-runtime/core-js/symbol.js","webpack:///./node_modules/core-js/library/fn/symbol/index.js","webpack:///./node_modules/core-js/library/modules/es6.symbol.js","webpack:///./node_modules/core-js/library/modules/_meta.js","webpack:///./node_modules/core-js/library/modules/_keyof.js","webpack:///./node_modules/core-js/library/modules/_enum-keys.js","webpack:///./node_modules/core-js/library/modules/_is-array.js","webpack:///./node_modules/core-js/library/modules/_object-gopn-ext.js","webpack:///./node_modules/core-js/library/modules/es7.symbol.async-iterator.js","webpack:///./node_modules/core-js/library/modules/es7.symbol.observable.js","webpack:///./node_modules/babel-runtime/core-js/object/set-prototype-of.js","webpack:///./node_modules/core-js/library/fn/object/set-prototype-of.js","webpack:///./node_modules/core-js/library/modules/es6.object.set-prototype-of.js","webpack:///./node_modules/core-js/library/modules/_set-proto.js","webpack:///./node_modules/babel-runtime/core-js/object/create.js","webpack:///./node_modules/core-js/library/fn/object/create.js","webpack:///./node_modules/core-js/library/modules/es6.object.create.js","webpack:///./node_modules/babel-runtime/core-js/object/get-own-property-descriptor.js","webpack:///./node_modules/core-js/library/fn/object/get-own-property-descriptor.js","webpack:///./node_modules/core-js/library/modules/es6.object.get-own-property-descriptor.js","webpack:///./src/lib/QuadTree.js","webpack:///./node_modules/dat-gui/index.js","webpack:///./node_modules/dat-gui/vendor/dat.gui.js","webpack:///./node_modules/dat-gui/vendor/dat.color.js","webpack:///./node_modules/stats-js/build/stats.min.js","webpack:///./node_modules/core-js/library/fn/object/keys.js","webpack:///./node_modules/core-js/library/modules/es6.object.keys.js","webpack:///./node_modules/memory-stats/memory-stats.js","webpack:///./src/plugins/viewportPixi.js","webpack:///./src/lib/utils.js","webpack:///./node_modules/babel-runtime/helpers/toConsumableArray.js","webpack:///./node_modules/babel-runtime/core-js/array/from.js","webpack:///./node_modules/core-js/library/fn/array/from.js","webpack:///./node_modules/core-js/library/modules/es6.array.from.js","webpack:///./node_modules/core-js/library/modules/_iter-call.js","webpack:///./node_modules/core-js/library/modules/_is-array-iter.js","webpack:///./node_modules/core-js/library/modules/_create-property.js","webpack:///./node_modules/core-js/library/modules/core.get-iterator-method.js","webpack:///./node_modules/core-js/library/modules/_classof.js","webpack:///./node_modules/core-js/library/modules/_iter-detect.js","webpack:///./node_modules/babel-runtime/core-js/object/values.js","webpack:///./node_modules/core-js/library/fn/object/values.js","webpack:///./node_modules/core-js/library/modules/es7.object.values.js","webpack:///./node_modules/core-js/library/modules/_object-to-array.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","parentJsonpFunction","window","chunkIds","moreModules","executeModules","chunkId","result","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","shift","s","7","e","onScriptComplete","script","onerror","onload","clearTimeout","timeout","chunk","Error","undefined","installedChunkData","Promise","resolve","promise","reject","head","document","getElementsByTagName","createElement","type","charset","async","nc","setAttribute","src","p","setTimeout","appendChild","m","c","d","name","getter","o","defineProperty","configurable","enumerable","get","n","__esModule","object","property","oe","err","console","error","__webpack_exports__","registerComponent","componentName","componentManager","componentRegistry","getComponent","registerSystem","systemName","system","systemRegistry","getSystem","value","Messages","World","Component","System","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default","TARGET_DURATION","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","fn","entityId","systemAttrs","systemCls","timeNow","timeDelta","componentAttrs","matches","idx","item","handler","ENTITY_INSERT","ENTITY_DESTROY","options","_this","this","isRunning","isPaused","debug","systems","addSystems","store","subscribers","tickDuration","maxTickDelta","tickAccumulator","lastTickTime","lastDrawTime","boundTickLoop","tickLoop","boundDrawLoop","timestamp","drawLoop","reset","key","initialize","Date","now","lastEntityId","msg","data","systemsData","setWorld","timeDeltaMS","updateStart","update","updateEnd","Math","min","tick","drawStart","draw","drawEnd","out","_len","arguments","items","Array","_key","generateEntityId","addComponent","world","publish","removeComponent","component","create","attrs","defaults","defaultOptions","matchComponent","getMatchingComponents","updateComponent","default","instance","Constructor","TypeError","_defineProperty","_defineProperty2","obj","defineProperties","target","props","descriptor","writable","protoProps","staticProps","_typeof2","_typeof3","self","ReferenceError","_interopRequireDefault","_setPrototypeOf","_setPrototypeOf2","_create","_create2","subClass","superClass","constructor","__proto__","core","version","__e","Position","PositionSystem","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_get__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_get___default","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of___default","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck__","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck___default","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass__","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass___default","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn__","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn___default","__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits__","__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits___default","__WEBPACK_IMPORTED_MODULE_6__lib_core__","__WEBPACK_IMPORTED_MODULE_7__lib_QuadTree__","_Component","apply","x","y","rotation","sprite","position","positions","_System","quadtreeMaxAge","quadtreeObjectsPerNode","quadtreeMaxLevels","bounds","left","top","right","bottom","width","height","quadtree","updateBounds","resetQuadtree","halfWidth","halfHeight","insert","g","getDebugGraphics","lineStyle","drawCircle","moveTo","lineTo","drawDebugQuadtreeNode","drawRect","root","objects","forEach","body","nodes","Motion","MotionSystem","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default","__WEBPACK_IMPORTED_MODULE_5__lib_core__","PI2","PI","_Core$Component","dx","dy","drotation","_Core$System","motion","pos","uid","Symbol","USE_SYMBOL","global","ctx","hide","$export","source","own","IS_FORCED","F","IS_GLOBAL","G","IS_STATIC","S","IS_PROTO","P","IS_BIND","B","IS_WRAP","W","expProto","C","a","b","Function","virtual","R","U","IObject","defined","it","__g","anObject","IE8_DOM_DEFINE","toPrimitive","dP","f","O","Attributes","$keys","enumBugKeys","keys","Vector2D","cloneFrom","fromArray","array","zero","add","vector","addScalar","val","eq","subtract","clone","set","setValues","_at_x","_at_y","dist","sqrt","normalise","normalize","isZero","magnitude","reverse","toArray","angle","atan2","rotate","cos","sin","angleTo","rotateAround","point","multiplyScalar","multiply","divide","divideScalar","round","dot","DatGui","__WEBPACK_IMPORTED_MODULE_6_dat_gui__","__WEBPACK_IMPORTED_MODULE_6_dat_gui___default","gui","GUI","DrawStats","__WEBPACK_IMPORTED_MODULE_6_stats_js__","__WEBPACK_IMPORTED_MODULE_6_stats_js___default","drawStats","setMode","domElement","style","tickStats","begin","end","MemoryStatsSystem","__WEBPACK_IMPORTED_MODULE_6_memory_stats__","__WEBPACK_IMPORTED_MODULE_6_memory_stats___default","stats","Name","names","nid","createDesc","isObject","exec","_getPrototypeOf","_getPrototypeOf2","_getOwnPropertyDescriptor","_getOwnPropertyDescriptor2","receiver","desc","parent","MSG_DAMAGE","MSG_HEAL","Health","HealthSystem","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_get__","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_get___default","__WEBPACK_IMPORTED_MODULE_7__spawn__","health","max","current","show_bar","_this3","subscribe","to","amount","MSG_SPAWN","MSG_DESTROY","MSG_DESPAWN","MSG_CAPTURE_CAMERA","Spawn","SpawnSystem","spawn","ttl","age","destroy","tombstone","spawned","captureCamera","Seeker","SeekerSystem","__WEBPACK_IMPORTED_MODULE_8__lib_Vector2D__","active","targetName","targetEntityId","targetPosition","acquisitionDelay","radPerSec","vSeeker","vTarget","seeker","findEntityByName","targetAngle","direction","offset","abs","targetDr","impulseDr","Thruster","ThrusterSystem","stop","useBrakes","deltaV","maxV","vInertia","vThrust","vBrakes","thruster","tickDeltaV","currV","overV","brakingDv","ViewportWebGL","WebGLSprite","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_toConsumableArray__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_toConsumableArray___default","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_keys__","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_keys___default","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_object_values__","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_object_values___default","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_assign__","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_assign___default","__WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_object_get_prototype_of__","__WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_object_get_prototype_of___default","__WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_classCallCheck__","__WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_classCallCheck___default","__WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_createClass__","__WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_createClass___default","__WEBPACK_IMPORTED_MODULE_8_babel_runtime_helpers_possibleConstructorReturn__","__WEBPACK_IMPORTED_MODULE_8_babel_runtime_helpers_possibleConstructorReturn___default","__WEBPACK_IMPORTED_MODULE_9_babel_runtime_helpers_inherits__","__WEBPACK_IMPORTED_MODULE_9_babel_runtime_helpers_inherits___default","__WEBPACK_IMPORTED_MODULE_10__lib_core__","TYPE_SIZES","5126","35664","35665","35666","sprites","sceneSprite","wheelDistance","evt","event","w","wheelDelta","detail","lineWidth","zoom","zoomMin","zoomMax","zoomWheelFactor","gridEnabled","gridSize","gridColor","followEnabled","followName","followEntityId","_this2","container","querySelector","canvas","initWebGL","scene","events","resize","ev","updateMetrics","orientationchange","mousedown","onMouseDown","mousemove","onMouseMove","mouseup","onMouseUp","addEventListener","boundOnMouseWheel","onMouseWheel","attachEvent","cursorRawX","cursorRawY","cursorChanged","cursorPosition","cameraX","cameraY","debugDummySprite","size","setCursor","clientX","clientY","offsetWidth","offsetHeight","newX","newY","visibleWidth","visibleHeight","visibleLeft","visibleTop","visibleRight","visibleBottom","shapes","init","visible","scale","color","followEntity","setUniforms","uLineWidth","uCameraZoom","uCameraOrigin","uViewportSize","clientWidth","clientHeight","bufferSize","calculateBufferSizeForScene","buffer","Float32Array","vertexCount","fillBufferFromScene","gl","bufferData","ARRAY_BUFFER","STATIC_DRAW","viewport","clearColor","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","drawArrays","TRIANGLE_STRIP","getContext","antialias","preserveDrawingBuffer","premultipliedAlpha","program","createProgram","createShader","VERTEX_SHADER","SHADER_VERTEX","FRAGMENT_SHADER","SHADER_FRAGMENT","useProgram","bindBuffer","createBuffer","numAttribs","getProgramParameter","ACTIVE_ATTRIBUTES","attribs","vertexSize","info","getActiveAttrib","vertexAttribPointer","FLOAT","enableVertexAttribArray","uniforms","numUniforms","ACTIVE_UNIFORMS","getActiveUniform","getUniformLocation","shader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","deleteShader","vertexShader","fragmentShader","attachShader","linkProgram","LINK_STATUS","deleteProgram","reduce","acc","shape","_this4","bufferPos","deltaPosition","deltaScale","deltaRotation","lineIdx","shapesIdx","bufferVertex","shapeIdx","sceneKeys","sort","sceneKeysIdx","_scene$sceneKeys$scen","_scene$sceneKeys$scen2","_scene$sceneKeys$scen3","_scene$sceneKeys$scen4","_scene$sceneKeys$scen5","_scene$sceneKeys$scen6","_scene$sceneKeys$scen7","_scene$sceneKeys$scen8","_this5","_gl$","concat","drawn","registry","getHandler","defaultShape","rot","register","heroShapes","repulsorPoints","repulsorShapes","map","NUM_POINTS","floor","random","ROTATION","even","legs","bitmap","propertyIsEnumerable","BounceComponent","BounceSystem","__WEBPACK_IMPORTED_MODULE_8__health__","__WEBPACK_IMPORTED_MODULE_9__lib_Vector2D__","mass","dn","dt","mt","v1","v2","v1n","v1t","v2n","v2t","entities","pairs","aEntityId","aCollidable","bEntityId","inCollisionWith","pair","join","aBouncer","bBouncer","resolveElasticCollision","aPosition","aSprite","aMotion","bPosition","bSprite","bMotion","delta","m1","m2","M","aFactor","processDamage","bFactor","eid","c_eid","v_motion","bouncer","damage","dmg","from","Collidable","CollisionSystem","inCollision","match","entityId2","bCollidable","radii","positionSystemName","positionSystem","retrieveBounds","checkCollisionBound","neighbor","checkCollision","iterate","collidables","collidable","PlayerInputSteering","PlayerInputSteeringSystem","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys___default","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_get__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_get___default","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of__","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of___default","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck__","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck___default","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass__","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass___default","__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn__","__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn___default","__WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_inherits__","__WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_inherits___default","__WEBPACK_IMPORTED_MODULE_7__lib_core__","gamepadDeadzone","gamepad","pointer","touch","setPointer","windowEvents","keydown","handleKeyDown","keyup","handleKeyUp","k","bind","updateGamepads","updateKeyboard","steering","updateComponentFromKeyboard","updateComponentFromPointer","updateComponentFromGamepad","updateMotionFromTargetAngle","axis1","axis0","dleft","button13","dright","button14","button11","gamepads","navigator","getGamepads","gp","connected","buttons","pressed","axes","axisX","axisY","dup","ddown","button12","keyCode","preventDefault","targetAngleRaw","id","px","toString","aFunction","that","valueOf","slice","ceil","isNaN","shared","split","getOwnPropertySymbols","fails","KEY","exp","dPs","IE_PROTO","Empty","createDict","iframeDocument","iframe","display","contentWindow","open","write","lt","close","Properties","def","has","TAG","tag","stat","LIBRARY","wksExt","$Symbol","charAt","pIE","toIObject","gOPD","getOwnPropertyDescriptor","HordeSpawn","HordeSpawnSystem","viewportSystemName","minCount","maxFrameSpawn","offscreenTTL","spawnMargin","spawnCount","viewportSystem","cnt","spawnOffscreen","hordespawn","_viewportSystem","margin","h","r","Repulsor","RepulsorSystem","range","force","components","repulsor","repulsorPosition","neighborSprite","neighborPosition","neighborMotion","repelAngle","repelForce","queryBounds","applyRepulsionBound","applyRepulsion","repulsorId","_assign","_assign2","is","arrayIndexOf","cof","toInteger","toObject","ObjectProto","getPrototypeOf","_iterator","_iterator2","_symbol","_symbol2","_typeof","$at","String","iterated","_t","_i","index","done","redefine","Iterators","$iterCreate","setToStringTag","ITERATOR","BUGGY","returnThis","Base","NAME","next","DEFAULT","IS_SET","FORCED","methods","IteratorPrototype","getMethod","kind","proto","DEF_VALUES","VALUES_BUG","$native","$default","$entries","$anyNative","entries","values","hiddenKeys","getOwnPropertyNames","Expiration","ExpirationSystem","expiration","Orbiter","OrbiterSystem","__WEBPACK_IMPORTED_MODULE_7__lib_Vector2D__","vOrbited","vOrbiter","vOld","orbiter","oPos","angleDelta","Pathfinder","SpaceTree","PathfindingSystem","level","maxLevel","empty","full","children","ct","dwidth","dheight","splitWidth","splitHeight","vpSystem","save","centerAndZoom","restore","Steering","SteeringSystem","sensorRange","obstacleRepel","seekFactor","pushFactor","avoidFactor","avoidSeeAhead","avoidRayWidthFactor","vectors","avoid","seek","flee","wander","evade","pursue","applySteering","lookForObstacle","targetSprite","edgeRange","distance","pow","obstacle","rayX","rayY","oppositeLen","hypotenuseLen","theta","asin","obstacleAngle","avoidAngle","rayWidth","vRayUnit","hitCircles","steps","step","searchCircleForObstacle","hits","seekTargetName","seekTargetEntityId","drawAngle","vec","strokeStyle","beginPath","stroke","registerSprite","spriteRegistry","getSprite","CanvasSprite","ViewportCanvas","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default","__WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_get__","__WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_get___default","__WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_inherits__","__WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_inherits___default","__WEBPACK_IMPORTED_MODULE_8__lib_core__","drawBackdrop","drawScene","drawDebugCursor","fillStyle","fillRect","translate","strokeRect","gridOffsetX","gridOffsetY","drawSprite","spriteFn","arc","points","initialized","radius","maxParticles","maxParticleSize","maxVelocity","particles","free","velocity","maxDistance","alpha","globalAlpha","assign","getKeys","gOPS","$assign","A","K","T","aLen","getSymbols","isEnum","j","toLength","toAbsoluteIndex","IS_INCLUDES","$this","el","fromIndex","$Object","$getPrototypeOf","TO_STRING","charCodeAt","documentElement","TO_STRING_TAG","DOMIterables","Collection","addToUnscopables","_k","Arguments","DESCRIPTORS","META","$fails","wks","wksDefine","keyOf","enumKeys","isArray","gOPNExt","$GOPD","$DP","gOPN","$JSON","JSON","_stringify","stringify","HIDDEN","TO_PRIMITIVE","SymbolRegistry","AllSymbols","OPSymbols","USE_NATIVE","QObject","setter","findChild","setSymbolDesc","D","protoDesc","wrap","sym","isSymbol","iterator","$defineProperty","$defineProperties","$create","$propertyIsEnumerable","E","$getOwnPropertyDescriptor","$getOwnPropertyNames","$getOwnPropertySymbols","IS_OP","$set","es6Symbols","wellKnownSymbols","for","keyFor","useSetter","useSimple","replacer","$replacer","args","setDesc","isExtensible","FREEZE","preventExtensions","setMeta","fastKey","getWeak","onFreeze","meta","NEED","symbols","arg","windowNames","getWindowNames","setPrototypeOf","check","test","buggy","QuadTree","maxObjects","maxLevels","_empty","entityMap","subWidth","subHeight","midX","midY","getIndex","oldNode","objectIndex","indexOf","splice","rect","iteratorFn","optionalParam","dat","utils","controllers","dom","css","load","url","doc","link","rel","href","inject","injected","innerHTML","common","ARR_EACH","ARR_SLICE","BREAK","extend","each","isUndefined","compose","toCall","itr","scope","defer","fnc","isNull","isNumber","isString","isBoolean","isFunction","Controller","initialValue","__onChange","__onFinishChange","onChange","onFinishChange","setValue","newValue","updateDisplay","getValue","isModified","cssValueToPixels","CSS_VALUE_PIXELS","parseFloat","EVENT_MAP","HTMLEvents","MouseEvents","KeyboardEvents","EVENT_MAP_INV","v","makeSelectable","elem","selectable","onselectstart","MozUserSelect","KhtmlUserSelect","unselectable","makeFullscreen","horizontal","vertical","fakeEvent","eventType","params","aux","className","createEvent","initMouseEvent","bubbles","cancelable","clickCount","initKeyboardEvent","initKeyEvent","ctrlKey","altKey","shiftKey","metaKey","charCode","initEvent","dispatchEvent","func","bool","unbind","removeEventListener","detachEvent","addClass","classes","replace","removeClass","removeAttribute","hasClass","RegExp","getWidth","getComputedStyle","getHeight","getOffset","offsetParent","offsetLeft","offsetTop","isActive","activeElement","OptionController","superclass","__select","element","opt","desiredValue","selectedIndex","toReturn","NumberController","numDecimals","__min","__max","__step","__impliedStep","log","LN10","__precision","NumberControllerBox","roundToDecimal","decimals","tenTo","attempted","__input","onBlur","onMouseDrag","prev_y","diff","__truncationSuspended","blur","NumberControllerSlider","styleSheet","i1","i2","o1","o2","__background","__foreground","useDefaultStyles","pct","FunctionController","text","__button","fire","BooleanController","__prev","__checkbox","checked","hex","interpret","original","INTERPRETATIONS","family","litmus","conversions","conversion","conversionName","read","THREE_CHAR_HEX","space","parseInt","SIX_CHAR_HEX","CSS_RGB","CSS_RGBA","HEX","RGB_ARRAY","RGBA_ARRAY","RGBA_OBJ","RGB_OBJ","HSVA_OBJ","HSV_OBJ","saveDialogueContents","controllerFactory","ColorController","CenteredDiv","controller","factoryArgs","before","__li","recallSavedValue","li","addRow","CLASS_CONTROLLER_ROW","augmentController","__controllers","liBefore","__ul","insertBefore","onResize","__gui","remove","nextElementSibling","firstElementChild","listen","box","method","pc","pb","returned","stopPropagation","borderLeftColor","__color","getRoot","__preset_select","markPresetModified","matched_index","__rememberedObjects","controller_map","__rememberedObjectIndecesToControllers","remembered","preset","preset_map","DEFAULT_DEFAULT_PRESET_NAME","getLocalStorageHash","location","addSaveMenu","showHideExplain","explain","useLocalStorage","div","__save_row","firstChild","gears","button","button2","button3","select","addPresetOption","SUPPORTS_LOCAL_STORAGE","saveLocally","getElementById","localStorageCheckBox","localStorage","getItem","newConstructorTextArea","which","SAVE_DIALOGUE","getSaveObject","show","focus","presetName","prompt","saveAs","revert","addResizeHandle","dragStart","pmouseX","__closeButton","CLASS_DRAG","drag","dragStop","__resize_handle","marginLeft","cursor","setWidth","autoPlace","getCurrentPreset","useInitialValues","saved_values","setSelected","setPresetSelectIndex","modified","updateDisplays","controllerArray","auto_place_container","auto_place_virgin","hideable_guis","saveToLocalStorage","setItem","__folders","__listening","DEFAULT_WIDTH","resizable","hideable","scrollable","use_local_storage","title_row_name","closed","CLASS_CLOSED","TEXT_OPEN","TEXT_CLOSED","CLASS_MAIN","saved_gui","parse","CLASS_CLOSE_BUTTON","createTextNode","title_row","on_click_title","CLASS_AUTO_PLACE_CONTAINER","CLASS_AUTO_PLACE","toggleHide","zIndex","opacity","CLASS_TOO_TALL","addColor","removeChild","addFolder","new_gui_params","folders","childNodes","node","innerHeight","remember","folder","factory","StringController","Color","linearGradient","background","vendors","vendor","cssText","hueGradient","fieldDown","setSV","unbindSV","__state","toOriginal","unbindH","setH","__saturation_field","scrollLeft","scrollTop","__hue_field","__temp","__selector","__field_knob","__field_knob_border","__hue_knob","__input_textShadow","value_field","padding","backgroundColor","boxShadow","border","borderRadius","borderRight","marginRight","outline","textAlign","fontWeight","textShadow","mismatch","COMPONENTS","flip","_flip","marginTop","math","defineRGBComponent","componentHexIndex","recalculateRGB","defineHSVComponent","recalculateHSV","component_from_hex","hsv_to_rgb","rgb_to_hsv","rgb_to_hex","tmpComponent","hi","q","t","NaN","hex_with_component","componentIndex","callback","backgroundElement","WebkitTransition","webkitTransform","layout","innerWidth","Stats","Infinity","REVISION","textContent","MemoryStats","msMin","msMax","msDiv","msText","msGraph","bar","updateGraph","child","performance","memory","usedJSHeapSize","totalJSHeapSize","warn","lastTime","lastUsedHeap","ms","bytes","nFractDigit","sizes","precision","ViewportPixi","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_object_get_prototype_of__","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_object_get_prototype_of___default","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_classCallCheck__","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_classCallCheck___default","__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_createClass__","__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_createClass___default","__WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_possibleConstructorReturn__","__WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_possibleConstructorReturn___default","__WEBPACK_IMPORTED_MODULE_9__lib_utils__","renderer","PIXI","autoDetectRenderer","autoResize","view","stage","Container","filters","healthBarGraphics","Graphics","addChild","backdrop","graphics","filter","setTransform","render","drawPolygon","lineColor","repulsorShape","rings","startR","endR","startO","endO","endT","ring","heroShape","lerp","v0","_from","_from2","arr","arr2","isArrayIter","createProperty","getIterFn","iter","arrayLike","mapfn","mapping","iterFn","ret","ArrayProto","classof","getIteratorMethod","ARG","tryGet","callee","SAFE_CLOSING","riter","skipClosing","safe","$values","isEntries"],"mappings":"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","file":"core.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// install a JSONP callback for chunk loading\n/******/ \tvar parentJsonpFunction = window[\"webpackJsonp\"];\n/******/ \twindow[\"webpackJsonp\"] = function webpackJsonpCallback(chunkIds, moreModules, executeModules) {\n/******/ \t\t// add \"moreModules\" to the modules object,\n/******/ \t\t// then flag all \"chunkIds\" as loaded and fire callback\n/******/ \t\tvar moduleId, chunkId, i = 0, resolves = [], result;\n/******/ \t\tfor(;i < chunkIds.length; i++) {\n/******/ \t\t\tchunkId = chunkIds[i];\n/******/ \t\t\tif(installedChunks[chunkId]) {\n/******/ \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n/******/ \t\t\t}\n/******/ \t\t\tinstalledChunks[chunkId] = 0;\n/******/ \t\t}\n/******/ \t\tfor(moduleId in moreModules) {\n/******/ \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n/******/ \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n/******/ \t\t\t}\n/******/ \t\t}\n/******/ \t\tif(parentJsonpFunction) parentJsonpFunction(chunkIds, moreModules, executeModules);\n/******/ \t\twhile(resolves.length) {\n/******/ \t\t\tresolves.shift()();\n/******/ \t\t}\n/******/ \t\tif(executeModules) {\n/******/ \t\t\tfor(i=0; i < executeModules.length; i++) {\n/******/ \t\t\t\tresult = __webpack_require__(__webpack_require__.s = executeModules[i]);\n/******/ \t\t\t}\n/******/ \t\t}\n/******/ \t\treturn result;\n/******/ \t};\n/******/\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// objects to store loaded and loading chunks\n/******/ \tvar installedChunks = {\n/******/ \t\t7: 0\n/******/ \t};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/ \t// This file contains only the entry chunk.\n/******/ \t// The chunk loading function for additional chunks\n/******/ \t__webpack_require__.e = function requireEnsure(chunkId) {\n/******/ \t\tvar installedChunkData = installedChunks[chunkId];\n/******/ \t\tif(installedChunkData === 0) {\n/******/ \t\t\treturn new Promise(function(resolve) { resolve(); });\n/******/ \t\t}\n/******/\n/******/ \t\t// a Promise means \"currently loading\".\n/******/ \t\tif(installedChunkData) {\n/******/ \t\t\treturn installedChunkData[2];\n/******/ \t\t}\n/******/\n/******/ \t\t// setup Promise in chunk cache\n/******/ \t\tvar promise = new Promise(function(resolve, reject) {\n/******/ \t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n/******/ \t\t});\n/******/ \t\tinstalledChunkData[2] = promise;\n/******/\n/******/ \t\t// start chunk loading\n/******/ \t\tvar head = document.getElementsByTagName('head')[0];\n/******/ \t\tvar script = document.createElement('script');\n/******/ \t\tscript.type = 'text/javascript';\n/******/ \t\tscript.charset = 'utf-8';\n/******/ \t\tscript.async = true;\n/******/ \t\tscript.timeout = 120000;\n/******/\n/******/ \t\tif (__webpack_require__.nc) {\n/******/ \t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n/******/ \t\t}\n/******/ \t\tscript.src = __webpack_require__.p + \"\" + chunkId + \".bundle.js\";\n/******/ \t\tvar timeout = setTimeout(onScriptComplete, 120000);\n/******/ \t\tscript.onerror = script.onload = onScriptComplete;\n/******/ \t\tfunction onScriptComplete() {\n/******/ \t\t\t// avoid mem leaks in IE.\n/******/ \t\t\tscript.onerror = script.onload = null;\n/******/ \t\t\tclearTimeout(timeout);\n/******/ \t\t\tvar chunk = installedChunks[chunkId];\n/******/ \t\t\tif(chunk !== 0) {\n/******/ \t\t\t\tif(chunk) {\n/******/ \t\t\t\t\tchunk[1](new Error('Loading chunk ' + chunkId + ' failed.'));\n/******/ \t\t\t\t}\n/******/ \t\t\t\tinstalledChunks[chunkId] = undefined;\n/******/ \t\t\t}\n/******/ \t\t};\n/******/ \t\thead.appendChild(script);\n/******/\n/******/ \t\treturn promise;\n/******/ \t};\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// on error function for async loading\n/******/ \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 77);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/*!*************************!*\\\n  !*** ./src/lib/core.js ***!\n  \\*************************/\n/*! exports provided: Messages, World, Component, System, registerComponent, getComponent, registerSystem, getSystem */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Messages\", function() { return Messages; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"World\", function() { return World; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Component\", function() { return Component; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"System\", function() { return System; });\n/* harmony export (immutable) */ __webpack_exports__[\"registerComponent\"] = registerComponent;\n/* harmony export (immutable) */ __webpack_exports__[\"getComponent\"] = getComponent;\n/* harmony export (immutable) */ __webpack_exports__[\"registerSystem\"] = registerSystem;\n/* harmony export (immutable) */ __webpack_exports__[\"getSystem\"] = getSystem;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(/*! babel-runtime/helpers/extends */ 60);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__ = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__ = __webpack_require__(/*! babel-runtime/helpers/createClass */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__);\n\n\n\nvar TARGET_FPS = 60;\nvar TARGET_DURATION = 1000 / TARGET_FPS;\n\nvar requestAnimationFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function (fn) {\n  setTimeout(fn, 1000 / 60);\n};\n\n// Commonly used temp variables, pre-declared early.\nvar entityId = void 0,\n    system = void 0,\n    systemName = void 0,\n    systemAttrs = void 0,\n    systemCls = void 0,\n    componentName = void 0,\n    timeNow = void 0,\n    timeDelta = void 0,\n    componentAttrs = void 0,\n    matches = void 0,\n    idx = void 0,\n    item = void 0,\n    handler = void 0;\n\nvar Messages = {\n  ENTITY_INSERT: 'entity_insert',\n  ENTITY_DESTROY: 'entity_destroy'\n};\n\nvar World = function () {\n  function World(options) {\n    var _this = this;\n\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, World);\n\n    options = options || {};\n\n    this.isRunning = false;\n    this.isPaused = false;\n    this.debug = false;\n\n    this.systems = {};\n    if (options.systems) {\n      this.addSystems(options.systems);\n    }\n\n    this.store = {};\n\n    this.subscribers = {};\n\n    this.tickDuration = TARGET_DURATION;\n    this.maxTickDelta = TARGET_DURATION * 5;\n    this.tickAccumulator = 0;\n\n    this.lastTickTime = 0;\n    this.lastDrawTime = 0;\n\n    this.boundTickLoop = function () {\n      return _this.tickLoop();\n    };\n    this.boundDrawLoop = function (timestamp) {\n      return _this.drawLoop(timestamp);\n    };\n\n    this.reset();\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(World, [{\n    key: 'start',\n    value: function start() {\n      if (this.isRunning) {\n        return;\n      }\n      this.isRunning = true;\n\n      for (var _systemName in this.systems) {\n        this.systems[_systemName].initialize();\n      }\n\n      // Game logic separated from display rendering\n      // See also: http://www.chandlerprall.com/2012/06/requestanimationframe-is-not-your-logics-friend/\n      this.lastTickTime = Date.now();\n      this.lastDrawTime = 0;\n\n      setTimeout(this.boundTickLoop, this.tickDuration);\n      requestAnimationFrame(this.boundDrawLoop);\n\n      return this;\n    }\n  }, {\n    key: 'stop',\n    value: function stop() {\n      this.isRunning = false;\n      return this;\n    }\n  }, {\n    key: 'pause',\n    value: function pause() {\n      this.isPaused = true;\n      return this;\n    }\n  }, {\n    key: 'resume',\n    value: function resume() {\n      this.isPaused = false;\n      return this;\n    }\n  }, {\n    key: 'reset',\n    value: function reset() {\n      this.store = {};\n      this.lastEntityId = 0;\n    }\n\n    // TODO: Use a better pubsub library here. But, pubsub-js seemed to perform\n    // badly in a game loop.\n\n  }, {\n    key: 'subscribe',\n    value: function subscribe(msg, handler) {\n      if (!this.subscribers[msg]) {\n        this.subscribers[msg] = [];\n      }\n      this.subscribers[msg].push(handler);\n      return this;\n    }\n  }, {\n    key: 'unsubscribe',\n    value: function unsubscribe() /* msg, handler */{\n      // TODO\n      return this;\n    }\n  }, {\n    key: 'publish',\n    value: function publish(msg, data) {\n      if (!this.subscribers[msg]) {\n        return;\n      }\n      for (idx = 0, handler; handler = this.subscribers[msg][idx]; idx++) {\n        handler(msg, data);\n      }\n      return this;\n    }\n  }, {\n    key: 'addSystems',\n    value: function addSystems(systemsData) {\n      for (systemName in systemsData) {\n        systemAttrs = systemsData[systemName];\n        systemCls = getSystem(systemName);\n        system = new systemCls(systemAttrs);\n        system.setWorld(this);\n        this.systems[systemName] = system;\n      }\n    }\n  }, {\n    key: 'getSystem',\n    value: function getSystem(systemName) {\n      return this.systems[systemName];\n    }\n  }, {\n    key: 'tick',\n    value: function tick(timeDeltaMS) {\n      timeDelta = timeDeltaMS / 1000;\n      for (systemName in this.systems) {\n        this.systems[systemName].updateStart(timeDelta);\n      }\n      for (systemName in this.systems) {\n        this.systems[systemName].update(timeDelta);\n      }\n      for (systemName in this.systems) {\n        this.systems[systemName].updateEnd(timeDelta);\n      }\n    }\n  }, {\n    key: 'tickLoop',\n    value: function tickLoop() {\n      timeNow = Date.now();\n      timeDelta = Math.min(timeNow - this.lastTickTime, this.maxTickDelta);\n      this.lastTickTime = timeNow;\n\n      if (!this.isPaused) {\n        // Fixed-step game logic loop\n        // see: http://gafferongames.com/game-physics/fix-your-timestep/\n        this.tickAccumulator += timeDelta;\n        while (this.tickAccumulator > this.tickDuration) {\n          this.tick(this.tickDuration);\n          this.tickAccumulator -= this.tickDuration;\n        }\n      }\n\n      if (this.isRunning) {\n        setTimeout(this.boundTickLoop, this.tickDuration);\n      }\n    }\n  }, {\n    key: 'draw',\n    value: function draw(timeDeltaMS) {\n      timeDelta = timeDeltaMS / 1000;\n      for (systemName in this.systems) {\n        this.systems[systemName].drawStart(timeDelta);\n      }\n      for (systemName in this.systems) {\n        this.systems[systemName].draw(timeDelta);\n      }\n      for (systemName in this.systems) {\n        this.systems[systemName].drawEnd(timeDelta);\n      }\n    }\n  }, {\n    key: 'drawLoop',\n    value: function drawLoop(timestamp) {\n      if (!this.lastDrawTime) {\n        this.lastDrawTime = timestamp;\n      }\n      timeDelta = timestamp - this.lastDrawTime;\n      this.lastDrawTime = timestamp;\n\n      if (!this.isPaused) {\n        this.draw(timeDelta);\n      }\n\n      if (this.isRunning) {\n        requestAnimationFrame(this.boundDrawLoop);\n      }\n    }\n  }, {\n    key: 'generateEntityId',\n    value: function generateEntityId() {\n      return ++this.lastEntityId;\n    }\n  }, {\n    key: 'insert',\n    value: function insert() {\n      var out = [];\n\n      for (var _len = arguments.length, items = Array(_len), _key = 0; _key < _len; _key++) {\n        items[_key] = arguments[_key];\n      }\n\n      for (idx = 0; item = items[idx]; idx++) {\n        entityId = this.generateEntityId();\n        for (componentName in item) {\n          componentAttrs = item[componentName];\n          this.addComponent(entityId, componentName, componentAttrs);\n        }\n        if (this.world) this.world.publish(Messages.ENTITY_INSERT, entityId);\n        out.push(entityId);\n      }\n      return out.length > 1 ? out : out[0];\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy(entityId) {\n      if (this.world) this.world.publish(Messages.ENTITY_DESTROY, entityId);\n      for (componentName in this.store) {\n        this.removeComponent(entityId, componentName);\n      }\n    }\n  }, {\n    key: 'addComponent',\n    value: function addComponent(entityId, componentName, componentAttrs) {\n      var componentManager = getComponent(componentName);\n      var component = componentManager.create(componentAttrs);\n      if (!this.store[componentName]) {\n        this.store[componentName] = {};\n      }\n      this.store[componentName][entityId] = component;\n    }\n  }, {\n    key: 'removeComponent',\n    value: function removeComponent(entityId, componentName) {\n      if (entityId in this.store[componentName]) {\n        delete this.store[componentName][entityId];\n      }\n    }\n  }, {\n    key: 'hasComponent',\n    value: function hasComponent(entityId, componentName) {\n      return componentName in this.store && entityId in this.store[componentName];\n    }\n  }, {\n    key: 'get',\n    value: function get(componentName, entityId) {\n      if (!this.store[componentName]) {\n        return null;\n      } else if (!entityId) {\n        return this.store[componentName];\n      } else {\n        return this.store[componentName][entityId];\n      }\n    }\n  }]);\n\n  return World;\n}();\n\nvar Component = function () {\n  function Component() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, Component);\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(Component, null, [{\n    key: 'defaults',\n    value: function defaults() {\n      return {};\n    }\n  }, {\n    key: 'create',\n    value: function create(attrs) {\n      return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({}, this.defaults(), attrs || {});\n    }\n  }]);\n\n  return Component;\n}();\n\nvar System = function () {\n  function System(options) {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, System);\n\n    this.options = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({}, this.defaultOptions(), options || {});\n    this.debug = this.options.debug || false;\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(System, [{\n    key: 'defaultOptions',\n    value: function defaultOptions() {\n      return {};\n    }\n  }, {\n    key: 'setWorld',\n    value: function setWorld(world) {\n      this.world = world;\n    }\n  }, {\n    key: 'matchComponent',\n    value: function matchComponent() {\n      return '';\n    }\n  }, {\n    key: 'initialize',\n    value: function initialize() {}\n  }, {\n    key: 'getMatchingComponents',\n    value: function getMatchingComponents() {\n      return this.world.get(this.matchComponent());\n    }\n  }, {\n    key: 'updateStart',\n    value: function updateStart() /* timeDelta */{}\n  }, {\n    key: 'update',\n    value: function update(timeDelta) {\n      matches = this.getMatchingComponents();\n      for (entityId in matches) {\n        this.updateComponent(timeDelta, entityId, matches[entityId]);\n      }\n    }\n  }, {\n    key: 'updateComponent',\n    value: function updateComponent() /* timeDelta, entityId, component */{}\n  }, {\n    key: 'updateEnd',\n    value: function updateEnd() /* timeDelta */{}\n  }, {\n    key: 'drawStart',\n    value: function drawStart() /* timeDelta */{}\n  }, {\n    key: 'draw',\n    value: function draw() /* timeDelta */{}\n  }, {\n    key: 'getDebugGraphics',\n    value: function getDebugGraphics() {\n      // TODO make this work again someday\n      return;\n    }\n  }, {\n    key: 'drawEnd',\n    value: function drawEnd() /* timeDelta */{}\n  }]);\n\n  return System;\n}();\n\nvar componentRegistry = {};\n\nfunction registerComponent(componentName, componentManager) {\n  componentRegistry[componentName] = componentManager;\n}\n\nfunction getComponent(componentName) {\n  return componentRegistry[componentName];\n}\n\nvar systemRegistry = {};\n\nfunction registerSystem(systemName, system) {\n  systemRegistry[systemName] = system;\n}\n\nfunction getSystem(systemName) {\n  return systemRegistry[systemName];\n}\n\n/***/ }),\n/* 1 */\n/*!**************************************************************!*\\\n  !*** ./node_modules/babel-runtime/helpers/classCallCheck.js ***!\n  \\**************************************************************/\n/*! no static exports found */\n/*! exports used: default */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\n/***/ }),\n/* 2 */\n/*!***********************************************************!*\\\n  !*** ./node_modules/babel-runtime/helpers/createClass.js ***!\n  \\***********************************************************/\n/*! no static exports found */\n/*! exports used: default */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\n\nvar _defineProperty = __webpack_require__(/*! ../core-js/object/define-property */ 84);\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n/***/ }),\n/* 3 */\n/*!***********************************************************************!*\\\n  !*** ./node_modules/babel-runtime/core-js/object/get-prototype-of.js ***!\n  \\***********************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(/*! core-js/library/fn/object/get-prototype-of */ 87), __esModule: true };\n\n/***/ }),\n/* 4 */\n/*!*************************************************************************!*\\\n  !*** ./node_modules/babel-runtime/helpers/possibleConstructorReturn.js ***!\n  \\*************************************************************************/\n/*! no static exports found */\n/*! exports used: default */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\n\nvar _typeof2 = __webpack_require__(/*! ../helpers/typeof */ 67);\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && ((typeof call === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(call)) === \"object\" || typeof call === \"function\") ? call : self;\n};\n\n/***/ }),\n/* 5 */\n/*!********************************************************!*\\\n  !*** ./node_modules/babel-runtime/helpers/inherits.js ***!\n  \\********************************************************/\n/*! no static exports found */\n/*! exports used: default */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\n\nvar _setPrototypeOf = __webpack_require__(/*! ../core-js/object/set-prototype-of */ 110);\n\nvar _setPrototypeOf2 = _interopRequireDefault(_setPrototypeOf);\n\nvar _create = __webpack_require__(/*! ../core-js/object/create */ 114);\n\nvar _create2 = _interopRequireDefault(_create);\n\nvar _typeof2 = __webpack_require__(/*! ../helpers/typeof */ 67);\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(superClass)));\n  }\n\n  subClass.prototype = (0, _create2.default)(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf2.default ? (0, _setPrototypeOf2.default)(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\n/***/ }),\n/* 6 */\n/*!*******************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_core.js ***!\n  \\*******************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports) {\n\nvar core = module.exports = { version: '2.5.0' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n\n\n/***/ }),\n/* 7 */\n/*!*********************************!*\\\n  !*** ./src/plugins/position.js ***!\n  \\*********************************/\n/*! exports provided: Position, PositionSystem */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Position\", function() { return Position; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PositionSystem\", function() { return PositionSystem; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_get__ = __webpack_require__(/*! babel-runtime/helpers/get */ 25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_get___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_get__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(/*! babel-runtime/core-js/object/get-prototype-of */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck__ = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass__ = __webpack_require__(/*! babel-runtime/helpers/createClass */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(/*! babel-runtime/helpers/possibleConstructorReturn */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits__ = __webpack_require__(/*! babel-runtime/helpers/inherits */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__lib_core__ = __webpack_require__(/*! ../lib/core */ 0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__lib_QuadTree__ = __webpack_require__(/*! ../lib/QuadTree */ 120);\n\n\n\n\n\n\n\n\n\nvar Position = function (_Component) {\n  __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits___default()(Position, _Component);\n\n  function Position() {\n    __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck___default()(this, Position);\n\n    return __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn___default()(this, (Position.__proto__ || __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of___default()(Position)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass___default()(Position, null, [{\n    key: 'defaults',\n    value: function defaults() {\n      return { x: 0, y: 0, rotation: 0 };\n    }\n  }]);\n\n  return Position;\n}(__WEBPACK_IMPORTED_MODULE_6__lib_core__[\"Component\"]);\n\nObject(__WEBPACK_IMPORTED_MODULE_6__lib_core__[\"registerComponent\"])('Position', Position);\n\nvar entityId = void 0,\n    sprite = void 0,\n    position = void 0,\n    positions = void 0;\n\nvar PositionSystem = function (_System) {\n  __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits___default()(PositionSystem, _System);\n\n  function PositionSystem() {\n    __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck___default()(this, PositionSystem);\n\n    return __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn___default()(this, (PositionSystem.__proto__ || __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of___default()(PositionSystem)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass___default()(PositionSystem, [{\n    key: 'defaultOptions',\n    value: function defaultOptions() {\n      return {\n        quadtreeMaxAge: 2,\n        quadtreeObjectsPerNode: 5,\n        quadtreeMaxLevels: 5\n      };\n    }\n  }, {\n    key: 'matchComponent',\n    value: function matchComponent() {\n      return 'Position';\n    }\n  }, {\n    key: 'initialize',\n    value: function initialize() {\n      this.bounds = {\n        left: 0, top: 0, right: 0, bottom: 0,\n        width: 0, height: 0\n      };\n      this.quadtree = new __WEBPACK_IMPORTED_MODULE_7__lib_QuadTree__[\"a\" /* default */](-1000, -1000, 2000, 2000, this.options.quadtreeObjectsPerNode, this.options.quadtreeMaxLevels);\n    }\n  }, {\n    key: 'update',\n    value: function update(timeDelta) {\n      this.updateBounds();\n      this.resetQuadtree(timeDelta);\n      __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_get___default()(PositionSystem.prototype.__proto__ || __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of___default()(PositionSystem.prototype), 'update', this).call(this, timeDelta);\n    }\n  }, {\n    key: 'resetQuadtree',\n    value: function resetQuadtree() {\n      this.quadtree.reset(this.bounds.left, this.bounds.top, this.bounds.width, this.bounds.height, this.options.quadtreeObjectsPerNode, this.options.quadtreeMaxLevels);\n    }\n  }, {\n    key: 'updateBounds',\n    value: function updateBounds() {\n      this.bounds.left = this.bounds.top = this.bounds.right = this.bounds.bottom = null;\n      positions = this.getMatchingComponents();\n      for (entityId in positions) {\n        position = positions[entityId];\n        if (this.bounds.left === null || position.left < this.bounds.left) {\n          this.bounds.left = position.left;\n        }\n        if (this.bounds.top === null || position.top < this.bounds.top) {\n          this.bounds.top = position.top;\n        }\n        if (this.bounds.right === null || position.right > this.bounds.right) {\n          this.bounds.right = position.right;\n        }\n        if (this.bounds.bottom === null || position.bottom > this.bounds.bottom) {\n          this.bounds.bottom = position.bottom;\n        }\n      }\n      this.bounds.width = this.bounds.right - this.bounds.left;\n      this.bounds.height = this.bounds.bottom - this.bounds.top;\n    }\n  }, {\n    key: 'updateComponent',\n    value: function updateComponent(timeDelta, entityId, position) {\n      sprite = this.world.get('Sprite', entityId);\n      if (!sprite) {\n        return;\n      }\n\n      var halfWidth = sprite.width / 2;\n      var halfHeight = sprite.height / 2;\n\n      position.entityId = entityId;\n      position.width = sprite.width;\n      position.height = sprite.height;\n      position.left = position.x - halfWidth;\n      position.top = position.y - halfHeight;\n      position.right = position.x + halfWidth;\n      position.bottom = position.y + halfHeight;\n\n      this.quadtree.insert(position);\n    }\n  }, {\n    key: 'draw',\n    value: function draw() /* timeDelta */{\n      var g = this.getDebugGraphics();\n      if (!g) {\n        return;\n      }\n\n      g.lineStyle(4, 0x882222);\n      positions = this.getMatchingComponents();\n      for (entityId in positions) {\n        position = positions[entityId];\n        sprite = this.world.get('Sprite', entityId);\n        g.drawCircle(position.x, position.y, sprite.width / 2);\n        g.moveTo(position.x - 20, position.y);\n        g.lineTo(position.x + 20, position.y);\n        g.moveTo(position.x, position.y - 20);\n        g.lineTo(position.x, position.y + 20);\n      }\n\n      g.lineStyle(4, 0x228822);\n      this.drawDebugQuadtreeNode(g, this.quadtree);\n\n      g.lineStyle(4, 0xffff33);\n      g.moveTo(-20, 0);\n      g.lineTo(20, 0);\n      g.moveTo(0, -20);\n      g.lineTo(0, 20);\n      g.moveTo(0, 0);\n      g.drawRect(this.bounds.left, this.bounds.top, this.bounds.width, this.bounds.height);\n    }\n  }, {\n    key: 'drawDebugQuadtreeNode',\n    value: function drawDebugQuadtreeNode(g, root) {\n      if (!root) {\n        return;\n      }\n\n      g.lineStyle(4, 0x883388);\n      g.drawRect(root.bounds.left, root.bounds.top, root.bounds.width, root.bounds.height);\n\n      g.lineStyle(4, 0x112222);\n      root.objects.forEach(function (body) {\n        return g.drawRect(body.left, body.top, body.width, body.height);\n      });\n\n      this.drawDebugQuadtreeNode(g, root.nodes[0]);\n      this.drawDebugQuadtreeNode(g, root.nodes[1]);\n      this.drawDebugQuadtreeNode(g, root.nodes[2]);\n      this.drawDebugQuadtreeNode(g, root.nodes[3]);\n    }\n  }]);\n\n  return PositionSystem;\n}(__WEBPACK_IMPORTED_MODULE_6__lib_core__[\"System\"]);\n\nObject(__WEBPACK_IMPORTED_MODULE_6__lib_core__[\"registerSystem\"])('Position', PositionSystem);\n\n/***/ }),\n/* 8 */\n/*!*******************************!*\\\n  !*** ./src/plugins/motion.js ***!\n  \\*******************************/\n/*! exports provided: Motion, MotionSystem */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Motion\", function() { return Motion; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MotionSystem\", function() { return MotionSystem; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(/*! babel-runtime/core-js/object/get-prototype-of */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__ = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__ = __webpack_require__(/*! babel-runtime/helpers/createClass */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(/*! babel-runtime/helpers/possibleConstructorReturn */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__ = __webpack_require__(/*! babel-runtime/helpers/inherits */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__lib_core__ = __webpack_require__(/*! ../lib/core */ 0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__position__ = __webpack_require__(/*! ./position */ 7);\n\n\n\n\n\n\n\n\n\nvar PI2 = Math.PI * 2;\n\nvar Motion = function (_Core$Component) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(Motion, _Core$Component);\n\n  function Motion() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, Motion);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (Motion.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(Motion)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(Motion, null, [{\n    key: 'defaults',\n    value: function defaults() {\n      return { dx: 0, dy: 0, drotation: 0 };\n    }\n  }]);\n\n  return Motion;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"Component\"]);\n__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerComponent\"]('Motion', Motion);\n\nvar MotionSystem = function (_Core$System) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(MotionSystem, _Core$System);\n\n  function MotionSystem() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, MotionSystem);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (MotionSystem.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(MotionSystem)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(MotionSystem, [{\n    key: 'matchComponent',\n    value: function matchComponent() {\n      return 'Motion';\n    }\n  }, {\n    key: 'updateComponent',\n    value: function updateComponent(timeDelta, entityId, motion) {\n      var pos = this.world.get('Position', entityId);\n      pos.x += motion.dx * timeDelta;\n      pos.y += motion.dy * timeDelta;\n\n      // Update the rotation, ensuring a 0..2*Math.PI range.\n      pos.rotation = (pos.rotation + motion.drotation * timeDelta) % PI2;\n      if (pos.rotation < 0) {\n        pos.rotation += PI2;\n      }\n    }\n  }]);\n\n  return MotionSystem;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"System\"]);\n__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerSystem\"]('Motion', MotionSystem);\n\n/***/ }),\n/* 9 */\n/*!******************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_wks.js ***!\n  \\******************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar store = __webpack_require__(/*! ./_shared */ 48)('wks');\nvar uid = __webpack_require__(/*! ./_uid */ 41);\nvar Symbol = __webpack_require__(/*! ./_global */ 12).Symbol;\nvar USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function (name) {\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n\n\n/***/ }),\n/* 10 */\n/*!*********************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_export.js ***!\n  \\*********************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar global = __webpack_require__(/*! ./_global */ 12);\nvar core = __webpack_require__(/*! ./_core */ 6);\nvar ctx = __webpack_require__(/*! ./_ctx */ 42);\nvar hide = __webpack_require__(/*! ./_hide */ 22);\nvar PROTOTYPE = 'prototype';\n\nvar $export = function (type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var IS_WRAP = type & $export.W;\n  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});\n  var expProto = exports[PROTOTYPE];\n  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE];\n  var key, own, out;\n  if (IS_GLOBAL) source = name;\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if (own && key in exports) continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function (C) {\n      var F = function (a, b, c) {\n        if (this instanceof C) {\n          switch (arguments.length) {\n            case 0: return new C();\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if (IS_PROTO) {\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if (type & $export.R && expProto && !expProto[key]) hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library`\nmodule.exports = $export;\n\n\n/***/ }),\n/* 11 */\n/*!*************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_to-iobject.js ***!\n  \\*************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = __webpack_require__(/*! ./_iobject */ 64);\nvar defined = __webpack_require__(/*! ./_defined */ 45);\nmodule.exports = function (it) {\n  return IObject(defined(it));\n};\n\n\n/***/ }),\n/* 12 */\n/*!*********************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_global.js ***!\n  \\*********************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports) {\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n\n\n/***/ }),\n/* 13 */\n/*!************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_object-dp.js ***!\n  \\************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar anObject = __webpack_require__(/*! ./_an-object */ 23);\nvar IE8_DOM_DEFINE = __webpack_require__(/*! ./_ie8-dom-define */ 61);\nvar toPrimitive = __webpack_require__(/*! ./_to-primitive */ 43);\nvar dP = Object.defineProperty;\n\nexports.f = __webpack_require__(/*! ./_descriptors */ 14) ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return dP(O, P, Attributes);\n  } catch (e) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n\n\n/***/ }),\n/* 14 */\n/*!**************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_descriptors.js ***!\n  \\**************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// Thank's IE8 for his funny defineProperty\nmodule.exports = !__webpack_require__(/*! ./_fails */ 24)(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n\n\n/***/ }),\n/* 15 */\n/*!**************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_object-keys.js ***!\n  \\**************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys = __webpack_require__(/*! ./_object-keys-internal */ 63);\nvar enumBugKeys = __webpack_require__(/*! ./_enum-bug-keys */ 49);\n\nmodule.exports = Object.keys || function keys(O) {\n  return $keys(O, enumBugKeys);\n};\n\n\n/***/ }),\n/* 16 */\n/*!******************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_has.js ***!\n  \\******************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports) {\n\nvar hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n\n\n/***/ }),\n/* 17 */\n/*!*****************************!*\\\n  !*** ./src/lib/Vector2D.js ***!\n  \\*****************************/\n/*! exports provided: default */\n/*! exports used: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = Vector2D;\n/*\r\n  Originally by Vitalii [Nayjest] Stepanenko <gmail@vitaliy.in>\r\n  Tweaky & fixes by Les Orchard <me@lmorchard.com>\r\n*/\n\nfunction Vector2D(x, y) {\n  this.x = x || 0;\n  this.y = y || 0;\n}\n\nVector2D.cloneFrom = function (object) {\n  return new Vector2D(object.x, object.y);\n};\n\nVector2D.fromArray = function (array) {\n  return new Vector2D(array[0], array[1]);\n};\n\nVector2D.zero = new Vector2D(0, 0);\n\nVector2D.prototype.add = function (vector) {\n  this.x += vector.x;\n  this.y += vector.y;\n  return this;\n};\n\nVector2D.prototype.addScalar = function (val) {\n  this.x += val;\n  this.y += val;\n  return this;\n};\n\nVector2D.prototype.eq = function (vector) {\n  return vector.x === this.x && vector.y === this.y;\n};\n\nVector2D.prototype.subtract = function (vector) {\n  this.x -= vector.x;\n  this.y -= vector.y;\n  return this;\n};\n\nVector2D.prototype.clone = function () {\n  return new Vector2D(this.x, this.y);\n};\n\nVector2D.prototype.set = function (vector) {\n  this.x = vector.x;\n  this.y = vector.y;\n  return this;\n};\n\nVector2D.prototype.setValues = function (_at_x, _at_y) {\n  this.x = _at_x;\n  this.y = _at_y;\n  return this;\n};\n\nVector2D.prototype.dist = function (vector) {\n  return Math.sqrt((vector.x - this.x) * (vector.x - this.x) + (vector.y - this.y) * (vector.y - this.y));\n};\n\nVector2D.prototype.normalise = function () {\n  return this.normalize();\n};\n\nVector2D.prototype.normalize = function () {\n  if (!this.isZero()) {\n    var m = this.magnitude();\n    this.x /= m;\n    this.y /= m;\n  }\n  return this;\n};\n\nVector2D.prototype.isZero = function () {\n  return this.x === 0 && this.y === 0;\n};\n\nVector2D.prototype.reverse = function () {\n  this.x = -this.x;\n  this.y = -this.y;\n  return this;\n};\n\nVector2D.prototype.magnitude = function () {\n  return Math.sqrt(this.x * this.x + this.y * this.y);\n};\n\nVector2D.prototype.toArray = function () {\n  return [this.x, this.y];\n};\n\nVector2D.prototype.angle = function () {\n  return Math.atan2(this.y, this.x);\n};\n\nVector2D.prototype.rotate = function (angle) {\n  var cos = Math.cos(angle);\n  var sin = Math.sin(angle);\n  return this.setValues(this.x * cos - this.y * sin, this.x * sin + this.y * cos);\n};\n\nVector2D.prototype.angleTo = function (vector) {\n  return Math.atan2(vector.y - this.y, vector.x - this.x);\n};\n\nVector2D.prototype.rotateAround = function (point, angle) {\n  return this.subtract(point).rotate(angle).add(point);\n};\n\nVector2D.prototype.multiplyScalar = function (val) {\n  this.x *= val;\n  this.y *= val;\n  return this;\n};\n\nVector2D.prototype.multiply = function (vector) {\n  this.x *= vector.x;\n  this.y *= vector.y;\n  return this;\n};\n\nVector2D.prototype.divide = function (vector) {\n  this.x /= vector.x;\n  this.y /= vector.y;\n  return this;\n};\n\nVector2D.prototype.divideScalar = function (val) {\n  this.x /= val;\n  this.y /= val;\n  return this;\n};\n\nVector2D.prototype.round = function () {\n  this.x = Math.round(this.x);\n  this.y = Math.round(this.y);\n  return this;\n};\n\nVector2D.prototype.dot = function (vector) {\n  return this.x * vector.x + this.y * vector.y;\n};\n\n/***/ }),\n/* 18 */\n/*!*******************************!*\\\n  !*** ./src/plugins/datGui.js ***!\n  \\*******************************/\n/*! exports provided: DatGui */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DatGui\", function() { return DatGui; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(/*! babel-runtime/core-js/object/get-prototype-of */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__ = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__ = __webpack_require__(/*! babel-runtime/helpers/createClass */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(/*! babel-runtime/helpers/possibleConstructorReturn */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__ = __webpack_require__(/*! babel-runtime/helpers/inherits */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__lib_core__ = __webpack_require__(/*! ../lib/core */ 0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_dat_gui__ = __webpack_require__(/*! dat-gui */ 121);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_dat_gui___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_dat_gui__);\n\n\n\n\n\n\n\n\n\nvar DatGui = function (_Core$System) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(DatGui, _Core$System);\n\n  function DatGui() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, DatGui);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (DatGui.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(DatGui)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(DatGui, [{\n    key: 'initialize',\n    value: function initialize() {\n      this.gui = new __WEBPACK_IMPORTED_MODULE_6_dat_gui___default.a.GUI();\n    }\n  }]);\n\n  return DatGui;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"System\"]);\n__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerSystem\"]('DatGui', DatGui);\n\n/***/ }),\n/* 19 */\n/*!**********************************!*\\\n  !*** ./src/plugins/drawStats.js ***!\n  \\**********************************/\n/*! exports provided: DrawStats */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DrawStats\", function() { return DrawStats; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(/*! babel-runtime/core-js/object/get-prototype-of */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__ = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__ = __webpack_require__(/*! babel-runtime/helpers/createClass */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(/*! babel-runtime/helpers/possibleConstructorReturn */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__ = __webpack_require__(/*! babel-runtime/helpers/inherits */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__lib_core__ = __webpack_require__(/*! ../lib/core */ 0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_stats_js__ = __webpack_require__(/*! stats-js */ 124);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_stats_js___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_stats_js__);\n\n\n\n\n\n\n\n\n\nvar DrawStats = function (_Core$System) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(DrawStats, _Core$System);\n\n  function DrawStats() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, DrawStats);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (DrawStats.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(DrawStats)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(DrawStats, [{\n    key: 'initialize',\n    value: function initialize() {\n\n      this.drawStats = new __WEBPACK_IMPORTED_MODULE_6_stats_js___default.a();\n      this.drawStats.setMode(0);\n      this.drawStats.domElement.style.position = 'absolute';\n      this.drawStats.domElement.style.left = '0px';\n      this.drawStats.domElement.style.top = '0px';\n      document.body.appendChild(this.drawStats.domElement);\n\n      this.tickStats = new __WEBPACK_IMPORTED_MODULE_6_stats_js___default.a();\n      this.tickStats.setMode(0);\n      this.tickStats.domElement.style.position = 'absolute';\n      this.tickStats.domElement.style.left = '0px';\n      this.tickStats.domElement.style.top = '55px';\n      document.body.appendChild(this.tickStats.domElement);\n    }\n  }, {\n    key: 'updateStart',\n    value: function updateStart() {\n      this.tickStats.begin();\n    }\n  }, {\n    key: 'updateEnd',\n    value: function updateEnd() {\n      this.tickStats.end();\n    }\n  }, {\n    key: 'drawStart',\n    value: function drawStart() {\n      this.drawStats.begin();\n    }\n  }, {\n    key: 'drawEnd',\n    value: function drawEnd() {\n      this.drawStats.end();\n    }\n  }]);\n\n  return DrawStats;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"System\"]);\n__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerSystem\"]('DrawStats', DrawStats);\n\n/***/ }),\n/* 20 */\n/*!************************************!*\\\n  !*** ./src/plugins/memoryStats.js ***!\n  \\************************************/\n/*! exports provided: MemoryStatsSystem */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MemoryStatsSystem\", function() { return MemoryStatsSystem; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(/*! babel-runtime/core-js/object/get-prototype-of */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__ = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__ = __webpack_require__(/*! babel-runtime/helpers/createClass */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(/*! babel-runtime/helpers/possibleConstructorReturn */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__ = __webpack_require__(/*! babel-runtime/helpers/inherits */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__lib_core__ = __webpack_require__(/*! ../lib/core */ 0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_memory_stats__ = __webpack_require__(/*! memory-stats */ 127);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_memory_stats___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_memory_stats__);\n\n\n\n\n\n\n\n\n\nvar MemoryStatsSystem = function (_Core$System) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(MemoryStatsSystem, _Core$System);\n\n  function MemoryStatsSystem() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, MemoryStatsSystem);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (MemoryStatsSystem.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(MemoryStatsSystem)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(MemoryStatsSystem, [{\n    key: 'initialize',\n    value: function initialize() {\n      this.stats = new __WEBPACK_IMPORTED_MODULE_6_memory_stats___default.a();\n      this.stats.domElement.style.position = 'fixed';\n      this.stats.domElement.style.left = '85px';\n      this.stats.domElement.style.top = '0px';\n      document.body.appendChild(this.stats.domElement);\n    }\n  }, {\n    key: 'draw',\n    value: function draw() {\n      this.stats.update();\n    }\n  }]);\n\n  return MemoryStatsSystem;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"System\"]);\n__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerSystem\"]('MemoryStats', MemoryStatsSystem);\n\n/***/ }),\n/* 21 */\n/*!*****************************!*\\\n  !*** ./src/plugins/name.js ***!\n  \\*****************************/\n/*! exports provided: Name */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Name\", function() { return Name; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(/*! babel-runtime/core-js/object/get-prototype-of */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__ = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__ = __webpack_require__(/*! babel-runtime/helpers/createClass */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(/*! babel-runtime/helpers/possibleConstructorReturn */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__ = __webpack_require__(/*! babel-runtime/helpers/inherits */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__lib_core__ = __webpack_require__(/*! ../lib/core */ 0);\n\n\n\n\n\n\n\nvar Name = function (_Core$Component) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(Name, _Core$Component);\n\n  function Name() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, Name);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (Name.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(Name)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(Name, null, [{\n    key: 'defaults',\n    value: function defaults() {\n      return { name: 'unnamed' };\n    }\n  }, {\n    key: 'findEntityByName',\n    value: function findEntityByName(world, name) {\n      var names = world.get('Name');\n      for (var nid in names) {\n        var nameComponent = names[nid];\n        if (nameComponent.name === name) {\n          return nid;\n        }\n      }\n    }\n  }]);\n\n  return Name;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"Component\"]);\n\n__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerComponent\"]('Name', Name);\n\n/***/ }),\n/* 22 */\n/*!*******************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_hide.js ***!\n  \\*******************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar dP = __webpack_require__(/*! ./_object-dp */ 13);\nvar createDesc = __webpack_require__(/*! ./_property-desc */ 32);\nmodule.exports = __webpack_require__(/*! ./_descriptors */ 14) ? function (object, key, value) {\n  return dP.f(object, key, createDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n\n\n/***/ }),\n/* 23 */\n/*!************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_an-object.js ***!\n  \\************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar isObject = __webpack_require__(/*! ./_is-object */ 31);\nmodule.exports = function (it) {\n  if (!isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n\n\n/***/ }),\n/* 24 */\n/*!********************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_fails.js ***!\n  \\********************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports) {\n\nmodule.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n\n\n/***/ }),\n/* 25 */\n/*!***************************************************!*\\\n  !*** ./node_modules/babel-runtime/helpers/get.js ***!\n  \\***************************************************/\n/*! no static exports found */\n/*! exports used: default */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\n\nvar _getPrototypeOf = __webpack_require__(/*! ../core-js/object/get-prototype-of */ 3);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _getOwnPropertyDescriptor = __webpack_require__(/*! ../core-js/object/get-own-property-descriptor */ 117);\n\nvar _getOwnPropertyDescriptor2 = _interopRequireDefault(_getOwnPropertyDescriptor);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function get(object, property, receiver) {\n  if (object === null) object = Function.prototype;\n  var desc = (0, _getOwnPropertyDescriptor2.default)(object, property);\n\n  if (desc === undefined) {\n    var parent = (0, _getPrototypeOf2.default)(object);\n\n    if (parent === null) {\n      return undefined;\n    } else {\n      return get(parent, property, receiver);\n    }\n  } else if (\"value\" in desc) {\n    return desc.value;\n  } else {\n    var getter = desc.get;\n\n    if (getter === undefined) {\n      return undefined;\n    }\n\n    return getter.call(receiver);\n  }\n};\n\n/***/ }),\n/* 26 */\n/*!*******************************!*\\\n  !*** ./src/plugins/health.js ***!\n  \\*******************************/\n/*! exports provided: MSG_DAMAGE, MSG_HEAL, Health, HealthSystem */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MSG_DAMAGE\", function() { return MSG_DAMAGE; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MSG_HEAL\", function() { return MSG_HEAL; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Health\", function() { return Health; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"HealthSystem\", function() { return HealthSystem; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(/*! babel-runtime/core-js/object/get-prototype-of */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__ = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__ = __webpack_require__(/*! babel-runtime/helpers/createClass */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(/*! babel-runtime/helpers/possibleConstructorReturn */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_get__ = __webpack_require__(/*! babel-runtime/helpers/get */ 25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_get___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_get__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits__ = __webpack_require__(/*! babel-runtime/helpers/inherits */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__lib_core__ = __webpack_require__(/*! ../lib/core */ 0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__spawn__ = __webpack_require__(/*! ./spawn */ 27);\n\n\n\n\n\n\n\n\n\nvar MSG_DAMAGE = 'healthDamage';\nvar MSG_HEAL = 'healthHeal';\n\nvar health = void 0;\n\nvar Health = function (_Component) {\n  __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits___default()(Health, _Component);\n\n  function Health() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, Health);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (Health.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(Health)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(Health, null, [{\n    key: 'defaults',\n    value: function defaults() {\n      return {\n        max: 1000,\n        current: null,\n        show_bar: true\n      };\n    }\n  }, {\n    key: 'create',\n    value: function create(attrs) {\n      var c = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_get___default()(Health.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(Health), 'create', this).call(this, attrs);\n      c.current = c.max;\n      return c;\n    }\n  }]);\n\n  return Health;\n}(__WEBPACK_IMPORTED_MODULE_6__lib_core__[\"Component\"]);\n\nObject(__WEBPACK_IMPORTED_MODULE_6__lib_core__[\"registerComponent\"])('Health', Health);\n\nvar HealthSystem = function (_System) {\n  __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits___default()(HealthSystem, _System);\n\n  function HealthSystem() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, HealthSystem);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (HealthSystem.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(HealthSystem)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(HealthSystem, [{\n    key: 'initialize',\n    value: function initialize() {\n      var _this3 = this;\n\n      this.world.subscribe(MSG_DAMAGE, function (msg, data) {\n        health = _this3.world.get('Health', data.to);\n        if (health) {\n          health.current -= data.amount;\n        }\n      }).subscribe(MSG_HEAL, function (msg, data) {\n        health = _this3.world.get('Health', data.to);\n        if (health) {\n          health.current += data.amount;\n        }\n      });\n    }\n  }, {\n    key: 'matchComponent',\n    value: function matchComponent() {\n      return 'Health';\n    }\n  }, {\n    key: 'updateComponent',\n    value: function updateComponent(timeDelta, entityId, health) {\n      if (health.current === null) {\n        health.current = health.max;\n      }\n      if (health.current < 0) {\n        this.world.publish(__WEBPACK_IMPORTED_MODULE_7__spawn__[\"MSG_DESTROY\"], entityId);\n      }\n    }\n  }]);\n\n  return HealthSystem;\n}(__WEBPACK_IMPORTED_MODULE_6__lib_core__[\"System\"]);\n\nObject(__WEBPACK_IMPORTED_MODULE_6__lib_core__[\"registerSystem\"])('Health', HealthSystem);\n\n/***/ }),\n/* 27 */\n/*!******************************!*\\\n  !*** ./src/plugins/spawn.js ***!\n  \\******************************/\n/*! exports provided: MSG_SPAWN, MSG_DESTROY, MSG_DESPAWN, MSG_CAPTURE_CAMERA, Spawn, SpawnSystem */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MSG_SPAWN\", function() { return MSG_SPAWN; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MSG_DESTROY\", function() { return MSG_DESTROY; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MSG_DESPAWN\", function() { return MSG_DESPAWN; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MSG_CAPTURE_CAMERA\", function() { return MSG_CAPTURE_CAMERA; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Spawn\", function() { return Spawn; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SpawnSystem\", function() { return SpawnSystem; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(/*! babel-runtime/core-js/object/get-prototype-of */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__ = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__ = __webpack_require__(/*! babel-runtime/helpers/createClass */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(/*! babel-runtime/helpers/possibleConstructorReturn */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__ = __webpack_require__(/*! babel-runtime/helpers/inherits */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__lib_core__ = __webpack_require__(/*! ../lib/core */ 0);\n\n\n\n\n\n\n\nvar MSG_SPAWN = 'spawnSpawn';\nvar MSG_DESTROY = 'spawnDestroy';\nvar MSG_DESPAWN = 'spawnDespawn';\nvar MSG_CAPTURE_CAMERA = 'spawnCaptureCamera';\n\nvar spawn = void 0;\n\nvar Spawn = function (_Component) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(Spawn, _Component);\n\n  function Spawn() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, Spawn);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (Spawn.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(Spawn)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(Spawn, null, [{\n    key: 'defaults',\n    value: function defaults() {\n      return {\n        ttl: null,\n        age: 0,\n        destroy: false,\n        tombstone: null\n      };\n    }\n  }]);\n\n  return Spawn;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"Component\"]);\n\nObject(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerComponent\"])('Spawn', Spawn);\n\nvar SpawnSystem = function (_System) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(SpawnSystem, _System);\n\n  function SpawnSystem() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, SpawnSystem);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (SpawnSystem.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(SpawnSystem)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(SpawnSystem, [{\n    key: 'defaultOptions',\n    value: function defaultOptions() {\n      return {};\n    }\n  }, {\n    key: 'initialize',\n    value: function initialize() {\n      var _this3 = this;\n\n      this.world.subscribe(MSG_DESTROY, function (msg, entityId) {\n        spawn = _this3.world.get('Spawn', entityId);\n        if (spawn) {\n          spawn.destroy = true;\n        }\n      });\n    }\n  }, {\n    key: 'matchComponent',\n    value: function matchComponent() {\n      return 'Spawn';\n    }\n  }, {\n    key: 'updateComponent',\n    value: function updateComponent(timeDelta, entityId, spawn) {\n      if (!spawn.spawned) {\n        spawn.spawned = true;\n        this.world.publish(MSG_SPAWN, entityId);\n        if (spawn.captureCamera) {\n          this.world.publish(MSG_CAPTURE_CAMERA, entityId);\n        }\n      }\n      if (spawn.ttl !== null) {\n        spawn.age += timeDelta;\n        if (spawn.age >= spawn.ttl) {\n          spawn.destroy = true;\n        }\n      }\n      if (spawn.destroy) {\n        if (spawn.tombstone !== null) {\n          this.world.insert(typeof spawn.tombstone === 'function' ? spawn.tombstone(spawn, entityId) : spawn.tombstone);\n        }\n        this.world.publish(MSG_DESPAWN, entityId);\n        this.world.destroy(entityId);\n      }\n    }\n  }]);\n\n  return SpawnSystem;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"System\"]);\n\nObject(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerSystem\"])('Spawn', SpawnSystem);\n\n/***/ }),\n/* 28 */\n/*!*******************************!*\\\n  !*** ./src/plugins/seeker.js ***!\n  \\*******************************/\n/*! exports provided: Seeker, SeekerSystem */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Seeker\", function() { return Seeker; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SeekerSystem\", function() { return SeekerSystem; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(/*! babel-runtime/core-js/object/get-prototype-of */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__ = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__ = __webpack_require__(/*! babel-runtime/helpers/createClass */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(/*! babel-runtime/helpers/possibleConstructorReturn */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__ = __webpack_require__(/*! babel-runtime/helpers/inherits */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__lib_core__ = __webpack_require__(/*! ../lib/core */ 0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__plugins_position__ = __webpack_require__(/*! ../plugins/position */ 7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__plugins_motion__ = __webpack_require__(/*! ../plugins/motion */ 8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__lib_Vector2D__ = __webpack_require__(/*! ../lib/Vector2D */ 17);\n\n\n\n\n\n\n\n\n\n\n\n\nvar Seeker = function (_Core$Component) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(Seeker, _Core$Component);\n\n  function Seeker() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, Seeker);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (Seeker.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(Seeker)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(Seeker, null, [{\n    key: 'defaults',\n    value: function defaults() {\n      return {\n        active: true,\n        targetName: null,\n        targetEntityId: null,\n        targetPosition: null,\n        acquisitionDelay: 0,\n        radPerSec: Math.PI\n      };\n    }\n  }]);\n\n  return Seeker;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"Component\"]);\n\n__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerComponent\"]('Seeker', Seeker);\n\nvar SeekerSystem = function (_Core$System) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(SeekerSystem, _Core$System);\n\n  function SeekerSystem() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, SeekerSystem);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (SeekerSystem.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(SeekerSystem)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(SeekerSystem, [{\n    key: 'matchComponent',\n    value: function matchComponent() {\n      return 'Seeker';\n    }\n  }, {\n    key: 'initialize',\n    value: function initialize() {\n      this.vSeeker = new __WEBPACK_IMPORTED_MODULE_8__lib_Vector2D__[\"a\" /* default */]();\n      this.vTarget = new __WEBPACK_IMPORTED_MODULE_8__lib_Vector2D__[\"a\" /* default */]();\n    }\n  }, {\n    key: 'updateComponent',\n    value: function updateComponent(timeDelta, entityId, seeker) {\n\n      if (!seeker.active) {\n        return;\n      }\n\n      // Look up the orbited entity ID, if only name given.\n      if (seeker.targetName && !seeker.targetEntityId) {\n        seeker.targetEntityId = __WEBPACK_IMPORTED_MODULE_5__lib_core__[\"getComponent\"]('Name').findEntityByName(this.world, seeker.targetName);\n      }\n\n      // Process a delay before the seeker 'acquires' the target and\n      // starts steering. Makes missiles look interesting.\n      if (seeker.acquisitionDelay > 0) {\n        seeker.acquisitionDelay -= timeDelta;\n        return;\n      }\n\n      var position = this.world.get('Position', entityId);\n      var motion = this.world.get('Motion', entityId);\n      if (!position || !motion) {\n        return;\n      }\n\n      // Accept either a raw x/y coord or entity ID as target\n      var targetPosition = seeker.targetPosition;\n      if (!targetPosition) {\n        targetPosition = this.world.get('Position', seeker.targetEntityId);\n      }\n      if (!targetPosition) {\n        return;\n      }\n\n      // Set up the vectors for angle math...\n      this.vSeeker.setValues(position.x, position.y);\n      this.vTarget.setValues(targetPosition.x, targetPosition.y);\n\n      // Get the target angle, ensuring a 0..2*Math.PI range.\n      var targetAngle = this.vSeeker.angleTo(this.vTarget);\n      if (targetAngle < 0) {\n        targetAngle += 2 * Math.PI;\n      }\n\n      // Pick the direction from current to target angle\n      var direction = targetAngle < position.rotation ? -1 : 1;\n\n      // If the offset between the angles is more than half a circle, go\n      // the other way because it'll be shorter.\n      var offset = Math.abs(targetAngle - position.rotation);\n      if (offset > Math.PI) {\n        direction = 0 - direction;\n      }\n\n      // Work out the desired delta-rotation to steer toward target\n      var targetDr = direction * Math.min(seeker.radPerSec, offset / timeDelta);\n\n      // Calculate the delta-rotation impulse required to meet the goal,\n      // but constrain to the capability of the steering thrusters\n      var impulseDr = targetDr - motion.drotation;\n      if (Math.abs(impulseDr) > seeker.radPerSec) {\n        if (impulseDr > 0) {\n          impulseDr = seeker.radPerSec;\n        } else if (impulseDr < 0) {\n          impulseDr = 0 - seeker.radPerSec;\n        }\n      }\n      motion.drotation += impulseDr;\n    }\n  }]);\n\n  return SeekerSystem;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"System\"]);\n\n__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerSystem\"]('Seeker', SeekerSystem);\n\n/***/ }),\n/* 29 */\n/*!*********************************!*\\\n  !*** ./src/plugins/thruster.js ***!\n  \\*********************************/\n/*! exports provided: Thruster, ThrusterSystem */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Thruster\", function() { return Thruster; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ThrusterSystem\", function() { return ThrusterSystem; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(/*! babel-runtime/core-js/object/get-prototype-of */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__ = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__ = __webpack_require__(/*! babel-runtime/helpers/createClass */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(/*! babel-runtime/helpers/possibleConstructorReturn */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__ = __webpack_require__(/*! babel-runtime/helpers/inherits */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__lib_core__ = __webpack_require__(/*! ../lib/core */ 0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__position__ = __webpack_require__(/*! ./position */ 7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__motion__ = __webpack_require__(/*! ./motion */ 8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__lib_Vector2D__ = __webpack_require__(/*! ../lib/Vector2D */ 17);\n\n\n\n\n\n\n\n\n\n\n\n\nvar Thruster = function (_Core$Component) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(Thruster, _Core$Component);\n\n  function Thruster() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, Thruster);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (Thruster.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(Thruster)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(Thruster, null, [{\n    key: 'defaults',\n    value: function defaults() {\n      return {\n        active: true,\n        stop: false,\n        useBrakes: true,\n        deltaV: 0,\n        maxV: 0\n      };\n    }\n  }]);\n\n  return Thruster;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"Component\"]);\n__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerComponent\"]('Thruster', Thruster);\n\nvar ThrusterSystem = function (_Core$System) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(ThrusterSystem, _Core$System);\n\n  function ThrusterSystem() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, ThrusterSystem);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (ThrusterSystem.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(ThrusterSystem)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(ThrusterSystem, [{\n    key: 'matchComponent',\n    value: function matchComponent() {\n      return 'Thruster';\n    }\n  }, {\n    key: 'initialize',\n    value: function initialize() {\n      this.vInertia = new __WEBPACK_IMPORTED_MODULE_8__lib_Vector2D__[\"a\" /* default */]();\n      this.vThrust = new __WEBPACK_IMPORTED_MODULE_8__lib_Vector2D__[\"a\" /* default */]();\n      this.vBrakes = new __WEBPACK_IMPORTED_MODULE_8__lib_Vector2D__[\"a\" /* default */]();\n    }\n  }, {\n    key: 'updateComponent',\n    value: function updateComponent(timeDelta, entityId, thruster) {\n\n      if (!thruster.active) {\n        return;\n      }\n\n      var pos = this.world.get('Position', entityId);\n      var motion = this.world.get('Motion', entityId);\n      if (!pos || !motion) {\n        return;\n      }\n\n      // Inertia is current motion\n      this.vInertia.setValues(motion.dx, motion.dy);\n\n      // delta-v available for the current tick\n      var tickDeltaV = timeDelta * thruster.deltaV;\n\n      if (!thruster.stop) {\n        // Create thrust vector per rotation and add to inertia.\n        this.vThrust.setValues(tickDeltaV, 0);\n        this.vThrust.rotate(pos.rotation);\n        this.vInertia.add(this.vThrust);\n      }\n\n      if (thruster.useBrakes) {\n        // Try to enforce the max_v limit with braking thrust.\n        var maxV = thruster.stop ? 0 : thruster.maxV;\n        var currV = this.vInertia.magnitude();\n        var overV = currV - maxV;\n        if (overV > 0) {\n          // Braking delta-v is max thruster output or remaining overage,\n          // whichever is smallest. Braking vector opposes inertia.\n          var brakingDv = Math.min(tickDeltaV, overV);\n          this.vBrakes.setValues(this.vInertia.x, this.vInertia.y);\n          this.vBrakes.normalize();\n          this.vBrakes.multiplyScalar(0 - brakingDv);\n          this.vInertia.add(this.vBrakes);\n        }\n        if (thruster.stop && currV === 0) {\n          thruster.active = false;\n        }\n      }\n\n      // Update inertia. Note that we've been careful only to make changes\n      // to inertia within the delta-v of the thruster. Other influences\n      // on inertia should be preserved.\n      motion.dx = this.vInertia.x;\n      motion.dy = this.vInertia.y;\n    }\n  }]);\n\n  return ThrusterSystem;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"System\"]);\n__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerSystem\"]('Thruster', ThrusterSystem);\n\n/***/ }),\n/* 30 */\n/*!**************************************!*\\\n  !*** ./src/plugins/viewportWebGL.js ***!\n  \\**************************************/\n/*! exports provided: ViewportWebGL, WebGLSprite */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ViewportWebGL\", function() { return ViewportWebGL; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"WebGLSprite\", function() { return WebGLSprite; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_get__ = __webpack_require__(/*! babel-runtime/helpers/get */ 25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_get___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_get__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_toConsumableArray__ = __webpack_require__(/*! babel-runtime/helpers/toConsumableArray */ 130);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_toConsumableArray___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_toConsumableArray__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_keys__ = __webpack_require__(/*! babel-runtime/core-js/object/keys */ 38);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_keys___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_keys__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_object_values__ = __webpack_require__(/*! babel-runtime/core-js/object/values */ 140);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_object_values___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_object_values__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_assign__ = __webpack_require__(/*! babel-runtime/core-js/object/assign */ 40);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_assign___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_assign__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(/*! babel-runtime/core-js/object/get-prototype-of */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_classCallCheck__ = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_createClass__ = __webpack_require__(/*! babel-runtime/helpers/createClass */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(/*! babel-runtime/helpers/possibleConstructorReturn */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_babel_runtime_helpers_inherits__ = __webpack_require__(/*! babel-runtime/helpers/inherits */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_9_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__lib_core__ = __webpack_require__(/*! ../lib/core */ 0);\n\n\n\n\n\n\n\n\n\n\n\n\nvar PI2 = Math.PI * 2;\n\n// https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/Constants\nvar TYPE_SIZES = {\n  0x1406: 1, // FLOAT\n  0x8B50: 2, // FLOAT_VEC2\n  0x8B51: 3, // FLOAT_VEC3\n  0x8B52: 4 // FLOAT_VEC4\n};\n\nvar entityId = void 0,\n    position = void 0,\n    sprites = void 0,\n    sprite = void 0,\n    sceneSprite = void 0;\n\n// See also: http://phrogz.net/JS/wheeldelta.html\nvar wheelDistance = function wheelDistance(evt) {\n  if (!evt) evt = event;\n  var w = evt.wheelDelta,\n      d = evt.detail;\n  if (d) {\n    if (w) return w / d / 40 * d > 0 ? 1 : -1; // Opera\n    else return -d / 3; // Firefox;         TODO: do not /3 for OS X\n  } else return w / 120; // IE/Safari/Chrome TODO: /3 for Chrome OS X\n};\n\nvar ViewportWebGL = function (_Core$System) {\n  __WEBPACK_IMPORTED_MODULE_9_babel_runtime_helpers_inherits___default()(ViewportWebGL, _Core$System);\n\n  function ViewportWebGL() {\n    __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_classCallCheck___default()(this, ViewportWebGL);\n\n    return __WEBPACK_IMPORTED_MODULE_8_babel_runtime_helpers_possibleConstructorReturn___default()(this, (ViewportWebGL.__proto__ || __WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_object_get_prototype_of___default()(ViewportWebGL)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_createClass___default()(ViewportWebGL, [{\n    key: 'defaultOptions',\n    value: function defaultOptions() {\n      return {\n        lineWidth: 2,\n        zoom: 1.0,\n        zoomMin: 0.1,\n        zoomMax: 10.0,\n        zoomWheelFactor: 0.05,\n        gridEnabled: true,\n        gridSize: 250,\n        gridColor: 0x222222,\n        followEnabled: true,\n        followName: null,\n        followEntityId: null\n      };\n    }\n  }, {\n    key: 'initialize',\n    value: function initialize() {\n      var _this2 = this;\n\n      this.container = document.querySelector(this.options.container);\n      this.canvas = document.createElement('canvas');\n      this.container.appendChild(this.canvas);\n\n      this.initWebGL(this.canvas);\n\n      this.scene = {};\n\n      var events = {\n        'resize': function resize(ev) {\n          _this2.updateMetrics(ev);\n        },\n        'orientationchange': function orientationchange(ev) {\n          _this2.updateMetrics(ev);\n        },\n        'mousedown': function mousedown(ev) {\n          _this2.onMouseDown(ev);\n        },\n        'mousemove': function mousemove(ev) {\n          _this2.onMouseMove(ev);\n        },\n        'mouseup': function mouseup(ev) {\n          _this2.onMouseUp(ev);\n        }\n      };\n\n      for (var name in events) {\n        this.canvas.addEventListener(name, events[name], false);\n      }\n\n      // See also: http://phrogz.net/JS/wheeldelta.html\n      var boundOnMouseWheel = function boundOnMouseWheel(ev) {\n        return _this2.onMouseWheel(ev);\n      };\n      if (window.addEventListener) {\n        window.addEventListener('mousewheel', boundOnMouseWheel, false); // Chrome/Safari/Opera\n        window.addEventListener('DOMMouseScroll', boundOnMouseWheel, false); // Firefox\n      } else if (window.attachEvent) {\n        window.attachEvent('onmousewheel', boundOnMouseWheel); // IE\n      }\n\n      this.followEnabled = this.options.followEnabled;\n      this.zoom = this.options.zoom;\n      this.followEntityId = this.options.followEntityId;\n      this.gridEnabled = this.options.gridEnabled;\n      this.lineWidth = this.options.lineWidth;\n\n      this.cursorRawX = 0;\n      this.cursorRawY = 0;\n\n      this.cursorChanged = false;\n      this.cursorPosition = { x: 0, y: 0 };\n\n      this.cameraX = 0;\n      this.cameraY = 0;\n\n      this.debugDummySprite = { size: 100 };\n\n      this.updateMetrics();\n    }\n  }, {\n    key: 'onMouseWheel',\n    value: function onMouseWheel(ev) {\n      this.zoom += wheelDistance(ev) * this.options.zoomWheelFactor;\n      if (this.zoom < this.options.zoomMin) {\n        this.zoom = this.options.zoomMin;\n      }\n      if (this.zoom > this.options.zoomMax) {\n        this.zoom = this.options.zoomMax;\n      }\n    }\n\n    // TODO: Use a symbol for 'mouse{Down,Move,Up}' message?\n\n  }, {\n    key: 'onMouseDown',\n    value: function onMouseDown(ev) {\n      this.setCursor(ev.clientX, ev.clientY);\n      this.world.publish('mouseDown', this.cursorPosition);\n    }\n  }, {\n    key: 'onMouseMove',\n    value: function onMouseMove(ev) {\n      this.setCursor(ev.clientX, ev.clientY);\n      this.world.publish('mouseMove', this.cursorPosition);\n    }\n  }, {\n    key: 'onMouseUp',\n    value: function onMouseUp(ev) {\n      this.setCursor(ev.clientX, ev.clientY, true);\n      this.world.publish('mouseUp', this.cursorPosition);\n    }\n  }, {\n    key: 'setCursor',\n    value: function setCursor(x, y) {\n      var width = this.container.offsetWidth;\n      var height = this.container.offsetHeight;\n\n      this.cursorRawX = x;\n      this.cursorRawY = y;\n\n      var newX = (x - width / 2) / this.zoom + this.cameraX;\n      var newY = (y - height / 2) / this.zoom + this.cameraY;\n\n      this.cursorChanged = false;\n      if (newX !== this.cursorPosition.x || newY !== this.cursorPosition.y) {\n        this.cursorChanged = true;\n        this.cursorPosition.x = newX;\n        this.cursorPosition.y = newY;\n      }\n\n      return this.cursorPosition;\n    }\n  }, {\n    key: 'updateMetrics',\n    value: function updateMetrics() {\n      var width = this.container.offsetWidth;\n      var height = this.container.offsetHeight;\n\n      this.visibleWidth = width / this.zoom;\n      this.visibleHeight = height / this.zoom;\n\n      this.visibleLeft = 0 - this.visibleWidth / 2 + this.cameraX;\n      this.visibleTop = 0 - this.visibleHeight / 2 + this.cameraY;\n      this.visibleRight = this.visibleLeft + this.visibleWidth;\n      this.visibleBottom = this.visibleTop + this.visibleHeight;\n    }\n  }, {\n    key: 'update',\n    value: function update(timeDelta) {\n      this.updateMetrics();\n\n      this.setCursor(this.cursorRawX, this.cursorRawY);\n      // FIXME: Should be able to skip doing this unless\n      // this.cursorChanged === true, but for some reason that's not working\n      this.world.publish('mouseMove', this.cursorPosition);\n\n      sprites = this.world.get('Sprite') || {};\n\n      // Delete any stage items not found in sprites\n      for (entityId in this.scene) {\n        if (!(entityId in sprites)) {\n          delete this.scene[entityId];\n        }\n      }\n\n      // Create items for any sprites not found in stage\n      for (entityId in sprites) {\n        sprite = sprites[entityId];\n        position = this.world.get('Position', entityId);\n\n        if (!(entityId in this.scene)) {\n          this.scene[entityId] = {\n            position: [0.0, 0.0],\n            shapes: WebGLSprite.init(sprite, entityId, timeDelta, this.world)\n          };\n        }\n\n        sprite.visible = position.right > this.visibleLeft && position.left < this.visibleRight && position.bottom > this.visibleTop && position.top < this.visibleBottom;\n\n        sceneSprite = this.scene[entityId];\n        sceneSprite.visible = sprite.visible;\n        sceneSprite.position[0] = position.x;\n        sceneSprite.position[1] = position.y;\n        sceneSprite.rotation = position.rotation;\n        sceneSprite.scale = sprite.size;\n        sceneSprite.color = [\n        // TODO: this math is terrible\n        sprite.color / 256 / 256 % 256 / 256, sprite.color / 256 % 256 / 256, sprite.color % 256 / 256, 1.0];\n        WebGLSprite.update(sceneSprite, sprite, entityId, timeDelta, this.world);\n      }\n    }\n  }, {\n    key: 'draw',\n    value: function draw() {\n      this.followEntity();\n\n      this.canvas.width = this.container.offsetWidth;\n      this.canvas.height = this.container.offsetHeight;\n\n      // gl.uniform1f(uniforms.uTime, currDrawTime);\n      this.setUniforms({\n        uLineWidth: [0.001 * this.lineWidth],\n        uCameraZoom: [this.zoom],\n        uCameraOrigin: [this.cameraX, this.cameraY],\n        uViewportSize: [this.canvas.clientWidth, this.canvas.clientHeight]\n      });\n\n      // this.drawBackdrop(timeDelta);\n\n      // Re-allocate larger buffer if current is too small for the scene.\n      var bufferSize = this.calculateBufferSizeForScene();\n      if (bufferSize > this.buffer.length) {\n        this.buffer = new Float32Array(Math.max(bufferSize * 1.5, this.buffer.length * 2));\n      }\n\n      var vertexCount = this.fillBufferFromScene();\n      this.gl.bufferData(this.gl.ARRAY_BUFFER, this.buffer, this.gl.STATIC_DRAW);\n      this.gl.viewport(0, 0, this.gl.canvas.width, this.gl.canvas.height);\n      this.gl.clearColor(0, 0, 0, 0.5);\n      this.gl.clear(this.gl.COLOR_BUFFER_BIT | this.gl.DEPTH_BUFFER_BIT);\n      this.gl.drawArrays(this.gl.TRIANGLE_STRIP, 0, vertexCount);\n    }\n  }, {\n    key: 'followEntity',\n    value: function followEntity() {\n      if (!this.followEnabled) {\n        this.cameraX = this.cameraY = 0;\n        return;\n      }\n      if (this.options.followName && !this.followEntityId) {\n        // Look up named entity, if necessary.\n        this.followEntityId = __WEBPACK_IMPORTED_MODULE_10__lib_core__[\"getComponent\"]('Name').findEntityByName(this.world, this.options.followName);\n      }\n      if (this.followEntityId) {\n        // Adjust the viewport center offset to the entity position\n        var _position = this.world.get('Position', this.followEntityId);\n        if (_position) {\n          this.cameraX = _position.x;\n          this.cameraY = _position.y;\n          this.setCursor(this.cursorRawX, this.cursorRawY);\n        }\n      }\n    }\n\n    /*\n    drawBackdrop() {\n      const ctx = this.backdrop;\n       if (!this.gridEnabled) {\n        ctx.visible = false;\n        return;\n      }\n       const gridSize = this.options.gridSize;\n      const gridOffsetX = this.visibleLeft % gridSize;\n      const gridOffsetY = this.visibleTop % gridSize;\n       ctx.visible = true;\n      ctx.clear();\n      ctx.lineStyle(5, this.options.gridColor);\n      ctx.position.x = this.visibleLeft;\n      ctx.position.y = this.visibleTop;\n       for (let x = -gridOffsetX; x < this.visibleWidth; x += gridSize) {\n        ctx.moveTo(x, 0);\n        ctx.lineTo(x, this.visibleHeight + gridSize);\n      }\n       for (let y = -gridOffsetY; y < this.visibleHeight; y += gridSize) {\n        ctx.moveTo(0, y);\n        ctx.lineTo(this.visibleWidth + gridSize, y);\n      }\n    }\n    */\n\n  }, {\n    key: 'initWebGL',\n    value: function initWebGL(canvas) {\n      var gl = this.gl = canvas.getContext('webgl', {\n        antialias: true,\n        preserveDrawingBuffer: true,\n        premultipliedAlpha: true\n      });\n\n      var program = this.createProgram(this.createShader(gl.VERTEX_SHADER, SHADER_VERTEX), this.createShader(gl.FRAGMENT_SHADER, SHADER_FRAGMENT));\n      gl.useProgram(program);\n\n      // Set up for data buffer\n      gl.bindBuffer(gl.ARRAY_BUFFER, gl.createBuffer());\n\n      // First pass through attributes to count total vertex size and index by name\n      var numAttribs = gl.getProgramParameter(program, gl.ACTIVE_ATTRIBUTES);\n      var attribs = {};\n      var vertexSize = 0;\n      for (var i = 0; i < numAttribs; i++) {\n        var info = gl.getActiveAttrib(program, i);\n        var size = TYPE_SIZES[info.type];\n        vertexSize += size;\n        attribs[info.name] = i;\n      }\n\n      // Second pass through attributes to set up attribute pointers into the buffer\n      var pos = 0;\n      for (var _i = 0; _i < numAttribs; _i++) {\n        var _info = gl.getActiveAttrib(program, _i);\n        var _size = TYPE_SIZES[_info.type];\n        gl.vertexAttribPointer(_i, _size, gl.FLOAT, false, vertexSize * 4, pos * 4);\n        gl.enableVertexAttribArray(_i);\n        pos += _size;\n      }\n\n      // Index uniform locations by name\n      var uniforms = {};\n      var numUniforms = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\n      for (var _i2 = 0; _i2 < numUniforms; _i2++) {\n        var _info2 = gl.getActiveUniform(program, _i2);\n        uniforms[_info2.name] = gl.getUniformLocation(program, _info2.name);\n      }\n\n      var buffer = new Float32Array(200000);\n\n      __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_assign___default()(this, { gl: gl, uniforms: uniforms, attribs: attribs, vertexSize: vertexSize, buffer: buffer });\n    }\n  }, {\n    key: 'createShader',\n    value: function createShader(type, source) {\n      var shader = this.gl.createShader(type);\n      this.gl.shaderSource(shader, source);\n      this.gl.compileShader(shader);\n      var success = this.gl.getShaderParameter(shader, this.gl.COMPILE_STATUS);\n      if (success) {\n        return shader;\n      }\n\n      // console.log('shader', type, 'failed to compile', this.gl.getShaderInfoLog(shader));\n      this.gl.deleteShader(shader);\n    }\n  }, {\n    key: 'createProgram',\n    value: function createProgram(vertexShader, fragmentShader) {\n      var program = this.gl.createProgram();\n      this.gl.attachShader(program, vertexShader);\n      this.gl.attachShader(program, fragmentShader);\n      this.gl.linkProgram(program);\n      var success = this.gl.getProgramParameter(program, this.gl.LINK_STATUS);\n      if (success) {\n        return program;\n      }\n\n      // console.log(this.gl.getProgramInfoLog(program));\n      this.gl.deleteProgram(program);\n    }\n  }, {\n    key: 'calculateBufferSizeForScene',\n    value: function calculateBufferSizeForScene() {\n      var _this3 = this;\n\n      return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_object_values___default()(this.scene).reduce(function (acc, item) {\n        return item.shapes.reduce(function (acc, shape) {\n          return acc + (shape.length - 0.5) * _this3.vertexSize * 4;\n        }, 0);\n      }, 0);\n    }\n  }, {\n    key: 'fillBufferFromScene',\n    value: function fillBufferFromScene() {\n      var _this4 = this;\n\n      var vertexCount = 0;\n      var bufferPos = 0;\n      var visible = void 0,\n          shape = void 0,\n          position = void 0,\n          scale = void 0,\n          rotation = void 0,\n          deltaPosition = void 0,\n          deltaScale = void 0,\n          deltaRotation = void 0,\n          color = void 0,\n          lineIdx = void 0,\n          shapesIdx = void 0,\n          shapes = void 0;\n\n      var bufferVertex = function bufferVertex(shapeIdx, lineIdx) {\n        vertexCount++;\n        _this4.buffer[bufferPos++] = lineIdx;\n        _this4.buffer[bufferPos++] = shape[shapeIdx - 1][0];\n        _this4.buffer[bufferPos++] = shape[shapeIdx - 1][1];\n        _this4.buffer[bufferPos++] = shape[shapeIdx][0];\n        _this4.buffer[bufferPos++] = shape[shapeIdx][1];\n        _this4.buffer[bufferPos++] = position[0];\n        _this4.buffer[bufferPos++] = position[1];\n        _this4.buffer[bufferPos++] = scale;\n        _this4.buffer[bufferPos++] = rotation;\n        _this4.buffer[bufferPos++] = deltaPosition[0];\n        _this4.buffer[bufferPos++] = deltaPosition[1];\n        _this4.buffer[bufferPos++] = deltaScale;\n        _this4.buffer[bufferPos++] = deltaRotation;\n        _this4.buffer[bufferPos++] = color[0];\n        _this4.buffer[bufferPos++] = color[1];\n        _this4.buffer[bufferPos++] = color[2];\n        _this4.buffer[bufferPos++] = color[3];\n      };\n\n      var sceneKeys = __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_keys___default()(this.scene);\n      sceneKeys.sort();\n      for (var sceneKeysIdx = 0; sceneKeysIdx < sceneKeys.length; sceneKeysIdx++) {\n        var _scene$sceneKeys$scen = this.scene[sceneKeys[sceneKeysIdx]];\n        visible = _scene$sceneKeys$scen.visible;\n        shapes = _scene$sceneKeys$scen.shapes;\n        var _scene$sceneKeys$scen2 = _scene$sceneKeys$scen.position;\n        position = _scene$sceneKeys$scen2 === undefined ? [0.0, 0.0] : _scene$sceneKeys$scen2;\n        var _scene$sceneKeys$scen3 = _scene$sceneKeys$scen.scale;\n        scale = _scene$sceneKeys$scen3 === undefined ? 0 : _scene$sceneKeys$scen3;\n        var _scene$sceneKeys$scen4 = _scene$sceneKeys$scen.rotation;\n        rotation = _scene$sceneKeys$scen4 === undefined ? 0 : _scene$sceneKeys$scen4;\n        var _scene$sceneKeys$scen5 = _scene$sceneKeys$scen.deltaPosition;\n        deltaPosition = _scene$sceneKeys$scen5 === undefined ? [0.0, 0.0] : _scene$sceneKeys$scen5;\n        var _scene$sceneKeys$scen6 = _scene$sceneKeys$scen.deltaScale;\n        deltaScale = _scene$sceneKeys$scen6 === undefined ? 0.0 : _scene$sceneKeys$scen6;\n        var _scene$sceneKeys$scen7 = _scene$sceneKeys$scen.deltaRotation;\n        deltaRotation = _scene$sceneKeys$scen7 === undefined ? 0.0 : _scene$sceneKeys$scen7;\n        var _scene$sceneKeys$scen8 = _scene$sceneKeys$scen.color;\n        color = _scene$sceneKeys$scen8 === undefined ? [1, 1, 1, 1] : _scene$sceneKeys$scen8;\n\n        if (!visible) {\n          continue;\n        }\n        for (shapesIdx = 0; shapesIdx < shapes.length; shapesIdx++) {\n          shape = shapes[shapesIdx];\n          bufferVertex(1, 0);\n          for (lineIdx = 1; lineIdx < shape.length; lineIdx += 1) {\n            bufferVertex(lineIdx, 0);\n            bufferVertex(lineIdx, 1);\n            bufferVertex(lineIdx, 2);\n            bufferVertex(lineIdx, 3);\n          }\n          bufferVertex(shape.length - 1, 3);\n        }\n      }\n\n      return vertexCount;\n    }\n  }, {\n    key: 'setUniforms',\n    value: function setUniforms(data) {\n      var _this5 = this;\n\n      __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_keys___default()(data).forEach(function (key) {\n        var _gl$;\n\n        return (_gl$ = _this5.gl['uniform' + data[key].length + 'f']).call.apply(_gl$, [_this5.gl, _this5.uniforms[key]].concat(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_toConsumableArray___default()(data[key])));\n      });\n    }\n  }]);\n\n  return ViewportWebGL;\n}(__WEBPACK_IMPORTED_MODULE_10__lib_core__[\"System\"]);\n\n__WEBPACK_IMPORTED_MODULE_10__lib_core__[\"registerSystem\"]('ViewportWebGL', ViewportWebGL);\n\nvar SHADER_VERTEX = '\\n// see also: http://m1el.github.io/woscope-how/\\nprecision mediump float;\\n#define EPS 1E-6\\n#define PI 3.141592653589793\\n#define PI_2 6.283185307179586\\n#define PI_H 1.5707963267948966\\n#define PI_Q 0.7853981633974483\\n\\nuniform float uTime;\\nuniform float uLineWidth;\\nuniform float uCameraZoom;\\nuniform float uCameraRotation;\\nuniform vec2 uCameraOrigin;\\nuniform vec2 uViewportSize;\\n\\nattribute float aIdx;\\nattribute vec4 aLine;\\nattribute vec4 aTransform;\\nattribute vec4 aDeltaTransform;\\nattribute vec4 aColor;\\n\\nvarying vec4 uvl;\\nvarying vec4 vColor;\\nvarying float vLen;\\n\\nvoid main () {\\n  float c, s;\\n\\n  mat3 mViewportToClipSpace = mat3(\\n    2.0 / uViewportSize.x, 0, 0,\\n    0, -2.0 / uViewportSize.y, 0,\\n    0, 0, 0\\n  );\\n\\n  c = cos(uCameraRotation);\\n  s = sin(uCameraRotation);\\n  mat3 mCameraRotation = mat3(\\n    c, -s, 0.0,\\n    s, c, 0.0,\\n    0.0, 0.0, 1.0\\n  );\\n\\n  mat3 mCameraOrigin = mat3(\\n    1.0, 0.0, 0.0,\\n    0.0, 1.0, 0.0,\\n    -uCameraOrigin.x, -uCameraOrigin.y, 1.0\\n  );\\n\\n  mat3 mCameraZoom = mat3(\\n    uCameraZoom, 0.0, 0.0,\\n    0.0, uCameraZoom, 0.0,\\n    0.0, 0.0, 1.0\\n  );\\n\\n  c = cos(-aTransform.w + PI_H + (aDeltaTransform.w * uTime));\\n  s = sin(-aTransform.w + PI_H + (aDeltaTransform.w * uTime));\\n  mat3 mRotation = mat3(\\n    c, -s, 0.0,\\n    s, c, 0.0,\\n    0.0, 0.0, 1.0\\n  );\\n\\n  mat3 mPosition = mat3(\\n    1.0, 0.0, 0.0,\\n    0.0, 1.0, 0.0,\\n    aTransform.x + (aDeltaTransform.x * uTime), aTransform.y + (aDeltaTransform.y * uTime), 1.0\\n  );\\n\\n  mat3 mScale = mat3(\\n    aTransform.z + (aDeltaTransform.z * uTime), 0.0, 0.0,\\n    0.0, aTransform.z + (aDeltaTransform.z * uTime), 0.0,\\n    0.0, 0.0, 1.0\\n  );\\n\\n  // TODO: Move some of these matrices into JS?\\n  mat3 mAll = mViewportToClipSpace\\n    * mCameraZoom * mCameraRotation * mCameraOrigin\\n    * mPosition * mScale * mRotation;\\n\\n  vec2 tStart = (mAll * vec3(aLine.xy, 1)).xy;\\n  vec2 tEnd = (mAll * vec3(aLine.zw, 1)).xy;\\n\\n  float tang;\\n  vec2 current;\\n  float idx = aIdx;\\n  if (idx >= 2.0) {\\n    current = tEnd;\\n    tang = 1.0;\\n  } else {\\n    current = tStart;\\n    tang = -1.0;\\n  }\\n\\n  float side = (mod(idx, 2.0)-0.5)*2.0;\\n  vec2 dir = tEnd-tStart;\\n\\n  vColor = aColor;\\n\\n  uvl.xy = vec2(tang, side);\\n  uvl.w = floor(aIdx / 4.0 + 0.5);\\n  uvl.z = length(dir);\\n  if (uvl.z > EPS) {\\n    dir = dir / uvl.z;\\n  } else {\\n    // If the segment is too short draw a square;\\n    dir = vec2(1.0, 0.0);\\n  }\\n  vec2 norm = vec2(-dir.y, dir.x);\\n  gl_Position = vec4((current+(tang*dir+norm*side)*uLineWidth),0.0,1.0);\\n}\\n';\n\nvar SHADER_FRAGMENT = '\\nprecision mediump float;\\nvarying vec4 vColor;\\n\\nvoid main (void)\\n{\\n    gl_FragColor = vColor;\\n}\\n';\n\nvar WebGLSprite = function (_Core$Component) {\n  __WEBPACK_IMPORTED_MODULE_9_babel_runtime_helpers_inherits___default()(WebGLSprite, _Core$Component);\n\n  function WebGLSprite() {\n    __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_classCallCheck___default()(this, WebGLSprite);\n\n    return __WEBPACK_IMPORTED_MODULE_8_babel_runtime_helpers_possibleConstructorReturn___default()(this, (WebGLSprite.__proto__ || __WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_object_get_prototype_of___default()(WebGLSprite)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_createClass___default()(WebGLSprite, null, [{\n    key: 'defaults',\n    value: function defaults() {\n      return {\n        name: null,\n        color: 0xffffff,\n        size: 100,\n        width: null,\n        height: null,\n        drawn: false,\n        visible: false\n      };\n    }\n  }, {\n    key: 'create',\n    value: function create(attrs) {\n      var c = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_get___default()(WebGLSprite.__proto__ || __WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_object_get_prototype_of___default()(WebGLSprite), 'create', this).call(this, attrs);\n      if (!c.width) {\n        c.width = c.size;\n      }\n      if (!c.height) {\n        c.height = c.size;\n      }\n      return c;\n    }\n  }, {\n    key: 'register',\n    value: function register(name, handler) {\n      if (!WebGLSprite.registry) {\n        WebGLSprite.registry = {};\n      }\n      WebGLSprite.registry[name] = handler;\n    }\n  }, {\n    key: 'getHandler',\n    value: function getHandler(name) {\n      return name in WebGLSprite.registry ? WebGLSprite.registry[name] : WebGLSprite.registry.default;\n    }\n  }, {\n    key: 'init',\n    value: function init(sprite, entityId, timeDelta, world) {\n      return WebGLSprite.getHandler(sprite.name).init(sprite, entityId, timeDelta, world);\n    }\n  }, {\n    key: 'update',\n    value: function update(sceneSprite, sprite, entityId, timeDelta, world) {\n      var handler = WebGLSprite.getHandler(sprite.name);\n      return 'update' in handler ? handler.update(sceneSprite, sprite, entityId, timeDelta, world) : false;\n    }\n  }]);\n\n  return WebGLSprite;\n}(__WEBPACK_IMPORTED_MODULE_10__lib_core__[\"Component\"]);\n\n__WEBPACK_IMPORTED_MODULE_10__lib_core__[\"registerComponent\"]('Sprite', WebGLSprite);\n\nvar defaultShape = [[-0.5, 0], [0.5, 0], [0, 0], [0, -0.5], [0, 0.5], [0, 0]];\nfor (var idx = 0; idx < 8; idx++) {\n  var rot = idx * (PI2 / 8);\n  defaultShape.push([0.5 * Math.cos(rot), 0.5 * Math.sin(rot)]);\n}\ndefaultShape.push([0.5, 0]);\n\nWebGLSprite.register('default', {\n  init: function init() {\n    return defaultShape;\n  }\n});\n\nvar heroShapes = [[[0.0, 0.5], [0.125, 0.4167], [0.25, 0.0], [0.375, -0.1667], [0.25, -0.5], [0.125, -0.5], [0.0625, -0.25], [-0.0625, -0.25], [-0.125, -0.5], [-0.25, -0.5], [-0.375, -0.1667], [-0.25, 0.0], [-0.125, 0.4167], [0.0, 0.5]]];\nWebGLSprite.register('hero', {\n  init: function init() {\n    return heroShapes;\n  }\n});\n\nvar repulsorSides = 8;\nvar repulsorPoints = [];\nfor (var _idx = 0; _idx < repulsorSides; _idx++) {\n  var _rot = _idx * (PI2 / repulsorSides);\n  repulsorPoints.push([Math.cos(_rot), Math.sin(_rot)]);\n}\nrepulsorPoints.push(repulsorPoints[0]);\n\nvar repulsorShapes = [repulsorPoints.map(function (p) {\n  return [p[0] * 1, p[1] * 1];\n}), repulsorPoints.map(function (p) {\n  return [p[0] * 2, p[1] * 2];\n}), repulsorPoints.map(function (p) {\n  return [p[0] * 3, p[1] * 3];\n}), [[-0.50, 0.0], [-0.375, -0.50], [-0.25, -0.50], [-0.0625, 0.25], [0.0625, 0.25], [0.25, -0.50], [0.375, -0.50], [0.50, 0.0], [0.375, 0.50], [0.25, 0.50], [0.0625, -0.25], [-0.0625, -0.25], [-0.25, 0.50], [-0.375, 0.50], [-0.50, 0.0]]];\nWebGLSprite.register('repulsor', {\n  init: function init() {\n    return repulsorShapes;\n  }\n});\n\nWebGLSprite.register('asteroid', {\n  init: function init(sprite) {\n    var NUM_POINTS = 7 + Math.floor(8 * Math.random());\n    var MAX_RADIUS = 0.50;\n    var MIN_RADIUS = 0.35;\n    var ROTATION = PI2 / NUM_POINTS;\n\n    sprite.shape = [];\n    for (var _idx2 = 0; _idx2 < NUM_POINTS; _idx2++) {\n      var _rot2 = _idx2 * ROTATION;\n      var dist = Math.random() * (MAX_RADIUS - MIN_RADIUS) + MIN_RADIUS;\n      sprite.shape.push([dist * Math.cos(_rot2), dist * Math.sin(_rot2)]);\n    }\n\n    sprite.shape.push(sprite.shape[0]);\n    return [sprite.shape];\n  }\n});\n\nWebGLSprite.register('mine', {\n  init: function init(sprite) {\n    var NUM_POINTS = 10 + Math.floor(10 * Math.random());\n    if (NUM_POINTS % 2 !== 0) {\n      NUM_POINTS++;\n    }\n    var ROTATION = PI2 / NUM_POINTS;\n    var MAX_RADIUS = 0.6;\n    var MIN_RADIUS = 0.1;\n\n    var even = false;\n\n    sprite.legs = [];\n    for (var _idx3 = 0; _idx3 < NUM_POINTS; _idx3++) {\n      var dist = even ? 0.1 : Math.random() * (MAX_RADIUS - MIN_RADIUS) + MIN_RADIUS;\n      var _rot3 = _idx3 * ROTATION;\n      sprite.legs.push([dist * Math.cos(_rot3), dist * Math.sin(_rot3)]);\n      even = !even;\n    }\n    sprite.legs.push([sprite.legs[0][0], sprite.legs[0][1]]);\n    sprite.shape = sprite.legs;\n    sprite.drawn = true;\n\n    return [sprite.shape];\n  },\n  update: function update() /* sceneSprite, sprite, entityId, timeDelta, world */{\n    /*\n    if (sprite.drawn && Math.random() < 0.15) {\n      sceneSprite.shape = sprite.legs.map(p => [\n        p[0] * (0.9 + 0.5 * Math.random()),\n        p[1] * (0.9 + 0.5 * Math.random())\n      ]);\n    }\n    */\n  }\n});\n\n/***/ }),\n/* 31 */\n/*!************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_is-object.js ***!\n  \\************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports) {\n\nmodule.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n\n\n/***/ }),\n/* 32 */\n/*!****************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_property-desc.js ***!\n  \\****************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports) {\n\nmodule.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n\n\n/***/ }),\n/* 33 */\n/*!*************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_object-pie.js ***!\n  \\*************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports) {\n\nexports.f = {}.propertyIsEnumerable;\n\n\n/***/ }),\n/* 34 */\n/*!************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_to-object.js ***!\n  \\************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 7.1.13 ToObject(argument)\nvar defined = __webpack_require__(/*! ./_defined */ 45);\nmodule.exports = function (it) {\n  return Object(defined(it));\n};\n\n\n/***/ }),\n/* 35 */\n/*!*******************************!*\\\n  !*** ./src/plugins/bounce.js ***!\n  \\*******************************/\n/*! exports provided: BounceComponent, BounceSystem */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BounceComponent\", function() { return BounceComponent; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BounceSystem\", function() { return BounceSystem; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(/*! babel-runtime/core-js/object/get-prototype-of */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__ = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__ = __webpack_require__(/*! babel-runtime/helpers/createClass */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(/*! babel-runtime/helpers/possibleConstructorReturn */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__ = __webpack_require__(/*! babel-runtime/helpers/inherits */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__lib_core__ = __webpack_require__(/*! ../lib/core */ 0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__position__ = __webpack_require__(/*! ./position */ 7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__motion__ = __webpack_require__(/*! ./motion */ 8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__health__ = __webpack_require__(/*! ./health */ 26);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__lib_Vector2D__ = __webpack_require__(/*! ../lib/Vector2D */ 17);\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar BounceComponent = function (_Core$Component) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(BounceComponent, _Core$Component);\n\n  function BounceComponent() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, BounceComponent);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (BounceComponent.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(BounceComponent)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(BounceComponent, null, [{\n    key: 'defaults',\n    value: function defaults() {\n      return {\n        mass: 1000.0\n      };\n    }\n  }]);\n\n  return BounceComponent;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"Component\"]);\n\n__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerComponent\"]('Bounce', BounceComponent);\n\nvar BounceSystem = function (_Core$System) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(BounceSystem, _Core$System);\n\n  function BounceSystem() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, BounceSystem);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (BounceSystem.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(BounceSystem)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(BounceSystem, [{\n    key: 'matchComponent',\n    value: function matchComponent() {\n      return 'Bounce';\n    }\n  }, {\n    key: 'initialize',\n    value: function initialize() {\n      this.dn = new __WEBPACK_IMPORTED_MODULE_9__lib_Vector2D__[\"a\" /* default */]();\n      this.dt = new __WEBPACK_IMPORTED_MODULE_9__lib_Vector2D__[\"a\" /* default */]();\n      this.mt = new __WEBPACK_IMPORTED_MODULE_9__lib_Vector2D__[\"a\" /* default */]();\n      this.v1 = new __WEBPACK_IMPORTED_MODULE_9__lib_Vector2D__[\"a\" /* default */]();\n      this.v2 = new __WEBPACK_IMPORTED_MODULE_9__lib_Vector2D__[\"a\" /* default */]();\n      this.v1n = new __WEBPACK_IMPORTED_MODULE_9__lib_Vector2D__[\"a\" /* default */]();\n      this.v1t = new __WEBPACK_IMPORTED_MODULE_9__lib_Vector2D__[\"a\" /* default */]();\n      this.v2n = new __WEBPACK_IMPORTED_MODULE_9__lib_Vector2D__[\"a\" /* default */]();\n      this.v2t = new __WEBPACK_IMPORTED_MODULE_9__lib_Vector2D__[\"a\" /* default */]();\n    }\n  }, {\n    key: 'update',\n    value: function update(timeDelta) {\n      var entities = this.world;\n      var matches = this.getMatchingComponents();\n\n      var pairs = {};\n      for (var aEntityId in matches) {\n\n        // const bounce = matches[aEntityId];\n        var aCollidable = entities.get('Collidable', aEntityId);\n\n        for (var bEntityId in aCollidable.inCollisionWith) {\n          var pair = [aEntityId, bEntityId];\n          pair.sort();\n          pairs[pair.join(':')] = pair;\n        }\n\n        // TODO: Process world boundary edge bounce?\n      }\n\n      for (var key in pairs) {\n        var _aEntityId = pairs[key][0];\n        var aBouncer = entities.get('Bounce', _aEntityId);\n        if (!aBouncer) {\n          continue;\n        }\n\n        var _bEntityId = pairs[key][1];\n        var bBouncer = entities.get('Bounce', _bEntityId);\n        if (!bBouncer) {\n          continue;\n        }\n\n        this.resolveElasticCollision(timeDelta, _aEntityId, aBouncer, _bEntityId, bBouncer);\n      }\n    }\n\n    // See also:\n    // http://en.m.wikipedia.org/wiki/Elastic_collision\n    // http://en.m.wikipedia.org/wiki/Dot_product\n    // https://github.com/Edifear/volleyball/blob/master/collision.html\n    // https://github.com/DominikWidomski/Processing/blob/master/sketch_canvas_red_particles/particles.pde#L47\n\n  }, {\n    key: 'resolveElasticCollision',\n    value: function resolveElasticCollision(timeDelta, aEntityId, aBouncer, bEntityId, bBouncer) {\n\n      var entities = this.world;\n\n      var aPosition = entities.get('Position', aEntityId);\n      var aSprite = entities.get('Sprite', aEntityId);\n      var aMotion = entities.get('Motion', aEntityId);\n\n      var bPosition = entities.get('Position', bEntityId);\n      var bSprite = entities.get('Sprite', bEntityId);\n      var bMotion = entities.get('Motion', bEntityId);\n\n      // First, back both entities off to try to prevent sticking\n      /*\r\n      aPosition.x -= aMotion.dx * timeDelta;\r\n      aPosition.y -= aMotion.dy * timeDelta;\r\n      bPosition.x -= bMotion.dx * timeDelta;\r\n      bPosition.y -= bMotion.dy * timeDelta;\r\n      const radii, dx, dy;\r\n      while (true) {\r\n        aPosition.x -= aMotion.dx * timeDelta;\r\n        aPosition.y -= aMotion.dy * timeDelta;\r\n        bPosition.x -= bMotion.dx * timeDelta;\r\n        bPosition.y -= bMotion.dy * timeDelta;\r\n          radii = (aSprite.size + bSprite.size) / 2;\r\n        dx = aPosition.x - bPosition.x;\r\n        dy = aPosition.y - bPosition.y;\r\n        if (dx*dx + dy*dy > radii*radii) { break; }\r\n      }\r\n      */\n\n      // Vector between entities\n      this.dn.setValues(aPosition.x - bPosition.x, aPosition.y - bPosition.y);\n\n      // Distance between entities\n      var delta = this.dn.magnitude();\n\n      // Normal vector of the collision plane\n      this.dn.normalize();\n\n      // Tangential vector of the collision plane\n      this.dt.setValues(this.dn.y, -this.dn.x);\n\n      // HACK: avoid divide by zero\n      if (delta === 0) {\n        bPosition.x += 0.01;\n      }\n\n      // Get total mass for entities\n      var m1 = aBouncer.mass;\n      var m2 = bBouncer.mass;\n      var M = m1 + m2;\n\n      // Minimum translation vector to push entities apart\n      this.mt.setValues(this.dn.x * (aSprite.width + bSprite.width - delta) * 1.1, this.dn.y * (aSprite.height + bSprite.height - delta) * 1.1);\n\n      // Velocity vectors of entities before collision\n      this.v1.setValues(aMotion ? aMotion.dx : 0, aMotion ? aMotion.dy : 0);\n      this.v2.setValues(bMotion ? bMotion.dx : 0, bMotion ? bMotion.dy : 0);\n\n      // split the velocity vector of the first entity into a normal\n      // and a tangential component in respect of the collision plane\n      this.v1n.setValues(this.dn.x * this.v1.dot(this.dn), this.dn.y * this.v1.dot(this.dn));\n      this.v1t.setValues(this.dt.x * this.v1.dot(this.dt), this.dt.y * this.v1.dot(this.dt));\n\n      // split the velocity vector of the second entity into a normal\n      // and a tangential component in respect of the collision plane\n      this.v2n.setValues(this.dn.x * this.v2.dot(this.dn), this.dn.y * this.v2.dot(this.dn));\n      this.v2t.setValues(this.dt.x * this.v2.dot(this.dt), this.dt.y * this.v2.dot(this.dt));\n\n      // calculate new velocity vectors of the entities, the tangential\n      // component stays the same, the normal component changes analog to\n      // the 1-Dimensional case\n\n      if (aMotion) {\n        var aFactor = (m1 - m2) / M * this.v1n.magnitude() + 2 * m2 / M * this.v2n.magnitude();\n        aMotion.dx = this.v1t.x + this.dn.x * aFactor;\n        aMotion.dy = this.v1t.y + this.dn.y * aFactor;\n        this.processDamage(aEntityId, bEntityId, aMotion, aBouncer, m1);\n      }\n\n      if (bMotion) {\n        var bFactor = (m2 - m1) / M * this.v2n.magnitude() + 2 * m1 / M * this.v1n.magnitude();\n        bMotion.dx = this.v2t.x - this.dn.x * bFactor;\n        bMotion.dy = this.v2t.y - this.dn.y * bFactor;\n        this.processDamage(bEntityId, aEntityId, bMotion, bBouncer, m1);\n      }\n    }\n  }, {\n    key: 'processDamage',\n    value: function processDamage(eid, c_eid, v_motion, bouncer, m1) {\n      if (!bouncer.damage) {\n        return;\n      }\n\n      // Convert a fraction of the rebound velocity into damage by mass\n      var dmg = Math.sqrt(v_motion.dx * v_motion.dx + v_motion.dy * v_motion.dy) * bouncer.damage * m1;\n\n      this.world.publish(__WEBPACK_IMPORTED_MODULE_8__health__[\"MSG_DAMAGE\"], {\n        to: eid,\n        from: c_eid,\n        amount: dmg / 2\n      });\n\n      this.world.publish(__WEBPACK_IMPORTED_MODULE_8__health__[\"MSG_DAMAGE\"], {\n        to: c_eid,\n        from: eid,\n        amount: dmg / 2\n      });\n    }\n  }]);\n\n  return BounceSystem;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"System\"]);\n\n__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerSystem\"]('Bounce', BounceSystem);\n\n/***/ }),\n/* 36 */\n/*!************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_iterators.js ***!\n  \\************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports) {\n\nmodule.exports = {};\n\n\n/***/ }),\n/* 37 */\n/*!**********************************!*\\\n  !*** ./src/plugins/collision.js ***!\n  \\**********************************/\n/*! exports provided: Collidable, CollisionSystem */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Collidable\", function() { return Collidable; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CollisionSystem\", function() { return CollisionSystem; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(/*! babel-runtime/core-js/object/get-prototype-of */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__ = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__ = __webpack_require__(/*! babel-runtime/helpers/createClass */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(/*! babel-runtime/helpers/possibleConstructorReturn */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__ = __webpack_require__(/*! babel-runtime/helpers/inherits */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__lib_core__ = __webpack_require__(/*! ../lib/core */ 0);\n\n\n\n\n\n\n\nvar Collidable = function (_Core$Component) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(Collidable, _Core$Component);\n\n  function Collidable() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, Collidable);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (Collidable.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(Collidable)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(Collidable, null, [{\n    key: 'defaults',\n    value: function defaults() {\n      return {\n        inCollision: false,\n        inCollisionWith: {}\n      };\n    }\n  }]);\n\n  return Collidable;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"Component\"]);\n\n__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerComponent\"]('Collidable', Collidable);\n\nvar match = void 0,\n    matches = void 0,\n    entityId = void 0,\n    entityId2 = void 0,\n    position = void 0,\n    aCollidable = void 0,\n    bCollidable = void 0,\n    dx = void 0,\n    dy = void 0,\n    radii = void 0;\n\nvar CollisionSystem = function (_Core$System) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(CollisionSystem, _Core$System);\n\n  function CollisionSystem() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, CollisionSystem);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (CollisionSystem.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(CollisionSystem)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(CollisionSystem, [{\n    key: 'defaultOptions',\n    value: function defaultOptions() {\n      return {\n        positionSystemName: 'Position'\n      };\n    }\n  }, {\n    key: 'matchComponent',\n    value: function matchComponent() {\n      return 'Collidable';\n    }\n  }, {\n    key: 'initialize',\n    value: function initialize() {\n      var _this3 = this;\n\n      this.positionSystem = this.world.getSystem(this.options.positionSystemName);\n      this.width = this.options.width;\n      this.height = this.options.height;\n      this.retrieveBounds = {};\n      this.checkCollisionBound = function (neighbor, component) {\n        return _this3.checkCollision(neighbor, component);\n      };\n    }\n  }, {\n    key: 'update',\n    value: function update() /* timeDelta */{\n      matches = this.getMatchingComponents();\n      for (entityId in matches) {\n        match = matches[entityId];\n        match.inCollision = false;\n        for (entityId2 in match.inCollisionWith) {\n          delete match.inCollisionWith[entityId2];\n        }\n      }\n      for (entityId in matches) {\n        position = this.world.get('Position', entityId);\n        if (position) {\n          this.positionSystem.quadtree.iterate(position, this.checkCollisionBound, position);\n        }\n      }\n    }\n  }, {\n    key: 'checkCollision',\n    value: function checkCollision(bPosition, aPosition) {\n      if (aPosition.entityId === bPosition.entityId) {\n        return;\n      }\n\n      aCollidable = this.world.get('Collidable', aPosition.entityId);\n      bCollidable = this.world.get('Collidable', bPosition.entityId);\n\n      if (!aCollidable || !bCollidable) {\n        return;\n      }\n\n      dx = aPosition.x - bPosition.x;\n      dy = aPosition.y - bPosition.y;\n\n      // TODO: Pluggable shape intersection detection here?\n\n      // Check collision circle via distance\n      radii = (aPosition.width + bPosition.width) / 2;\n      if (dx * dx + dy * dy > radii * radii) {\n        return;\n      }\n\n      aCollidable.inCollision = true;\n      aCollidable.inCollisionWith[bPosition.entityId] = 1;\n\n      bCollidable.inCollision = true;\n      bCollidable.inCollisionWith[aPosition.entityId] = 1;\n    }\n  }, {\n    key: 'draw',\n    value: function draw() /* timeDelta */{\n      var g = this.getDebugGraphics();\n      if (!g) {\n        return;\n      }\n\n      g.lineStyle(4, 0x999999);\n      var collidables = this.world.get('Collidable');\n      for (var _entityId in collidables) {\n        var collidable = collidables[_entityId];\n        var _position = this.world.get('Position', _entityId);\n\n        if (collidable.inCollision) {\n          g.drawCircle(_position.x, _position.y, 40);\n        }\n      }\n    }\n  }]);\n\n  return CollisionSystem;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"System\"]);\n\n__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerSystem\"]('Collision', CollisionSystem);\n\n/***/ }),\n/* 38 */\n/*!***********************************************************!*\\\n  !*** ./node_modules/babel-runtime/core-js/object/keys.js ***!\n  \\***********************************************************/\n/*! no static exports found */\n/*! exports used: default */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(/*! core-js/library/fn/object/keys */ 125), __esModule: true };\n\n/***/ }),\n/* 39 */\n/*!********************************************!*\\\n  !*** ./src/plugins/playerInputSteering.js ***!\n  \\********************************************/\n/*! exports provided: PlayerInputSteering, PlayerInputSteeringSystem */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PlayerInputSteering\", function() { return PlayerInputSteering; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PlayerInputSteeringSystem\", function() { return PlayerInputSteeringSystem; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys__ = __webpack_require__(/*! babel-runtime/core-js/object/keys */ 38);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_get__ = __webpack_require__(/*! babel-runtime/helpers/get */ 25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_get___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_get__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(/*! babel-runtime/core-js/object/get-prototype-of */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck__ = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass__ = __webpack_require__(/*! babel-runtime/helpers/createClass */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(/*! babel-runtime/helpers/possibleConstructorReturn */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_inherits__ = __webpack_require__(/*! babel-runtime/helpers/inherits */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__lib_core__ = __webpack_require__(/*! ../lib/core */ 0);\n\n\n\n\n\n\n\n\n\nvar PlayerInputSteering = function (_Component) {\n  __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_inherits___default()(PlayerInputSteering, _Component);\n\n  function PlayerInputSteering() {\n    __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck___default()(this, PlayerInputSteering);\n\n    return __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn___default()(this, (PlayerInputSteering.__proto__ || __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of___default()(PlayerInputSteering)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass___default()(PlayerInputSteering, null, [{\n    key: 'defaults',\n    value: function defaults() {\n      return {\n        active: true,\n        radPerSec: Math.PI * 2\n      };\n    }\n  }]);\n\n  return PlayerInputSteering;\n}(__WEBPACK_IMPORTED_MODULE_7__lib_core__[\"Component\"]);\n\nObject(__WEBPACK_IMPORTED_MODULE_7__lib_core__[\"registerComponent\"])('PlayerInputSteering', PlayerInputSteering);\n\nvar PI2 = Math.PI * 2;\n\nvar PlayerInputSteeringSystem = function (_System) {\n  __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_inherits___default()(PlayerInputSteeringSystem, _System);\n\n  function PlayerInputSteeringSystem() {\n    __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck___default()(this, PlayerInputSteeringSystem);\n\n    return __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn___default()(this, (PlayerInputSteeringSystem.__proto__ || __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of___default()(PlayerInputSteeringSystem)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass___default()(PlayerInputSteeringSystem, [{\n    key: 'defaultOptions',\n    value: function defaultOptions() {\n      return {\n        gamepadDeadzone: 0.2\n      };\n    }\n  }, {\n    key: 'matchComponent',\n    value: function matchComponent() {\n      return 'PlayerInputSteering';\n    }\n  }, {\n    key: 'initialize',\n    value: function initialize() {\n      var _this3 = this;\n\n      this.gamepad = { active: false };\n      this.pointer = { active: false, x: 0, y: 0 };\n      this.keys = { active: false };\n      this.touch = { active: false, x: 0, y: 0 };\n\n      this.world.subscribe('mouseDown', function (msg, cursorPosition) {\n        return _this3.setPointer(true, cursorPosition);\n      }).subscribe('mouseUp', function (msg, cursorPosition) {\n        return _this3.setPointer(false, cursorPosition);\n      }).subscribe('mouseMove', function (msg, cursorPosition) {\n        return _this3.setPointer(_this3.pointer.active, cursorPosition);\n      });\n\n      var windowEvents = {\n        keydown: this.handleKeyDown,\n        keyup: this.handleKeyUp\n      };\n      __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys___default()(windowEvents).forEach(function (k) {\n        return window.addEventListener(k, windowEvents[k].bind(_this3));\n      });\n    }\n  }, {\n    key: 'setPointer',\n    value: function setPointer(active, position) {\n      this.pointer.active = active;\n      this.pointer.x = position.x;\n      this.pointer.y = position.y;\n    }\n  }, {\n    key: 'update',\n    value: function update(timeDelta) {\n      this.updateGamepads(timeDelta);\n      this.updateKeyboard(timeDelta);\n      __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_get___default()(PlayerInputSteeringSystem.prototype.__proto__ || __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of___default()(PlayerInputSteeringSystem.prototype), 'update', this).call(this, timeDelta);\n    }\n  }, {\n    key: 'updateComponent',\n    value: function updateComponent(timeDelta, entityId, steering) {\n      var thruster = this.world.get('Thruster', entityId);\n      var motion = this.world.get('Motion', entityId);\n\n      thruster.active = true;\n      thruster.stop = false;\n\n      if (this.keys.active) {\n        return this.updateComponentFromKeyboard(timeDelta, entityId, steering);\n      }\n\n      if (this.pointer.active) {\n        return this.updateComponentFromPointer(timeDelta, entityId, steering);\n      }\n\n      if (this.gamepad.active) {\n        return this.updateComponentFromGamepad(timeDelta, entityId, steering);\n      }\n\n      thruster.stop = true;\n      motion.drotation = 0;\n    }\n  }, {\n    key: 'updateComponentFromPointer',\n    value: function updateComponentFromPointer(timeDelta, entityId, steering) {\n      var position = this.world.get('Position', entityId);\n      this.updateMotionFromTargetAngle(timeDelta, entityId, steering, Math.atan2(this.pointer.y - position.y, this.pointer.x - position.x));\n    }\n  }, {\n    key: 'updateComponentFromGamepad',\n    value: function updateComponentFromGamepad(timeDelta, entityId, steering) {\n      this.updateMotionFromTargetAngle(timeDelta, entityId, steering, Math.atan2(this.gamepad.axis1, this.gamepad.axis0));\n    }\n  }, {\n    key: 'updateComponentFromKeyboard',\n    value: function updateComponentFromKeyboard(timeDelta, entityId, steering) {\n      var thruster = this.world.get('Thruster', entityId);\n      var motion = this.world.get('Motion', entityId);\n\n      var dleft = this.keys[65] || this.keys[37] || this.gamepad.button13;\n      var dright = this.keys[68] || this.keys[39] || this.gamepad.button14;\n      var dup = this.keys[87] || this.keys[38] || this.gamepad.button11;\n      // const ddown  = (this.keys[83] || this.keys[40] || this.gamepad.button12);\n\n      if (dup) {\n        thruster.active = true;\n      } else {\n        thruster.stop = true;\n      }\n\n      var direction = dleft ? -1 : dright ? 1 : 0;\n      var targetDr = direction * steering.radPerSec;\n      motion.drotation = targetDr;\n    }\n  }, {\n    key: 'updateGamepads',\n    value: function updateGamepads() {\n      var _this4 = this;\n\n      var gamepads = navigator.getGamepads ? navigator.getGamepads() : [];\n\n      // TODO: specify which gamepad, i.e. for multiplayer\n      for (var i = 0; i < gamepads.length; i++) {\n        var gp = gamepads[i];\n        if (!gp || !gp.connected) continue;\n        gp.buttons.forEach(function (val, idx) {\n          return _this4.gamepad['button' + idx] = val.pressed;\n        });\n        gp.axes.forEach(function (val, idx) {\n          return _this4.gamepad['axis' + idx] = val;\n        });\n        break; // stop after the first gamepad\n      }\n\n      __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys___default()(this.gamepad).forEach(function (k) {\n        if (!_this4.gamepad[k]) {\n          delete _this4.gamepad[k];\n        }\n      });\n\n      var axisX = this.gamepad.axis0;\n      var axisY = this.gamepad.axis1;\n      this.gamepad.active = (Math.abs(axisX) > 0 || Math.abs(axisY) > 0) && Math.sqrt(axisX * axisX + axisY * axisY) > this.options.gamepadDeadzone;\n    }\n  }, {\n    key: 'updateKeyboard',\n    value: function updateKeyboard() {\n      var dleft = this.keys[65] || this.keys[37] || this.gamepad.button13;\n      var dright = this.keys[68] || this.keys[39] || this.gamepad.button14;\n      var dup = this.keys[87] || this.keys[38] || this.gamepad.button11;\n      var ddown = this.keys[83] || this.keys[40] || this.gamepad.button12;\n\n      this.keys.active = dleft || dright || dup || ddown;\n    }\n  }, {\n    key: 'handleKeyDown',\n    value: function handleKeyDown(ev) {\n      this.keys[ev.keyCode] = true;\n      ev.preventDefault();\n    }\n  }, {\n    key: 'handleKeyUp',\n    value: function handleKeyUp(ev) {\n      delete this.keys[ev.keyCode];\n      ev.preventDefault();\n    }\n  }, {\n    key: 'updateMotionFromTargetAngle',\n    value: function updateMotionFromTargetAngle(timeDelta, entityId, steering, targetAngleRaw) {\n      var position = this.world.get('Position', entityId);\n      var motion = this.world.get('Motion', entityId);\n\n      var targetAngle = targetAngleRaw < 0 ? targetAngleRaw + PI2 : targetAngleRaw;\n\n      // Pick the direction from current to target angle\n      var direction = targetAngle < position.rotation ? -1 : 1;\n\n      // If the offset between the angles is more than half a circle, go\n      // the other way because it'll be shorter.\n      var offset = Math.abs(targetAngle - position.rotation);\n      if (offset > Math.PI) {\n        direction = 0 - direction;\n      }\n\n      // Work out the desired delta-rotation to steer toward target\n      var targetDr = direction * Math.min(steering.radPerSec, offset / timeDelta);\n\n      // Calculate the delta-rotation impulse required to meet the goal,\n      // but constrain to the capability of the steering thrusters\n      var impulseDr = targetDr - motion.drotation;\n      if (Math.abs(impulseDr) > steering.radPerSec) {\n        if (impulseDr > 0) {\n          impulseDr = steering.radPerSec;\n        } else if (impulseDr < 0) {\n          impulseDr = 0 - steering.radPerSec;\n        }\n      }\n\n      motion.drotation += impulseDr;\n    }\n  }]);\n\n  return PlayerInputSteeringSystem;\n}(__WEBPACK_IMPORTED_MODULE_7__lib_core__[\"System\"]);\n\nObject(__WEBPACK_IMPORTED_MODULE_7__lib_core__[\"registerSystem\"])('PlayerInputSteering', PlayerInputSteeringSystem);\n\n/***/ }),\n/* 40 */\n/*!*************************************************************!*\\\n  !*** ./node_modules/babel-runtime/core-js/object/assign.js ***!\n  \\*************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(/*! core-js/library/fn/object/assign */ 78), __esModule: true };\n\n/***/ }),\n/* 41 */\n/*!******************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_uid.js ***!\n  \\******************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports) {\n\nvar id = 0;\nvar px = Math.random();\nmodule.exports = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n\n\n/***/ }),\n/* 42 */\n/*!******************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_ctx.js ***!\n  \\******************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// optional / simple context binding\nvar aFunction = __webpack_require__(/*! ./_a-function */ 80);\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n\n\n/***/ }),\n/* 43 */\n/*!***************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_to-primitive.js ***!\n  \\***************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = __webpack_require__(/*! ./_is-object */ 31);\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n\n\n/***/ }),\n/* 44 */\n/*!******************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_cof.js ***!\n  \\******************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports) {\n\nvar toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n\n\n/***/ }),\n/* 45 */\n/*!**********************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_defined.js ***!\n  \\**********************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports) {\n\n// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n\n\n/***/ }),\n/* 46 */\n/*!*************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_to-integer.js ***!\n  \\*************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports) {\n\n// 7.1.4 ToInteger\nvar ceil = Math.ceil;\nvar floor = Math.floor;\nmodule.exports = function (it) {\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n\n\n/***/ }),\n/* 47 */\n/*!*************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_shared-key.js ***!\n  \\*************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar shared = __webpack_require__(/*! ./_shared */ 48)('keys');\nvar uid = __webpack_require__(/*! ./_uid */ 41);\nmodule.exports = function (key) {\n  return shared[key] || (shared[key] = uid(key));\n};\n\n\n/***/ }),\n/* 48 */\n/*!*********************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_shared.js ***!\n  \\*********************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar global = __webpack_require__(/*! ./_global */ 12);\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || (global[SHARED] = {});\nmodule.exports = function (key) {\n  return store[key] || (store[key] = {});\n};\n\n\n/***/ }),\n/* 49 */\n/*!****************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_enum-bug-keys.js ***!\n  \\****************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports) {\n\n// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');\n\n\n/***/ }),\n/* 50 */\n/*!**************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_object-gops.js ***!\n  \\**************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports) {\n\nexports.f = Object.getOwnPropertySymbols;\n\n\n/***/ }),\n/* 51 */\n/*!*************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_object-sap.js ***!\n  \\*************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// most Object methods by ES6 should accept primitives\nvar $export = __webpack_require__(/*! ./_export */ 10);\nvar core = __webpack_require__(/*! ./_core */ 6);\nvar fails = __webpack_require__(/*! ./_fails */ 24);\nmodule.exports = function (KEY, exec) {\n  var fn = (core.Object || {})[KEY] || Object[KEY];\n  var exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function () { fn(1); }), 'Object', exp);\n};\n\n\n/***/ }),\n/* 52 */\n/*!**********************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_library.js ***!\n  \\**********************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports) {\n\nmodule.exports = true;\n\n\n/***/ }),\n/* 53 */\n/*!****************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_object-create.js ***!\n  \\****************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\nvar anObject = __webpack_require__(/*! ./_an-object */ 23);\nvar dPs = __webpack_require__(/*! ./_object-dps */ 93);\nvar enumBugKeys = __webpack_require__(/*! ./_enum-bug-keys */ 49);\nvar IE_PROTO = __webpack_require__(/*! ./_shared-key */ 47)('IE_PROTO');\nvar Empty = function () { /* empty */ };\nvar PROTOTYPE = 'prototype';\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar createDict = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = __webpack_require__(/*! ./_dom-create */ 62)('iframe');\n  var i = enumBugKeys.length;\n  var lt = '<';\n  var gt = '>';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  __webpack_require__(/*! ./_html */ 94).appendChild(iframe);\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n  // createDict = iframe.contentWindow.Object;\n  // html.removeChild(iframe);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n  iframeDocument.close();\n  createDict = iframeDocument.F;\n  while (i--) delete createDict[PROTOTYPE][enumBugKeys[i]];\n  return createDict();\n};\n\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty();\n    Empty[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = createDict();\n  return Properties === undefined ? result : dPs(result, Properties);\n};\n\n\n/***/ }),\n/* 54 */\n/*!********************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_set-to-string-tag.js ***!\n  \\********************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar def = __webpack_require__(/*! ./_object-dp */ 13).f;\nvar has = __webpack_require__(/*! ./_has */ 16);\nvar TAG = __webpack_require__(/*! ./_wks */ 9)('toStringTag');\n\nmodule.exports = function (it, tag, stat) {\n  if (it && !has(it = stat ? it : it.prototype, TAG)) def(it, TAG, { configurable: true, value: tag });\n};\n\n\n/***/ }),\n/* 55 */\n/*!**********************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_wks-ext.js ***!\n  \\**********************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports.f = __webpack_require__(/*! ./_wks */ 9);\n\n\n/***/ }),\n/* 56 */\n/*!*************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_wks-define.js ***!\n  \\*************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar global = __webpack_require__(/*! ./_global */ 12);\nvar core = __webpack_require__(/*! ./_core */ 6);\nvar LIBRARY = __webpack_require__(/*! ./_library */ 52);\nvar wksExt = __webpack_require__(/*! ./_wks-ext */ 55);\nvar defineProperty = __webpack_require__(/*! ./_object-dp */ 13).f;\nmodule.exports = function (name) {\n  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});\n  if (name.charAt(0) != '_' && !(name in $Symbol)) defineProperty($Symbol, name, { value: wksExt.f(name) });\n};\n\n\n/***/ }),\n/* 57 */\n/*!**************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_object-gopd.js ***!\n  \\**************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar pIE = __webpack_require__(/*! ./_object-pie */ 33);\nvar createDesc = __webpack_require__(/*! ./_property-desc */ 32);\nvar toIObject = __webpack_require__(/*! ./_to-iobject */ 11);\nvar toPrimitive = __webpack_require__(/*! ./_to-primitive */ 43);\nvar has = __webpack_require__(/*! ./_has */ 16);\nvar IE8_DOM_DEFINE = __webpack_require__(/*! ./_ie8-dom-define */ 61);\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nexports.f = __webpack_require__(/*! ./_descriptors */ 14) ? gOPD : function getOwnPropertyDescriptor(O, P) {\n  O = toIObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return gOPD(O, P);\n  } catch (e) { /* empty */ }\n  if (has(O, P)) return createDesc(!pIE.f.call(O, P), O[P]);\n};\n\n\n/***/ }),\n/* 58 */\n/*!***********************************!*\\\n  !*** ./src/plugins/hordeSpawn.js ***!\n  \\***********************************/\n/*! exports provided: HordeSpawn, HordeSpawnSystem */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"HordeSpawn\", function() { return HordeSpawn; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"HordeSpawnSystem\", function() { return HordeSpawnSystem; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys__ = __webpack_require__(/*! babel-runtime/core-js/object/keys */ 38);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(/*! babel-runtime/core-js/object/get-prototype-of */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck__ = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass__ = __webpack_require__(/*! babel-runtime/helpers/createClass */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(/*! babel-runtime/helpers/possibleConstructorReturn */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits__ = __webpack_require__(/*! babel-runtime/helpers/inherits */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__lib_core__ = __webpack_require__(/*! ../lib/core */ 0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__spawn__ = __webpack_require__(/*! ./spawn */ 27);\n\n\n\n\n\n\n\n\n\n\n// Commonly used temp variables, pre-declared early.\nvar entityId = void 0,\n    matches = void 0,\n    sprite = void 0;\n\nvar HordeSpawn = function (_Component) {\n  __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits___default()(HordeSpawn, _Component);\n\n  function HordeSpawn() {\n    __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck___default()(this, HordeSpawn);\n\n    return __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn___default()(this, (HordeSpawn.__proto__ || __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of___default()(HordeSpawn)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass___default()(HordeSpawn, null, [{\n    key: 'defaults',\n    value: function defaults() {\n      return { age: 0 };\n    }\n  }]);\n\n  return HordeSpawn;\n}(__WEBPACK_IMPORTED_MODULE_6__lib_core__[\"Component\"]);\n\nObject(__WEBPACK_IMPORTED_MODULE_6__lib_core__[\"registerComponent\"])('HordeSpawn', HordeSpawn);\n\nvar HordeSpawnSystem = function (_System) {\n  __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits___default()(HordeSpawnSystem, _System);\n\n  function HordeSpawnSystem() {\n    __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck___default()(this, HordeSpawnSystem);\n\n    return __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn___default()(this, (HordeSpawnSystem.__proto__ || __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of___default()(HordeSpawnSystem)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass___default()(HordeSpawnSystem, [{\n    key: 'defaultOptions',\n    value: function defaultOptions() {\n      return {\n        viewportSystemName: 'ViewportPixi',\n        minCount: 100,\n        maxFrameSpawn: 50,\n        offscreenTTL: 1.0,\n        spawnMargin: 100,\n        spawn: function spawn() {}\n      };\n    }\n  }, {\n    key: 'initialize',\n    value: function initialize() {\n      this.spawnCount = 0;\n      this.viewportSystem = this.world.getSystem(this.options.viewportSystemName);\n    }\n  }, {\n    key: 'matchComponent',\n    value: function matchComponent() {\n      return 'HordeSpawn';\n    }\n  }, {\n    key: 'update',\n    value: function update(timeDelta) {\n      matches = this.getMatchingComponents() || {};\n      this.spawnCount = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys___default()(matches).length;\n      if (this.spawnCount < this.options.minCount) {\n        var cnt = Math.max(this.options.maxFrameSpawn, this.options.minCount - this.spawnCount);\n        for (var i = 0; i < cnt; i++) {\n          this.spawnOffscreen();\n        }\n      }\n      for (entityId in matches) {\n        this.updateComponent(timeDelta, entityId, matches[entityId]);\n      }\n    }\n  }, {\n    key: 'updateComponent',\n    value: function updateComponent(timeDelta, entityId, hordespawn) {\n      sprite = this.world.get('Sprite', entityId);\n      if (sprite.visible) {\n        hordespawn.age = 0;\n      } else {\n        hordespawn.age += timeDelta;\n        if (hordespawn.age >= this.options.offscreenTTL) {\n          this.world.publish(__WEBPACK_IMPORTED_MODULE_7__spawn__[\"MSG_DESTROY\"], entityId);\n        }\n      }\n    }\n  }, {\n    key: 'spawnOffscreen',\n    value: function spawnOffscreen() {\n      var _viewportSystem = this.viewportSystem,\n          visibleLeft = _viewportSystem.visibleLeft,\n          visibleRight = _viewportSystem.visibleRight,\n          visibleTop = _viewportSystem.visibleTop,\n          visibleBottom = _viewportSystem.visibleBottom;\n\n      var margin = this.options.spawnMargin;\n      var w = visibleRight + margin - (visibleLeft - margin);\n      var h = visibleBottom + margin - (visibleTop - margin);\n      var r = Math.random();\n\n      var x = void 0,\n          y = void 0;\n\n      if (r < 0.5) {\n        y = visibleTop - margin + Math.random() * h;\n      } else {\n        x = visibleLeft - margin + Math.random() * w;\n      }\n\n      if (r < 0.25) {\n        x = visibleLeft - margin;\n      } else if (r < 0.5) {\n        x = visibleRight + margin;\n      } else if (r < 0.75) {\n        y = visibleTop - margin;\n      } else {\n        y = visibleBottom + margin;\n      }\n\n      this.options.spawn(x, y);\n    }\n  }]);\n\n  return HordeSpawnSystem;\n}(__WEBPACK_IMPORTED_MODULE_6__lib_core__[\"System\"]);\n\nObject(__WEBPACK_IMPORTED_MODULE_6__lib_core__[\"registerSystem\"])('HordeSpawn', HordeSpawnSystem);\n\n/***/ }),\n/* 59 */\n/*!*********************************!*\\\n  !*** ./src/plugins/repulsor.js ***!\n  \\*********************************/\n/*! exports provided: Repulsor, RepulsorSystem */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Repulsor\", function() { return Repulsor; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"RepulsorSystem\", function() { return RepulsorSystem; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(/*! babel-runtime/core-js/object/get-prototype-of */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__ = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__ = __webpack_require__(/*! babel-runtime/helpers/createClass */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(/*! babel-runtime/helpers/possibleConstructorReturn */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__ = __webpack_require__(/*! babel-runtime/helpers/inherits */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__lib_core__ = __webpack_require__(/*! ../lib/core */ 0);\n\n\n\n\n\n\n\nvar Repulsor = function (_Component) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(Repulsor, _Component);\n\n  function Repulsor() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, Repulsor);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (Repulsor.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(Repulsor)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(Repulsor, null, [{\n    key: 'defaults',\n    value: function defaults() {\n      return {\n        active: true,\n        range: 500,\n        force: 200\n      };\n    }\n  }]);\n\n  return Repulsor;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"Component\"]);\n\nObject(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerComponent\"])('Repulsor', Repulsor);\n\nvar components = void 0,\n    component = void 0,\n    entityId = void 0,\n    position = void 0,\n    repulsor = void 0,\n    repulsorPosition = void 0,\n    neighborSprite = void 0,\n    neighborPosition = void 0,\n    neighborMotion = void 0,\n    repelAngle = void 0,\n    repelForce = void 0,\n    dist = void 0;\n\nvar queryBounds = {};\n\nvar RepulsorSystem = function (_System) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(RepulsorSystem, _System);\n\n  function RepulsorSystem() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, RepulsorSystem);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (RepulsorSystem.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(RepulsorSystem)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(RepulsorSystem, [{\n    key: 'defaultOptions',\n    value: function defaultOptions() {\n      return {\n        positionSystemName: 'Position'\n      };\n    }\n  }, {\n    key: 'matchComponent',\n    value: function matchComponent() {\n      return 'Repulsor';\n    }\n  }, {\n    key: 'initialize',\n    value: function initialize() {\n      var _this3 = this;\n\n      this.positionSystem = this.world.getSystem(this.options.positionSystemName);\n      this.applyRepulsionBound = function (neighbor, component) {\n        return _this3.applyRepulsion(neighbor, component);\n      };\n    }\n  }, {\n    key: 'updateComponent',\n    value: function updateComponent(timeDelta, entityId, component) {\n      if (!component.active) {\n        return;\n      }\n\n      position = this.world.get('Position', entityId);\n\n      queryBounds.left = position.left - component.range;\n      queryBounds.right = position.right + component.range;\n      queryBounds.top = position.top - component.range;\n      queryBounds.bottom = position.bottom + component.range;\n\n      this.positionSystem.quadtree.iterate(queryBounds, this.applyRepulsionBound, entityId);\n    }\n  }, {\n    key: 'applyRepulsion',\n    value: function applyRepulsion(neighbor, repulsorId) {\n      if (entityId === neighbor.entityId) {\n        return;\n      }\n\n      neighborSprite = this.world.get('Sprite', neighbor.entityId);\n      if (neighborSprite.name !== 'mine') {\n        return;\n      }\n\n      repulsor = this.world.get('Repulsor', repulsorId);\n      repulsorPosition = this.world.get('Position', repulsorId);\n      neighborPosition = this.world.get('Position', neighbor.entityId);\n      neighborMotion = this.world.get('Motion', neighbor.entityId);\n\n      dist = (neighborPosition.x - repulsorPosition.x) * (neighborPosition.x - repulsorPosition.x) + (neighborPosition.y - repulsorPosition.y) * (neighborPosition.y - repulsorPosition.y);\n\n      if (dist > repulsor.range * repulsor.range) {\n        return;\n      }\n      // if (dist < repulsor.range) { return; }\n\n      repelAngle = Math.atan2(repulsorPosition.y - neighborPosition.y, repulsorPosition.x - neighborPosition.x);\n\n      repelForce = -repulsor.force;\n\n      neighborMotion.dx += repelForce * Math.cos(repelAngle);\n      neighborMotion.dy += repelForce * Math.sin(repelAngle);\n    }\n  }, {\n    key: 'draw',\n    value: function draw() /* timeDelta */{\n      var g = this.getDebugGraphics();\n      if (!g) {\n        return;\n      }\n\n      g.lineStyle(4, 0x882222);\n      components = this.getMatchingComponents();\n      for (entityId in components) {\n        component = components[entityId];\n        position = this.world.get('Position', entityId);\n        g.drawCircle(position.x, position.y, component.range);\n      }\n    }\n  }]);\n\n  return RepulsorSystem;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"System\"]);\n\nObject(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerSystem\"])('Repulsor', RepulsorSystem);\n\n/***/ }),\n/* 60 */\n/*!*******************************************************!*\\\n  !*** ./node_modules/babel-runtime/helpers/extends.js ***!\n  \\*******************************************************/\n/*! no static exports found */\n/*! exports used: default */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\n\nvar _assign = __webpack_require__(/*! ../core-js/object/assign */ 40);\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _assign2.default || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\n/***/ }),\n/* 61 */\n/*!*****************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_ie8-dom-define.js ***!\n  \\*****************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = !__webpack_require__(/*! ./_descriptors */ 14) && !__webpack_require__(/*! ./_fails */ 24)(function () {\n  return Object.defineProperty(__webpack_require__(/*! ./_dom-create */ 62)('div'), 'a', { get: function () { return 7; } }).a != 7;\n});\n\n\n/***/ }),\n/* 62 */\n/*!*************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_dom-create.js ***!\n  \\*************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar isObject = __webpack_require__(/*! ./_is-object */ 31);\nvar document = __webpack_require__(/*! ./_global */ 12).document;\n// typeof document.createElement is 'object' in old IE\nvar is = isObject(document) && isObject(document.createElement);\nmodule.exports = function (it) {\n  return is ? document.createElement(it) : {};\n};\n\n\n/***/ }),\n/* 63 */\n/*!***********************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_object-keys-internal.js ***!\n  \\***********************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar has = __webpack_require__(/*! ./_has */ 16);\nvar toIObject = __webpack_require__(/*! ./_to-iobject */ 11);\nvar arrayIndexOf = __webpack_require__(/*! ./_array-includes */ 82)(false);\nvar IE_PROTO = __webpack_require__(/*! ./_shared-key */ 47)('IE_PROTO');\n\nmodule.exports = function (object, names) {\n  var O = toIObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) if (key != IE_PROTO) has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n\n\n/***/ }),\n/* 64 */\n/*!**********************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_iobject.js ***!\n  \\**********************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = __webpack_require__(/*! ./_cof */ 44);\n// eslint-disable-next-line no-prototype-builtins\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n\n\n/***/ }),\n/* 65 */\n/*!************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_to-length.js ***!\n  \\************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 7.1.15 ToLength\nvar toInteger = __webpack_require__(/*! ./_to-integer */ 46);\nvar min = Math.min;\nmodule.exports = function (it) {\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n\n\n/***/ }),\n/* 66 */\n/*!*************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_object-gpo.js ***!\n  \\*************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\nvar has = __webpack_require__(/*! ./_has */ 16);\nvar toObject = __webpack_require__(/*! ./_to-object */ 34);\nvar IE_PROTO = __webpack_require__(/*! ./_shared-key */ 47)('IE_PROTO');\nvar ObjectProto = Object.prototype;\n\nmodule.exports = Object.getPrototypeOf || function (O) {\n  O = toObject(O);\n  if (has(O, IE_PROTO)) return O[IE_PROTO];\n  if (typeof O.constructor == 'function' && O instanceof O.constructor) {\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectProto : null;\n};\n\n\n/***/ }),\n/* 67 */\n/*!******************************************************!*\\\n  !*** ./node_modules/babel-runtime/helpers/typeof.js ***!\n  \\******************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\n\nvar _iterator = __webpack_require__(/*! ../core-js/symbol/iterator */ 89);\n\nvar _iterator2 = _interopRequireDefault(_iterator);\n\nvar _symbol = __webpack_require__(/*! ../core-js/symbol */ 99);\n\nvar _symbol2 = _interopRequireDefault(_symbol);\n\nvar _typeof = typeof _symbol2.default === \"function\" && typeof _iterator2.default === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = typeof _symbol2.default === \"function\" && _typeof(_iterator2.default) === \"symbol\" ? function (obj) {\n  return typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n} : function (obj) {\n  return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n};\n\n/***/ }),\n/* 68 */\n/*!*********************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/es6.string.iterator.js ***!\n  \\*********************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar $at = __webpack_require__(/*! ./_string-at */ 91)(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\n__webpack_require__(/*! ./_iter-define */ 69)(String, 'String', function (iterated) {\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var index = this._i;\n  var point;\n  if (index >= O.length) return { value: undefined, done: true };\n  point = $at(O, index);\n  this._i += point.length;\n  return { value: point, done: false };\n});\n\n\n/***/ }),\n/* 69 */\n/*!**************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_iter-define.js ***!\n  \\**************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar LIBRARY = __webpack_require__(/*! ./_library */ 52);\nvar $export = __webpack_require__(/*! ./_export */ 10);\nvar redefine = __webpack_require__(/*! ./_redefine */ 70);\nvar hide = __webpack_require__(/*! ./_hide */ 22);\nvar has = __webpack_require__(/*! ./_has */ 16);\nvar Iterators = __webpack_require__(/*! ./_iterators */ 36);\nvar $iterCreate = __webpack_require__(/*! ./_iter-create */ 92);\nvar setToStringTag = __webpack_require__(/*! ./_set-to-string-tag */ 54);\nvar getPrototypeOf = __webpack_require__(/*! ./_object-gpo */ 66);\nvar ITERATOR = __webpack_require__(/*! ./_wks */ 9)('iterator');\nvar BUGGY = !([].keys && 'next' in [].keys()); // Safari has buggy iterators w/o `next`\nvar FF_ITERATOR = '@@iterator';\nvar KEYS = 'keys';\nvar VALUES = 'values';\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED) {\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function (kind) {\n    if (!BUGGY && kind in proto) return proto[kind];\n    switch (kind) {\n      case KEYS: return function keys() { return new Constructor(this, kind); };\n      case VALUES: return function values() { return new Constructor(this, kind); };\n    } return function entries() { return new Constructor(this, kind); };\n  };\n  var TAG = NAME + ' Iterator';\n  var DEF_VALUES = DEFAULT == VALUES;\n  var VALUES_BUG = false;\n  var proto = Base.prototype;\n  var $native = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT];\n  var $default = $native || getMethod(DEFAULT);\n  var $entries = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined;\n  var $anyNative = NAME == 'Array' ? proto.entries || $native : $native;\n  var methods, key, IteratorPrototype;\n  // Fix native\n  if ($anyNative) {\n    IteratorPrototype = getPrototypeOf($anyNative.call(new Base()));\n    if (IteratorPrototype !== Object.prototype && IteratorPrototype.next) {\n      // Set @@toStringTag to native iterators\n      setToStringTag(IteratorPrototype, TAG, true);\n      // fix for some old engines\n      if (!LIBRARY && !has(IteratorPrototype, ITERATOR)) hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  }\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if (DEF_VALUES && $native && $native.name !== VALUES) {\n    VALUES_BUG = true;\n    $default = function values() { return $native.call(this); };\n  }\n  // Define iterator\n  if ((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])) {\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG] = returnThis;\n  if (DEFAULT) {\n    methods = {\n      values: DEF_VALUES ? $default : getMethod(VALUES),\n      keys: IS_SET ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if (FORCED) for (key in methods) {\n      if (!(key in proto)) redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n\n\n/***/ }),\n/* 70 */\n/*!***********************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_redefine.js ***!\n  \\***********************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(/*! ./_hide */ 22);\n\n\n/***/ }),\n/* 71 */\n/*!**************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_object-gopn.js ***!\n  \\**************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\nvar $keys = __webpack_require__(/*! ./_object-keys-internal */ 63);\nvar hiddenKeys = __webpack_require__(/*! ./_enum-bug-keys */ 49).concat('length', 'prototype');\n\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return $keys(O, hiddenKeys);\n};\n\n\n/***/ }),\n/* 72 */\n/*!***********************************!*\\\n  !*** ./src/plugins/expiration.js ***!\n  \\***********************************/\n/*! exports provided: Expiration, ExpirationSystem */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Expiration\", function() { return Expiration; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ExpirationSystem\", function() { return ExpirationSystem; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(/*! babel-runtime/core-js/object/get-prototype-of */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__ = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__ = __webpack_require__(/*! babel-runtime/helpers/createClass */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(/*! babel-runtime/helpers/possibleConstructorReturn */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__ = __webpack_require__(/*! babel-runtime/helpers/inherits */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__lib_core__ = __webpack_require__(/*! ../lib/core */ 0);\n\n\n\n\n\n\n\nvar Expiration = function (_Core$Component) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(Expiration, _Core$Component);\n\n  function Expiration() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, Expiration);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (Expiration.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(Expiration)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(Expiration, null, [{\n    key: 'defaults',\n    value: function defaults() {\n      return { ttl: 0, age: 0 };\n    }\n  }]);\n\n  return Expiration;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"Component\"]);\n__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerComponent\"]('Expiration', Expiration);\n\nvar ExpirationSystem = function (_Core$System) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(ExpirationSystem, _Core$System);\n\n  function ExpirationSystem() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, ExpirationSystem);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (ExpirationSystem.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(ExpirationSystem)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(ExpirationSystem, [{\n    key: 'matchComponent',\n    value: function matchComponent() {\n      return 'Expiration';\n    }\n  }, {\n    key: 'updateComponent',\n    value: function updateComponent(timeDelta, entityId, expiration) {\n      expiration.age += timeDelta;\n      if (expiration.age >= expiration.ttl) {\n        this.world.destroy(entityId);\n      }\n    }\n  }]);\n\n  return ExpirationSystem;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"System\"]);\n__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerSystem\"]('Expiration', ExpirationSystem);\n\n/***/ }),\n/* 73 */\n/*!********************************!*\\\n  !*** ./src/plugins/orbiter.js ***!\n  \\********************************/\n/*! exports provided: Orbiter, OrbiterSystem */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Orbiter\", function() { return Orbiter; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"OrbiterSystem\", function() { return OrbiterSystem; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(/*! babel-runtime/core-js/object/get-prototype-of */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__ = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__ = __webpack_require__(/*! babel-runtime/helpers/createClass */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(/*! babel-runtime/helpers/possibleConstructorReturn */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__ = __webpack_require__(/*! babel-runtime/helpers/inherits */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__lib_core__ = __webpack_require__(/*! ../lib/core */ 0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__position__ = __webpack_require__(/*! ./position */ 7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__lib_Vector2D__ = __webpack_require__(/*! ../lib/Vector2D */ 17);\n\n\n\n\n\n\n\n\n\n\n\nvar Orbiter = function (_Core$Component) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(Orbiter, _Core$Component);\n\n  function Orbiter() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, Orbiter);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (Orbiter.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(Orbiter)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(Orbiter, null, [{\n    key: 'defaults',\n    value: function defaults() {\n      return {\n        name: null,\n        entityId: null,\n        angle: 0.0,\n        rotate: true,\n        radPerSec: Math.PI / 4\n      };\n    }\n  }]);\n\n  return Orbiter;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"Component\"]);\n__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerComponent\"]('Orbiter', Orbiter);\n\nvar OrbiterSystem = function (_Core$System) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(OrbiterSystem, _Core$System);\n\n  function OrbiterSystem() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, OrbiterSystem);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (OrbiterSystem.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(OrbiterSystem)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(OrbiterSystem, [{\n    key: 'matchComponent',\n    value: function matchComponent() {\n      return 'Orbiter';\n    }\n  }, {\n    key: 'initialize',\n    value: function initialize() {\n      this.vOrbited = new __WEBPACK_IMPORTED_MODULE_7__lib_Vector2D__[\"a\" /* default */]();\n      this.vOrbiter = new __WEBPACK_IMPORTED_MODULE_7__lib_Vector2D__[\"a\" /* default */]();\n      this.vOld = new __WEBPACK_IMPORTED_MODULE_7__lib_Vector2D__[\"a\" /* default */]();\n    }\n  }, {\n    key: 'updateComponent',\n    value: function updateComponent(timeDelta, entityId, orbiter) {\n\n      // Look up the orbited entity ID, if only name given.\n      if (orbiter.name && !orbiter.entityId) {\n        orbiter.entityId = __WEBPACK_IMPORTED_MODULE_5__lib_core__[\"getComponent\"]('Name').findEntityByName(this.world, orbiter.name);\n      }\n\n      var pos = this.world.get('Position', entityId);\n      var oPos = this.world.get('Position', orbiter.entityId);\n\n      this.vOrbited.setValues(oPos.x, oPos.y);\n      this.vOrbiter.setValues(pos.x, pos.y);\n\n      var angleDelta = timeDelta * orbiter.radPerSec;\n      this.vOrbiter.rotateAround(this.vOrbited, angleDelta);\n\n      this.vOld.setValues(pos.x, pos.y);\n      pos.x = this.vOrbiter.x;\n      pos.y = this.vOrbiter.y;\n      if (orbiter.rotate) {\n        pos.rotation = this.vOld.angleTo(this.vOrbiter);\n      }\n    }\n  }]);\n\n  return OrbiterSystem;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"System\"]);\n__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerSystem\"]('Orbiter', OrbiterSystem);\n\n/***/ }),\n/* 74 */\n/*!************************************!*\\\n  !*** ./src/plugins/pathfinding.js ***!\n  \\************************************/\n/*! exports provided: Pathfinder, SpaceTree, PathfindingSystem */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Pathfinder\", function() { return Pathfinder; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SpaceTree\", function() { return SpaceTree; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PathfindingSystem\", function() { return PathfindingSystem; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(/*! babel-runtime/core-js/object/get-prototype-of */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__ = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__ = __webpack_require__(/*! babel-runtime/helpers/createClass */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(/*! babel-runtime/helpers/possibleConstructorReturn */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__ = __webpack_require__(/*! babel-runtime/helpers/inherits */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__lib_core__ = __webpack_require__(/*! ../lib/core */ 0);\n\n\n\n\n\n\n\nvar Pathfinder = function (_Core$Component) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(Pathfinder, _Core$Component);\n\n  function Pathfinder() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, Pathfinder);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (Pathfinder.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(Pathfinder)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(Pathfinder, null, [{\n    key: 'defaults',\n    value: function defaults() {\n      return {\n        width: 5000,\n        height: 5000\n      };\n    }\n  }]);\n\n  return Pathfinder;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"Component\"]);\n\n__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerComponent\"]('Pathfinder', Pathfinder);\n\nvar SpaceTree = function () {\n  function SpaceTree(quadtree, x, y, width, height, level) {\n    var _this2 = this;\n\n    var maxLevel = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 4;\n\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, SpaceTree);\n\n    var bounds = quadtree.bounds;\n\n    this.x = x || bounds.x;\n    this.y = y || bounds.y;\n    this.width = width || bounds.width;\n    this.height = height || bounds.height;\n    this.right = this.x + this.width;\n    this.bottom = this.y + this.height;\n    this.level = level || 0;\n    this.empty = true;\n    this.full = false;\n    this.children = [];\n\n    var ct = 0;\n\n    quadtree.iterate({\n      x: this.x, y: this.y, right: this.right, bottom: this.bottom\n    }, function (obj) {\n\n      var dx = Math.abs(obj.x - _this2.x) * 2;\n      var dy = Math.abs(obj.y - _this2.y) * 2;\n      var dwidth = obj.right - obj.x + _this2.width;\n      var dheight = obj.bottom - obj.y + _this2.height;\n\n      if (dx < dwidth && dy < dheight) {\n        ct++;\n        if (obj.x <= _this2.x && obj.y <= _this2.y && obj.right >= _this2.right && obj.bottom >= _this2.bottom) {\n          _this2.full = true;\n        }\n      }\n    });\n\n    if (ct === 0) {\n      this.empty = true;\n      return;\n    }\n\n    this.empty = false;\n    if (!this.full && this.level < maxLevel) {\n      this.split(quadtree);\n    }\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(SpaceTree, [{\n    key: 'split',\n    value: function split(quadtree) {\n      var splitWidth = this.width / 2;\n      var splitHeight = this.height / 2;\n\n      this.children[0] = new SpaceTree(quadtree, this.x, this.y, splitWidth, splitHeight, this.level + 1);\n\n      this.children[1] = new SpaceTree(quadtree, this.x + splitWidth, this.y, splitWidth, splitHeight, this.level + 1);\n\n      this.children[2] = new SpaceTree(quadtree, this.x, this.y + splitHeight, splitWidth, splitHeight, this.level + 1);\n\n      this.children[3] = new SpaceTree(quadtree, this.x + splitWidth, this.y + splitHeight, splitWidth, splitHeight, this.level + 1);\n    }\n  }]);\n\n  return SpaceTree;\n}();\n\nvar PathfindingSystem = function (_Core$System) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(PathfindingSystem, _Core$System);\n\n  function PathfindingSystem() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, PathfindingSystem);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (PathfindingSystem.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(PathfindingSystem)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(PathfindingSystem, [{\n    key: 'matchComponent',\n    value: function matchComponent() {\n      return 'Pathfinder';\n    }\n  }, {\n    key: 'initialize',\n    value: function initialize() {}\n  }, {\n    key: 'update',\n    value: function update() /*timeDelta*/{\n      /*\r\n      let collisionSystem = this.world.getSystem('Collision');\r\n      let quadtree = collisionSystem.quadtree;\r\n      */\n    }\n  }, {\n    key: 'draw',\n    value: function draw(timeDelta) {\n      if (!this.debug) {\n        return;\n      }\n\n      var vpSystem = this.world.getSystem('ViewportCanvas');\n\n      var ctx = vpSystem.ctx;\n      ctx.save();\n\n      vpSystem.centerAndZoom(timeDelta);\n      vpSystem.followEntity(timeDelta);\n\n      // draw\n\n      ctx.restore();\n    }\n  }]);\n\n  return PathfindingSystem;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"System\"]);\n\n__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerSystem\"]('Pathfinding', PathfindingSystem);\n\n/***/ }),\n/* 75 */\n/*!*********************************!*\\\n  !*** ./src/plugins/steering.js ***!\n  \\*********************************/\n/*! exports provided: Steering, SteeringSystem */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Steering\", function() { return Steering; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SteeringSystem\", function() { return SteeringSystem; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(/*! babel-runtime/core-js/object/get-prototype-of */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__ = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__ = __webpack_require__(/*! babel-runtime/helpers/createClass */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(/*! babel-runtime/helpers/possibleConstructorReturn */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__ = __webpack_require__(/*! babel-runtime/helpers/inherits */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__lib_core__ = __webpack_require__(/*! ../lib/core */ 0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__plugins_position__ = __webpack_require__(/*! ../plugins/position */ 7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__plugins_motion__ = __webpack_require__(/*! ../plugins/motion */ 8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__lib_Vector2D__ = __webpack_require__(/*! ../lib/Vector2D */ 17);\n\n\n\n\n\n\n\n\n\n\n\n\nvar PI2 = Math.PI * 2;\n\nvar Steering = function (_Core$Component) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(Steering, _Core$Component);\n\n  function Steering() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, Steering);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (Steering.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(Steering)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(Steering, null, [{\n    key: 'defaults',\n    value: function defaults() {\n      return {\n        sensorRange: 350,\n        obstacleRepel: [400, 2.1]\n      };\n    }\n  }]);\n\n  return Steering;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"Component\"]);\n\n__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerComponent\"]('Steering', Steering);\n\nvar SteeringSystem = function (_Core$System) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(SteeringSystem, _Core$System);\n\n  function SteeringSystem() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, SteeringSystem);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (SteeringSystem.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(SteeringSystem)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(SteeringSystem, [{\n    key: 'matchComponent',\n    value: function matchComponent() {\n      return 'Steering';\n    }\n  }, {\n    key: 'initialize',\n    value: function initialize() {\n\n      this.seekFactor = 1;\n\n      this.pushFactor = 7;\n\n      this.avoidFactor = 10;\n\n      this.avoidSeeAhead = 500;\n      this.avoidRayWidthFactor = 1.5;\n\n      this.vTarget = new __WEBPACK_IMPORTED_MODULE_8__lib_Vector2D__[\"a\" /* default */]();\n\n      this.vectors = {\n        avoid: new __WEBPACK_IMPORTED_MODULE_8__lib_Vector2D__[\"a\" /* default */](),\n        push: new __WEBPACK_IMPORTED_MODULE_8__lib_Vector2D__[\"a\" /* default */](),\n        seek: new __WEBPACK_IMPORTED_MODULE_8__lib_Vector2D__[\"a\" /* default */](),\n        flee: new __WEBPACK_IMPORTED_MODULE_8__lib_Vector2D__[\"a\" /* default */](),\n        wander: new __WEBPACK_IMPORTED_MODULE_8__lib_Vector2D__[\"a\" /* default */](),\n        evade: new __WEBPACK_IMPORTED_MODULE_8__lib_Vector2D__[\"a\" /* default */](),\n        pursue: new __WEBPACK_IMPORTED_MODULE_8__lib_Vector2D__[\"a\" /* default */]()\n      };\n    }\n  }, {\n    key: 'updateComponent',\n    value: function updateComponent(timeDelta, entityId, steering) {\n\n      this.vTarget.setValues(0, 0);\n\n      for (var key in this.vectors) {\n        this.vectors[key].setValues(0, 0);\n        this[key](this.vectors[key], timeDelta, entityId, steering);\n        this.vTarget.add(this.vectors[key]);\n      }\n\n      this.applySteering(timeDelta, entityId, steering);\n    }\n  }, {\n    key: 'avoid',\n    value: function avoid(vector, timeDelta, entityId, steering) {\n      var _this3 = this;\n\n      if (this.debug) {\n        steering.vectors = [];\n      }\n\n      var sprite = this.world.get('Sprite', entityId);\n      var position = this.world.get('Position', entityId);\n\n      var result = this.lookForObstacle(entityId, position, sprite, steering);\n      if (!result) {\n        return;\n      }\n\n      var range = steering.sensorRange;\n      this.world.getSystem('Collision').quadtree.iterate({\n        x: position.x - range / 2,\n        y: position.y - range / 2,\n        width: range,\n        height: range\n      }, function (item) {\n\n        if (entityId === item.entityId) {\n          return;\n        }\n\n        var targetPosition = _this3.world.get('Position', item.entityId);\n        if (!targetPosition) {\n          return;\n        }\n\n        var targetSprite = _this3.world.get('Sprite', item.entityId);\n\n        var A = 0;\n        var B = steering.obstacleRepel[0];\n        var n = 0;\n        var m = steering.obstacleRepel[1];\n\n        var dx = position.x - targetPosition.x;\n        var dy = position.y - targetPosition.y;\n        var edgeRange = sprite.size / 2 + targetSprite.size / 2;\n        var distance = Math.sqrt(dx * dx + dy * dy) - edgeRange;\n        if (distance <= 0) {\n          distance = 0.01;\n        }\n\n        if (distance > steering.sensorRange) {\n          return;\n        }\n\n        var U = -A / Math.pow(distance, n) + B / Math.pow(distance, m);\n\n        vector.x += dx * U;\n        vector.y += dy * U;\n\n        if (_this3.debug) {\n          steering.vectors.push([targetPosition.x, targetPosition.y, U]);\n        }\n      });\n    }\n  }, {\n    key: 'push',\n    value: function push() /*vector, timeDelta, entityId, steering*/{}\n  }, {\n    key: 'avoid_ray',\n    value: function avoid_ray(vector, timeDelta, entityId, steering) {\n\n      var sprite = this.world.get('Sprite', entityId);\n      var position = this.world.get('Position', entityId);\n\n      // Scan ahead for an obstacle, bail if none found.\n      var result = this.lookForObstacle(entityId, position, sprite, steering);\n      if (!result) {\n        return;\n      }\n\n      var obstacle = result[0];\n      var rayX = result[1];\n      var rayY = result[2];\n\n      // Opposite right triangle leg is distance from obstacle to avoid collision.\n      var oppositeLen = obstacle.sprite.size / 2 + sprite.size * this.avoidRayWidthFactor;\n\n      // Hypotenuse length is distance from obstacle.\n      var hypotenuseLen = Math.sqrt(Math.pow(obstacle.position.x - rayX, 2) + Math.pow(obstacle.position.y - rayY, 2));\n\n      // Adjacent length would be avoid tangent, but no need to calculate.\n\n      // Find angle from direct collision to avoidance\n      var theta = Math.asin(oppositeLen / hypotenuseLen);\n\n      // HACK: Too close, panic and steer hard away\n      if (isNaN(theta)) {\n        theta = Math.PI * 0.66;\n      }\n\n      // Find the absolute angle to the obstacle from entity.\n      var obstacleAngle = Math.atan2(obstacle.position.y - rayY, obstacle.position.x - rayX);\n\n      // Calculate nearest target angle for avoidance...\n      // Try turning clockwise from obstacle.\n      var avoidAngle = obstacleAngle + theta;\n      // Calculate the 'travel' needed from current rotation.\n      var travel = Math.min(PI2 - Math.abs(position.rotation - avoidAngle), Math.abs(position.rotation - avoidAngle));\n      if (travel > theta) {\n        // Clockwise travel exceeds theta, so counterclockwise is shorter.\n        avoidAngle = obstacleAngle - theta;\n      }\n\n      // Set up the avoidance vector.\n      vector.setValues(this.avoidFactor, 0);\n      vector.rotate(avoidAngle);\n    }\n  }, {\n    key: 'lookForObstacle',\n    value: function lookForObstacle(entityId, position, sprite, steering) {\n      var rayWidth = sprite.size * this.avoidRayWidthFactor;\n\n      var vRayUnit = new __WEBPACK_IMPORTED_MODULE_8__lib_Vector2D__[\"a\" /* default */]();\n      vRayUnit.setValues(rayWidth, 0);\n      vRayUnit.rotate(position.rotation);\n\n      if (this.debug) {\n        steering.hitCircles = [];\n      }\n\n      var obstacle = void 0,\n          rayX = void 0,\n          rayY = void 0;\n      var steps = this.avoidSeeAhead / rayWidth;\n      for (var step = 0; step < steps; step++) {\n        rayX = position.x + vRayUnit.x * step;\n        rayY = position.y + vRayUnit.y * step;\n        obstacle = this.searchCircleForObstacle(steering, entityId, rayX, rayY, rayWidth);\n        if (obstacle) {\n          return [obstacle, rayX, rayY];\n        }\n      }\n\n      return null;\n    }\n  }, {\n    key: 'searchCircleForObstacle',\n    value: function searchCircleForObstacle(steering, entityId, x, y, size) {\n\n      if (this.debug) {\n        steering.hitCircles.push([x, y, size]);\n      }\n\n      var hits = [];\n\n      this.world.getSystem('Collision').quadtree.iterate({\n        x: x - size / 2,\n        y: y - size / 2,\n        width: size,\n        height: size\n      }, function (item) {\n\n        if (entityId === item.entityId) {\n          return;\n        }\n        var dx = item.position.x - x;\n        var dy = item.position.y - y;\n        var range = dx * dx + dy * dy;\n        var radii = (size + item.sprite.size) / 2;\n        if (range < radii * radii) {\n          hits.push([range, item]);\n        }\n      });\n\n      hits.sort(function (a, b) {\n        return b[0] - a[0];\n      });\n      return hits.length ? hits[0][1] : null;\n    }\n  }, {\n    key: 'seek',\n    value: function seek(vector, timeDelta, entityId, steering) {\n\n      // Look up the entity ID to seek, if only name given.\n      if (steering.seekTargetName && !steering.seekTargetEntityId) {\n        steering.seekTargetEntityId = __WEBPACK_IMPORTED_MODULE_5__lib_core__[\"getComponent\"]('Name').findEntityByName(this.world, steering.seekTargetName);\n      }\n\n      if (!steering.seekTargetEntityId) {\n        return;\n      }\n\n      var position = this.world.get('Position', entityId);\n      if (!position) {\n        return;\n      }\n\n      // Accept either a raw x/y coord or entity ID as target\n      var targetPosition = steering.targetPosition;\n      if (!targetPosition) {\n        targetPosition = this.world.get('Position', steering.seekTargetEntityId);\n      }\n      if (!targetPosition) {\n        return;\n      }\n\n      vector.setValues(targetPosition.x - position.x, targetPosition.y - position.y);\n      vector.normalize();\n      vector.multiplyScalar(this.seekFactor);\n    }\n  }, {\n    key: 'flee',\n    value: function flee() /*vector, timeDelta, entityId, steering*/{}\n  }, {\n    key: 'wander',\n    value: function wander() /*vector, timeDelta, entityId, steering*/{}\n  }, {\n    key: 'evade',\n    value: function evade() /*vector, timeDelta, entityId, steering*/{}\n  }, {\n    key: 'pursue',\n    value: function pursue() /*vector, timeDelta, entityId, steering*/{}\n  }, {\n    key: 'applySteering',\n    value: function applySteering(timeDelta, entityId, steering) {\n\n      var motion = this.world.get('Motion', entityId);\n\n      var targetDr = 0;\n\n      if (!this.vTarget.isZero()) {\n        var position = this.world.get('Position', entityId);\n\n        // Get the target angle, ensuring a 0..2*Math.PI range.\n        var targetAngle = this.vTarget.angle();\n        if (targetAngle < 0) {\n          targetAngle += 2 * Math.PI;\n        }\n\n        if (this.debug) {\n          steering.targetAngle = targetAngle;\n        }\n\n        // Pick the direction from current to target angle\n        var direction = targetAngle < position.rotation ? -1 : 1;\n\n        // If the offset between the angles is more than half a circle, it's\n        // shorter to go the other way.\n        var offset = Math.abs(targetAngle - position.rotation);\n        if (offset > Math.PI) {\n          direction = 0 - direction;\n        }\n\n        // Work out the desired delta-rotation to steer toward target\n        targetDr = direction * Math.min(steering.radPerSec, offset / timeDelta);\n      }\n\n      // Calculate the delta-rotation impulse required to meet the goal,\n      // but constrain to the capability of the steering thrusters\n      var impulseDr = targetDr - motion.drotation;\n      if (Math.abs(impulseDr) > steering.radPerSec) {\n        if (impulseDr > 0) {\n          impulseDr = steering.radPerSec;\n        } else if (impulseDr < 0) {\n          impulseDr = 0 - steering.radPerSec;\n        }\n      }\n\n      motion.drotation += impulseDr;\n    }\n  }, {\n    key: 'draw',\n    value: function draw() /*timeDelta*/{\n      if (!this.debug) {\n        return;\n      }\n\n      /*\r\n      const vpSystem = this.world.getSystem('CanvasViewport');\r\n      const ctx = vpSystem.ctx;\r\n      ctx.save();\r\n        vpSystem.centerAndZoom(timeDelta);\r\n      vpSystem.followEntity(timeDelta);\r\n        const matches = this.getMatchingComponents();\r\n      for (const entityId in matches) {\r\n        ctx.save();\r\n          const steering = matches[entityId];\r\n        const position = this.world.get('Position', entityId);\r\n        const sprite = this.world.get('Sprite', entityId);\r\n          this.drawSteeringVsPosition(ctx, steering, position);\r\n          if (steering.hitCircles) {\r\n          for (const [x, y, size] of steering.hitCircles) {\r\n            ctx.strokeStyle = '#d00';\r\n            ctx.beginPath();\r\n            ctx.arc(x, y, size, 0, PI2, false);\r\n            ctx.stroke();\r\n          }\r\n        }\r\n          if (steering.sensorRange) {\r\n            ctx.strokeStyle = 'rgba(0, 64, 64, 0.75)';\r\n            ctx.beginPath();\r\n            ctx.arc(position.x, position.y, steering.sensorRange, 0, PI2, false);\r\n            ctx.stroke();\r\n        }\r\n          if (steering.vectors) {\r\n          for (const [x, y, U] of steering.vectors) {\r\n            ctx.strokeStyle = 'rgba(0, 64, 64, 0.75)';\r\n            ctx.beginPath();\r\n            ctx.moveTo(position.x, position.y);\r\n            ctx.lineWidth = Math.max(1, Math.min(U, sprite.width));\r\n            ctx.lineTo(x, y);\r\n            ctx.stroke();\r\n          }\r\n        }\r\n          if (steering.pushing) {\r\n          this.drawAngle(ctx, position, position.rotation, '#d0d');\r\n        }\r\n          ctx.restore();\r\n      }\r\n        ctx.restore();\r\n      */\n    }\n  }, {\n    key: 'drawSteeringVsPosition',\n    value: function drawSteeringVsPosition(ctx, steering, position) {\n      this.drawAngle(ctx, position, position.rotation, '#ddd');\n      if (steering.targetAngle) {\n        this.drawAngle(ctx, position, steering.targetAngle, '#dd0');\n      }\n    }\n  }, {\n    key: 'drawAngle',\n    value: function drawAngle(ctx, position, angle, color) {\n      var vec = new __WEBPACK_IMPORTED_MODULE_8__lib_Vector2D__[\"a\" /* default */]();\n      vec.setValues(this.avoidSeeAhead, 0);\n      vec.rotate(angle);\n      ctx.strokeStyle = color;\n      ctx.beginPath();\n      ctx.moveTo(position.x, position.y);\n      ctx.lineTo(position.x + vec.x, position.y + vec.y);\n      ctx.stroke();\n    }\n  }]);\n\n  return SteeringSystem;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"System\"]);\n\n__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerSystem\"]('Steering', SteeringSystem);\n\n/***/ }),\n/* 76 */\n/*!***************************************!*\\\n  !*** ./src/plugins/viewportCanvas.js ***!\n  \\***************************************/\n/*! exports provided: CanvasSprite, ViewportCanvas, registerSprite, getSprite */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CanvasSprite\", function() { return CanvasSprite; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ViewportCanvas\", function() { return ViewportCanvas; });\n/* harmony export (immutable) */ __webpack_exports__[\"registerSprite\"] = registerSprite;\n/* harmony export (immutable) */ __webpack_exports__[\"getSprite\"] = getSprite;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(/*! babel-runtime/helpers/extends */ 60);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign__ = __webpack_require__(/*! babel-runtime/core-js/object/assign */ 40);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(/*! babel-runtime/core-js/object/get-prototype-of */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck__ = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass__ = __webpack_require__(/*! babel-runtime/helpers/createClass */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(/*! babel-runtime/helpers/possibleConstructorReturn */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_get__ = __webpack_require__(/*! babel-runtime/helpers/get */ 25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_get___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_get__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_inherits__ = __webpack_require__(/*! babel-runtime/helpers/inherits */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__lib_core__ = __webpack_require__(/*! ../lib/core */ 0);\n\n\n\n\n\n\n\n\n\n\nvar CanvasSprite = function (_Core$Component) {\n  __WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_inherits___default()(CanvasSprite, _Core$Component);\n\n  function CanvasSprite() {\n    __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck___default()(this, CanvasSprite);\n\n    return __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn___default()(this, (CanvasSprite.__proto__ || __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of___default()(CanvasSprite)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass___default()(CanvasSprite, null, [{\n    key: 'defaults',\n    value: function defaults() {\n      return {\n        name: null,\n        color: '#fff',\n        size: 100,\n        width: null,\n        height: null\n      };\n    }\n  }, {\n    key: 'create',\n    value: function create(attrs) {\n      var c = __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_get___default()(CanvasSprite.__proto__ || __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of___default()(CanvasSprite), 'create', this).call(this, attrs);\n      if (!c.width) {\n        c.width = c.size;\n      }\n      if (!c.height) {\n        c.height = c.size;\n      }\n      return c;\n    }\n  }]);\n\n  return CanvasSprite;\n}(__WEBPACK_IMPORTED_MODULE_8__lib_core__[\"Component\"]);\n__WEBPACK_IMPORTED_MODULE_8__lib_core__[\"registerComponent\"]('Sprite', CanvasSprite);\n\n// See also: http://phrogz.net/JS/wheeldelta.html\nvar wheelDistance = function wheelDistance(evt) {\n  if (!evt) evt = event;\n  var w = evt.wheelDelta,\n      d = evt.detail;\n  if (d) {\n    if (w) return w / d / 40 * d > 0 ? 1 : -1; // Opera\n    else return -d / 3; // Firefox;         TODO: do not /3 for OS X\n  } else return w / 120; // IE/Safari/Chrome TODO: /3 for Chrome OS X\n};\n\nvar ViewportCanvas = function (_Core$System) {\n  __WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_inherits___default()(ViewportCanvas, _Core$System);\n\n  function ViewportCanvas() {\n    __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck___default()(this, ViewportCanvas);\n\n    return __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn___default()(this, (ViewportCanvas.__proto__ || __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of___default()(ViewportCanvas)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass___default()(ViewportCanvas, [{\n    key: 'defaultOptions',\n    value: function defaultOptions() {\n      return {\n        lineWidth: 1.5,\n        zoom: 1.0,\n        zoomMin: 0.1,\n        zoomMax: 10.0,\n        zoomWheelFactor: 0.025,\n        gridEnabled: true,\n        gridSize: 500,\n        gridColor: '#111',\n        followEnabled: true,\n        followName: null,\n        followEntityId: null\n      };\n    }\n  }, {\n    key: 'initialize',\n    value: function initialize() {\n      var _this3 = this;\n\n      this.container = document.querySelector(this.options.container);\n      this.canvas = document.createElement('canvas');\n      this.container.appendChild(this.canvas);\n\n      this.ctx = this.canvas.getContext('2d');\n\n      var events = {\n        'resize': function resize(ev) {\n          _this3.updateMetrics(ev);\n        },\n        'orientationchange': function orientationchange(ev) {\n          _this3.updateMetrics(ev);\n        },\n        'mousedown': function mousedown(ev) {\n          _this3.onMouseDown(ev);\n        },\n        'mousemove': function mousemove(ev) {\n          _this3.onMouseMove(ev);\n        },\n        'mouseup': function mouseup(ev) {\n          _this3.onMouseUp(ev);\n        }\n        //'wheel': (ev) => { this.onMouseWheel(ev); }\n      };\n\n      for (var name in events) {\n        this.canvas.addEventListener(name, events[name], false);\n      }\n\n      // See also: http://phrogz.net/JS/wheeldelta.html\n      var boundOnMouseWheel = function boundOnMouseWheel(ev) {\n        return _this3.onMouseWheel(ev);\n      };\n      if (window.addEventListener) {\n        window.addEventListener('mousewheel', boundOnMouseWheel, false); // Chrome/Safari/Opera\n        window.addEventListener('DOMMouseScroll', boundOnMouseWheel, false); // Firefox\n      } else if (window.attachEvent) {\n        window.attachEvent('onmousewheel', boundOnMouseWheel); // IE\n      }\n\n      this.followEnabled = this.options.followEnabled;\n      this.zoom = this.options.zoom;\n      this.followEntityId = this.options.followEntityId;\n      this.gridEnabled = this.options.gridEnabled;\n      this.lineWidth = this.options.lineWidth;\n\n      this.cursorRawX = 0;\n      this.cursorRawY = 0;\n\n      this.cursorChanged = false;\n      this.cursorPosition = { x: 0, y: 0 };\n\n      this.cameraX = 0;\n      this.cameraY = 0;\n\n      this.debugDummySprite = { size: 100 };\n    }\n  }, {\n    key: 'draw',\n    value: function draw(timeDelta) {\n      this.updateMetrics();\n      this.ctx.save();\n\n      this.clear();\n      this.centerAndZoom(timeDelta);\n      this.followEntity(timeDelta);\n\n      if (this.gridEnabled) {\n        this.drawBackdrop(timeDelta);\n      }\n\n      this.drawScene(timeDelta);\n\n      if (this.world.debug) {\n        this.drawDebugCursor();\n      }\n\n      this.ctx.restore();\n    }\n  }, {\n    key: 'onMouseWheel',\n    value: function onMouseWheel(ev) {\n      this.zoom += wheelDistance(ev) * this.options.zoomWheelFactor;\n      if (this.zoom < this.options.zoomMin) {\n        this.zoom = this.options.zoomMin;\n      }\n      if (this.zoom > this.options.zoomMax) {\n        this.zoom = this.options.zoomMax;\n      }\n    }\n\n    // TODO: Use a symbol for 'mouse{Down,Move,Up}' message?\n\n  }, {\n    key: 'onMouseDown',\n    value: function onMouseDown(ev) {\n      this.setCursor(ev.clientX, ev.clientY);\n      this.world.publish('mouseDown', this.cursorPosition);\n    }\n  }, {\n    key: 'onMouseMove',\n    value: function onMouseMove(ev) {\n      this.setCursor(ev.clientX, ev.clientY);\n    }\n  }, {\n    key: 'onMouseUp',\n    value: function onMouseUp(ev) {\n      this.setCursor(ev.clientX, ev.clientY);\n      this.world.publish('mouseUp', this.cursorPosition);\n    }\n  }, {\n    key: 'update',\n    value: function update() /* timeDelta */{\n      // Use the cursorChanged flag set by setCursor to limit mouseMove messages\n      // to one per game loop tick\n      if (this.cursorChanged) {\n        this.cursorChanged = false;\n        this.world.publish('mouseMove', this.cursorPosition);\n      }\n    }\n  }, {\n    key: 'setCursor',\n    value: function setCursor(x, y) {\n      var width = this.container.offsetWidth;\n      var height = this.container.offsetHeight;\n\n      this.cursorRawX = x;\n      this.cursorRawY = y;\n\n      var newX = (x - width / 2) / this.zoom + this.cameraX;\n      var newY = (y - height / 2) / this.zoom + this.cameraY;\n\n      if (newX !== this.cursorPosition.x || newY !== this.cursorPosition.y) {\n        this.cursorChanged = true;\n        this.cursorPosition.x = newX;\n        this.cursorPosition.y = newY;\n      }\n    }\n  }, {\n    key: 'updateMetrics',\n    value: function updateMetrics() {\n      var width = this.container.offsetWidth;\n      var height = this.container.offsetHeight;\n\n      this.canvas.width = width;\n      this.canvas.height = height;\n\n      this.visibleWidth = width / this.zoom;\n      this.visibleHeight = height / this.zoom;\n\n      this.visibleLeft = 0 - this.visibleWidth / 2 + this.cameraX;\n      this.visibleTop = 0 - this.visibleHeight / 2 + this.cameraY;\n      this.visibleRight = this.visibleLeft + this.visibleWidth;\n      this.visibleBottom = this.visibleTop + this.visibleHeight;\n    }\n  }, {\n    key: 'clear',\n    value: function clear() {\n      this.ctx.fillStyle = 'rgba(0, 0, 0, 1.0)';\n      this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n    }\n  }, {\n    key: 'centerAndZoom',\n    value: function centerAndZoom() {\n      this.ctx.translate(this.canvas.width / 2, this.canvas.height / 2);\n      this.ctx.scale(this.zoom, this.zoom);\n    }\n  }, {\n    key: 'followEntity',\n    value: function followEntity() {\n      if (!this.followEnabled) {\n        this.cameraX = this.cameraY = 0;\n        return;\n      }\n      if (this.options.followName && !this.followEntityId) {\n        // Look up named entity, if necessary.\n        this.followEntityId = __WEBPACK_IMPORTED_MODULE_8__lib_core__[\"getComponent\"]('Name').findEntityByName(this.world, this.options.followName);\n      }\n      if (this.followEntityId) {\n        // Adjust the viewport center offset to the entity position\n        var position = this.world.get('Position', this.followEntityId);\n        if (position) {\n          this.cameraX = position.x;\n          this.cameraY = position.y;\n          this.setCursor(this.cursorRawX, this.cursorRawY);\n          this.ctx.translate(0 - this.cameraX, 0 - this.cameraY);\n        }\n      }\n    }\n  }, {\n    key: 'drawDebugCursor',\n    value: function drawDebugCursor() {\n      var ctx = this.ctx;\n      ctx.save();\n      ctx.strokeStyle = '#f0f';\n      ctx.lineWidth = this.lineWidth / this.zoom;\n      ctx.translate(this.cursorPosition.x, this.cursorPosition.y);\n      ctx.beginPath();\n      ctx.moveTo(-20, 0);\n      ctx.lineTo(20, 0);\n      ctx.moveTo(0, -20);\n      ctx.lineTo(0, 20);\n      ctx.strokeRect(-10, -10, 20, 20);\n      ctx.stroke();\n      ctx.restore();\n    }\n  }, {\n    key: 'drawBackdrop',\n    value: function drawBackdrop() {\n      var gridSize = this.options.gridSize;\n      var gridOffsetX = this.visibleLeft % gridSize;\n      var gridOffsetY = this.visibleTop % gridSize;\n\n      var ctx = this.ctx;\n\n      ctx.save();\n      ctx.beginPath();\n\n      ctx.strokeStyle = this.options.gridColor;\n      ctx.lineWidth = this.lineWidth / this.zoom;\n\n      for (var x = this.visibleLeft - gridOffsetX; x < this.visibleRight; x += gridSize) {\n        ctx.moveTo(x, this.visibleTop);\n        ctx.lineTo(x, this.visibleBottom);\n      }\n\n      for (var y = this.visibleTop - gridOffsetY; y < this.visibleBottom; y += gridSize) {\n        ctx.moveTo(this.visibleLeft, y);\n        ctx.lineTo(this.visibleRight, y);\n      }\n\n      ctx.stroke();\n      ctx.restore();\n    }\n  }, {\n    key: 'drawScene',\n    value: function drawScene(timeDelta) {\n      var positions = this.world.get('Position');\n      for (var entityId in positions) {\n        this.drawSprite(timeDelta, entityId, positions[entityId]);\n      }\n    }\n  }, {\n    key: 'drawSprite',\n    value: function drawSprite(timeDelta, entityId, position) {\n\n      var sprite = this.world.get('Sprite', entityId);\n      if (!sprite) {\n        sprite = CanvasSprite.defaults();\n      }\n\n      var spriteFn = getSprite(sprite.name);\n      if (!spriteFn) {\n        spriteFn = getSprite('default');\n      }\n\n      var ctx = this.ctx;\n\n      ctx.save();\n\n      ctx.translate(position.x, position.y);\n\n      ctx.rotate(position.rotation + Math.PI / 2);\n      ctx.scale(sprite.size / 100, sprite.size / 100);\n\n      // HACK: Try to keep line width consistent regardless of zoom, to sort of\n      // simulate a vector display\n      ctx.lineWidth = this.lineWidth / this.zoom / (sprite.size / 100);\n\n      ctx.strokeStyle = sprite.color;\n      spriteFn(ctx, timeDelta, sprite, entityId);\n\n      ctx.restore();\n    }\n  }]);\n\n  return ViewportCanvas;\n}(__WEBPACK_IMPORTED_MODULE_8__lib_core__[\"System\"]);\n\n__WEBPACK_IMPORTED_MODULE_8__lib_core__[\"registerSystem\"]('ViewportCanvas', ViewportCanvas);\n\nvar spriteRegistry = {};\nfunction registerSprite(name, sprite) {\n  spriteRegistry[name] = sprite;\n}\nfunction getSprite(name) {\n  return spriteRegistry[name];\n}\n\nvar PI2 = Math.PI * 2;\n\nregisterSprite('default', function (ctx /*, timeDelta, sprite, entityId*/) {\n  ctx.beginPath();\n  ctx.arc(0, 0, 50, 0, PI2, true);\n  ctx.moveTo(0, 0);\n  ctx.lineTo(0, -50);\n  ctx.moveTo(0, 0);\n  ctx.stroke();\n});\n\nregisterSprite('sun', function (ctx /*, timeDelta, sprite, entityId*/) {\n  ctx.beginPath();\n  ctx.arc(0, 0, 50, 0, PI2, true);\n  ctx.stroke();\n});\n\nregisterSprite('enemyscout', function (ctx /*, timeDelta, sprite, entityId*/) {\n  ctx.beginPath();\n  ctx.moveTo(0, -50);\n  ctx.lineTo(-45, 50);\n  ctx.lineTo(-12.5, 12.5);\n  ctx.lineTo(0, 25);\n  ctx.lineTo(12.5, 12.5);\n  ctx.lineTo(45, 50);\n  ctx.lineTo(0, -50);\n  ctx.moveTo(0, -50);\n  ctx.stroke();\n});\n\nregisterSprite('hero', function (ctx /*, timeDelta, sprite, entityId*/) {\n  ctx.rotate(Math.PI);\n  ctx.beginPath();\n  ctx.moveTo(-12.5, -50);\n  ctx.lineTo(-25, -50);\n  ctx.lineTo(-50, 0);\n  ctx.arc(0, 0, 50, Math.PI, 0, true);\n  ctx.lineTo(25, -50);\n  ctx.lineTo(12.5, -50);\n  ctx.lineTo(25, 0);\n  ctx.arc(0, 0, 25, 0, Math.PI, true);\n  ctx.lineTo(-12.5, -50);\n  ctx.stroke();\n});\n\nregisterSprite('asteroid', function (ctx, timeDelta, sprite /*, entityId*/) {\n  var idx = void 0;\n\n  if (!sprite.points) {\n    var NUM_POINTS = 7 + Math.floor(8 * Math.random());\n    var MAX_RADIUS = 50;\n    var MIN_RADIUS = 35;\n    var ROTATION = PI2 / NUM_POINTS;\n\n    sprite.points = [];\n    for (idx = 0; idx < NUM_POINTS; idx++) {\n      var rot = idx * ROTATION;\n      var dist = Math.random() * (MAX_RADIUS - MIN_RADIUS) + MIN_RADIUS;\n      sprite.points.push([dist * Math.cos(rot), dist * Math.sin(rot)]);\n    }\n  }\n\n  ctx.beginPath();\n  ctx.moveTo(sprite.points[0][0], sprite.points[0][1]);\n  for (idx = 0; idx < sprite.points.length; idx++) {\n    ctx.lineTo(sprite.points[idx][0], sprite.points[idx][1]);\n  }\n  ctx.lineTo(sprite.points[0][0], sprite.points[0][1]);\n  ctx.stroke();\n});\n\nregisterSprite('explosion', function (ctx, timeDelta, sprite /*, entityId*/) {\n  var p = void 0,\n      idx = void 0;\n\n  if (!sprite.initialized) {\n\n    sprite.initialized = true;\n\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default()(sprite, __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({\n      ttl: 2.0,\n      radius: 100,\n      maxParticles: 25,\n      maxParticleSize: 4,\n      maxVelocity: 300,\n      color: '#f00',\n      age: 0,\n      stop: false\n    }, sprite));\n\n    sprite.particles = [];\n\n    for (idx = 0; idx < sprite.maxParticles; idx++) {\n      sprite.particles.push({ free: true });\n    }\n  }\n\n  for (idx = 0; idx < sprite.particles.length; idx++) {\n    p = sprite.particles[idx];\n\n    if (!sprite.stop && p.free) {\n\n      p.velocity = sprite.maxVelocity * Math.random();\n      p.angle = Math.PI * 2 * Math.random();\n      p.dx = 0 - p.velocity * Math.sin(p.angle);\n      p.dy = p.velocity * Math.cos(p.angle);\n      p.distance = p.x = p.y = 0;\n      p.maxDistance = sprite.radius * Math.random();\n      p.size = sprite.maxParticleSize;\n      p.free = false;\n    } else if (!p.free) {\n\n      p.x += p.dx * timeDelta;\n      p.y += p.dy * timeDelta;\n\n      p.distance += p.velocity * timeDelta;\n      if (p.distance >= p.maxDistance) {\n        p.distance = p.maxDistance;\n        p.free = true;\n      }\n    }\n  }\n\n  sprite.age += timeDelta;\n\n  if (sprite.age >= sprite.ttl) {\n    sprite.stop = true;\n  }\n\n  var alpha = Math.max(0, 1 - sprite.age / sprite.ttl);\n\n  ctx.save();\n  ctx.strokeStyle = sprite.color;\n  ctx.fillStyle = sprite.color;\n\n  for (idx = 0; idx < sprite.particles.length; idx++) {\n    p = sprite.particles[idx];\n    if (p.free) {\n      continue;\n    }\n\n    ctx.globalAlpha = (1 - p.distance / p.maxDistance) * alpha;\n\n    ctx.beginPath();\n    ctx.moveTo(0, 0);\n    ctx.lineWidth = p.size;\n    ctx.lineTo(p.x, p.y);\n    ctx.stroke();\n  }\n\n  ctx.restore();\n});\n\n/***/ }),\n/* 77 */\n/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\\\n  !*** multi ./src/lib/core.js ./src/plugins/bounce.js ./src/plugins/collision.js ./src/plugins/datGui.js ./src/plugins/drawStats.js ./src/plugins/expiration.js ./src/plugins/health.js ./src/plugins/hordeSpawn.js ./src/plugins/memoryStats.js ./src/plugins/motion.js ./src/plugins/name.js ./src/plugins/orbiter.js ./src/plugins/pathfinding.js ./src/plugins/playerInputSteering.js ./src/plugins/position.js ./src/plugins/repulsor.js ./src/plugins/seeker.js ./src/plugins/spawn.js ./src/plugins/steering.js ./src/plugins/thruster.js ./src/plugins/viewportCanvas.js ./src/plugins/viewportPixi.js ./src/plugins/viewportWebGL.js ***!\n  \\***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(/*! ./src/lib/core.js */0);\n__webpack_require__(/*! ./src/plugins/bounce.js */35);\n__webpack_require__(/*! ./src/plugins/collision.js */37);\n__webpack_require__(/*! ./src/plugins/datGui.js */18);\n__webpack_require__(/*! ./src/plugins/drawStats.js */19);\n__webpack_require__(/*! ./src/plugins/expiration.js */72);\n__webpack_require__(/*! ./src/plugins/health.js */26);\n__webpack_require__(/*! ./src/plugins/hordeSpawn.js */58);\n__webpack_require__(/*! ./src/plugins/memoryStats.js */20);\n__webpack_require__(/*! ./src/plugins/motion.js */8);\n__webpack_require__(/*! ./src/plugins/name.js */21);\n__webpack_require__(/*! ./src/plugins/orbiter.js */73);\n__webpack_require__(/*! ./src/plugins/pathfinding.js */74);\n__webpack_require__(/*! ./src/plugins/playerInputSteering.js */39);\n__webpack_require__(/*! ./src/plugins/position.js */7);\n__webpack_require__(/*! ./src/plugins/repulsor.js */59);\n__webpack_require__(/*! ./src/plugins/seeker.js */28);\n__webpack_require__(/*! ./src/plugins/spawn.js */27);\n__webpack_require__(/*! ./src/plugins/steering.js */75);\n__webpack_require__(/*! ./src/plugins/thruster.js */29);\n__webpack_require__(/*! ./src/plugins/viewportCanvas.js */76);\n__webpack_require__(/*! ./src/plugins/viewportPixi.js */128);\nmodule.exports = __webpack_require__(/*! ./src/plugins/viewportWebGL.js */30);\n\n\n/***/ }),\n/* 78 */\n/*!**********************************************************!*\\\n  !*** ./node_modules/core-js/library/fn/object/assign.js ***!\n  \\**********************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(/*! ../../modules/es6.object.assign */ 79);\nmodule.exports = __webpack_require__(/*! ../../modules/_core */ 6).Object.assign;\n\n\n/***/ }),\n/* 79 */\n/*!*******************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/es6.object.assign.js ***!\n  \\*******************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.3.1 Object.assign(target, source)\nvar $export = __webpack_require__(/*! ./_export */ 10);\n\n$export($export.S + $export.F, 'Object', { assign: __webpack_require__(/*! ./_object-assign */ 81) });\n\n\n/***/ }),\n/* 80 */\n/*!*************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_a-function.js ***!\n  \\*************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports) {\n\nmodule.exports = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n\n\n/***/ }),\n/* 81 */\n/*!****************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_object-assign.js ***!\n  \\****************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n// 19.1.2.1 Object.assign(target, source, ...)\nvar getKeys = __webpack_require__(/*! ./_object-keys */ 15);\nvar gOPS = __webpack_require__(/*! ./_object-gops */ 50);\nvar pIE = __webpack_require__(/*! ./_object-pie */ 33);\nvar toObject = __webpack_require__(/*! ./_to-object */ 34);\nvar IObject = __webpack_require__(/*! ./_iobject */ 64);\nvar $assign = Object.assign;\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = !$assign || __webpack_require__(/*! ./_fails */ 24)(function () {\n  var A = {};\n  var B = {};\n  // eslint-disable-next-line no-undef\n  var S = Symbol();\n  var K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function (k) { B[k] = k; });\n  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;\n}) ? function assign(target, source) { // eslint-disable-line no-unused-vars\n  var T = toObject(target);\n  var aLen = arguments.length;\n  var index = 1;\n  var getSymbols = gOPS.f;\n  var isEnum = pIE.f;\n  while (aLen > index) {\n    var S = IObject(arguments[index++]);\n    var keys = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S);\n    var length = keys.length;\n    var j = 0;\n    var key;\n    while (length > j) if (isEnum.call(S, key = keys[j++])) T[key] = S[key];\n  } return T;\n} : $assign;\n\n\n/***/ }),\n/* 82 */\n/*!*****************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_array-includes.js ***!\n  \\*****************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = __webpack_require__(/*! ./_to-iobject */ 11);\nvar toLength = __webpack_require__(/*! ./_to-length */ 65);\nvar toAbsoluteIndex = __webpack_require__(/*! ./_to-absolute-index */ 83);\nmodule.exports = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) if (IS_INCLUDES || index in O) {\n      if (O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\n\n/***/ }),\n/* 83 */\n/*!********************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_to-absolute-index.js ***!\n  \\********************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar toInteger = __webpack_require__(/*! ./_to-integer */ 46);\nvar max = Math.max;\nvar min = Math.min;\nmodule.exports = function (index, length) {\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n\n\n/***/ }),\n/* 84 */\n/*!**********************************************************************!*\\\n  !*** ./node_modules/babel-runtime/core-js/object/define-property.js ***!\n  \\**********************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(/*! core-js/library/fn/object/define-property */ 85), __esModule: true };\n\n/***/ }),\n/* 85 */\n/*!*******************************************************************!*\\\n  !*** ./node_modules/core-js/library/fn/object/define-property.js ***!\n  \\*******************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(/*! ../../modules/es6.object.define-property */ 86);\nvar $Object = __webpack_require__(/*! ../../modules/_core */ 6).Object;\nmodule.exports = function defineProperty(it, key, desc) {\n  return $Object.defineProperty(it, key, desc);\n};\n\n\n/***/ }),\n/* 86 */\n/*!****************************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/es6.object.define-property.js ***!\n  \\****************************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar $export = __webpack_require__(/*! ./_export */ 10);\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n$export($export.S + $export.F * !__webpack_require__(/*! ./_descriptors */ 14), 'Object', { defineProperty: __webpack_require__(/*! ./_object-dp */ 13).f });\n\n\n/***/ }),\n/* 87 */\n/*!********************************************************************!*\\\n  !*** ./node_modules/core-js/library/fn/object/get-prototype-of.js ***!\n  \\********************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(/*! ../../modules/es6.object.get-prototype-of */ 88);\nmodule.exports = __webpack_require__(/*! ../../modules/_core */ 6).Object.getPrototypeOf;\n\n\n/***/ }),\n/* 88 */\n/*!*****************************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/es6.object.get-prototype-of.js ***!\n  \\*****************************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.2.9 Object.getPrototypeOf(O)\nvar toObject = __webpack_require__(/*! ./_to-object */ 34);\nvar $getPrototypeOf = __webpack_require__(/*! ./_object-gpo */ 66);\n\n__webpack_require__(/*! ./_object-sap */ 51)('getPrototypeOf', function () {\n  return function getPrototypeOf(it) {\n    return $getPrototypeOf(toObject(it));\n  };\n});\n\n\n/***/ }),\n/* 89 */\n/*!***************************************************************!*\\\n  !*** ./node_modules/babel-runtime/core-js/symbol/iterator.js ***!\n  \\***************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(/*! core-js/library/fn/symbol/iterator */ 90), __esModule: true };\n\n/***/ }),\n/* 90 */\n/*!************************************************************!*\\\n  !*** ./node_modules/core-js/library/fn/symbol/iterator.js ***!\n  \\************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(/*! ../../modules/es6.string.iterator */ 68);\n__webpack_require__(/*! ../../modules/web.dom.iterable */ 95);\nmodule.exports = __webpack_require__(/*! ../../modules/_wks-ext */ 55).f('iterator');\n\n\n/***/ }),\n/* 91 */\n/*!************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_string-at.js ***!\n  \\************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar toInteger = __webpack_require__(/*! ./_to-integer */ 46);\nvar defined = __webpack_require__(/*! ./_defined */ 45);\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function (TO_STRING) {\n  return function (that, pos) {\n    var s = String(defined(that));\n    var i = toInteger(pos);\n    var l = s.length;\n    var a, b;\n    if (i < 0 || i >= l) return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};\n\n\n/***/ }),\n/* 92 */\n/*!**************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_iter-create.js ***!\n  \\**************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar create = __webpack_require__(/*! ./_object-create */ 53);\nvar descriptor = __webpack_require__(/*! ./_property-desc */ 32);\nvar setToStringTag = __webpack_require__(/*! ./_set-to-string-tag */ 54);\nvar IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\n__webpack_require__(/*! ./_hide */ 22)(IteratorPrototype, __webpack_require__(/*! ./_wks */ 9)('iterator'), function () { return this; });\n\nmodule.exports = function (Constructor, NAME, next) {\n  Constructor.prototype = create(IteratorPrototype, { next: descriptor(1, next) });\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n\n\n/***/ }),\n/* 93 */\n/*!*************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_object-dps.js ***!\n  \\*************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar dP = __webpack_require__(/*! ./_object-dp */ 13);\nvar anObject = __webpack_require__(/*! ./_an-object */ 23);\nvar getKeys = __webpack_require__(/*! ./_object-keys */ 15);\n\nmodule.exports = __webpack_require__(/*! ./_descriptors */ 14) ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = getKeys(Properties);\n  var length = keys.length;\n  var i = 0;\n  var P;\n  while (length > i) dP.f(O, P = keys[i++], Properties[P]);\n  return O;\n};\n\n\n/***/ }),\n/* 94 */\n/*!*******************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_html.js ***!\n  \\*******************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar document = __webpack_require__(/*! ./_global */ 12).document;\nmodule.exports = document && document.documentElement;\n\n\n/***/ }),\n/* 95 */\n/*!******************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/web.dom.iterable.js ***!\n  \\******************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(/*! ./es6.array.iterator */ 96);\nvar global = __webpack_require__(/*! ./_global */ 12);\nvar hide = __webpack_require__(/*! ./_hide */ 22);\nvar Iterators = __webpack_require__(/*! ./_iterators */ 36);\nvar TO_STRING_TAG = __webpack_require__(/*! ./_wks */ 9)('toStringTag');\n\nvar DOMIterables = ('CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,' +\n  'DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,' +\n  'MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,' +\n  'SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,' +\n  'TextTrackList,TouchList').split(',');\n\nfor (var i = 0; i < DOMIterables.length; i++) {\n  var NAME = DOMIterables[i];\n  var Collection = global[NAME];\n  var proto = Collection && Collection.prototype;\n  if (proto && !proto[TO_STRING_TAG]) hide(proto, TO_STRING_TAG, NAME);\n  Iterators[NAME] = Iterators.Array;\n}\n\n\n/***/ }),\n/* 96 */\n/*!********************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/es6.array.iterator.js ***!\n  \\********************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar addToUnscopables = __webpack_require__(/*! ./_add-to-unscopables */ 97);\nvar step = __webpack_require__(/*! ./_iter-step */ 98);\nvar Iterators = __webpack_require__(/*! ./_iterators */ 36);\nvar toIObject = __webpack_require__(/*! ./_to-iobject */ 11);\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = __webpack_require__(/*! ./_iter-define */ 69)(Array, 'Array', function (iterated, kind) {\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var kind = this._k;\n  var index = this._i++;\n  if (!O || index >= O.length) {\n    this._t = undefined;\n    return step(1);\n  }\n  if (kind == 'keys') return step(0, index);\n  if (kind == 'values') return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n\n\n/***/ }),\n/* 97 */\n/*!*********************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_add-to-unscopables.js ***!\n  \\*********************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports) {\n\nmodule.exports = function () { /* empty */ };\n\n\n/***/ }),\n/* 98 */\n/*!************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_iter-step.js ***!\n  \\************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports) {\n\nmodule.exports = function (done, value) {\n  return { value: value, done: !!done };\n};\n\n\n/***/ }),\n/* 99 */\n/*!******************************************************!*\\\n  !*** ./node_modules/babel-runtime/core-js/symbol.js ***!\n  \\******************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(/*! core-js/library/fn/symbol */ 100), __esModule: true };\n\n/***/ }),\n/* 100 */\n/*!*********************************************************!*\\\n  !*** ./node_modules/core-js/library/fn/symbol/index.js ***!\n  \\*********************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(/*! ../../modules/es6.symbol */ 101);\n__webpack_require__(/*! ../../modules/es6.object.to-string */ 107);\n__webpack_require__(/*! ../../modules/es7.symbol.async-iterator */ 108);\n__webpack_require__(/*! ../../modules/es7.symbol.observable */ 109);\nmodule.exports = __webpack_require__(/*! ../../modules/_core */ 6).Symbol;\n\n\n/***/ }),\n/* 101 */\n/*!************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/es6.symbol.js ***!\n  \\************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n// ECMAScript 6 symbols shim\nvar global = __webpack_require__(/*! ./_global */ 12);\nvar has = __webpack_require__(/*! ./_has */ 16);\nvar DESCRIPTORS = __webpack_require__(/*! ./_descriptors */ 14);\nvar $export = __webpack_require__(/*! ./_export */ 10);\nvar redefine = __webpack_require__(/*! ./_redefine */ 70);\nvar META = __webpack_require__(/*! ./_meta */ 102).KEY;\nvar $fails = __webpack_require__(/*! ./_fails */ 24);\nvar shared = __webpack_require__(/*! ./_shared */ 48);\nvar setToStringTag = __webpack_require__(/*! ./_set-to-string-tag */ 54);\nvar uid = __webpack_require__(/*! ./_uid */ 41);\nvar wks = __webpack_require__(/*! ./_wks */ 9);\nvar wksExt = __webpack_require__(/*! ./_wks-ext */ 55);\nvar wksDefine = __webpack_require__(/*! ./_wks-define */ 56);\nvar keyOf = __webpack_require__(/*! ./_keyof */ 103);\nvar enumKeys = __webpack_require__(/*! ./_enum-keys */ 104);\nvar isArray = __webpack_require__(/*! ./_is-array */ 105);\nvar anObject = __webpack_require__(/*! ./_an-object */ 23);\nvar toIObject = __webpack_require__(/*! ./_to-iobject */ 11);\nvar toPrimitive = __webpack_require__(/*! ./_to-primitive */ 43);\nvar createDesc = __webpack_require__(/*! ./_property-desc */ 32);\nvar _create = __webpack_require__(/*! ./_object-create */ 53);\nvar gOPNExt = __webpack_require__(/*! ./_object-gopn-ext */ 106);\nvar $GOPD = __webpack_require__(/*! ./_object-gopd */ 57);\nvar $DP = __webpack_require__(/*! ./_object-dp */ 13);\nvar $keys = __webpack_require__(/*! ./_object-keys */ 15);\nvar gOPD = $GOPD.f;\nvar dP = $DP.f;\nvar gOPN = gOPNExt.f;\nvar $Symbol = global.Symbol;\nvar $JSON = global.JSON;\nvar _stringify = $JSON && $JSON.stringify;\nvar PROTOTYPE = 'prototype';\nvar HIDDEN = wks('_hidden');\nvar TO_PRIMITIVE = wks('toPrimitive');\nvar isEnum = {}.propertyIsEnumerable;\nvar SymbolRegistry = shared('symbol-registry');\nvar AllSymbols = shared('symbols');\nvar OPSymbols = shared('op-symbols');\nvar ObjectProto = Object[PROTOTYPE];\nvar USE_NATIVE = typeof $Symbol == 'function';\nvar QObject = global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function () {\n  return _create(dP({}, 'a', {\n    get: function () { return dP(this, 'a', { value: 7 }).a; }\n  })).a != 7;\n}) ? function (it, key, D) {\n  var protoDesc = gOPD(ObjectProto, key);\n  if (protoDesc) delete ObjectProto[key];\n  dP(it, key, D);\n  if (protoDesc && it !== ObjectProto) dP(ObjectProto, key, protoDesc);\n} : dP;\n\nvar wrap = function (tag) {\n  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);\n  sym._k = tag;\n  return sym;\n};\n\nvar isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  return it instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(it, key, D) {\n  if (it === ObjectProto) $defineProperty(OPSymbols, key, D);\n  anObject(it);\n  key = toPrimitive(key, true);\n  anObject(D);\n  if (has(AllSymbols, key)) {\n    if (!D.enumerable) {\n      if (!has(it, HIDDEN)) dP(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if (has(it, HIDDEN) && it[HIDDEN][key]) it[HIDDEN][key] = false;\n      D = _create(D, { enumerable: createDesc(0, false) });\n    } return setSymbolDesc(it, key, D);\n  } return dP(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P) {\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P));\n  var i = 0;\n  var l = keys.length;\n  var key;\n  while (l > i) $defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P) {\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key) {\n  var E = isEnum.call(this, key = toPrimitive(key, true));\n  if (this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return false;\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key) {\n  it = toIObject(it);\n  key = toPrimitive(key, true);\n  if (it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return;\n  var D = gOPD(it, key);\n  if (D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key])) D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it) {\n  var names = gOPN(toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META) result.push(key);\n  } return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it) {\n  var IS_OP = it === ObjectProto;\n  var names = gOPN(IS_OP ? OPSymbols : toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true)) result.push(AllSymbols[key]);\n  } return result;\n};\n\n// 19.4.1.1 Symbol([description])\nif (!USE_NATIVE) {\n  $Symbol = function Symbol() {\n    if (this instanceof $Symbol) throw TypeError('Symbol is not a constructor!');\n    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);\n    var $set = function (value) {\n      if (this === ObjectProto) $set.call(OPSymbols, value);\n      if (has(this, HIDDEN) && has(this[HIDDEN], tag)) this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    };\n    if (DESCRIPTORS && setter) setSymbolDesc(ObjectProto, tag, { configurable: true, set: $set });\n    return wrap(tag);\n  };\n  redefine($Symbol[PROTOTYPE], 'toString', function toString() {\n    return this._k;\n  });\n\n  $GOPD.f = $getOwnPropertyDescriptor;\n  $DP.f = $defineProperty;\n  __webpack_require__(/*! ./_object-gopn */ 71).f = gOPNExt.f = $getOwnPropertyNames;\n  __webpack_require__(/*! ./_object-pie */ 33).f = $propertyIsEnumerable;\n  __webpack_require__(/*! ./_object-gops */ 50).f = $getOwnPropertySymbols;\n\n  if (DESCRIPTORS && !__webpack_require__(/*! ./_library */ 52)) {\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n\n  wksExt.f = function (name) {\n    return wrap(wks(name));\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Symbol: $Symbol });\n\nfor (var es6Symbols = (\n  // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'\n).split(','), j = 0; es6Symbols.length > j;)wks(es6Symbols[j++]);\n\nfor (var wellKnownSymbols = $keys(wks.store), k = 0; wellKnownSymbols.length > k;) wksDefine(wellKnownSymbols[k++]);\n\n$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function (key) {\n    return has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(key) {\n    if (isSymbol(key)) return keyOf(SymbolRegistry, key);\n    throw TypeError(key + ' is not a symbol!');\n  },\n  useSetter: function () { setter = true; },\n  useSimple: function () { setter = false; }\n});\n\n$export($export.S + $export.F * !USE_NATIVE, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function () {\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({ a: S }) != '{}' || _stringify(Object(S)) != '{}';\n})), 'JSON', {\n  stringify: function stringify(it) {\n    if (it === undefined || isSymbol(it)) return; // IE8 returns string on undefined\n    var args = [it];\n    var i = 1;\n    var replacer, $replacer;\n    while (arguments.length > i) args.push(arguments[i++]);\n    replacer = args[1];\n    if (typeof replacer == 'function') $replacer = replacer;\n    if ($replacer || !isArray(replacer)) replacer = function (key, value) {\n      if ($replacer) value = $replacer.call(this, key, value);\n      if (!isSymbol(value)) return value;\n    };\n    args[1] = replacer;\n    return _stringify.apply($JSON, args);\n  }\n});\n\n// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)\n$Symbol[PROTOTYPE][TO_PRIMITIVE] || __webpack_require__(/*! ./_hide */ 22)($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);\n\n\n/***/ }),\n/* 102 */\n/*!*******************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_meta.js ***!\n  \\*******************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar META = __webpack_require__(/*! ./_uid */ 41)('meta');\nvar isObject = __webpack_require__(/*! ./_is-object */ 31);\nvar has = __webpack_require__(/*! ./_has */ 16);\nvar setDesc = __webpack_require__(/*! ./_object-dp */ 13).f;\nvar id = 0;\nvar isExtensible = Object.isExtensible || function () {\n  return true;\n};\nvar FREEZE = !__webpack_require__(/*! ./_fails */ 24)(function () {\n  return isExtensible(Object.preventExtensions({}));\n});\nvar setMeta = function (it) {\n  setDesc(it, META, { value: {\n    i: 'O' + ++id, // object ID\n    w: {}          // weak collections IDs\n  } });\n};\nvar fastKey = function (it, create) {\n  // return primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F';\n    // not necessary to add metadata\n    if (!create) return 'E';\n    // add missing metadata\n    setMeta(it);\n  // return object ID\n  } return it[META].i;\n};\nvar getWeak = function (it, create) {\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true;\n    // not necessary to add metadata\n    if (!create) return false;\n    // add missing metadata\n    setMeta(it);\n  // return hash weak collections IDs\n  } return it[META].w;\n};\n// add metadata on freeze-family methods calling\nvar onFreeze = function (it) {\n  if (FREEZE && meta.NEED && isExtensible(it) && !has(it, META)) setMeta(it);\n  return it;\n};\nvar meta = module.exports = {\n  KEY: META,\n  NEED: false,\n  fastKey: fastKey,\n  getWeak: getWeak,\n  onFreeze: onFreeze\n};\n\n\n/***/ }),\n/* 103 */\n/*!********************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_keyof.js ***!\n  \\********************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar getKeys = __webpack_require__(/*! ./_object-keys */ 15);\nvar toIObject = __webpack_require__(/*! ./_to-iobject */ 11);\nmodule.exports = function (object, el) {\n  var O = toIObject(object);\n  var keys = getKeys(O);\n  var length = keys.length;\n  var index = 0;\n  var key;\n  while (length > index) if (O[key = keys[index++]] === el) return key;\n};\n\n\n/***/ }),\n/* 104 */\n/*!************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_enum-keys.js ***!\n  \\************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// all enumerable object keys, includes symbols\nvar getKeys = __webpack_require__(/*! ./_object-keys */ 15);\nvar gOPS = __webpack_require__(/*! ./_object-gops */ 50);\nvar pIE = __webpack_require__(/*! ./_object-pie */ 33);\nmodule.exports = function (it) {\n  var result = getKeys(it);\n  var getSymbols = gOPS.f;\n  if (getSymbols) {\n    var symbols = getSymbols(it);\n    var isEnum = pIE.f;\n    var i = 0;\n    var key;\n    while (symbols.length > i) if (isEnum.call(it, key = symbols[i++])) result.push(key);\n  } return result;\n};\n\n\n/***/ }),\n/* 105 */\n/*!***********************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_is-array.js ***!\n  \\***********************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 7.2.2 IsArray(argument)\nvar cof = __webpack_require__(/*! ./_cof */ 44);\nmodule.exports = Array.isArray || function isArray(arg) {\n  return cof(arg) == 'Array';\n};\n\n\n/***/ }),\n/* 106 */\n/*!******************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_object-gopn-ext.js ***!\n  \\******************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = __webpack_require__(/*! ./_to-iobject */ 11);\nvar gOPN = __webpack_require__(/*! ./_object-gopn */ 71).f;\nvar toString = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function (it) {\n  try {\n    return gOPN(it);\n  } catch (e) {\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.f = function getOwnPropertyNames(it) {\n  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));\n};\n\n\n/***/ }),\n/* 107 */\n/*!**********************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/es6.object.to-string.js ***!\n  \\**********************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports) {\n\n\n\n/***/ }),\n/* 108 */\n/*!***************************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/es7.symbol.async-iterator.js ***!\n  \\***************************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(/*! ./_wks-define */ 56)('asyncIterator');\n\n\n/***/ }),\n/* 109 */\n/*!***********************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/es7.symbol.observable.js ***!\n  \\***********************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(/*! ./_wks-define */ 56)('observable');\n\n\n/***/ }),\n/* 110 */\n/*!***********************************************************************!*\\\n  !*** ./node_modules/babel-runtime/core-js/object/set-prototype-of.js ***!\n  \\***********************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(/*! core-js/library/fn/object/set-prototype-of */ 111), __esModule: true };\n\n/***/ }),\n/* 111 */\n/*!********************************************************************!*\\\n  !*** ./node_modules/core-js/library/fn/object/set-prototype-of.js ***!\n  \\********************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(/*! ../../modules/es6.object.set-prototype-of */ 112);\nmodule.exports = __webpack_require__(/*! ../../modules/_core */ 6).Object.setPrototypeOf;\n\n\n/***/ }),\n/* 112 */\n/*!*****************************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/es6.object.set-prototype-of.js ***!\n  \\*****************************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.3.19 Object.setPrototypeOf(O, proto)\nvar $export = __webpack_require__(/*! ./_export */ 10);\n$export($export.S, 'Object', { setPrototypeOf: __webpack_require__(/*! ./_set-proto */ 113).set });\n\n\n/***/ }),\n/* 113 */\n/*!************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_set-proto.js ***!\n  \\************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar isObject = __webpack_require__(/*! ./_is-object */ 31);\nvar anObject = __webpack_require__(/*! ./_an-object */ 23);\nvar check = function (O, proto) {\n  anObject(O);\n  if (!isObject(proto) && proto !== null) throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function (test, buggy, set) {\n      try {\n        set = __webpack_require__(/*! ./_ctx */ 42)(Function.call, __webpack_require__(/*! ./_object-gopd */ 57).f(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch (e) { buggy = true; }\n      return function setPrototypeOf(O, proto) {\n        check(O, proto);\n        if (buggy) O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};\n\n\n/***/ }),\n/* 114 */\n/*!*************************************************************!*\\\n  !*** ./node_modules/babel-runtime/core-js/object/create.js ***!\n  \\*************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(/*! core-js/library/fn/object/create */ 115), __esModule: true };\n\n/***/ }),\n/* 115 */\n/*!**********************************************************!*\\\n  !*** ./node_modules/core-js/library/fn/object/create.js ***!\n  \\**********************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(/*! ../../modules/es6.object.create */ 116);\nvar $Object = __webpack_require__(/*! ../../modules/_core */ 6).Object;\nmodule.exports = function create(P, D) {\n  return $Object.create(P, D);\n};\n\n\n/***/ }),\n/* 116 */\n/*!*******************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/es6.object.create.js ***!\n  \\*******************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar $export = __webpack_require__(/*! ./_export */ 10);\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\n$export($export.S, 'Object', { create: __webpack_require__(/*! ./_object-create */ 53) });\n\n\n/***/ }),\n/* 117 */\n/*!**********************************************************************************!*\\\n  !*** ./node_modules/babel-runtime/core-js/object/get-own-property-descriptor.js ***!\n  \\**********************************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(/*! core-js/library/fn/object/get-own-property-descriptor */ 118), __esModule: true };\n\n/***/ }),\n/* 118 */\n/*!*******************************************************************************!*\\\n  !*** ./node_modules/core-js/library/fn/object/get-own-property-descriptor.js ***!\n  \\*******************************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(/*! ../../modules/es6.object.get-own-property-descriptor */ 119);\nvar $Object = __webpack_require__(/*! ../../modules/_core */ 6).Object;\nmodule.exports = function getOwnPropertyDescriptor(it, key) {\n  return $Object.getOwnPropertyDescriptor(it, key);\n};\n\n\n/***/ }),\n/* 119 */\n/*!****************************************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/es6.object.get-own-property-descriptor.js ***!\n  \\****************************************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\nvar toIObject = __webpack_require__(/*! ./_to-iobject */ 11);\nvar $getOwnPropertyDescriptor = __webpack_require__(/*! ./_object-gopd */ 57).f;\n\n__webpack_require__(/*! ./_object-sap */ 51)('getOwnPropertyDescriptor', function () {\n  return function getOwnPropertyDescriptor(it, key) {\n    return $getOwnPropertyDescriptor(toIObject(it), key);\n  };\n});\n\n\n/***/ }),\n/* 120 */\n/*!*****************************!*\\\n  !*** ./src/lib/QuadTree.js ***!\n  \\*****************************/\n/*! exports provided: default */\n/*! exports used: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = QuadTree;\n/**\r\n * @author       Timo Hausmann\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2014 Photon Storm Ltd.\r\n * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n */\n\n/**\r\n * A QuadTree implementation. The original code was a conversion of the Java code posted to GameDevTuts.\r\n * However I've tweaked it massively to add node indexing, removed lots of temp. var creation and significantly increased performance as a result.\r\n * Original version at https://github.com/timohausmann/quadtree-js/\r\n *\r\n * @class QuadTree\r\n * @constructor\r\n * @param {number} x - The top left coordinate of the quadtree.\r\n * @param {number} y - The top left coordinate of the quadtree.\r\n * @param {number} width - The width of the quadtree in pixels.\r\n * @param {number} height - The height of the quadtree in pixels.\r\n * @param {number} [maxObjects=10] - The maximum number of objects per node.\r\n * @param {number} [maxLevels=4] - The maximum number of levels to iterate to.\r\n * @param {number} [level=0] - Which level is this?\r\n */\nfunction QuadTree(left, top, width, height, maxObjects, maxLevels, level, root) {\n\n  /**\r\n   * @property {number} maxObjects - The maximum number of objects per node.\r\n   * @default\r\n   */\n  this.maxObjects = 10;\n\n  /**\r\n   * @property {number} maxLevels - The maximum number of levels to break down to.\r\n   * @default\r\n   */\n  this.maxLevels = 4;\n\n  /**\r\n   * @property {number} level - The current level.\r\n   */\n  this.level = 0;\n\n  /**\r\n   * @property {object} bounds - Object that contains the quadtree bounds.\r\n   */\n  this.bounds = {};\n\n  /**\r\n   * @property {array} objects - Array of quadtree children.\r\n   */\n  this.objects = [];\n\n  /**\r\n   * @property {array} nodes - Array of associated child nodes.\r\n   */\n  this.nodes = [];\n\n  /**\r\n   * @property {array} _empty - Internal empty array.\r\n   * @private\r\n   */\n  this._empty = [];\n\n  this.root = root || this;\n  this.entityMap = {};\n\n  this.reset(left, top, width, height, maxObjects, maxLevels, level);\n};\n\nQuadTree.prototype = {\n\n  /**\r\n   * Resets the QuadTree.\r\n   *\r\n   * @method QuadTree#reset\r\n   * @param {number} x - The top left coordinate of the quadtree.\r\n   * @param {number} y - The top left coordinate of the quadtree.\r\n   * @param {number} width - The width of the quadtree in pixels.\r\n   * @param {number} height - The height of the quadtree in pixels.\r\n   * @param {number} [maxObjects=10] - The maximum number of objects per node.\r\n   * @param {number} [maxLevels=4] - The maximum number of levels to iterate to.\r\n   * @param {number} [level=0] - Which level is this?\r\n   */\n  reset: function reset(left, top, width, height, maxObjects, maxLevels, level) {\n\n    this.maxObjects = maxObjects || 10;\n    this.maxLevels = maxLevels || 4;\n    this.level = level || 0;\n\n    this.bounds = {\n      width: width,\n      height: height,\n      subWidth: Math.floor(width / 2),\n      subHeight: Math.floor(height / 2),\n      left: Math.round(left),\n      top: Math.round(top),\n      midX: Math.round(left + width / 2),\n      midY: Math.round(top + height / 2),\n      right: Math.round(left + width),\n      bottom: Math.round(top + height)\n    };\n\n    this.objects.length = 0;\n    this.nodes.length = 0;\n  },\n\n  /**\r\n   * Split the node into 4 subnodes\r\n   *\r\n   * @method QuadTree#split\r\n   */\n  split: function split() {\n\n    //  top right node\n    this.nodes[0] = new QuadTree(this.bounds.left + this.bounds.subWidth, this.bounds.top, this.bounds.subWidth, this.bounds.subHeight, this.maxObjects, this.maxLevels, this.level + 1, this.root);\n\n    //  top left node\n    this.nodes[1] = new QuadTree(this.bounds.left, this.bounds.top, this.bounds.subWidth, this.bounds.subHeight, this.maxObjects, this.maxLevels, this.level + 1, this.root);\n\n    //  bottom left node\n    this.nodes[2] = new QuadTree(this.bounds.left, this.bounds.top + this.bounds.subHeight, this.bounds.subWidth, this.bounds.subHeight, this.maxObjects, this.maxLevels, this.level + 1, this.root);\n\n    //  bottom right node\n    this.nodes[3] = new QuadTree(this.bounds.left + this.bounds.subWidth, this.bounds.top + this.bounds.subHeight, this.bounds.subWidth, this.bounds.subHeight, this.maxObjects, this.maxLevels, this.level + 1, this.root);\n  },\n\n  /**\r\n   * Insert the object into the node. If the node exceeds the capacity, it will split and add all objects to their corresponding subnodes.\r\n   *\r\n   * @method QuadTree#insert\r\n   * @param {Phaser.Physics.Arcade.Body|object} body - The Body object to insert into the quadtree. Can be any object so long as it exposes x, y, right and bottom properties.\r\n   */\n  insert: function insert(body) {\n\n    var i = 0;\n    var index;\n\n    //  if we have subnodes ...\n    if (this.nodes[0] != null) {\n      index = this.getIndex(body);\n      if (index !== -1) {\n        this.nodes[index].insert(body);\n        return;\n      }\n    }\n\n    // Check if we already have this item in the quadtree structure.\n    var oldNode = this.root.entityMap[body.entityId];\n    if (oldNode === this) {\n      // If we have the item, and it's this current sub-tree, then just bail.\n      return;\n    }\n    if (oldNode) {\n      // If the item is known, but in another sub-tree, then delete it from there.\n      var objectIndex = oldNode.objects.indexOf(body);\n      if (objectIndex !== -1) {\n        oldNode.objects.splice(objectIndex, 1);\n      }\n    }\n\n    /*\r\n    // TODO: Need the opposite of split() to consolidate subtrees when they\r\n    // lose items.\r\n      this.root.entityMap[body.entityId] = this;\r\n    */\n\n    this.objects.push(body);\n\n    if (this.objects.length > this.maxObjects && this.level < this.maxLevels) {\n      //  Split if we don't already have subnodes\n      if (this.nodes[0] == null) {\n        this.split();\n      }\n      //  Add objects to subnodes\n      while (i < this.objects.length) {\n        index = this.getIndex(this.objects[i]);\n        if (index !== -1) {\n          //  this is expensive - see what we can do about it\n          this.nodes[index].insert(this.objects.splice(i, 1)[0]);\n        } else {\n          i++;\n        }\n      }\n    }\n  },\n\n  /**\r\n   * Determine which node the object belongs to.\r\n   *\r\n   * @method QuadTree#getIndex\r\n   * @param {Phaser.Rectangle|object} rect - The bounds in which to check.\r\n   * @return {number} index - Index of the subnode (0-3), or -1 if rect cannot completely fit within a subnode and is part of the parent node.\r\n   */\n  getIndex: function getIndex(rect) {\n    if (rect.left < this.bounds.midX && rect.right < this.bounds.midX) {\n      if (rect.top < this.bounds.midY && rect.bottom < this.bounds.midY) {\n        //  rect fits within the top-left quadrant of this quadtree\n        return 1;\n      } else if (rect.top > this.bounds.midY) {\n        //  rect fits within the bottom-left quadrant of this quadtree\n        return 2;\n      }\n    } else if (rect.left > this.bounds.midX) {\n      //  rect can completely fit within the right quadrants\n      if (rect.top < this.bounds.midY && rect.bottom < this.bounds.midY) {\n        //  rect fits within the top-right quadrant of this quadtree\n        return 0;\n      } else if (rect.top > this.bounds.midY) {\n        //  rect fits within the bottom-right quadrant of this quadtree\n        return 3;\n      }\n    }\n    // rect doesn't fit, i.e. it straddles the internal quadrants\n    return -1;\n  },\n\n  /**\r\n   * Iterate through all objects that could collide with the given Sprite or Rectangle.\r\n   *\r\n   * @method QuadTree#retrieve\r\n   * @param {Phaser.Sprite|Phaser.Rectangle} source - The source object to check the QuadTree against. Either a Sprite or Rectangle.\r\n   */\n  iterate: function iterate(source, iteratorFn, optionalParam) {\n    var index = this.getIndex(source);\n\n    for (var i = 0; i < this.objects.length; i++) {\n      iteratorFn(this.objects[i], optionalParam);\n    }\n\n    if (this.nodes[0]) {\n      //  If rect fits into a subnode ..\n      if (index !== -1) {\n        this.nodes[index].iterate(source, iteratorFn, optionalParam);\n      } else {\n        //  If rect does not fit into a subnode, check it against all subnodes (unrolled for speed)\n        this.nodes[0].iterate(source, iteratorFn, optionalParam);\n        this.nodes[1].iterate(source, iteratorFn, optionalParam);\n        this.nodes[2].iterate(source, iteratorFn, optionalParam);\n        this.nodes[3].iterate(source, iteratorFn, optionalParam);\n      }\n    }\n  },\n\n  /**\r\n   * Clear the quadtree.\r\n   * @method QuadTree#clear\r\n   */\n  clear: function clear() {\n    this.objects.length = 0;\n    var i = this.nodes.length;\n    while (i--) {\n      this.nodes[i].clear();\n      this.nodes.splice(i, 1);\n    }\n    this.nodes.length = 0;\n  }\n\n};\n\n/**\r\n * Javascript QuadTree\r\n * @version 1.0\r\n *\r\n * @version 1.3, March 11th 2014\r\n * @author Richard Davey\r\n * The original code was a conversion of the Java code posted to GameDevTuts. However I've tweaked\r\n * it massively to add node indexing, removed lots of temp. var creation and significantly\r\n * increased performance as a result.\r\n *\r\n * Original version at https://github.com/timohausmann/quadtree-js/\r\n */\n\n/**\r\n * @copyright © 2012 Timo Hausmann\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining\r\n * a copy of this software and associated documentation files (the\r\n * \"Software\"), to deal in the Software without restriction, including\r\n * without limitation the rights to use, copy, modify, merge, publish,\r\n * distribute, sublicense, and/or sell copies of the Software, and to\r\n * permit persons to whom the Software is furnished to do so, subject to\r\n * the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be\r\n * included in all copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\r\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\r\n * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\r\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n */\n\n/***/ }),\n/* 121 */\n/*!***************************************!*\\\n  !*** ./node_modules/dat-gui/index.js ***!\n  \\***************************************/\n/*! no static exports found */\n/*! exports used: default */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(/*! ./vendor/dat.gui */ 122)\nmodule.exports.color = __webpack_require__(/*! ./vendor/dat.color */ 123)\n\n/***/ }),\n/* 122 */\n/*!************************************************!*\\\n  !*** ./node_modules/dat-gui/vendor/dat.gui.js ***!\n  \\************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports) {\n\n/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\n/** @namespace */\nvar dat = module.exports = dat || {};\n\n/** @namespace */\ndat.gui = dat.gui || {};\n\n/** @namespace */\ndat.utils = dat.utils || {};\n\n/** @namespace */\ndat.controllers = dat.controllers || {};\n\n/** @namespace */\ndat.dom = dat.dom || {};\n\n/** @namespace */\ndat.color = dat.color || {};\n\ndat.utils.css = (function () {\n  return {\n    load: function (url, doc) {\n      doc = doc || document;\n      var link = doc.createElement('link');\n      link.type = 'text/css';\n      link.rel = 'stylesheet';\n      link.href = url;\n      doc.getElementsByTagName('head')[0].appendChild(link);\n    },\n    inject: function(css, doc) {\n      doc = doc || document;\n      var injected = document.createElement('style');\n      injected.type = 'text/css';\n      injected.innerHTML = css;\n      doc.getElementsByTagName('head')[0].appendChild(injected);\n    }\n  }\n})();\n\n\ndat.utils.common = (function () {\n  \n  var ARR_EACH = Array.prototype.forEach;\n  var ARR_SLICE = Array.prototype.slice;\n\n  /**\n   * Band-aid methods for things that should be a lot easier in JavaScript.\n   * Implementation and structure inspired by underscore.js\n   * http://documentcloud.github.com/underscore/\n   */\n\n  return { \n    \n    BREAK: {},\n  \n    extend: function(target) {\n      \n      this.each(ARR_SLICE.call(arguments, 1), function(obj) {\n        \n        for (var key in obj)\n          if (!this.isUndefined(obj[key])) \n            target[key] = obj[key];\n        \n      }, this);\n      \n      return target;\n      \n    },\n    \n    defaults: function(target) {\n      \n      this.each(ARR_SLICE.call(arguments, 1), function(obj) {\n        \n        for (var key in obj)\n          if (this.isUndefined(target[key])) \n            target[key] = obj[key];\n        \n      }, this);\n      \n      return target;\n    \n    },\n    \n    compose: function() {\n      var toCall = ARR_SLICE.call(arguments);\n            return function() {\n              var args = ARR_SLICE.call(arguments);\n              for (var i = toCall.length -1; i >= 0; i--) {\n                args = [toCall[i].apply(this, args)];\n              }\n              return args[0];\n            }\n    },\n    \n    each: function(obj, itr, scope) {\n\n      \n      if (ARR_EACH && obj.forEach === ARR_EACH) { \n        \n        obj.forEach(itr, scope);\n        \n      } else if (obj.length === obj.length + 0) { // Is number but not NaN\n        \n        for (var key = 0, l = obj.length; key < l; key++)\n          if (key in obj && itr.call(scope, obj[key], key) === this.BREAK) \n            return;\n            \n      } else {\n\n        for (var key in obj) \n          if (itr.call(scope, obj[key], key) === this.BREAK)\n            return;\n            \n      }\n            \n    },\n    \n    defer: function(fnc) {\n      setTimeout(fnc, 0);\n    },\n    \n    toArray: function(obj) {\n      if (obj.toArray) return obj.toArray();\n      return ARR_SLICE.call(obj);\n    },\n\n    isUndefined: function(obj) {\n      return obj === undefined;\n    },\n    \n    isNull: function(obj) {\n      return obj === null;\n    },\n    \n    isNaN: function(obj) {\n      return obj !== obj;\n    },\n    \n    isArray: Array.isArray || function(obj) {\n      return obj.constructor === Array;\n    },\n    \n    isObject: function(obj) {\n      return obj === Object(obj);\n    },\n    \n    isNumber: function(obj) {\n      return obj === obj+0;\n    },\n    \n    isString: function(obj) {\n      return obj === obj+'';\n    },\n    \n    isBoolean: function(obj) {\n      return obj === false || obj === true;\n    },\n    \n    isFunction: function(obj) {\n      return Object.prototype.toString.call(obj) === '[object Function]';\n    }\n  \n  };\n    \n})();\n\n\ndat.controllers.Controller = (function (common) {\n\n  /**\n   * @class An \"abstract\" class that represents a given property of an object.\n   *\n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   *\n   * @member dat.controllers\n   */\n  var Controller = function(object, property) {\n\n    this.initialValue = object[property];\n\n    /**\n     * Those who extend this class will put their DOM elements in here.\n     * @type {DOMElement}\n     */\n    this.domElement = document.createElement('div');\n\n    /**\n     * The object to manipulate\n     * @type {Object}\n     */\n    this.object = object;\n\n    /**\n     * The name of the property to manipulate\n     * @type {String}\n     */\n    this.property = property;\n\n    /**\n     * The function to be called on change.\n     * @type {Function}\n     * @ignore\n     */\n    this.__onChange = undefined;\n\n    /**\n     * The function to be called on finishing change.\n     * @type {Function}\n     * @ignore\n     */\n    this.__onFinishChange = undefined;\n\n  };\n\n  common.extend(\n\n      Controller.prototype,\n\n      /** @lends dat.controllers.Controller.prototype */\n      {\n\n        /**\n         * Specify that a function fire every time someone changes the value with\n         * this Controller.\n         *\n         * @param {Function} fnc This function will be called whenever the value\n         * is modified via this Controller.\n         * @returns {dat.controllers.Controller} this\n         */\n        onChange: function(fnc) {\n          this.__onChange = fnc;\n          return this;\n        },\n\n        /**\n         * Specify that a function fire every time someone \"finishes\" changing\n         * the value wih this Controller. Useful for values that change\n         * incrementally like numbers or strings.\n         *\n         * @param {Function} fnc This function will be called whenever\n         * someone \"finishes\" changing the value via this Controller.\n         * @returns {dat.controllers.Controller} this\n         */\n        onFinishChange: function(fnc) {\n          this.__onFinishChange = fnc;\n          return this;\n        },\n\n        /**\n         * Change the value of <code>object[property]</code>\n         *\n         * @param {Object} newValue The new value of <code>object[property]</code>\n         */\n        setValue: function(newValue) {\n          this.object[this.property] = newValue;\n          if (this.__onChange) {\n            this.__onChange.call(this, newValue);\n          }\n          this.updateDisplay();\n          return this;\n        },\n\n        /**\n         * Gets the value of <code>object[property]</code>\n         *\n         * @returns {Object} The current value of <code>object[property]</code>\n         */\n        getValue: function() {\n          return this.object[this.property];\n        },\n\n        /**\n         * Refreshes the visual display of a Controller in order to keep sync\n         * with the object's current value.\n         * @returns {dat.controllers.Controller} this\n         */\n        updateDisplay: function() {\n          return this;\n        },\n\n        /**\n         * @returns {Boolean} true if the value has deviated from initialValue\n         */\n        isModified: function() {\n          return this.initialValue !== this.getValue()\n        }\n\n      }\n\n  );\n\n  return Controller;\n\n\n})(dat.utils.common);\n\n\ndat.dom.dom = (function (common) {\n\n  var EVENT_MAP = {\n    'HTMLEvents': ['change'],\n    'MouseEvents': ['click','mousemove','mousedown','mouseup', 'mouseover'],\n    'KeyboardEvents': ['keydown']\n  };\n\n  var EVENT_MAP_INV = {};\n  common.each(EVENT_MAP, function(v, k) {\n    common.each(v, function(e) {\n      EVENT_MAP_INV[e] = k;\n    });\n  });\n\n  var CSS_VALUE_PIXELS = /(\\d+(\\.\\d+)?)px/;\n\n  function cssValueToPixels(val) {\n\n    if (val === '0' || common.isUndefined(val)) return 0;\n\n    var match = val.match(CSS_VALUE_PIXELS);\n\n    if (!common.isNull(match)) {\n      return parseFloat(match[1]);\n    }\n\n    // TODO ...ems? %?\n\n    return 0;\n\n  }\n\n  /**\n   * @namespace\n   * @member dat.dom\n   */\n  var dom = {\n\n    /**\n     * \n     * @param elem\n     * @param selectable\n     */\n    makeSelectable: function(elem, selectable) {\n\n      if (elem === undefined || elem.style === undefined) return;\n\n      elem.onselectstart = selectable ? function() {\n        return false;\n      } : function() {\n      };\n\n      elem.style.MozUserSelect = selectable ? 'auto' : 'none';\n      elem.style.KhtmlUserSelect = selectable ? 'auto' : 'none';\n      elem.unselectable = selectable ? 'on' : 'off';\n\n    },\n\n    /**\n     *\n     * @param elem\n     * @param horizontal\n     * @param vertical\n     */\n    makeFullscreen: function(elem, horizontal, vertical) {\n\n      if (common.isUndefined(horizontal)) horizontal = true;\n      if (common.isUndefined(vertical)) vertical = true;\n\n      elem.style.position = 'absolute';\n\n      if (horizontal) {\n        elem.style.left = 0;\n        elem.style.right = 0;\n      }\n      if (vertical) {\n        elem.style.top = 0;\n        elem.style.bottom = 0;\n      }\n\n    },\n\n    /**\n     *\n     * @param elem\n     * @param eventType\n     * @param params\n     */\n    fakeEvent: function(elem, eventType, params, aux) {\n      params = params || {};\n      var className = EVENT_MAP_INV[eventType];\n      if (!className) {\n        throw new Error('Event type ' + eventType + ' not supported.');\n      }\n      var evt = document.createEvent(className);\n      switch (className) {\n        case 'MouseEvents':\n          var clientX = params.x || params.clientX || 0;\n          var clientY = params.y || params.clientY || 0;\n          evt.initMouseEvent(eventType, params.bubbles || false,\n              params.cancelable || true, window, params.clickCount || 1,\n              0, //screen X\n              0, //screen Y\n              clientX, //client X\n              clientY, //client Y\n              false, false, false, false, 0, null);\n          break;\n        case 'KeyboardEvents':\n          var init = evt.initKeyboardEvent || evt.initKeyEvent; // webkit || moz\n          common.defaults(params, {\n            cancelable: true,\n            ctrlKey: false,\n            altKey: false,\n            shiftKey: false,\n            metaKey: false,\n            keyCode: undefined,\n            charCode: undefined\n          });\n          init(eventType, params.bubbles || false,\n              params.cancelable, window,\n              params.ctrlKey, params.altKey,\n              params.shiftKey, params.metaKey,\n              params.keyCode, params.charCode);\n          break;\n        default:\n          evt.initEvent(eventType, params.bubbles || false,\n              params.cancelable || true);\n          break;\n      }\n      common.defaults(evt, aux);\n      elem.dispatchEvent(evt);\n    },\n\n    /**\n     *\n     * @param elem\n     * @param event\n     * @param func\n     * @param bool\n     */\n    bind: function(elem, event, func, bool) {\n      bool = bool || false;\n      if (elem.addEventListener)\n        elem.addEventListener(event, func, bool);\n      else if (elem.attachEvent)\n        elem.attachEvent('on' + event, func);\n      return dom;\n    },\n\n    /**\n     *\n     * @param elem\n     * @param event\n     * @param func\n     * @param bool\n     */\n    unbind: function(elem, event, func, bool) {\n      bool = bool || false;\n      if (elem.removeEventListener)\n        elem.removeEventListener(event, func, bool);\n      else if (elem.detachEvent)\n        elem.detachEvent('on' + event, func);\n      return dom;\n    },\n\n    /**\n     *\n     * @param elem\n     * @param className\n     */\n    addClass: function(elem, className) {\n      if (elem.className === undefined) {\n        elem.className = className;\n      } else if (elem.className !== className) {\n        var classes = elem.className.split(/ +/);\n        if (classes.indexOf(className) == -1) {\n          classes.push(className);\n          elem.className = classes.join(' ').replace(/^\\s+/, '').replace(/\\s+$/, '');\n        }\n      }\n      return dom;\n    },\n\n    /**\n     *\n     * @param elem\n     * @param className\n     */\n    removeClass: function(elem, className) {\n      if (className) {\n        if (elem.className === undefined) {\n          // elem.className = className;\n        } else if (elem.className === className) {\n          elem.removeAttribute('class');\n        } else {\n          var classes = elem.className.split(/ +/);\n          var index = classes.indexOf(className);\n          if (index != -1) {\n            classes.splice(index, 1);\n            elem.className = classes.join(' ');\n          }\n        }\n      } else {\n        elem.className = undefined;\n      }\n      return dom;\n    },\n\n    hasClass: function(elem, className) {\n      return new RegExp('(?:^|\\\\s+)' + className + '(?:\\\\s+|$)').test(elem.className) || false;\n    },\n\n    /**\n     *\n     * @param elem\n     */\n    getWidth: function(elem) {\n\n      var style = getComputedStyle(elem);\n\n      return cssValueToPixels(style['border-left-width']) +\n          cssValueToPixels(style['border-right-width']) +\n          cssValueToPixels(style['padding-left']) +\n          cssValueToPixels(style['padding-right']) +\n          cssValueToPixels(style['width']);\n    },\n\n    /**\n     *\n     * @param elem\n     */\n    getHeight: function(elem) {\n\n      var style = getComputedStyle(elem);\n\n      return cssValueToPixels(style['border-top-width']) +\n          cssValueToPixels(style['border-bottom-width']) +\n          cssValueToPixels(style['padding-top']) +\n          cssValueToPixels(style['padding-bottom']) +\n          cssValueToPixels(style['height']);\n    },\n\n    /**\n     *\n     * @param elem\n     */\n    getOffset: function(elem) {\n      var offset = {left: 0, top:0};\n      if (elem.offsetParent) {\n        do {\n          offset.left += elem.offsetLeft;\n          offset.top += elem.offsetTop;\n        } while (elem = elem.offsetParent);\n      }\n      return offset;\n    },\n\n    // http://stackoverflow.com/posts/2684561/revisions\n    /**\n     * \n     * @param elem\n     */\n    isActive: function(elem) {\n      return elem === document.activeElement && ( elem.type || elem.href );\n    }\n\n  };\n\n  return dom;\n\n})(dat.utils.common);\n\n\ndat.controllers.OptionController = (function (Controller, dom, common) {\n\n  /**\n   * @class Provides a select input to alter the property of an object, using a\n   * list of accepted values.\n   *\n   * @extends dat.controllers.Controller\n   *\n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   * @param {Object|string[]} options A map of labels to acceptable values, or\n   * a list of acceptable string values.\n   *\n   * @member dat.controllers\n   */\n  var OptionController = function(object, property, options) {\n\n    OptionController.superclass.call(this, object, property);\n\n    var _this = this;\n\n    /**\n     * The drop down menu\n     * @ignore\n     */\n    this.__select = document.createElement('select');\n\n    if (common.isArray(options)) {\n      var map = {};\n      common.each(options, function(element) {\n        map[element] = element;\n      });\n      options = map;\n    }\n\n    common.each(options, function(value, key) {\n\n      var opt = document.createElement('option');\n      opt.innerHTML = key;\n      opt.setAttribute('value', value);\n      _this.__select.appendChild(opt);\n\n    });\n\n    // Acknowledge original value\n    this.updateDisplay();\n\n    dom.bind(this.__select, 'change', function() {\n      var desiredValue = this.options[this.selectedIndex].value;\n      _this.setValue(desiredValue);\n    });\n\n    this.domElement.appendChild(this.__select);\n\n  };\n\n  OptionController.superclass = Controller;\n\n  common.extend(\n\n      OptionController.prototype,\n      Controller.prototype,\n\n      {\n\n        setValue: function(v) {\n          var toReturn = OptionController.superclass.prototype.setValue.call(this, v);\n          if (this.__onFinishChange) {\n            this.__onFinishChange.call(this, this.getValue());\n          }\n          return toReturn;\n        },\n\n        updateDisplay: function() {\n          this.__select.value = this.getValue();\n          return OptionController.superclass.prototype.updateDisplay.call(this);\n        }\n\n      }\n\n  );\n\n  return OptionController;\n\n})(dat.controllers.Controller,\ndat.dom.dom,\ndat.utils.common);\n\n\ndat.controllers.NumberController = (function (Controller, common) {\n\n  /**\n   * @class Represents a given property of an object that is a number.\n   *\n   * @extends dat.controllers.Controller\n   *\n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   * @param {Object} [params] Optional parameters\n   * @param {Number} [params.min] Minimum allowed value\n   * @param {Number} [params.max] Maximum allowed value\n   * @param {Number} [params.step] Increment by which to change value\n   *\n   * @member dat.controllers\n   */\n  var NumberController = function(object, property, params) {\n\n    NumberController.superclass.call(this, object, property);\n\n    params = params || {};\n\n    this.__min = params.min;\n    this.__max = params.max;\n    this.__step = params.step;\n\n    if (common.isUndefined(this.__step)) {\n\n      if (this.initialValue == 0) {\n        this.__impliedStep = 1; // What are we, psychics?\n      } else {\n        // Hey Doug, check this out.\n        this.__impliedStep = Math.pow(10, Math.floor(Math.log(this.initialValue)/Math.LN10))/10;\n      }\n\n    } else {\n\n      this.__impliedStep = this.__step;\n\n    }\n\n    this.__precision = numDecimals(this.__impliedStep);\n\n\n  };\n\n  NumberController.superclass = Controller;\n\n  common.extend(\n\n      NumberController.prototype,\n      Controller.prototype,\n\n      /** @lends dat.controllers.NumberController.prototype */\n      {\n\n        setValue: function(v) {\n\n          if (this.__min !== undefined && v < this.__min) {\n            v = this.__min;\n          } else if (this.__max !== undefined && v > this.__max) {\n            v = this.__max;\n          }\n\n          if (this.__step !== undefined && v % this.__step != 0) {\n            v = Math.round(v / this.__step) * this.__step;\n          }\n\n          return NumberController.superclass.prototype.setValue.call(this, v);\n\n        },\n\n        /**\n         * Specify a minimum value for <code>object[property]</code>.\n         *\n         * @param {Number} minValue The minimum value for\n         * <code>object[property]</code>\n         * @returns {dat.controllers.NumberController} this\n         */\n        min: function(v) {\n          this.__min = v;\n          return this;\n        },\n\n        /**\n         * Specify a maximum value for <code>object[property]</code>.\n         *\n         * @param {Number} maxValue The maximum value for\n         * <code>object[property]</code>\n         * @returns {dat.controllers.NumberController} this\n         */\n        max: function(v) {\n          this.__max = v;\n          return this;\n        },\n\n        /**\n         * Specify a step value that dat.controllers.NumberController\n         * increments by.\n         *\n         * @param {Number} stepValue The step value for\n         * dat.controllers.NumberController\n         * @default if minimum and maximum specified increment is 1% of the\n         * difference otherwise stepValue is 1\n         * @returns {dat.controllers.NumberController} this\n         */\n        step: function(v) {\n          this.__step = v;\n          return this;\n        }\n\n      }\n\n  );\n\n  function numDecimals(x) {\n    x = x.toString();\n    if (x.indexOf('.') > -1) {\n      return x.length - x.indexOf('.') - 1;\n    } else {\n      return 0;\n    }\n  }\n\n  return NumberController;\n\n})(dat.controllers.Controller,\ndat.utils.common);\n\n\ndat.controllers.NumberControllerBox = (function (NumberController, dom, common) {\n\n  /**\n   * @class Represents a given property of an object that is a number and\n   * provides an input element with which to manipulate it.\n   *\n   * @extends dat.controllers.Controller\n   * @extends dat.controllers.NumberController\n   *\n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   * @param {Object} [params] Optional parameters\n   * @param {Number} [params.min] Minimum allowed value\n   * @param {Number} [params.max] Maximum allowed value\n   * @param {Number} [params.step] Increment by which to change value\n   *\n   * @member dat.controllers\n   */\n  var NumberControllerBox = function(object, property, params) {\n\n    this.__truncationSuspended = false;\n\n    NumberControllerBox.superclass.call(this, object, property, params);\n\n    var _this = this;\n\n    /**\n     * {Number} Previous mouse y position\n     * @ignore\n     */\n    var prev_y;\n\n    this.__input = document.createElement('input');\n    this.__input.setAttribute('type', 'text');\n\n    // Makes it so manually specified values are not truncated.\n\n    dom.bind(this.__input, 'change', onChange);\n    dom.bind(this.__input, 'blur', onBlur);\n    dom.bind(this.__input, 'mousedown', onMouseDown);\n    dom.bind(this.__input, 'keydown', function(e) {\n\n      // When pressing entire, you can be as precise as you want.\n      if (e.keyCode === 13) {\n        _this.__truncationSuspended = true;\n        this.blur();\n        _this.__truncationSuspended = false;\n      }\n\n    });\n\n    function onChange() {\n      var attempted = parseFloat(_this.__input.value);\n      if (!common.isNaN(attempted)) _this.setValue(attempted);\n    }\n\n    function onBlur() {\n      onChange();\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n\n    function onMouseDown(e) {\n      dom.bind(window, 'mousemove', onMouseDrag);\n      dom.bind(window, 'mouseup', onMouseUp);\n      prev_y = e.clientY;\n    }\n\n    function onMouseDrag(e) {\n\n      var diff = prev_y - e.clientY;\n      _this.setValue(_this.getValue() + diff * _this.__impliedStep);\n\n      prev_y = e.clientY;\n\n    }\n\n    function onMouseUp() {\n      dom.unbind(window, 'mousemove', onMouseDrag);\n      dom.unbind(window, 'mouseup', onMouseUp);\n    }\n\n    this.updateDisplay();\n\n    this.domElement.appendChild(this.__input);\n\n  };\n\n  NumberControllerBox.superclass = NumberController;\n\n  common.extend(\n\n      NumberControllerBox.prototype,\n      NumberController.prototype,\n\n      {\n\n        updateDisplay: function() {\n\n          this.__input.value = this.__truncationSuspended ? this.getValue() : roundToDecimal(this.getValue(), this.__precision);\n          return NumberControllerBox.superclass.prototype.updateDisplay.call(this);\n        }\n\n      }\n\n  );\n\n  function roundToDecimal(value, decimals) {\n    var tenTo = Math.pow(10, decimals);\n    return Math.round(value * tenTo) / tenTo;\n  }\n\n  return NumberControllerBox;\n\n})(dat.controllers.NumberController,\ndat.dom.dom,\ndat.utils.common);\n\n\ndat.controllers.NumberControllerSlider = (function (NumberController, dom, css, common, styleSheet) {\n\n  /**\n   * @class Represents a given property of an object that is a number, contains\n   * a minimum and maximum, and provides a slider element with which to\n   * manipulate it. It should be noted that the slider element is made up of\n   * <code>&lt;div&gt;</code> tags, <strong>not</strong> the html5\n   * <code>&lt;slider&gt;</code> element.\n   *\n   * @extends dat.controllers.Controller\n   * @extends dat.controllers.NumberController\n   * \n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   * @param {Number} minValue Minimum allowed value\n   * @param {Number} maxValue Maximum allowed value\n   * @param {Number} stepValue Increment by which to change value\n   *\n   * @member dat.controllers\n   */\n  var NumberControllerSlider = function(object, property, min, max, step) {\n\n    NumberControllerSlider.superclass.call(this, object, property, { min: min, max: max, step: step });\n\n    var _this = this;\n\n    this.__background = document.createElement('div');\n    this.__foreground = document.createElement('div');\n    \n\n\n    dom.bind(this.__background, 'mousedown', onMouseDown);\n    \n    dom.addClass(this.__background, 'slider');\n    dom.addClass(this.__foreground, 'slider-fg');\n\n    function onMouseDown(e) {\n\n      dom.bind(window, 'mousemove', onMouseDrag);\n      dom.bind(window, 'mouseup', onMouseUp);\n\n      onMouseDrag(e);\n    }\n\n    function onMouseDrag(e) {\n\n      e.preventDefault();\n\n      var offset = dom.getOffset(_this.__background);\n      var width = dom.getWidth(_this.__background);\n      \n      _this.setValue(\n        map(e.clientX, offset.left, offset.left + width, _this.__min, _this.__max)\n      );\n\n      return false;\n\n    }\n\n    function onMouseUp() {\n      dom.unbind(window, 'mousemove', onMouseDrag);\n      dom.unbind(window, 'mouseup', onMouseUp);\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n\n    this.updateDisplay();\n\n    this.__background.appendChild(this.__foreground);\n    this.domElement.appendChild(this.__background);\n\n  };\n\n  NumberControllerSlider.superclass = NumberController;\n\n  /**\n   * Injects default stylesheet for slider elements.\n   */\n  NumberControllerSlider.useDefaultStyles = function() {\n    css.inject(styleSheet);\n  };\n\n  common.extend(\n\n      NumberControllerSlider.prototype,\n      NumberController.prototype,\n\n      {\n\n        updateDisplay: function() {\n          var pct = (this.getValue() - this.__min)/(this.__max - this.__min);\n          this.__foreground.style.width = pct*100+'%';\n          return NumberControllerSlider.superclass.prototype.updateDisplay.call(this);\n        }\n\n      }\n\n\n\n  );\n\n  function map(v, i1, i2, o1, o2) {\n    return o1 + (o2 - o1) * ((v - i1) / (i2 - i1));\n  }\n\n  return NumberControllerSlider;\n  \n})(dat.controllers.NumberController,\ndat.dom.dom,\ndat.utils.css,\ndat.utils.common,\n\".slider {\\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\\n  height: 1em;\\n  border-radius: 1em;\\n  background-color: #eee;\\n  padding: 0 0.5em;\\n  overflow: hidden;\\n}\\n\\n.slider-fg {\\n  padding: 1px 0 2px 0;\\n  background-color: #aaa;\\n  height: 1em;\\n  margin-left: -0.5em;\\n  padding-right: 0.5em;\\n  border-radius: 1em 0 0 1em;\\n}\\n\\n.slider-fg:after {\\n  display: inline-block;\\n  border-radius: 1em;\\n  background-color: #fff;\\n  border:  1px solid #aaa;\\n  content: '';\\n  float: right;\\n  margin-right: -1em;\\n  margin-top: -1px;\\n  height: 0.9em;\\n  width: 0.9em;\\n}\");\n\n\ndat.controllers.FunctionController = (function (Controller, dom, common) {\n\n  /**\n   * @class Provides a GUI interface to fire a specified method, a property of an object.\n   *\n   * @extends dat.controllers.Controller\n   *\n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   *\n   * @member dat.controllers\n   */\n  var FunctionController = function(object, property, text) {\n\n    FunctionController.superclass.call(this, object, property);\n\n    var _this = this;\n\n    this.__button = document.createElement('div');\n    this.__button.innerHTML = text === undefined ? 'Fire' : text;\n    dom.bind(this.__button, 'click', function(e) {\n      e.preventDefault();\n      _this.fire();\n      return false;\n    });\n\n    dom.addClass(this.__button, 'button');\n\n    this.domElement.appendChild(this.__button);\n\n\n  };\n\n  FunctionController.superclass = Controller;\n\n  common.extend(\n\n      FunctionController.prototype,\n      Controller.prototype,\n      {\n        \n        fire: function() {\n          if (this.__onChange) {\n            this.__onChange.call(this);\n          }\n          if (this.__onFinishChange) {\n            this.__onFinishChange.call(this, this.getValue());\n          }\n          this.getValue().call(this.object);\n        }\n      }\n\n  );\n\n  return FunctionController;\n\n})(dat.controllers.Controller,\ndat.dom.dom,\ndat.utils.common);\n\n\ndat.controllers.BooleanController = (function (Controller, dom, common) {\n\n  /**\n   * @class Provides a checkbox input to alter the boolean property of an object.\n   * @extends dat.controllers.Controller\n   *\n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   *\n   * @member dat.controllers\n   */\n  var BooleanController = function(object, property) {\n\n    BooleanController.superclass.call(this, object, property);\n\n    var _this = this;\n    this.__prev = this.getValue();\n\n    this.__checkbox = document.createElement('input');\n    this.__checkbox.setAttribute('type', 'checkbox');\n\n\n    dom.bind(this.__checkbox, 'change', onChange, false);\n\n    this.domElement.appendChild(this.__checkbox);\n\n    // Match original value\n    this.updateDisplay();\n\n    function onChange() {\n      _this.setValue(!_this.__prev);\n    }\n\n  };\n\n  BooleanController.superclass = Controller;\n\n  common.extend(\n\n      BooleanController.prototype,\n      Controller.prototype,\n\n      {\n\n        setValue: function(v) {\n          var toReturn = BooleanController.superclass.prototype.setValue.call(this, v);\n          if (this.__onFinishChange) {\n            this.__onFinishChange.call(this, this.getValue());\n          }\n          this.__prev = this.getValue();\n          return toReturn;\n        },\n\n        updateDisplay: function() {\n          \n          if (this.getValue() === true) {\n            this.__checkbox.setAttribute('checked', 'checked');\n            this.__checkbox.checked = true;    \n          } else {\n              this.__checkbox.checked = false;\n          }\n\n          return BooleanController.superclass.prototype.updateDisplay.call(this);\n\n        }\n\n\n      }\n\n  );\n\n  return BooleanController;\n\n})(dat.controllers.Controller,\ndat.dom.dom,\ndat.utils.common);\n\n\ndat.color.toString = (function (common) {\n\n  return function(color) {\n\n    if (color.a == 1 || common.isUndefined(color.a)) {\n\n      var s = color.hex.toString(16);\n      while (s.length < 6) {\n        s = '0' + s;\n      }\n\n      return '#' + s;\n\n    } else {\n\n      return 'rgba(' + Math.round(color.r) + ',' + Math.round(color.g) + ',' + Math.round(color.b) + ',' + color.a + ')';\n\n    }\n\n  }\n\n})(dat.utils.common);\n\n\ndat.color.interpret = (function (toString, common) {\n\n  var result, toReturn;\n\n  var interpret = function() {\n\n    toReturn = false;\n\n    var original = arguments.length > 1 ? common.toArray(arguments) : arguments[0];\n\n    common.each(INTERPRETATIONS, function(family) {\n\n      if (family.litmus(original)) {\n\n        common.each(family.conversions, function(conversion, conversionName) {\n\n          result = conversion.read(original);\n\n          if (toReturn === false && result !== false) {\n            toReturn = result;\n            result.conversionName = conversionName;\n            result.conversion = conversion;\n            return common.BREAK;\n\n          }\n\n        });\n\n        return common.BREAK;\n\n      }\n\n    });\n\n    return toReturn;\n\n  };\n\n  var INTERPRETATIONS = [\n\n    // Strings\n    {\n\n      litmus: common.isString,\n\n      conversions: {\n\n        THREE_CHAR_HEX: {\n\n          read: function(original) {\n\n            var test = original.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);\n            if (test === null) return false;\n\n            return {\n              space: 'HEX',\n              hex: parseInt(\n                  '0x' +\n                      test[1].toString() + test[1].toString() +\n                      test[2].toString() + test[2].toString() +\n                      test[3].toString() + test[3].toString())\n            };\n\n          },\n\n          write: toString\n\n        },\n\n        SIX_CHAR_HEX: {\n\n          read: function(original) {\n\n            var test = original.match(/^#([A-F0-9]{6})$/i);\n            if (test === null) return false;\n\n            return {\n              space: 'HEX',\n              hex: parseInt('0x' + test[1].toString())\n            };\n\n          },\n\n          write: toString\n\n        },\n\n        CSS_RGB: {\n\n          read: function(original) {\n\n            var test = original.match(/^rgb\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/);\n            if (test === null) return false;\n\n            return {\n              space: 'RGB',\n              r: parseFloat(test[1]),\n              g: parseFloat(test[2]),\n              b: parseFloat(test[3])\n            };\n\n          },\n\n          write: toString\n\n        },\n\n        CSS_RGBA: {\n\n          read: function(original) {\n\n            var test = original.match(/^rgba\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\,\\s*(.+)\\s*\\)/);\n            if (test === null) return false;\n\n            return {\n              space: 'RGB',\n              r: parseFloat(test[1]),\n              g: parseFloat(test[2]),\n              b: parseFloat(test[3]),\n              a: parseFloat(test[4])\n            };\n\n          },\n\n          write: toString\n\n        }\n\n      }\n\n    },\n\n    // Numbers\n    {\n\n      litmus: common.isNumber,\n\n      conversions: {\n\n        HEX: {\n          read: function(original) {\n            return {\n              space: 'HEX',\n              hex: original,\n              conversionName: 'HEX'\n            }\n          },\n\n          write: function(color) {\n            return color.hex;\n          }\n        }\n\n      }\n\n    },\n\n    // Arrays\n    {\n\n      litmus: common.isArray,\n\n      conversions: {\n\n        RGB_ARRAY: {\n          read: function(original) {\n            if (original.length != 3) return false;\n            return {\n              space: 'RGB',\n              r: original[0],\n              g: original[1],\n              b: original[2]\n            };\n          },\n\n          write: function(color) {\n            return [color.r, color.g, color.b];\n          }\n\n        },\n\n        RGBA_ARRAY: {\n          read: function(original) {\n            if (original.length != 4) return false;\n            return {\n              space: 'RGB',\n              r: original[0],\n              g: original[1],\n              b: original[2],\n              a: original[3]\n            };\n          },\n\n          write: function(color) {\n            return [color.r, color.g, color.b, color.a];\n          }\n\n        }\n\n      }\n\n    },\n\n    // Objects\n    {\n\n      litmus: common.isObject,\n\n      conversions: {\n\n        RGBA_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.r) &&\n                common.isNumber(original.g) &&\n                common.isNumber(original.b) &&\n                common.isNumber(original.a)) {\n              return {\n                space: 'RGB',\n                r: original.r,\n                g: original.g,\n                b: original.b,\n                a: original.a\n              }\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              r: color.r,\n              g: color.g,\n              b: color.b,\n              a: color.a\n            }\n          }\n        },\n\n        RGB_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.r) &&\n                common.isNumber(original.g) &&\n                common.isNumber(original.b)) {\n              return {\n                space: 'RGB',\n                r: original.r,\n                g: original.g,\n                b: original.b\n              }\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              r: color.r,\n              g: color.g,\n              b: color.b\n            }\n          }\n        },\n\n        HSVA_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.h) &&\n                common.isNumber(original.s) &&\n                common.isNumber(original.v) &&\n                common.isNumber(original.a)) {\n              return {\n                space: 'HSV',\n                h: original.h,\n                s: original.s,\n                v: original.v,\n                a: original.a\n              }\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              h: color.h,\n              s: color.s,\n              v: color.v,\n              a: color.a\n            }\n          }\n        },\n\n        HSV_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.h) &&\n                common.isNumber(original.s) &&\n                common.isNumber(original.v)) {\n              return {\n                space: 'HSV',\n                h: original.h,\n                s: original.s,\n                v: original.v\n              }\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              h: color.h,\n              s: color.s,\n              v: color.v\n            }\n          }\n\n        }\n\n      }\n\n    }\n\n\n  ];\n\n  return interpret;\n\n\n})(dat.color.toString,\ndat.utils.common);\n\n\ndat.GUI = dat.gui.GUI = (function (css, saveDialogueContents, styleSheet, controllerFactory, Controller, BooleanController, FunctionController, NumberControllerBox, NumberControllerSlider, OptionController, ColorController, requestAnimationFrame, CenteredDiv, dom, common) {\n\n  css.inject(styleSheet);\n\n  /** Outer-most className for GUI's */\n  var CSS_NAMESPACE = 'dg';\n\n  var HIDE_KEY_CODE = 72;\n\n  /** The only value shared between the JS and SCSS. Use caution. */\n  var CLOSE_BUTTON_HEIGHT = 20;\n\n  var DEFAULT_DEFAULT_PRESET_NAME = 'Default';\n\n  var SUPPORTS_LOCAL_STORAGE = (function() {\n    try {\n      return 'localStorage' in window && window['localStorage'] !== null;\n    } catch (e) {\n      return false;\n    }\n  })();\n\n  var SAVE_DIALOGUE;\n\n  /** Have we yet to create an autoPlace GUI? */\n  var auto_place_virgin = true;\n\n  /** Fixed position div that auto place GUI's go inside */\n  var auto_place_container;\n\n  /** Are we hiding the GUI's ? */\n  var hide = false;\n\n  /** GUI's which should be hidden */\n  var hideable_guis = [];\n\n  /**\n   * A lightweight controller library for JavaScript. It allows you to easily\n   * manipulate variables and fire functions on the fly.\n   * @class\n   *\n   * @member dat.gui\n   *\n   * @param {Object} [params]\n   * @param {String} [params.name] The name of this GUI.\n   * @param {Object} [params.load] JSON object representing the saved state of\n   * this GUI.\n   * @param {Boolean} [params.auto=true]\n   * @param {dat.gui.GUI} [params.parent] The GUI I'm nested in.\n   * @param {Boolean} [params.closed] If true, starts closed\n   */\n  var GUI = function(params) {\n\n    var _this = this;\n\n    /**\n     * Outermost DOM Element\n     * @type DOMElement\n     */\n    this.domElement = document.createElement('div');\n    this.__ul = document.createElement('ul');\n    this.domElement.appendChild(this.__ul);\n\n    dom.addClass(this.domElement, CSS_NAMESPACE);\n\n    /**\n     * Nested GUI's by name\n     * @ignore\n     */\n    this.__folders = {};\n\n    this.__controllers = [];\n\n    /**\n     * List of objects I'm remembering for save, only used in top level GUI\n     * @ignore\n     */\n    this.__rememberedObjects = [];\n\n    /**\n     * Maps the index of remembered objects to a map of controllers, only used\n     * in top level GUI.\n     *\n     * @private\n     * @ignore\n     *\n     * @example\n     * [\n     *  {\n     *    propertyName: Controller,\n     *    anotherPropertyName: Controller\n     *  },\n     *  {\n     *    propertyName: Controller\n     *  }\n     * ]\n     */\n    this.__rememberedObjectIndecesToControllers = [];\n\n    this.__listening = [];\n\n    params = params || {};\n\n    // Default parameters\n    params = common.defaults(params, {\n      autoPlace: true,\n      width: GUI.DEFAULT_WIDTH\n    });\n\n    params = common.defaults(params, {\n      resizable: params.autoPlace,\n      hideable: params.autoPlace\n    });\n\n\n    if (!common.isUndefined(params.load)) {\n\n      // Explicit preset\n      if (params.preset) params.load.preset = params.preset;\n\n    } else {\n\n      params.load = { preset: DEFAULT_DEFAULT_PRESET_NAME };\n\n    }\n\n    if (common.isUndefined(params.parent) && params.hideable) {\n      hideable_guis.push(this);\n    }\n\n    // Only root level GUI's are resizable.\n    params.resizable = common.isUndefined(params.parent) && params.resizable;\n\n\n    if (params.autoPlace && common.isUndefined(params.scrollable)) {\n      params.scrollable = true;\n    }\n//    params.scrollable = common.isUndefined(params.parent) && params.scrollable === true;\n\n    // Not part of params because I don't want people passing this in via\n    // constructor. Should be a 'remembered' value.\n    var use_local_storage =\n        SUPPORTS_LOCAL_STORAGE &&\n            localStorage.getItem(getLocalStorageHash(this, 'isLocal')) === 'true';\n\n    Object.defineProperties(this,\n\n        /** @lends dat.gui.GUI.prototype */\n        {\n\n          /**\n           * The parent <code>GUI</code>\n           * @type dat.gui.GUI\n           */\n          parent: {\n            get: function() {\n              return params.parent;\n            }\n          },\n\n          scrollable: {\n            get: function() {\n              return params.scrollable;\n            }\n          },\n\n          /**\n           * Handles <code>GUI</code>'s element placement for you\n           * @type Boolean\n           */\n          autoPlace: {\n            get: function() {\n              return params.autoPlace;\n            }\n          },\n\n          /**\n           * The identifier for a set of saved values\n           * @type String\n           */\n          preset: {\n\n            get: function() {\n              if (_this.parent) {\n                return _this.getRoot().preset;\n              } else {\n                return params.load.preset;\n              }\n            },\n\n            set: function(v) {\n              if (_this.parent) {\n                _this.getRoot().preset = v;\n              } else {\n                params.load.preset = v;\n              }\n              setPresetSelectIndex(this);\n              _this.revert();\n            }\n\n          },\n\n          /**\n           * The width of <code>GUI</code> element\n           * @type Number\n           */\n          width: {\n            get: function() {\n              return params.width;\n            },\n            set: function(v) {\n              params.width = v;\n              setWidth(_this, v);\n            }\n          },\n\n          /**\n           * The name of <code>GUI</code>. Used for folders. i.e\n           * a folder's name\n           * @type String\n           */\n          name: {\n            get: function() {\n              return params.name;\n            },\n            set: function(v) {\n              // TODO Check for collisions among sibling folders\n              params.name = v;\n              if (title_row_name) {\n                title_row_name.innerHTML = params.name;\n              }\n            }\n          },\n\n          /**\n           * Whether the <code>GUI</code> is collapsed or not\n           * @type Boolean\n           */\n          closed: {\n            get: function() {\n              return params.closed;\n            },\n            set: function(v) {\n              params.closed = v;\n              if (params.closed) {\n                dom.addClass(_this.__ul, GUI.CLASS_CLOSED);\n              } else {\n                dom.removeClass(_this.__ul, GUI.CLASS_CLOSED);\n              }\n              // For browsers that aren't going to respect the CSS transition,\n              // Lets just check our height against the window height right off\n              // the bat.\n              this.onResize();\n\n              if (_this.__closeButton) {\n                _this.__closeButton.innerHTML = v ? GUI.TEXT_OPEN : GUI.TEXT_CLOSED;\n              }\n            }\n          },\n\n          /**\n           * Contains all presets\n           * @type Object\n           */\n          load: {\n            get: function() {\n              return params.load;\n            }\n          },\n\n          /**\n           * Determines whether or not to use <a href=\"https://developer.mozilla.org/en/DOM/Storage#localStorage\">localStorage</a> as the means for\n           * <code>remember</code>ing\n           * @type Boolean\n           */\n          useLocalStorage: {\n\n            get: function() {\n              return use_local_storage;\n            },\n            set: function(bool) {\n              if (SUPPORTS_LOCAL_STORAGE) {\n                use_local_storage = bool;\n                if (bool) {\n                  dom.bind(window, 'unload', saveToLocalStorage);\n                } else {\n                  dom.unbind(window, 'unload', saveToLocalStorage);\n                }\n                localStorage.setItem(getLocalStorageHash(_this, 'isLocal'), bool);\n              }\n            }\n\n          }\n\n        });\n\n    // Are we a root level GUI?\n    if (common.isUndefined(params.parent)) {\n\n      params.closed = false;\n\n      dom.addClass(this.domElement, GUI.CLASS_MAIN);\n      dom.makeSelectable(this.domElement, false);\n\n      // Are we supposed to be loading locally?\n      if (SUPPORTS_LOCAL_STORAGE) {\n\n        if (use_local_storage) {\n\n          _this.useLocalStorage = true;\n\n          var saved_gui = localStorage.getItem(getLocalStorageHash(this, 'gui'));\n\n          if (saved_gui) {\n            params.load = JSON.parse(saved_gui);\n          }\n\n        }\n\n      }\n\n      this.__closeButton = document.createElement('div');\n      this.__closeButton.innerHTML = GUI.TEXT_CLOSED;\n      dom.addClass(this.__closeButton, GUI.CLASS_CLOSE_BUTTON);\n      this.domElement.appendChild(this.__closeButton);\n\n      dom.bind(this.__closeButton, 'click', function() {\n\n        _this.closed = !_this.closed;\n\n\n      });\n\n\n      // Oh, you're a nested GUI!\n    } else {\n\n      if (params.closed === undefined) {\n        params.closed = true;\n      }\n\n      var title_row_name = document.createTextNode(params.name);\n      dom.addClass(title_row_name, 'controller-name');\n\n      var title_row = addRow(_this, title_row_name);\n\n      var on_click_title = function(e) {\n        e.preventDefault();\n        _this.closed = !_this.closed;\n        return false;\n      };\n\n      dom.addClass(this.__ul, GUI.CLASS_CLOSED);\n\n      dom.addClass(title_row, 'title');\n      dom.bind(title_row, 'click', on_click_title);\n\n      if (!params.closed) {\n        this.closed = false;\n      }\n\n    }\n\n    if (params.autoPlace) {\n\n      if (common.isUndefined(params.parent)) {\n\n        if (auto_place_virgin) {\n          auto_place_container = document.createElement('div');\n          dom.addClass(auto_place_container, CSS_NAMESPACE);\n          dom.addClass(auto_place_container, GUI.CLASS_AUTO_PLACE_CONTAINER);\n          document.body.appendChild(auto_place_container);\n          auto_place_virgin = false;\n        }\n\n        // Put it in the dom for you.\n        auto_place_container.appendChild(this.domElement);\n\n        // Apply the auto styles\n        dom.addClass(this.domElement, GUI.CLASS_AUTO_PLACE);\n\n      }\n\n\n      // Make it not elastic.\n      if (!this.parent) setWidth(_this, params.width);\n\n    }\n\n    dom.bind(window, 'resize', function() { _this.onResize() });\n    dom.bind(this.__ul, 'webkitTransitionEnd', function() { _this.onResize(); });\n    dom.bind(this.__ul, 'transitionend', function() { _this.onResize() });\n    dom.bind(this.__ul, 'oTransitionEnd', function() { _this.onResize() });\n    this.onResize();\n\n\n    if (params.resizable) {\n      addResizeHandle(this);\n    }\n\n    function saveToLocalStorage() {\n      localStorage.setItem(getLocalStorageHash(_this, 'gui'), JSON.stringify(_this.getSaveObject()));\n    }\n\n    var root = _this.getRoot();\n    function resetWidth() {\n        var root = _this.getRoot();\n        root.width += 1;\n        common.defer(function() {\n          root.width -= 1;\n        });\n      }\n\n      if (!params.parent) {\n        resetWidth();\n      }\n\n  };\n\n  GUI.toggleHide = function() {\n\n    hide = !hide;\n    common.each(hideable_guis, function(gui) {\n      gui.domElement.style.zIndex = hide ? -999 : 999;\n      gui.domElement.style.opacity = hide ? 0 : 1;\n    });\n  };\n\n  GUI.CLASS_AUTO_PLACE = 'a';\n  GUI.CLASS_AUTO_PLACE_CONTAINER = 'ac';\n  GUI.CLASS_MAIN = 'main';\n  GUI.CLASS_CONTROLLER_ROW = 'cr';\n  GUI.CLASS_TOO_TALL = 'taller-than-window';\n  GUI.CLASS_CLOSED = 'closed';\n  GUI.CLASS_CLOSE_BUTTON = 'close-button';\n  GUI.CLASS_DRAG = 'drag';\n\n  GUI.DEFAULT_WIDTH = 245;\n  GUI.TEXT_CLOSED = 'Close Controls';\n  GUI.TEXT_OPEN = 'Open Controls';\n\n  dom.bind(window, 'keydown', function(e) {\n\n    if (document.activeElement.type !== 'text' &&\n        (e.which === HIDE_KEY_CODE || e.keyCode == HIDE_KEY_CODE)) {\n      GUI.toggleHide();\n    }\n\n  }, false);\n\n  common.extend(\n\n      GUI.prototype,\n\n      /** @lends dat.gui.GUI */\n      {\n\n        /**\n         * @param object\n         * @param property\n         * @returns {dat.controllers.Controller} The new controller that was added.\n         * @instance\n         */\n        add: function(object, property) {\n\n          return add(\n              this,\n              object,\n              property,\n              {\n                factoryArgs: Array.prototype.slice.call(arguments, 2)\n              }\n          );\n\n        },\n\n        /**\n         * @param object\n         * @param property\n         * @returns {dat.controllers.ColorController} The new controller that was added.\n         * @instance\n         */\n        addColor: function(object, property) {\n\n          return add(\n              this,\n              object,\n              property,\n              {\n                color: true\n              }\n          );\n\n        },\n\n        /**\n         * @param controller\n         * @instance\n         */\n        remove: function(controller) {\n\n          // TODO listening?\n          this.__ul.removeChild(controller.__li);\n          this.__controllers.slice(this.__controllers.indexOf(controller), 1);\n          var _this = this;\n          common.defer(function() {\n            _this.onResize();\n          });\n\n        },\n\n        destroy: function() {\n\n          if (this.autoPlace) {\n            auto_place_container.removeChild(this.domElement);\n          }\n\n        },\n\n        /**\n         * @param name\n         * @returns {dat.gui.GUI} The new folder.\n         * @throws {Error} if this GUI already has a folder by the specified\n         * name\n         * @instance\n         */\n        addFolder: function(name) {\n\n          // We have to prevent collisions on names in order to have a key\n          // by which to remember saved values\n          if (this.__folders[name] !== undefined) {\n            throw new Error('You already have a folder in this GUI by the' +\n                ' name \"' + name + '\"');\n          }\n\n          var new_gui_params = { name: name, parent: this };\n\n          // We need to pass down the autoPlace trait so that we can\n          // attach event listeners to open/close folder actions to\n          // ensure that a scrollbar appears if the window is too short.\n          new_gui_params.autoPlace = this.autoPlace;\n\n          // Do we have saved appearance data for this folder?\n\n          if (this.load && // Anything loaded?\n              this.load.folders && // Was my parent a dead-end?\n              this.load.folders[name]) { // Did daddy remember me?\n\n            // Start me closed if I was closed\n            new_gui_params.closed = this.load.folders[name].closed;\n\n            // Pass down the loaded data\n            new_gui_params.load = this.load.folders[name];\n\n          }\n\n          var gui = new GUI(new_gui_params);\n          this.__folders[name] = gui;\n\n          var li = addRow(this, gui.domElement);\n          dom.addClass(li, 'folder');\n          return gui;\n\n        },\n\n        open: function() {\n          this.closed = false;\n        },\n\n        close: function() {\n          this.closed = true;\n        },\n\n        onResize: function() {\n\n          var root = this.getRoot();\n\n          if (root.scrollable) {\n\n            var top = dom.getOffset(root.__ul).top;\n            var h = 0;\n\n            common.each(root.__ul.childNodes, function(node) {\n              if (! (root.autoPlace && node === root.__save_row))\n                h += dom.getHeight(node);\n            });\n\n            if (window.innerHeight - top - CLOSE_BUTTON_HEIGHT < h) {\n              dom.addClass(root.domElement, GUI.CLASS_TOO_TALL);\n              root.__ul.style.height = window.innerHeight - top - CLOSE_BUTTON_HEIGHT + 'px';\n            } else {\n              dom.removeClass(root.domElement, GUI.CLASS_TOO_TALL);\n              root.__ul.style.height = 'auto';\n            }\n\n          }\n\n          if (root.__resize_handle) {\n            common.defer(function() {\n              root.__resize_handle.style.height = root.__ul.offsetHeight + 'px';\n            });\n          }\n\n          if (root.__closeButton) {\n            root.__closeButton.style.width = root.width + 'px';\n          }\n\n        },\n\n        /**\n         * Mark objects for saving. The order of these objects cannot change as\n         * the GUI grows. When remembering new objects, append them to the end\n         * of the list.\n         *\n         * @param {Object...} objects\n         * @throws {Error} if not called on a top level GUI.\n         * @instance\n         */\n        remember: function() {\n\n          if (common.isUndefined(SAVE_DIALOGUE)) {\n            SAVE_DIALOGUE = new CenteredDiv();\n            SAVE_DIALOGUE.domElement.innerHTML = saveDialogueContents;\n          }\n\n          if (this.parent) {\n            throw new Error(\"You can only call remember on a top level GUI.\");\n          }\n\n          var _this = this;\n\n          common.each(Array.prototype.slice.call(arguments), function(object) {\n            if (_this.__rememberedObjects.length == 0) {\n              addSaveMenu(_this);\n            }\n            if (_this.__rememberedObjects.indexOf(object) == -1) {\n              _this.__rememberedObjects.push(object);\n            }\n          });\n\n          if (this.autoPlace) {\n            // Set save row width\n            setWidth(this, this.width);\n          }\n\n        },\n\n        /**\n         * @returns {dat.gui.GUI} the topmost parent GUI of a nested GUI.\n         * @instance\n         */\n        getRoot: function() {\n          var gui = this;\n          while (gui.parent) {\n            gui = gui.parent;\n          }\n          return gui;\n        },\n\n        /**\n         * @returns {Object} a JSON object representing the current state of\n         * this GUI as well as its remembered properties.\n         * @instance\n         */\n        getSaveObject: function() {\n\n          var toReturn = this.load;\n\n          toReturn.closed = this.closed;\n\n          // Am I remembering any values?\n          if (this.__rememberedObjects.length > 0) {\n\n            toReturn.preset = this.preset;\n\n            if (!toReturn.remembered) {\n              toReturn.remembered = {};\n            }\n\n            toReturn.remembered[this.preset] = getCurrentPreset(this);\n\n          }\n\n          toReturn.folders = {};\n          common.each(this.__folders, function(element, key) {\n            toReturn.folders[key] = element.getSaveObject();\n          });\n\n          return toReturn;\n\n        },\n\n        save: function() {\n\n          if (!this.load.remembered) {\n            this.load.remembered = {};\n          }\n\n          this.load.remembered[this.preset] = getCurrentPreset(this);\n          markPresetModified(this, false);\n\n        },\n\n        saveAs: function(presetName) {\n\n          if (!this.load.remembered) {\n\n            // Retain default values upon first save\n            this.load.remembered = {};\n            this.load.remembered[DEFAULT_DEFAULT_PRESET_NAME] = getCurrentPreset(this, true);\n\n          }\n\n          this.load.remembered[presetName] = getCurrentPreset(this);\n          this.preset = presetName;\n          addPresetOption(this, presetName, true);\n\n        },\n\n        revert: function(gui) {\n\n          common.each(this.__controllers, function(controller) {\n            // Make revert work on Default.\n            if (!this.getRoot().load.remembered) {\n              controller.setValue(controller.initialValue);\n            } else {\n              recallSavedValue(gui || this.getRoot(), controller);\n            }\n          }, this);\n\n          common.each(this.__folders, function(folder) {\n            folder.revert(folder);\n          });\n\n          if (!gui) {\n            markPresetModified(this.getRoot(), false);\n          }\n\n\n        },\n\n        listen: function(controller) {\n\n          var init = this.__listening.length == 0;\n          this.__listening.push(controller);\n          if (init) updateDisplays(this.__listening);\n\n        }\n\n      }\n\n  );\n\n  function add(gui, object, property, params) {\n\n    if (object[property] === undefined) {\n      throw new Error(\"Object \" + object + \" has no property \\\"\" + property + \"\\\"\");\n    }\n\n    var controller;\n\n    if (params.color) {\n\n      controller = new ColorController(object, property);\n\n    } else {\n\n      var factoryArgs = [object,property].concat(params.factoryArgs);\n      controller = controllerFactory.apply(gui, factoryArgs);\n\n    }\n\n    if (params.before instanceof Controller) {\n      params.before = params.before.__li;\n    }\n\n    recallSavedValue(gui, controller);\n\n    dom.addClass(controller.domElement, 'c');\n\n    var name = document.createElement('span');\n    dom.addClass(name, 'property-name');\n    name.innerHTML = controller.property;\n\n    var container = document.createElement('div');\n    container.appendChild(name);\n    container.appendChild(controller.domElement);\n\n    var li = addRow(gui, container, params.before);\n\n    dom.addClass(li, GUI.CLASS_CONTROLLER_ROW);\n    dom.addClass(li, typeof controller.getValue());\n\n    augmentController(gui, li, controller);\n\n    gui.__controllers.push(controller);\n\n    return controller;\n\n  }\n\n  /**\n   * Add a row to the end of the GUI or before another row.\n   *\n   * @param gui\n   * @param [dom] If specified, inserts the dom content in the new row\n   * @param [liBefore] If specified, places the new row before another row\n   */\n  function addRow(gui, dom, liBefore) {\n    var li = document.createElement('li');\n    if (dom) li.appendChild(dom);\n    if (liBefore) {\n      gui.__ul.insertBefore(li, params.before);\n    } else {\n      gui.__ul.appendChild(li);\n    }\n    gui.onResize();\n    return li;\n  }\n\n  function augmentController(gui, li, controller) {\n\n    controller.__li = li;\n    controller.__gui = gui;\n\n    common.extend(controller, {\n\n      options: function(options) {\n\n        if (arguments.length > 1) {\n          controller.remove();\n\n          return add(\n              gui,\n              controller.object,\n              controller.property,\n              {\n                before: controller.__li.nextElementSibling,\n                factoryArgs: [common.toArray(arguments)]\n              }\n          );\n\n        }\n\n        if (common.isArray(options) || common.isObject(options)) {\n          controller.remove();\n\n          return add(\n              gui,\n              controller.object,\n              controller.property,\n              {\n                before: controller.__li.nextElementSibling,\n                factoryArgs: [options]\n              }\n          );\n\n        }\n\n      },\n\n      name: function(v) {\n        controller.__li.firstElementChild.firstElementChild.innerHTML = v;\n        return controller;\n      },\n\n      listen: function() {\n        controller.__gui.listen(controller);\n        return controller;\n      },\n\n      remove: function() {\n        controller.__gui.remove(controller);\n        return controller;\n      }\n\n    });\n\n    // All sliders should be accompanied by a box.\n    if (controller instanceof NumberControllerSlider) {\n\n      var box = new NumberControllerBox(controller.object, controller.property,\n          { min: controller.__min, max: controller.__max, step: controller.__step });\n\n      common.each(['updateDisplay', 'onChange', 'onFinishChange'], function(method) {\n        var pc = controller[method];\n        var pb = box[method];\n        controller[method] = box[method] = function() {\n          var args = Array.prototype.slice.call(arguments);\n          pc.apply(controller, args);\n          return pb.apply(box, args);\n        }\n      });\n\n      dom.addClass(li, 'has-slider');\n      controller.domElement.insertBefore(box.domElement, controller.domElement.firstElementChild);\n\n    }\n    else if (controller instanceof NumberControllerBox) {\n\n      var r = function(returned) {\n\n        // Have we defined both boundaries?\n        if (common.isNumber(controller.__min) && common.isNumber(controller.__max)) {\n\n          // Well, then lets just replace this with a slider.\n          controller.remove();\n          return add(\n              gui,\n              controller.object,\n              controller.property,\n              {\n                before: controller.__li.nextElementSibling,\n                factoryArgs: [controller.__min, controller.__max, controller.__step]\n              });\n\n        }\n\n        return returned;\n\n      };\n\n      controller.min = common.compose(r, controller.min);\n      controller.max = common.compose(r, controller.max);\n\n    }\n    else if (controller instanceof BooleanController) {\n\n      dom.bind(li, 'click', function() {\n        dom.fakeEvent(controller.__checkbox, 'click');\n      });\n\n      dom.bind(controller.__checkbox, 'click', function(e) {\n        e.stopPropagation(); // Prevents double-toggle\n      })\n\n    }\n    else if (controller instanceof FunctionController) {\n\n      dom.bind(li, 'click', function() {\n        dom.fakeEvent(controller.__button, 'click');\n      });\n\n      dom.bind(li, 'mouseover', function() {\n        dom.addClass(controller.__button, 'hover');\n      });\n\n      dom.bind(li, 'mouseout', function() {\n        dom.removeClass(controller.__button, 'hover');\n      });\n\n    }\n    else if (controller instanceof ColorController) {\n\n      dom.addClass(li, 'color');\n      controller.updateDisplay = common.compose(function(r) {\n        li.style.borderLeftColor = controller.__color.toString();\n        return r;\n      }, controller.updateDisplay);\n\n      controller.updateDisplay();\n\n    }\n\n    controller.setValue = common.compose(function(r) {\n      if (gui.getRoot().__preset_select && controller.isModified()) {\n        markPresetModified(gui.getRoot(), true);\n      }\n      return r;\n    }, controller.setValue);\n\n  }\n\n  function recallSavedValue(gui, controller) {\n\n    // Find the topmost GUI, that's where remembered objects live.\n    var root = gui.getRoot();\n\n    // Does the object we're controlling match anything we've been told to\n    // remember?\n    var matched_index = root.__rememberedObjects.indexOf(controller.object);\n\n    // Why yes, it does!\n    if (matched_index != -1) {\n\n      // Let me fetch a map of controllers for thcommon.isObject.\n      var controller_map =\n          root.__rememberedObjectIndecesToControllers[matched_index];\n\n      // Ohp, I believe this is the first controller we've created for this\n      // object. Lets make the map fresh.\n      if (controller_map === undefined) {\n        controller_map = {};\n        root.__rememberedObjectIndecesToControllers[matched_index] =\n            controller_map;\n      }\n\n      // Keep track of this controller\n      controller_map[controller.property] = controller;\n\n      // Okay, now have we saved any values for this controller?\n      if (root.load && root.load.remembered) {\n\n        var preset_map = root.load.remembered;\n\n        // Which preset are we trying to load?\n        var preset;\n\n        if (preset_map[gui.preset]) {\n\n          preset = preset_map[gui.preset];\n\n        } else if (preset_map[DEFAULT_DEFAULT_PRESET_NAME]) {\n\n          // Uhh, you can have the default instead?\n          preset = preset_map[DEFAULT_DEFAULT_PRESET_NAME];\n\n        } else {\n\n          // Nada.\n\n          return;\n\n        }\n\n\n        // Did the loaded object remember thcommon.isObject?\n        if (preset[matched_index] &&\n\n          // Did we remember this particular property?\n            preset[matched_index][controller.property] !== undefined) {\n\n          // We did remember something for this guy ...\n          var value = preset[matched_index][controller.property];\n\n          // And that's what it is.\n          controller.initialValue = value;\n          controller.setValue(value);\n\n        }\n\n      }\n\n    }\n\n  }\n\n  function getLocalStorageHash(gui, key) {\n    // TODO how does this deal with multiple GUI's?\n    return document.location.href + '.' + key;\n\n  }\n\n  function addSaveMenu(gui) {\n\n    var div = gui.__save_row = document.createElement('li');\n\n    dom.addClass(gui.domElement, 'has-save');\n\n    gui.__ul.insertBefore(div, gui.__ul.firstChild);\n\n    dom.addClass(div, 'save-row');\n\n    var gears = document.createElement('span');\n    gears.innerHTML = '&nbsp;';\n    dom.addClass(gears, 'button gears');\n\n    // TODO replace with FunctionController\n    var button = document.createElement('span');\n    button.innerHTML = 'Save';\n    dom.addClass(button, 'button');\n    dom.addClass(button, 'save');\n\n    var button2 = document.createElement('span');\n    button2.innerHTML = 'New';\n    dom.addClass(button2, 'button');\n    dom.addClass(button2, 'save-as');\n\n    var button3 = document.createElement('span');\n    button3.innerHTML = 'Revert';\n    dom.addClass(button3, 'button');\n    dom.addClass(button3, 'revert');\n\n    var select = gui.__preset_select = document.createElement('select');\n\n    if (gui.load && gui.load.remembered) {\n\n      common.each(gui.load.remembered, function(value, key) {\n        addPresetOption(gui, key, key == gui.preset);\n      });\n\n    } else {\n      addPresetOption(gui, DEFAULT_DEFAULT_PRESET_NAME, false);\n    }\n\n    dom.bind(select, 'change', function() {\n\n\n      for (var index = 0; index < gui.__preset_select.length; index++) {\n        gui.__preset_select[index].innerHTML = gui.__preset_select[index].value;\n      }\n\n      gui.preset = this.value;\n\n    });\n\n    div.appendChild(select);\n    div.appendChild(gears);\n    div.appendChild(button);\n    div.appendChild(button2);\n    div.appendChild(button3);\n\n    if (SUPPORTS_LOCAL_STORAGE) {\n\n      var saveLocally = document.getElementById('dg-save-locally');\n      var explain = document.getElementById('dg-local-explain');\n\n      saveLocally.style.display = 'block';\n\n      var localStorageCheckBox = document.getElementById('dg-local-storage');\n\n      if (localStorage.getItem(getLocalStorageHash(gui, 'isLocal')) === 'true') {\n        localStorageCheckBox.setAttribute('checked', 'checked');\n      }\n\n      function showHideExplain() {\n        explain.style.display = gui.useLocalStorage ? 'block' : 'none';\n      }\n\n      showHideExplain();\n\n      // TODO: Use a boolean controller, fool!\n      dom.bind(localStorageCheckBox, 'change', function() {\n        gui.useLocalStorage = !gui.useLocalStorage;\n        showHideExplain();\n      });\n\n    }\n\n    var newConstructorTextArea = document.getElementById('dg-new-constructor');\n\n    dom.bind(newConstructorTextArea, 'keydown', function(e) {\n      if (e.metaKey && (e.which === 67 || e.keyCode == 67)) {\n        SAVE_DIALOGUE.hide();\n      }\n    });\n\n    dom.bind(gears, 'click', function() {\n      newConstructorTextArea.innerHTML = JSON.stringify(gui.getSaveObject(), undefined, 2);\n      SAVE_DIALOGUE.show();\n      newConstructorTextArea.focus();\n      newConstructorTextArea.select();\n    });\n\n    dom.bind(button, 'click', function() {\n      gui.save();\n    });\n\n    dom.bind(button2, 'click', function() {\n      var presetName = prompt('Enter a new preset name.');\n      if (presetName) gui.saveAs(presetName);\n    });\n\n    dom.bind(button3, 'click', function() {\n      gui.revert();\n    });\n\n//    div.appendChild(button2);\n\n  }\n\n  function addResizeHandle(gui) {\n\n    gui.__resize_handle = document.createElement('div');\n\n    common.extend(gui.__resize_handle.style, {\n\n      width: '6px',\n      marginLeft: '-3px',\n      height: '200px',\n      cursor: 'ew-resize',\n      position: 'absolute'\n//      border: '1px solid blue'\n\n    });\n\n    var pmouseX;\n\n    dom.bind(gui.__resize_handle, 'mousedown', dragStart);\n    dom.bind(gui.__closeButton, 'mousedown', dragStart);\n\n    gui.domElement.insertBefore(gui.__resize_handle, gui.domElement.firstElementChild);\n\n    function dragStart(e) {\n\n      e.preventDefault();\n\n      pmouseX = e.clientX;\n\n      dom.addClass(gui.__closeButton, GUI.CLASS_DRAG);\n      dom.bind(window, 'mousemove', drag);\n      dom.bind(window, 'mouseup', dragStop);\n\n      return false;\n\n    }\n\n    function drag(e) {\n\n      e.preventDefault();\n\n      gui.width += pmouseX - e.clientX;\n      gui.onResize();\n      pmouseX = e.clientX;\n\n      return false;\n\n    }\n\n    function dragStop() {\n\n      dom.removeClass(gui.__closeButton, GUI.CLASS_DRAG);\n      dom.unbind(window, 'mousemove', drag);\n      dom.unbind(window, 'mouseup', dragStop);\n\n    }\n\n  }\n\n  function setWidth(gui, w) {\n    gui.domElement.style.width = w + 'px';\n    // Auto placed save-rows are position fixed, so we have to\n    // set the width manually if we want it to bleed to the edge\n    if (gui.__save_row && gui.autoPlace) {\n      gui.__save_row.style.width = w + 'px';\n    }if (gui.__closeButton) {\n      gui.__closeButton.style.width = w + 'px';\n    }\n  }\n\n  function getCurrentPreset(gui, useInitialValues) {\n\n    var toReturn = {};\n\n    // For each object I'm remembering\n    common.each(gui.__rememberedObjects, function(val, index) {\n\n      var saved_values = {};\n\n      // The controllers I've made for thcommon.isObject by property\n      var controller_map =\n          gui.__rememberedObjectIndecesToControllers[index];\n\n      // Remember each value for each property\n      common.each(controller_map, function(controller, property) {\n        saved_values[property] = useInitialValues ? controller.initialValue : controller.getValue();\n      });\n\n      // Save the values for thcommon.isObject\n      toReturn[index] = saved_values;\n\n    });\n\n    return toReturn;\n\n  }\n\n  function addPresetOption(gui, name, setSelected) {\n    var opt = document.createElement('option');\n    opt.innerHTML = name;\n    opt.value = name;\n    gui.__preset_select.appendChild(opt);\n    if (setSelected) {\n      gui.__preset_select.selectedIndex = gui.__preset_select.length - 1;\n    }\n  }\n\n  function setPresetSelectIndex(gui) {\n    for (var index = 0; index < gui.__preset_select.length; index++) {\n      if (gui.__preset_select[index].value == gui.preset) {\n        gui.__preset_select.selectedIndex = index;\n      }\n    }\n  }\n\n  function markPresetModified(gui, modified) {\n    var opt = gui.__preset_select[gui.__preset_select.selectedIndex];\n//    console.log('mark', modified, opt);\n    if (modified) {\n      opt.innerHTML = opt.value + \"*\";\n    } else {\n      opt.innerHTML = opt.value;\n    }\n  }\n\n  function updateDisplays(controllerArray) {\n\n\n    if (controllerArray.length != 0) {\n\n      requestAnimationFrame(function() {\n        updateDisplays(controllerArray);\n      });\n\n    }\n\n    common.each(controllerArray, function(c) {\n      c.updateDisplay();\n    });\n\n  }\n\n  return GUI;\n\n})(dat.utils.css,\n\"<div id=\\\"dg-save\\\" class=\\\"dg dialogue\\\">\\n\\n  Here's the new load parameter for your <code>GUI</code>'s constructor:\\n\\n  <textarea id=\\\"dg-new-constructor\\\"></textarea>\\n\\n  <div id=\\\"dg-save-locally\\\">\\n\\n    <input id=\\\"dg-local-storage\\\" type=\\\"checkbox\\\"/> Automatically save\\n    values to <code>localStorage</code> on exit.\\n\\n    <div id=\\\"dg-local-explain\\\">The values saved to <code>localStorage</code> will\\n      override those passed to <code>dat.GUI</code>'s constructor. This makes it\\n      easier to work incrementally, but <code>localStorage</code> is fragile,\\n      and your friends may not see the same values you do.\\n      \\n    </div>\\n    \\n  </div>\\n\\n</div>\",\n\".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear;border:0;position:absolute;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-x:hidden}.dg.a.has-save ul{margin-top:27px}.dg.a.has-save ul.closed{margin-top:0}.dg.a .save-row{position:fixed;top:0;z-index:1002}.dg li{-webkit-transition:height 0.1s ease-out;-o-transition:height 0.1s ease-out;-moz-transition:height 0.1s ease-out;transition:height 0.1s ease-out}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;overflow:hidden;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li > *{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:9px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2fa1d6}.dg .cr.number input[type=text]{color:#2fa1d6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2fa1d6}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\\n\",\ndat.controllers.factory = (function (OptionController, NumberControllerBox, NumberControllerSlider, StringController, FunctionController, BooleanController, common) {\n\n      return function(object, property) {\n\n        var initialValue = object[property];\n\n        // Providing options?\n        if (common.isArray(arguments[2]) || common.isObject(arguments[2])) {\n          return new OptionController(object, property, arguments[2]);\n        }\n\n        // Providing a map?\n\n        if (common.isNumber(initialValue)) {\n\n          if (common.isNumber(arguments[2]) && common.isNumber(arguments[3])) {\n\n            // Has min and max.\n            return new NumberControllerSlider(object, property, arguments[2], arguments[3]);\n\n          } else {\n\n            return new NumberControllerBox(object, property, { min: arguments[2], max: arguments[3] });\n\n          }\n\n        }\n\n        if (common.isString(initialValue)) {\n          return new StringController(object, property);\n        }\n\n        if (common.isFunction(initialValue)) {\n          return new FunctionController(object, property, '');\n        }\n\n        if (common.isBoolean(initialValue)) {\n          return new BooleanController(object, property);\n        }\n\n      }\n\n    })(dat.controllers.OptionController,\ndat.controllers.NumberControllerBox,\ndat.controllers.NumberControllerSlider,\ndat.controllers.StringController = (function (Controller, dom, common) {\n\n  /**\n   * @class Provides a text input to alter the string property of an object.\n   *\n   * @extends dat.controllers.Controller\n   *\n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   *\n   * @member dat.controllers\n   */\n  var StringController = function(object, property) {\n\n    StringController.superclass.call(this, object, property);\n\n    var _this = this;\n\n    this.__input = document.createElement('input');\n    this.__input.setAttribute('type', 'text');\n\n    dom.bind(this.__input, 'keyup', onChange);\n    dom.bind(this.__input, 'change', onChange);\n    dom.bind(this.__input, 'blur', onBlur);\n    dom.bind(this.__input, 'keydown', function(e) {\n      if (e.keyCode === 13) {\n        this.blur();\n      }\n    });\n    \n\n    function onChange() {\n      _this.setValue(_this.__input.value);\n    }\n\n    function onBlur() {\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n\n    this.updateDisplay();\n\n    this.domElement.appendChild(this.__input);\n\n  };\n\n  StringController.superclass = Controller;\n\n  common.extend(\n\n      StringController.prototype,\n      Controller.prototype,\n\n      {\n\n        updateDisplay: function() {\n          // Stops the caret from moving on account of:\n          // keyup -> setValue -> updateDisplay\n          if (!dom.isActive(this.__input)) {\n            this.__input.value = this.getValue();\n          }\n          return StringController.superclass.prototype.updateDisplay.call(this);\n        }\n\n      }\n\n  );\n\n  return StringController;\n\n})(dat.controllers.Controller,\ndat.dom.dom,\ndat.utils.common),\ndat.controllers.FunctionController,\ndat.controllers.BooleanController,\ndat.utils.common),\ndat.controllers.Controller,\ndat.controllers.BooleanController,\ndat.controllers.FunctionController,\ndat.controllers.NumberControllerBox,\ndat.controllers.NumberControllerSlider,\ndat.controllers.OptionController,\ndat.controllers.ColorController = (function (Controller, dom, Color, interpret, common) {\n\n  var ColorController = function(object, property) {\n\n    ColorController.superclass.call(this, object, property);\n\n    this.__color = new Color(this.getValue());\n    this.__temp = new Color(0);\n\n    var _this = this;\n\n    this.domElement = document.createElement('div');\n\n    dom.makeSelectable(this.domElement, false);\n\n    this.__selector = document.createElement('div');\n    this.__selector.className = 'selector';\n\n    this.__saturation_field = document.createElement('div');\n    this.__saturation_field.className = 'saturation-field';\n\n    this.__field_knob = document.createElement('div');\n    this.__field_knob.className = 'field-knob';\n    this.__field_knob_border = '2px solid ';\n\n    this.__hue_knob = document.createElement('div');\n    this.__hue_knob.className = 'hue-knob';\n\n    this.__hue_field = document.createElement('div');\n    this.__hue_field.className = 'hue-field';\n\n    this.__input = document.createElement('input');\n    this.__input.type = 'text';\n    this.__input_textShadow = '0 1px 1px ';\n\n    dom.bind(this.__input, 'keydown', function(e) {\n      if (e.keyCode === 13) { // on enter\n        onBlur.call(this);\n      }\n    });\n\n    dom.bind(this.__input, 'blur', onBlur);\n\n    dom.bind(this.__selector, 'mousedown', function(e) {\n\n      dom\n        .addClass(this, 'drag')\n        .bind(window, 'mouseup', function(e) {\n          dom.removeClass(_this.__selector, 'drag');\n        });\n\n    });\n\n    var value_field = document.createElement('div');\n\n    common.extend(this.__selector.style, {\n      width: '122px',\n      height: '102px',\n      padding: '3px',\n      backgroundColor: '#222',\n      boxShadow: '0px 1px 3px rgba(0,0,0,0.3)'\n    });\n\n    common.extend(this.__field_knob.style, {\n      position: 'absolute',\n      width: '12px',\n      height: '12px',\n      border: this.__field_knob_border + (this.__color.v < .5 ? '#fff' : '#000'),\n      boxShadow: '0px 1px 3px rgba(0,0,0,0.5)',\n      borderRadius: '12px',\n      zIndex: 1\n    });\n    \n    common.extend(this.__hue_knob.style, {\n      position: 'absolute',\n      width: '15px',\n      height: '2px',\n      borderRight: '4px solid #fff',\n      zIndex: 1\n    });\n\n    common.extend(this.__saturation_field.style, {\n      width: '100px',\n      height: '100px',\n      border: '1px solid #555',\n      marginRight: '3px',\n      display: 'inline-block',\n      cursor: 'pointer'\n    });\n\n    common.extend(value_field.style, {\n      width: '100%',\n      height: '100%',\n      background: 'none'\n    });\n    \n    linearGradient(value_field, 'top', 'rgba(0,0,0,0)', '#000');\n\n    common.extend(this.__hue_field.style, {\n      width: '15px',\n      height: '100px',\n      display: 'inline-block',\n      border: '1px solid #555',\n      cursor: 'ns-resize'\n    });\n\n    hueGradient(this.__hue_field);\n\n    common.extend(this.__input.style, {\n      outline: 'none',\n//      width: '120px',\n      textAlign: 'center',\n//      padding: '4px',\n//      marginBottom: '6px',\n      color: '#fff',\n      border: 0,\n      fontWeight: 'bold',\n      textShadow: this.__input_textShadow + 'rgba(0,0,0,0.7)'\n    });\n\n    dom.bind(this.__saturation_field, 'mousedown', fieldDown);\n    dom.bind(this.__field_knob, 'mousedown', fieldDown);\n\n    dom.bind(this.__hue_field, 'mousedown', function(e) {\n      setH(e);\n      dom.bind(window, 'mousemove', setH);\n      dom.bind(window, 'mouseup', unbindH);\n    });\n\n    function fieldDown(e) {\n      setSV(e);\n      // document.body.style.cursor = 'none';\n      dom.bind(window, 'mousemove', setSV);\n      dom.bind(window, 'mouseup', unbindSV);\n    }\n\n    function unbindSV() {\n      dom.unbind(window, 'mousemove', setSV);\n      dom.unbind(window, 'mouseup', unbindSV);\n      // document.body.style.cursor = 'default';\n    }\n\n    function onBlur() {\n      var i = interpret(this.value);\n      if (i !== false) {\n        _this.__color.__state = i;\n        _this.setValue(_this.__color.toOriginal());\n      } else {\n        this.value = _this.__color.toString();\n      }\n    }\n\n    function unbindH() {\n      dom.unbind(window, 'mousemove', setH);\n      dom.unbind(window, 'mouseup', unbindH);\n    }\n\n    this.__saturation_field.appendChild(value_field);\n    this.__selector.appendChild(this.__field_knob);\n    this.__selector.appendChild(this.__saturation_field);\n    this.__selector.appendChild(this.__hue_field);\n    this.__hue_field.appendChild(this.__hue_knob);\n\n    this.domElement.appendChild(this.__input);\n    this.domElement.appendChild(this.__selector);\n\n    this.updateDisplay();\n\n    function setSV(e) {\n\n      e.preventDefault();\n\n      var w = dom.getWidth(_this.__saturation_field);\n      var o = dom.getOffset(_this.__saturation_field);\n      var s = (e.clientX - o.left + document.body.scrollLeft) / w;\n      var v = 1 - (e.clientY - o.top + document.body.scrollTop) / w;\n\n      if (v > 1) v = 1;\n      else if (v < 0) v = 0;\n\n      if (s > 1) s = 1;\n      else if (s < 0) s = 0;\n\n      _this.__color.v = v;\n      _this.__color.s = s;\n\n      _this.setValue(_this.__color.toOriginal());\n\n\n      return false;\n\n    }\n\n    function setH(e) {\n\n      e.preventDefault();\n\n      var s = dom.getHeight(_this.__hue_field);\n      var o = dom.getOffset(_this.__hue_field);\n      var h = 1 - (e.clientY - o.top + document.body.scrollTop) / s;\n\n      if (h > 1) h = 1;\n      else if (h < 0) h = 0;\n\n      _this.__color.h = h * 360;\n\n      _this.setValue(_this.__color.toOriginal());\n\n      return false;\n\n    }\n\n  };\n\n  ColorController.superclass = Controller;\n\n  common.extend(\n\n      ColorController.prototype,\n      Controller.prototype,\n\n      {\n\n        updateDisplay: function() {\n\n          var i = interpret(this.getValue());\n\n          if (i !== false) {\n\n            var mismatch = false;\n\n            // Check for mismatch on the interpreted value.\n\n            common.each(Color.COMPONENTS, function(component) {\n              if (!common.isUndefined(i[component]) &&\n                  !common.isUndefined(this.__color.__state[component]) &&\n                  i[component] !== this.__color.__state[component]) {\n                mismatch = true;\n                return {}; // break\n              }\n            }, this);\n\n            // If nothing diverges, we keep our previous values\n            // for statefulness, otherwise we recalculate fresh\n            if (mismatch) {\n              common.extend(this.__color.__state, i);\n            }\n\n          }\n\n          common.extend(this.__temp.__state, this.__color.__state);\n\n          this.__temp.a = 1;\n\n          var flip = (this.__color.v < .5 || this.__color.s > .5) ? 255 : 0;\n          var _flip = 255 - flip;\n\n          common.extend(this.__field_knob.style, {\n            marginLeft: 100 * this.__color.s - 7 + 'px',\n            marginTop: 100 * (1 - this.__color.v) - 7 + 'px',\n            backgroundColor: this.__temp.toString(),\n            border: this.__field_knob_border + 'rgb(' + flip + ',' + flip + ',' + flip +')'\n          });\n\n          this.__hue_knob.style.marginTop = (1 - this.__color.h / 360) * 100 + 'px'\n\n          this.__temp.s = 1;\n          this.__temp.v = 1;\n\n          linearGradient(this.__saturation_field, 'left', '#fff', this.__temp.toString());\n\n          common.extend(this.__input.style, {\n            backgroundColor: this.__input.value = this.__color.toString(),\n            color: 'rgb(' + flip + ',' + flip + ',' + flip +')',\n            textShadow: this.__input_textShadow + 'rgba(' + _flip + ',' + _flip + ',' + _flip +',.7)'\n          });\n\n        }\n\n      }\n\n  );\n  \n  var vendors = ['-moz-','-o-','-webkit-','-ms-',''];\n  \n  function linearGradient(elem, x, a, b) {\n    elem.style.background = '';\n    common.each(vendors, function(vendor) {\n      elem.style.cssText += 'background: ' + vendor + 'linear-gradient('+x+', '+a+' 0%, ' + b + ' 100%); ';\n    });\n  }\n  \n  function hueGradient(elem) {\n    elem.style.background = '';\n    elem.style.cssText += 'background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);'\n    elem.style.cssText += 'background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);'\n    elem.style.cssText += 'background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);'\n    elem.style.cssText += 'background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);'\n    elem.style.cssText += 'background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);'\n  }\n\n\n  return ColorController;\n\n})(dat.controllers.Controller,\ndat.dom.dom,\ndat.color.Color = (function (interpret, math, toString, common) {\n\n  var Color = function() {\n\n    this.__state = interpret.apply(this, arguments);\n\n    if (this.__state === false) {\n      throw 'Failed to interpret color arguments';\n    }\n\n    this.__state.a = this.__state.a || 1;\n\n\n  };\n\n  Color.COMPONENTS = ['r','g','b','h','s','v','hex','a'];\n\n  common.extend(Color.prototype, {\n\n    toString: function() {\n      return toString(this);\n    },\n\n    toOriginal: function() {\n      return this.__state.conversion.write(this);\n    }\n\n  });\n\n  defineRGBComponent(Color.prototype, 'r', 2);\n  defineRGBComponent(Color.prototype, 'g', 1);\n  defineRGBComponent(Color.prototype, 'b', 0);\n\n  defineHSVComponent(Color.prototype, 'h');\n  defineHSVComponent(Color.prototype, 's');\n  defineHSVComponent(Color.prototype, 'v');\n\n  Object.defineProperty(Color.prototype, 'a', {\n\n    get: function() {\n      return this.__state.a;\n    },\n\n    set: function(v) {\n      this.__state.a = v;\n    }\n\n  });\n\n  Object.defineProperty(Color.prototype, 'hex', {\n\n    get: function() {\n\n      if (!this.__state.space !== 'HEX') {\n        this.__state.hex = math.rgb_to_hex(this.r, this.g, this.b);\n      }\n\n      return this.__state.hex;\n\n    },\n\n    set: function(v) {\n\n      this.__state.space = 'HEX';\n      this.__state.hex = v;\n\n    }\n\n  });\n\n  function defineRGBComponent(target, component, componentHexIndex) {\n\n    Object.defineProperty(target, component, {\n\n      get: function() {\n\n        if (this.__state.space === 'RGB') {\n          return this.__state[component];\n        }\n\n        recalculateRGB(this, component, componentHexIndex);\n\n        return this.__state[component];\n\n      },\n\n      set: function(v) {\n\n        if (this.__state.space !== 'RGB') {\n          recalculateRGB(this, component, componentHexIndex);\n          this.__state.space = 'RGB';\n        }\n\n        this.__state[component] = v;\n\n      }\n\n    });\n\n  }\n\n  function defineHSVComponent(target, component) {\n\n    Object.defineProperty(target, component, {\n\n      get: function() {\n\n        if (this.__state.space === 'HSV')\n          return this.__state[component];\n\n        recalculateHSV(this);\n\n        return this.__state[component];\n\n      },\n\n      set: function(v) {\n\n        if (this.__state.space !== 'HSV') {\n          recalculateHSV(this);\n          this.__state.space = 'HSV';\n        }\n\n        this.__state[component] = v;\n\n      }\n\n    });\n\n  }\n\n  function recalculateRGB(color, component, componentHexIndex) {\n\n    if (color.__state.space === 'HEX') {\n\n      color.__state[component] = math.component_from_hex(color.__state.hex, componentHexIndex);\n\n    } else if (color.__state.space === 'HSV') {\n\n      common.extend(color.__state, math.hsv_to_rgb(color.__state.h, color.__state.s, color.__state.v));\n\n    } else {\n\n      throw 'Corrupted color state';\n\n    }\n\n  }\n\n  function recalculateHSV(color) {\n\n    var result = math.rgb_to_hsv(color.r, color.g, color.b);\n\n    common.extend(color.__state,\n        {\n          s: result.s,\n          v: result.v\n        }\n    );\n\n    if (!common.isNaN(result.h)) {\n      color.__state.h = result.h;\n    } else if (common.isUndefined(color.__state.h)) {\n      color.__state.h = 0;\n    }\n\n  }\n\n  return Color;\n\n})(dat.color.interpret,\ndat.color.math = (function () {\n\n  var tmpComponent;\n\n  return {\n\n    hsv_to_rgb: function(h, s, v) {\n\n      var hi = Math.floor(h / 60) % 6;\n\n      var f = h / 60 - Math.floor(h / 60);\n      var p = v * (1.0 - s);\n      var q = v * (1.0 - (f * s));\n      var t = v * (1.0 - ((1.0 - f) * s));\n      var c = [\n        [v, t, p],\n        [q, v, p],\n        [p, v, t],\n        [p, q, v],\n        [t, p, v],\n        [v, p, q]\n      ][hi];\n\n      return {\n        r: c[0] * 255,\n        g: c[1] * 255,\n        b: c[2] * 255\n      };\n\n    },\n\n    rgb_to_hsv: function(r, g, b) {\n\n      var min = Math.min(r, g, b),\n          max = Math.max(r, g, b),\n          delta = max - min,\n          h, s;\n\n      if (max != 0) {\n        s = delta / max;\n      } else {\n        return {\n          h: NaN,\n          s: 0,\n          v: 0\n        };\n      }\n\n      if (r == max) {\n        h = (g - b) / delta;\n      } else if (g == max) {\n        h = 2 + (b - r) / delta;\n      } else {\n        h = 4 + (r - g) / delta;\n      }\n      h /= 6;\n      if (h < 0) {\n        h += 1;\n      }\n\n      return {\n        h: h * 360,\n        s: s,\n        v: max / 255\n      };\n    },\n\n    rgb_to_hex: function(r, g, b) {\n      var hex = this.hex_with_component(0, 2, r);\n      hex = this.hex_with_component(hex, 1, g);\n      hex = this.hex_with_component(hex, 0, b);\n      return hex;\n    },\n\n    component_from_hex: function(hex, componentIndex) {\n      return (hex >> (componentIndex * 8)) & 0xFF;\n    },\n\n    hex_with_component: function(hex, componentIndex, value) {\n      return value << (tmpComponent = componentIndex * 8) | (hex & ~ (0xFF << tmpComponent));\n    }\n\n  }\n\n})(),\ndat.color.toString,\ndat.utils.common),\ndat.color.interpret,\ndat.utils.common),\ndat.utils.requestAnimationFrame = (function () {\n\n  /**\n   * requirejs version of Paul Irish's RequestAnimationFrame\n   * http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n   */\n\n  return window.webkitRequestAnimationFrame ||\n      window.mozRequestAnimationFrame ||\n      window.oRequestAnimationFrame ||\n      window.msRequestAnimationFrame ||\n      function(callback, element) {\n\n        window.setTimeout(callback, 1000 / 60);\n\n      };\n})(),\ndat.dom.CenteredDiv = (function (dom, common) {\n\n\n  var CenteredDiv = function() {\n\n    this.backgroundElement = document.createElement('div');\n    common.extend(this.backgroundElement.style, {\n      backgroundColor: 'rgba(0,0,0,0.8)',\n      top: 0,\n      left: 0,\n      display: 'none',\n      zIndex: '1000',\n      opacity: 0,\n      WebkitTransition: 'opacity 0.2s linear'\n    });\n\n    dom.makeFullscreen(this.backgroundElement);\n    this.backgroundElement.style.position = 'fixed';\n\n    this.domElement = document.createElement('div');\n    common.extend(this.domElement.style, {\n      position: 'fixed',\n      display: 'none',\n      zIndex: '1001',\n      opacity: 0,\n      WebkitTransition: '-webkit-transform 0.2s ease-out, opacity 0.2s linear'\n    });\n\n\n    document.body.appendChild(this.backgroundElement);\n    document.body.appendChild(this.domElement);\n\n    var _this = this;\n    dom.bind(this.backgroundElement, 'click', function() {\n      _this.hide();\n    });\n\n\n  };\n\n  CenteredDiv.prototype.show = function() {\n\n    var _this = this;\n    \n\n\n    this.backgroundElement.style.display = 'block';\n\n    this.domElement.style.display = 'block';\n    this.domElement.style.opacity = 0;\n//    this.domElement.style.top = '52%';\n    this.domElement.style.webkitTransform = 'scale(1.1)';\n\n    this.layout();\n\n    common.defer(function() {\n      _this.backgroundElement.style.opacity = 1;\n      _this.domElement.style.opacity = 1;\n      _this.domElement.style.webkitTransform = 'scale(1)';\n    });\n\n  };\n\n  CenteredDiv.prototype.hide = function() {\n\n    var _this = this;\n\n    var hide = function() {\n\n      _this.domElement.style.display = 'none';\n      _this.backgroundElement.style.display = 'none';\n\n      dom.unbind(_this.domElement, 'webkitTransitionEnd', hide);\n      dom.unbind(_this.domElement, 'transitionend', hide);\n      dom.unbind(_this.domElement, 'oTransitionEnd', hide);\n\n    };\n\n    dom.bind(this.domElement, 'webkitTransitionEnd', hide);\n    dom.bind(this.domElement, 'transitionend', hide);\n    dom.bind(this.domElement, 'oTransitionEnd', hide);\n\n    this.backgroundElement.style.opacity = 0;\n//    this.domElement.style.top = '48%';\n    this.domElement.style.opacity = 0;\n    this.domElement.style.webkitTransform = 'scale(1.1)';\n\n  };\n\n  CenteredDiv.prototype.layout = function() {\n    this.domElement.style.left = window.innerWidth/2 - dom.getWidth(this.domElement) / 2 + 'px';\n    this.domElement.style.top = window.innerHeight/2 - dom.getHeight(this.domElement) / 2 + 'px';\n  };\n  \n  function lockScroll(e) {\n    console.log(e);\n  }\n\n  return CenteredDiv;\n\n})(dat.dom.dom,\ndat.utils.common),\ndat.dom.dom,\ndat.utils.common);\n\n/***/ }),\n/* 123 */\n/*!**************************************************!*\\\n  !*** ./node_modules/dat-gui/vendor/dat.color.js ***!\n  \\**************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports) {\n\n/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\n/** @namespace */\nvar dat = module.exports = dat || {};\n\n/** @namespace */\ndat.color = dat.color || {};\n\n/** @namespace */\ndat.utils = dat.utils || {};\n\ndat.utils.common = (function () {\n  \n  var ARR_EACH = Array.prototype.forEach;\n  var ARR_SLICE = Array.prototype.slice;\n\n  /**\n   * Band-aid methods for things that should be a lot easier in JavaScript.\n   * Implementation and structure inspired by underscore.js\n   * http://documentcloud.github.com/underscore/\n   */\n\n  return { \n    \n    BREAK: {},\n  \n    extend: function(target) {\n      \n      this.each(ARR_SLICE.call(arguments, 1), function(obj) {\n        \n        for (var key in obj)\n          if (!this.isUndefined(obj[key])) \n            target[key] = obj[key];\n        \n      }, this);\n      \n      return target;\n      \n    },\n    \n    defaults: function(target) {\n      \n      this.each(ARR_SLICE.call(arguments, 1), function(obj) {\n        \n        for (var key in obj)\n          if (this.isUndefined(target[key])) \n            target[key] = obj[key];\n        \n      }, this);\n      \n      return target;\n    \n    },\n    \n    compose: function() {\n      var toCall = ARR_SLICE.call(arguments);\n            return function() {\n              var args = ARR_SLICE.call(arguments);\n              for (var i = toCall.length -1; i >= 0; i--) {\n                args = [toCall[i].apply(this, args)];\n              }\n              return args[0];\n            }\n    },\n    \n    each: function(obj, itr, scope) {\n\n      \n      if (ARR_EACH && obj.forEach === ARR_EACH) { \n        \n        obj.forEach(itr, scope);\n        \n      } else if (obj.length === obj.length + 0) { // Is number but not NaN\n        \n        for (var key = 0, l = obj.length; key < l; key++)\n          if (key in obj && itr.call(scope, obj[key], key) === this.BREAK) \n            return;\n            \n      } else {\n\n        for (var key in obj) \n          if (itr.call(scope, obj[key], key) === this.BREAK)\n            return;\n            \n      }\n            \n    },\n    \n    defer: function(fnc) {\n      setTimeout(fnc, 0);\n    },\n    \n    toArray: function(obj) {\n      if (obj.toArray) return obj.toArray();\n      return ARR_SLICE.call(obj);\n    },\n\n    isUndefined: function(obj) {\n      return obj === undefined;\n    },\n    \n    isNull: function(obj) {\n      return obj === null;\n    },\n    \n    isNaN: function(obj) {\n      return obj !== obj;\n    },\n    \n    isArray: Array.isArray || function(obj) {\n      return obj.constructor === Array;\n    },\n    \n    isObject: function(obj) {\n      return obj === Object(obj);\n    },\n    \n    isNumber: function(obj) {\n      return obj === obj+0;\n    },\n    \n    isString: function(obj) {\n      return obj === obj+'';\n    },\n    \n    isBoolean: function(obj) {\n      return obj === false || obj === true;\n    },\n    \n    isFunction: function(obj) {\n      return Object.prototype.toString.call(obj) === '[object Function]';\n    }\n  \n  };\n    \n})();\n\n\ndat.color.toString = (function (common) {\n\n  return function(color) {\n\n    if (color.a == 1 || common.isUndefined(color.a)) {\n\n      var s = color.hex.toString(16);\n      while (s.length < 6) {\n        s = '0' + s;\n      }\n\n      return '#' + s;\n\n    } else {\n\n      return 'rgba(' + Math.round(color.r) + ',' + Math.round(color.g) + ',' + Math.round(color.b) + ',' + color.a + ')';\n\n    }\n\n  }\n\n})(dat.utils.common);\n\n\ndat.Color = dat.color.Color = (function (interpret, math, toString, common) {\n\n  var Color = function() {\n\n    this.__state = interpret.apply(this, arguments);\n\n    if (this.__state === false) {\n      throw 'Failed to interpret color arguments';\n    }\n\n    this.__state.a = this.__state.a || 1;\n\n\n  };\n\n  Color.COMPONENTS = ['r','g','b','h','s','v','hex','a'];\n\n  common.extend(Color.prototype, {\n\n    toString: function() {\n      return toString(this);\n    },\n\n    toOriginal: function() {\n      return this.__state.conversion.write(this);\n    }\n\n  });\n\n  defineRGBComponent(Color.prototype, 'r', 2);\n  defineRGBComponent(Color.prototype, 'g', 1);\n  defineRGBComponent(Color.prototype, 'b', 0);\n\n  defineHSVComponent(Color.prototype, 'h');\n  defineHSVComponent(Color.prototype, 's');\n  defineHSVComponent(Color.prototype, 'v');\n\n  Object.defineProperty(Color.prototype, 'a', {\n\n    get: function() {\n      return this.__state.a;\n    },\n\n    set: function(v) {\n      this.__state.a = v;\n    }\n\n  });\n\n  Object.defineProperty(Color.prototype, 'hex', {\n\n    get: function() {\n\n      if (!this.__state.space !== 'HEX') {\n        this.__state.hex = math.rgb_to_hex(this.r, this.g, this.b);\n      }\n\n      return this.__state.hex;\n\n    },\n\n    set: function(v) {\n\n      this.__state.space = 'HEX';\n      this.__state.hex = v;\n\n    }\n\n  });\n\n  function defineRGBComponent(target, component, componentHexIndex) {\n\n    Object.defineProperty(target, component, {\n\n      get: function() {\n\n        if (this.__state.space === 'RGB') {\n          return this.__state[component];\n        }\n\n        recalculateRGB(this, component, componentHexIndex);\n\n        return this.__state[component];\n\n      },\n\n      set: function(v) {\n\n        if (this.__state.space !== 'RGB') {\n          recalculateRGB(this, component, componentHexIndex);\n          this.__state.space = 'RGB';\n        }\n\n        this.__state[component] = v;\n\n      }\n\n    });\n\n  }\n\n  function defineHSVComponent(target, component) {\n\n    Object.defineProperty(target, component, {\n\n      get: function() {\n\n        if (this.__state.space === 'HSV')\n          return this.__state[component];\n\n        recalculateHSV(this);\n\n        return this.__state[component];\n\n      },\n\n      set: function(v) {\n\n        if (this.__state.space !== 'HSV') {\n          recalculateHSV(this);\n          this.__state.space = 'HSV';\n        }\n\n        this.__state[component] = v;\n\n      }\n\n    });\n\n  }\n\n  function recalculateRGB(color, component, componentHexIndex) {\n\n    if (color.__state.space === 'HEX') {\n\n      color.__state[component] = math.component_from_hex(color.__state.hex, componentHexIndex);\n\n    } else if (color.__state.space === 'HSV') {\n\n      common.extend(color.__state, math.hsv_to_rgb(color.__state.h, color.__state.s, color.__state.v));\n\n    } else {\n\n      throw 'Corrupted color state';\n\n    }\n\n  }\n\n  function recalculateHSV(color) {\n\n    var result = math.rgb_to_hsv(color.r, color.g, color.b);\n\n    common.extend(color.__state,\n        {\n          s: result.s,\n          v: result.v\n        }\n    );\n\n    if (!common.isNaN(result.h)) {\n      color.__state.h = result.h;\n    } else if (common.isUndefined(color.__state.h)) {\n      color.__state.h = 0;\n    }\n\n  }\n\n  return Color;\n\n})(dat.color.interpret = (function (toString, common) {\n\n  var result, toReturn;\n\n  var interpret = function() {\n\n    toReturn = false;\n\n    var original = arguments.length > 1 ? common.toArray(arguments) : arguments[0];\n\n    common.each(INTERPRETATIONS, function(family) {\n\n      if (family.litmus(original)) {\n\n        common.each(family.conversions, function(conversion, conversionName) {\n\n          result = conversion.read(original);\n\n          if (toReturn === false && result !== false) {\n            toReturn = result;\n            result.conversionName = conversionName;\n            result.conversion = conversion;\n            return common.BREAK;\n\n          }\n\n        });\n\n        return common.BREAK;\n\n      }\n\n    });\n\n    return toReturn;\n\n  };\n\n  var INTERPRETATIONS = [\n\n    // Strings\n    {\n\n      litmus: common.isString,\n\n      conversions: {\n\n        THREE_CHAR_HEX: {\n\n          read: function(original) {\n\n            var test = original.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);\n            if (test === null) return false;\n\n            return {\n              space: 'HEX',\n              hex: parseInt(\n                  '0x' +\n                      test[1].toString() + test[1].toString() +\n                      test[2].toString() + test[2].toString() +\n                      test[3].toString() + test[3].toString())\n            };\n\n          },\n\n          write: toString\n\n        },\n\n        SIX_CHAR_HEX: {\n\n          read: function(original) {\n\n            var test = original.match(/^#([A-F0-9]{6})$/i);\n            if (test === null) return false;\n\n            return {\n              space: 'HEX',\n              hex: parseInt('0x' + test[1].toString())\n            };\n\n          },\n\n          write: toString\n\n        },\n\n        CSS_RGB: {\n\n          read: function(original) {\n\n            var test = original.match(/^rgb\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/);\n            if (test === null) return false;\n\n            return {\n              space: 'RGB',\n              r: parseFloat(test[1]),\n              g: parseFloat(test[2]),\n              b: parseFloat(test[3])\n            };\n\n          },\n\n          write: toString\n\n        },\n\n        CSS_RGBA: {\n\n          read: function(original) {\n\n            var test = original.match(/^rgba\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\,\\s*(.+)\\s*\\)/);\n            if (test === null) return false;\n\n            return {\n              space: 'RGB',\n              r: parseFloat(test[1]),\n              g: parseFloat(test[2]),\n              b: parseFloat(test[3]),\n              a: parseFloat(test[4])\n            };\n\n          },\n\n          write: toString\n\n        }\n\n      }\n\n    },\n\n    // Numbers\n    {\n\n      litmus: common.isNumber,\n\n      conversions: {\n\n        HEX: {\n          read: function(original) {\n            return {\n              space: 'HEX',\n              hex: original,\n              conversionName: 'HEX'\n            }\n          },\n\n          write: function(color) {\n            return color.hex;\n          }\n        }\n\n      }\n\n    },\n\n    // Arrays\n    {\n\n      litmus: common.isArray,\n\n      conversions: {\n\n        RGB_ARRAY: {\n          read: function(original) {\n            if (original.length != 3) return false;\n            return {\n              space: 'RGB',\n              r: original[0],\n              g: original[1],\n              b: original[2]\n            };\n          },\n\n          write: function(color) {\n            return [color.r, color.g, color.b];\n          }\n\n        },\n\n        RGBA_ARRAY: {\n          read: function(original) {\n            if (original.length != 4) return false;\n            return {\n              space: 'RGB',\n              r: original[0],\n              g: original[1],\n              b: original[2],\n              a: original[3]\n            };\n          },\n\n          write: function(color) {\n            return [color.r, color.g, color.b, color.a];\n          }\n\n        }\n\n      }\n\n    },\n\n    // Objects\n    {\n\n      litmus: common.isObject,\n\n      conversions: {\n\n        RGBA_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.r) &&\n                common.isNumber(original.g) &&\n                common.isNumber(original.b) &&\n                common.isNumber(original.a)) {\n              return {\n                space: 'RGB',\n                r: original.r,\n                g: original.g,\n                b: original.b,\n                a: original.a\n              }\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              r: color.r,\n              g: color.g,\n              b: color.b,\n              a: color.a\n            }\n          }\n        },\n\n        RGB_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.r) &&\n                common.isNumber(original.g) &&\n                common.isNumber(original.b)) {\n              return {\n                space: 'RGB',\n                r: original.r,\n                g: original.g,\n                b: original.b\n              }\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              r: color.r,\n              g: color.g,\n              b: color.b\n            }\n          }\n        },\n\n        HSVA_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.h) &&\n                common.isNumber(original.s) &&\n                common.isNumber(original.v) &&\n                common.isNumber(original.a)) {\n              return {\n                space: 'HSV',\n                h: original.h,\n                s: original.s,\n                v: original.v,\n                a: original.a\n              }\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              h: color.h,\n              s: color.s,\n              v: color.v,\n              a: color.a\n            }\n          }\n        },\n\n        HSV_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.h) &&\n                common.isNumber(original.s) &&\n                common.isNumber(original.v)) {\n              return {\n                space: 'HSV',\n                h: original.h,\n                s: original.s,\n                v: original.v\n              }\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              h: color.h,\n              s: color.s,\n              v: color.v\n            }\n          }\n\n        }\n\n      }\n\n    }\n\n\n  ];\n\n  return interpret;\n\n\n})(dat.color.toString,\ndat.utils.common),\ndat.color.math = (function () {\n\n  var tmpComponent;\n\n  return {\n\n    hsv_to_rgb: function(h, s, v) {\n\n      var hi = Math.floor(h / 60) % 6;\n\n      var f = h / 60 - Math.floor(h / 60);\n      var p = v * (1.0 - s);\n      var q = v * (1.0 - (f * s));\n      var t = v * (1.0 - ((1.0 - f) * s));\n      var c = [\n        [v, t, p],\n        [q, v, p],\n        [p, v, t],\n        [p, q, v],\n        [t, p, v],\n        [v, p, q]\n      ][hi];\n\n      return {\n        r: c[0] * 255,\n        g: c[1] * 255,\n        b: c[2] * 255\n      };\n\n    },\n\n    rgb_to_hsv: function(r, g, b) {\n\n      var min = Math.min(r, g, b),\n          max = Math.max(r, g, b),\n          delta = max - min,\n          h, s;\n\n      if (max != 0) {\n        s = delta / max;\n      } else {\n        return {\n          h: NaN,\n          s: 0,\n          v: 0\n        };\n      }\n\n      if (r == max) {\n        h = (g - b) / delta;\n      } else if (g == max) {\n        h = 2 + (b - r) / delta;\n      } else {\n        h = 4 + (r - g) / delta;\n      }\n      h /= 6;\n      if (h < 0) {\n        h += 1;\n      }\n\n      return {\n        h: h * 360,\n        s: s,\n        v: max / 255\n      };\n    },\n\n    rgb_to_hex: function(r, g, b) {\n      var hex = this.hex_with_component(0, 2, r);\n      hex = this.hex_with_component(hex, 1, g);\n      hex = this.hex_with_component(hex, 0, b);\n      return hex;\n    },\n\n    component_from_hex: function(hex, componentIndex) {\n      return (hex >> (componentIndex * 8)) & 0xFF;\n    },\n\n    hex_with_component: function(hex, componentIndex, value) {\n      return value << (tmpComponent = componentIndex * 8) | (hex & ~ (0xFF << tmpComponent));\n    }\n\n  }\n\n})(),\ndat.color.toString,\ndat.utils.common);\n\n/***/ }),\n/* 124 */\n/*!**************************************************!*\\\n  !*** ./node_modules/stats-js/build/stats.min.js ***!\n  \\**************************************************/\n/*! no static exports found */\n/*! exports used: default */\n/***/ (function(module, exports) {\n\n// stats.js - http://github.com/mrdoob/stats.js\nvar Stats=function(){var l=Date.now(),m=l,g=0,n=Infinity,o=0,h=0,p=Infinity,q=0,r=0,s=0,f=document.createElement(\"div\");f.id=\"stats\";f.addEventListener(\"mousedown\",function(b){b.preventDefault();t(++s%2)},!1);f.style.cssText=\"width:80px;opacity:0.9;cursor:pointer\";var a=document.createElement(\"div\");a.id=\"fps\";a.style.cssText=\"padding:0 0 3px 3px;text-align:left;background-color:#002\";f.appendChild(a);var i=document.createElement(\"div\");i.id=\"fpsText\";i.style.cssText=\"color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px\";\ni.innerHTML=\"FPS\";a.appendChild(i);var c=document.createElement(\"div\");c.id=\"fpsGraph\";c.style.cssText=\"position:relative;width:74px;height:30px;background-color:#0ff\";for(a.appendChild(c);74>c.children.length;){var j=document.createElement(\"span\");j.style.cssText=\"width:1px;height:30px;float:left;background-color:#113\";c.appendChild(j)}var d=document.createElement(\"div\");d.id=\"ms\";d.style.cssText=\"padding:0 0 3px 3px;text-align:left;background-color:#020;display:none\";f.appendChild(d);var k=document.createElement(\"div\");\nk.id=\"msText\";k.style.cssText=\"color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px\";k.innerHTML=\"MS\";d.appendChild(k);var e=document.createElement(\"div\");e.id=\"msGraph\";e.style.cssText=\"position:relative;width:74px;height:30px;background-color:#0f0\";for(d.appendChild(e);74>e.children.length;)j=document.createElement(\"span\"),j.style.cssText=\"width:1px;height:30px;float:left;background-color:#131\",e.appendChild(j);var t=function(b){s=b;switch(s){case 0:a.style.display=\n\"block\";d.style.display=\"none\";break;case 1:a.style.display=\"none\",d.style.display=\"block\"}};return{REVISION:12,domElement:f,setMode:t,begin:function(){l=Date.now()},end:function(){var b=Date.now();g=b-l;n=Math.min(n,g);o=Math.max(o,g);k.textContent=g+\" MS (\"+n+\"-\"+o+\")\";var a=Math.min(30,30-30*(g/200));e.appendChild(e.firstChild).style.height=a+\"px\";r++;b>m+1E3&&(h=Math.round(1E3*r/(b-m)),p=Math.min(p,h),q=Math.max(q,h),i.textContent=h+\" FPS (\"+p+\"-\"+q+\")\",a=Math.min(30,30-30*(h/100)),c.appendChild(c.firstChild).style.height=\na+\"px\",m=b,r=0);return b},update:function(){l=this.end()}}};\"object\"===typeof module&&(module.exports=Stats);\n\n\n/***/ }),\n/* 125 */\n/*!********************************************************!*\\\n  !*** ./node_modules/core-js/library/fn/object/keys.js ***!\n  \\********************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(/*! ../../modules/es6.object.keys */ 126);\nmodule.exports = __webpack_require__(/*! ../../modules/_core */ 6).Object.keys;\n\n\n/***/ }),\n/* 126 */\n/*!*****************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/es6.object.keys.js ***!\n  \\*****************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.2.14 Object.keys(O)\nvar toObject = __webpack_require__(/*! ./_to-object */ 34);\nvar $keys = __webpack_require__(/*! ./_object-keys */ 15);\n\n__webpack_require__(/*! ./_object-sap */ 51)('keys', function () {\n  return function keys(it) {\n    return $keys(toObject(it));\n  };\n});\n\n\n/***/ }),\n/* 127 */\n/*!***************************************************!*\\\n  !*** ./node_modules/memory-stats/memory-stats.js ***!\n  \\***************************************************/\n/*! no static exports found */\n/*! exports used: default */\n/***/ (function(module, exports) {\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author jetienne / http://jetienne.com/\n * @author paulirish / http://paulirish.com/\n */\nfunction MemoryStats(){\n\n\tvar msMin\t= 100;\n\tvar msMax\t= 0;\n\n\tvar container\t= document.createElement( 'div' );\n\tcontainer.id\t= 'stats';\n\tcontainer.style.cssText = 'width:80px;opacity:0.9;cursor:pointer';\n\n\tvar msDiv\t= document.createElement( 'div' );\n\tmsDiv.id\t= 'ms';\n\tmsDiv.style.cssText = 'padding:0 0 3px 3px;text-align:left;background-color:#020;';\n\tcontainer.appendChild( msDiv );\n\n\tvar msText\t= document.createElement( 'div' );\n\tmsText.id\t= 'msText';\n\tmsText.style.cssText = 'color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px';\n\tmsText.innerHTML= 'Memory';\n\tmsDiv.appendChild( msText );\n\n\tvar msGraph\t= document.createElement( 'div' );\n\tmsGraph.id\t= 'msGraph';\n\tmsGraph.style.cssText = 'position:relative;width:74px;height:30px;background-color:#0f0';\n\tmsDiv.appendChild( msGraph );\n\n\twhile ( msGraph.children.length < 74 ) {\n\n\t\tvar bar = document.createElement( 'span' );\n\t\tbar.style.cssText = 'width:1px;height:30px;float:left;background-color:#131';\n\t\tmsGraph.appendChild( bar );\n\n\t}\n\n\tvar updateGraph = function ( dom, height, color ) {\n\n\t\tvar child = dom.appendChild( dom.firstChild );\n\t\tchild.style.height = height + 'px';\n\t\tif( color ) child.style.backgroundColor = color;\n\n\t}\n\n\t// polyfill usedJSHeapSize\n\tif (window.performance && !performance.memory){\n\t\tperformance.memory = { usedJSHeapSize : 0 };\n\t}\n\n\t// support of the API?\n\tif( performance.memory.totalJSHeapSize === 0 ){\n\t\tconsole.warn('totalJSHeapSize === 0... performance.memory is only available in Chrome .')\n\t}\n\n\t// TODO, add a sanity check to see if values are bucketed.\n\t// If so, reminde user to adopt the --enable-precise-memory-info flag.\n\t// open -a \"/Applications/Google Chrome.app\" --args --enable-precise-memory-info\n\n\tvar lastTime\t= Date.now();\n\tvar lastUsedHeap= performance.memory.usedJSHeapSize;\n\treturn {\n\t\tdomElement: container,\n\n\t\tupdate: function () {\n\n\t\t\t// refresh only 30time per second\n\t\t\tif( Date.now() - lastTime < 1000/30 )\treturn;\n\t\t\tlastTime\t= Date.now()\n\n\t\t\tvar delta\t= performance.memory.usedJSHeapSize - lastUsedHeap;\n\t\t\tlastUsedHeap\t= performance.memory.usedJSHeapSize;\n\t\t\tvar color\t= delta < 0 ? '#830' : '#131';\n\n\t\t\tvar ms\t= performance.memory.usedJSHeapSize;\n\t\t\tmsMin\t= Math.min( msMin, ms );\n\t\t\tmsMax\t= Math.max( msMax, ms );\n\t\t\tmsText.textContent = \"Mem: \" + bytesToSize(ms, 2);\n\n\t\t\tvar normValue\t= ms / (30*1024*1024);\n\t\t\tvar height\t= (1-(normValue% 1)) * 30;\n\t\t\tupdateGraph( msGraph, height, color);\n\n\t\t\tfunction bytesToSize( bytes, nFractDigit ){\n\t\t\t\tvar sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\n\t\t\t\tif (bytes == 0) return 'n/a';\n\t\t\t\tnFractDigit\t= nFractDigit !== undefined ? nFractDigit : 0;\n\t\t\t\tvar precision\t= Math.pow(10, nFractDigit);\n\t\t\t\tvar i \t\t= Math.floor(Math.log(bytes) / Math.log(1024));\n\t\t\t\treturn Math.round(bytes*precision / Math.pow(1024, i))/precision + ' ' + sizes[i];\n\t\t\t};\n\t\t}\n\n\t}\n\n};\n\nmodule.exports = MemoryStats;\n\n\n/***/ }),\n/* 128 */\n/*!*************************************!*\\\n  !*** ./src/plugins/viewportPixi.js ***!\n  \\*************************************/\n/*! exports provided: ViewportPixi, CanvasSprite, registerSprite, getSprite */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ViewportPixi\", function() { return ViewportPixi; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CanvasSprite\", function() { return CanvasSprite; });\n/* harmony export (immutable) */ __webpack_exports__[\"registerSprite\"] = registerSprite;\n/* harmony export (immutable) */ __webpack_exports__[\"getSprite\"] = getSprite;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign__ = __webpack_require__(/*! babel-runtime/core-js/object/assign */ 40);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_get__ = __webpack_require__(/*! babel-runtime/helpers/get */ 25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_get___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_get__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_keys__ = __webpack_require__(/*! babel-runtime/core-js/object/keys */ 38);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_keys___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_keys__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(/*! babel-runtime/core-js/object/get-prototype-of */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_classCallCheck__ = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_createClass__ = __webpack_require__(/*! babel-runtime/helpers/createClass */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(/*! babel-runtime/helpers/possibleConstructorReturn */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_inherits__ = __webpack_require__(/*! babel-runtime/helpers/inherits */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__lib_core__ = __webpack_require__(/*! ../lib/core */ 0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__lib_utils__ = __webpack_require__(/*! ../lib/utils */ 129);\n\n\n\n\n\n\n\n\n/* global PIXI */\n\n\n\n// import filters from 'pixi-filters';\n// import extraFilters from 'pixi-extra-filters';\n\nvar PI2 = Math.PI * 2;\n\nvar idx = void 0,\n    p = void 0,\n    entityId = void 0,\n    position = void 0,\n    sprite = void 0;\n\n// See also: http://phrogz.net/JS/wheeldelta.html\nvar wheelDistance = function wheelDistance(evt) {\n  if (!evt) evt = event;\n  var w = evt.wheelDelta,\n      d = evt.detail;\n  if (d) {\n    if (w) return w / d / 40 * d > 0 ? 1 : -1; // Opera\n    else return -d / 3; // Firefox;         TODO: do not /3 for OS X\n  } else return w / 120; // IE/Safari/Chrome TODO: /3 for Chrome OS X\n};\n\nvar ViewportPixi = function (_Core$System) {\n  __WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_inherits___default()(ViewportPixi, _Core$System);\n\n  function ViewportPixi() {\n    __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_classCallCheck___default()(this, ViewportPixi);\n\n    return __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_possibleConstructorReturn___default()(this, (ViewportPixi.__proto__ || __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_object_get_prototype_of___default()(ViewportPixi)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_createClass___default()(ViewportPixi, [{\n    key: 'defaultOptions',\n    value: function defaultOptions() {\n      return {\n        lineWidth: 5,\n        zoom: 1.0,\n        zoomMin: 0.1,\n        zoomMax: 10.0,\n        zoomWheelFactor: 0.05,\n        gridEnabled: true,\n        gridSize: 250,\n        gridColor: 0x222222,\n        followEnabled: true,\n        followName: null,\n        followEntityId: null\n      };\n    }\n  }, {\n    key: 'initialize',\n    value: function initialize() {\n      var _this2 = this;\n\n      this.container = document.querySelector(this.options.container);\n      this.renderer = PIXI.autoDetectRenderer(this.container.offsetWidth, this.container.offsetHeight, { antialias: true });\n      this.renderer.autoResize = true;\n      this.canvas = this.renderer.view;\n      this.container.appendChild(this.canvas);\n      this.stage = new PIXI.Container();\n\n      this.stage.filters = [\n        // new PIXI.filters.VoidFilter(),\n        // new PIXI.filters.BlurFilter(1, 1, 5)\n      ];\n\n      this.healthBarGraphics = new PIXI.Graphics();\n      this.stage.addChild(this.healthBarGraphics);\n\n      this.backdrop = new PIXI.Graphics();\n      this.stage.addChild(this.backdrop);\n\n      this.graphics = {};\n\n      var events = {\n        'resize': function resize(ev) {\n          _this2.updateMetrics(ev);\n        },\n        'orientationchange': function orientationchange(ev) {\n          _this2.updateMetrics(ev);\n        },\n        'mousedown': function mousedown(ev) {\n          _this2.onMouseDown(ev);\n        },\n        'mousemove': function mousemove(ev) {\n          _this2.onMouseMove(ev);\n        },\n        'mouseup': function mouseup(ev) {\n          _this2.onMouseUp(ev);\n        }\n      };\n\n      for (var name in events) {\n        this.canvas.addEventListener(name, events[name], false);\n      }\n\n      // See also: http://phrogz.net/JS/wheeldelta.html\n      var boundOnMouseWheel = function boundOnMouseWheel(ev) {\n        return _this2.onMouseWheel(ev);\n      };\n      if (window.addEventListener) {\n        window.addEventListener('mousewheel', boundOnMouseWheel, false); // Chrome/Safari/Opera\n        window.addEventListener('DOMMouseScroll', boundOnMouseWheel, false); // Firefox\n      } else if (window.attachEvent) {\n        window.attachEvent('onmousewheel', boundOnMouseWheel); // IE\n      }\n\n      this.followEnabled = this.options.followEnabled;\n      this.zoom = this.options.zoom;\n      this.followEntityId = this.options.followEntityId;\n      this.gridEnabled = this.options.gridEnabled;\n      this.lineWidth = this.options.lineWidth;\n\n      this.cursorRawX = 0;\n      this.cursorRawY = 0;\n\n      this.cursorChanged = false;\n      this.cursorPosition = { x: 0, y: 0 };\n\n      this.cameraX = 0;\n      this.cameraY = 0;\n\n      this.debugDummySprite = { size: 100 };\n\n      this.updateMetrics();\n    }\n  }, {\n    key: 'onMouseWheel',\n    value: function onMouseWheel(ev) {\n      this.zoom += wheelDistance(ev) * this.options.zoomWheelFactor;\n      if (this.zoom < this.options.zoomMin) {\n        this.zoom = this.options.zoomMin;\n      }\n      if (this.zoom > this.options.zoomMax) {\n        this.zoom = this.options.zoomMax;\n      }\n    }\n\n    // TODO: Use a symbol for 'mouse{Down,Move,Up}' message?\n\n  }, {\n    key: 'onMouseDown',\n    value: function onMouseDown(ev) {\n      this.setCursor(ev.clientX, ev.clientY);\n      this.world.publish('mouseDown', this.cursorPosition);\n    }\n  }, {\n    key: 'onMouseMove',\n    value: function onMouseMove(ev) {\n      this.setCursor(ev.clientX, ev.clientY);\n      this.world.publish('mouseMove', this.cursorPosition);\n    }\n  }, {\n    key: 'onMouseUp',\n    value: function onMouseUp(ev) {\n      this.setCursor(ev.clientX, ev.clientY);\n      this.world.publish('mouseUp', this.cursorPosition);\n    }\n  }, {\n    key: 'setCursor',\n    value: function setCursor(x, y) {\n      var width = this.container.offsetWidth;\n      var height = this.container.offsetHeight;\n\n      this.cursorRawX = x;\n      this.cursorRawY = y;\n\n      var newX = (x - width / 2) / this.zoom + this.cameraX;\n      var newY = (y - height / 2) / this.zoom + this.cameraY;\n\n      this.cursorChanged = false;\n      if (newX !== this.cursorPosition.x || newY !== this.cursorPosition.y) {\n        this.cursorChanged = true;\n        this.cursorPosition.x = newX;\n        this.cursorPosition.y = newY;\n      }\n\n      return this.cursorPosition;\n    }\n  }, {\n    key: 'updateMetrics',\n    value: function updateMetrics() {\n      var width = this.container.offsetWidth;\n      var height = this.container.offsetHeight;\n\n      this.visibleWidth = width / this.zoom;\n      this.visibleHeight = height / this.zoom;\n\n      this.visibleLeft = 0 - this.visibleWidth / 2 + this.cameraX;\n      this.visibleTop = 0 - this.visibleHeight / 2 + this.cameraY;\n      this.visibleRight = this.visibleLeft + this.visibleWidth;\n      this.visibleBottom = this.visibleTop + this.visibleHeight;\n    }\n  }, {\n    key: 'update',\n    value: function update() /*timeDelta*/{\n      var _this3 = this;\n\n      this.updateMetrics();\n\n      this.setCursor(this.cursorRawX, this.cursorRawY);\n      // FIXME: Should be able to skip doing this unless\n      // this.cursorChanged === true, but for some reason that's not working\n      this.world.publish('mouseMove', this.cursorPosition);\n\n      var sprites = this.world.get('Sprite') || {};\n\n      for (entityId in sprites) {\n        position = this.world.get('Position', entityId);\n        sprite = sprites[entityId];\n        sprite.visible = position.right > this.visibleLeft && position.left < this.visibleRight && position.bottom > this.visibleTop && position.top < this.visibleBottom;\n      }\n\n      var toRemove = __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_keys___default()(this.graphics).filter(function (key) {\n        return !(key in sprites);\n      });\n      toRemove.forEach(function (entityId) {\n        _this3.stage.removeChild(_this3.graphics[entityId]);\n        delete _this3.graphics[entityId];\n      });\n\n      var toAdd = __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_keys___default()(sprites).filter(function (key) {\n        return !(key in _this3.graphics);\n      });\n      toAdd.forEach(function (entityId) {\n        _this3.stage.addChild(_this3.graphics[entityId] = new PIXI.Graphics());\n      });\n    }\n  }, {\n    key: 'draw',\n    value: function draw(timeDelta) {\n      this.followEntity();\n      this.drawBackdrop(timeDelta);\n\n      for (var _entityId in this.graphics) {\n        this.drawSprite(this.graphics[_entityId], _entityId, timeDelta);\n      }\n\n      this.stage.setTransform(this.container.offsetWidth / 2 - this.cameraX * this.zoom, this.container.offsetHeight / 2 - this.cameraY * this.zoom, this.zoom, this.zoom);\n\n      this.renderer.resize(this.container.offsetWidth, this.container.offsetHeight);\n\n      this.renderer.render(this.stage);\n    }\n  }, {\n    key: 'drawSprite',\n    value: function drawSprite(ctx, entityId, timeDelta) {\n      var sprite = this.world.get('Sprite', entityId);\n      if (!sprite) {\n        return;\n      }\n\n      var position = this.world.get('Position', entityId);\n\n      var spriteFn = getSprite(sprite.name);\n      if (!spriteFn) {\n        spriteFn = getSprite('default');\n      }\n\n      ctx.position.x = Math.floor(position.x);\n      ctx.position.y = Math.floor(position.y);\n      ctx.rotation = position.rotation + Math.PI / 2;\n      ctx.scale.x = ctx.scale.y = sprite.size / 100;\n      ctx.lineStyle(this.lineWidth / (sprite.size / 100), sprite.color);\n      spriteFn(ctx, sprite, entityId, timeDelta, this.world);\n\n      /*\n      const health = this.world.get('Health', entityId);\n      if (health) {\n      const perc = (health.current / health.max);\n      ctx.lineStyle(1.0, 0x333333);\n      ctx.moveTo(-50, -57);\n      ctx.drawRect(-50, -57, 100, 5);\n      ctx.moveTo(-50, -57);\n      ctx.beginFill(0x00ff00, 1.0);\n      ctx.drawRect(-50, -57, 100 * perc, 5);\n      ctx.endFill();\n      }\n      */\n\n      sprite.drawn = true;\n      return ctx;\n    }\n  }, {\n    key: 'followEntity',\n    value: function followEntity() {\n      if (!this.followEnabled) {\n        this.cameraX = this.cameraY = 0;\n        return;\n      }\n      if (this.options.followName && !this.followEntityId) {\n        // Look up named entity, if necessary.\n        this.followEntityId = __WEBPACK_IMPORTED_MODULE_8__lib_core__[\"getComponent\"]('Name').findEntityByName(this.world, this.options.followName);\n      }\n      if (this.followEntityId) {\n        // Adjust the viewport center offset to the entity position\n        var _position = this.world.get('Position', this.followEntityId);\n        if (_position) {\n          this.cameraX = _position.x;\n          this.cameraY = _position.y;\n          this.setCursor(this.cursorRawX, this.cursorRawY);\n        }\n      }\n    }\n  }, {\n    key: 'drawBackdrop',\n    value: function drawBackdrop() /* timeDelta */{\n      var ctx = this.backdrop;\n\n      if (!this.gridEnabled) {\n        ctx.visible = false;\n        return;\n      }\n\n      var gridSize = this.options.gridSize;\n      var gridOffsetX = this.visibleLeft % gridSize;\n      var gridOffsetY = this.visibleTop % gridSize;\n\n      ctx.visible = true;\n      ctx.clear();\n      ctx.lineStyle(5, this.options.gridColor);\n      ctx.position.x = this.visibleLeft;\n      ctx.position.y = this.visibleTop;\n\n      for (var x = -gridOffsetX; x < this.visibleWidth; x += gridSize) {\n        ctx.moveTo(x, 0);\n        ctx.lineTo(x, this.visibleHeight + gridSize);\n      }\n\n      for (var y = -gridOffsetY; y < this.visibleHeight; y += gridSize) {\n        ctx.moveTo(0, y);\n        ctx.lineTo(this.visibleWidth + gridSize, y);\n      }\n    }\n  }]);\n\n  return ViewportPixi;\n}(__WEBPACK_IMPORTED_MODULE_8__lib_core__[\"System\"]);\n\n__WEBPACK_IMPORTED_MODULE_8__lib_core__[\"registerSystem\"]('ViewportPixi', ViewportPixi);\n\nvar CanvasSprite = function (_Core$Component) {\n  __WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_inherits___default()(CanvasSprite, _Core$Component);\n\n  function CanvasSprite() {\n    __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_classCallCheck___default()(this, CanvasSprite);\n\n    return __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_possibleConstructorReturn___default()(this, (CanvasSprite.__proto__ || __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_object_get_prototype_of___default()(CanvasSprite)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_createClass___default()(CanvasSprite, null, [{\n    key: 'defaults',\n    value: function defaults() {\n      return {\n        name: null,\n        color: 0xffffff,\n        size: 100,\n        width: null,\n        height: null,\n        drawn: false,\n        visible: false\n      };\n    }\n  }, {\n    key: 'create',\n    value: function create(attrs) {\n      var c = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_get___default()(CanvasSprite.__proto__ || __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_object_get_prototype_of___default()(CanvasSprite), 'create', this).call(this, attrs);\n      if (!c.width) {\n        c.width = c.size;\n      }\n      if (!c.height) {\n        c.height = c.size;\n      }\n      return c;\n    }\n  }]);\n\n  return CanvasSprite;\n}(__WEBPACK_IMPORTED_MODULE_8__lib_core__[\"Component\"]);\n\n__WEBPACK_IMPORTED_MODULE_8__lib_core__[\"registerComponent\"]('Sprite', CanvasSprite);\n\nvar spriteRegistry = {};\nfunction registerSprite(name, sprite) {\n  spriteRegistry[name] = sprite;\n}\nfunction getSprite(name) {\n  return spriteRegistry[name];\n}\n\nvar defaultShape = [-50, 0, 50, 0, 0, 0, 0, -50, 0, 50, 0, 0];\nfor (var _idx = 0; _idx < 8; _idx++) {\n  var rot = _idx * (PI2 / 8);\n  defaultShape.push(50 * Math.cos(rot));\n  defaultShape.push(50 * Math.sin(rot));\n}\ndefaultShape.push(50);\ndefaultShape.push(0);\n\nregisterSprite('default', function (g, sprite /*, entityId*/) {\n  if (sprite.drawn) {\n    return;\n  }\n  g.drawPolygon(defaultShape);\n});\n\nregisterSprite('sun', function (ctx, sprite /*, entityId*/) {\n  if (sprite.drawn) {\n    return;\n  }\n\n  ctx.arc(0, 0, 50, 0, PI2, true);\n});\n\nregisterSprite('enemyscout', function (ctx, sprite /*, entityId*/) {\n  if (sprite.drawn) {\n    return;\n  }\n\n  ctx.moveTo(0, -50);\n  ctx.lineTo(-45, 50);\n  ctx.lineTo(-12.5, 12.5);\n  ctx.lineTo(0, 25);\n  ctx.lineTo(12.5, 12.5);\n  ctx.lineTo(45, 50);\n  ctx.lineTo(0, -50);\n  ctx.moveTo(0, -50);\n});\n\nregisterSprite('enemywing', function (g, sprite /*, entityId*/) {\n  if (sprite.drawn) {\n    return;\n  }\n\n  g.lineColor = 0x228822;\n\n  g.moveTo(-50, 0);\n  g.lineTo(-37.5, -37.5);\n  g.lineTo(0, 50);\n  g.lineTo(37.5, -37.5);\n  g.lineTo(50, 0);\n  g.lineTo(37.5, 50);\n  g.lineTo(25, 50);\n  g.lineTo(0, 0);\n  g.lineTo(-25, 50);\n  g.lineTo(-37.5, 50);\n  g.lineTo(-50, 0);\n});\n\nvar repulsorShape = [-50, 0, -37.5, -50, -25, -50, -6.25, 25, 6.25, 25, 25, -50, 37.5, -50, 50, 0, 37.5, 50, 25, 50, 6.25, -25, -6.25, -25, -25, 50, -37.5, 50, -50, 0];\nvar repulsorSides = 8;\nvar repulsorPoints = [];\nfor (var _idx2 = 0; _idx2 < repulsorSides; _idx2++) {\n  var _rot = _idx2 * (PI2 / repulsorSides);\n  repulsorPoints.push(Math.cos(_rot));\n  repulsorPoints.push(Math.sin(_rot));\n}\nrepulsorPoints.push(repulsorPoints[0]);\nrepulsorPoints.push(repulsorPoints[1]);\n\nregisterSprite('repulsor', function (g, sprite, entityId, timeDelta, world) {\n  if (!sprite.drawn) {\n    var t = 0; // Math.floor(Math.random() * 15) * 100;\n    sprite.rings = [{ t: t, startR: 0, endR: 500, startO: 1.0, endO: 0.0, endT: 1500 }, { t: t + 250, startR: 0, endR: 500, startO: 1.0, endO: 0.0, endT: 1500 }, { t: t + 500, startR: 0, endR: 500, startO: 1.0, endO: 0.0, endT: 1500 }];\n  }\n\n  var repulsor = world.get('Repulsor', entityId);\n  if (repulsor) {\n    sprite.rings.forEach(function (ring) {\n      return ring.endR = repulsor.range;\n    });\n  }\n\n  g.clear();\n  g.lineStyle(5 / (sprite.size / 100), 0x228822);\n  g.drawPolygon(repulsorShape);\n\n  var dt = Math.floor(timeDelta * 1000);\n  sprite.rings.forEach(function (ring) {\n    ring.t += dt;\n    if (ring.t >= ring.endT) {\n      ring.t = 0;\n    }\n\n    if (!sprite.visible) {\n      return;\n    }\n\n    var r = Object(__WEBPACK_IMPORTED_MODULE_9__lib_utils__[\"a\" /* lerp */])(ring.startR, ring.endR, ring.t / ring.endT);\n    var a = Object(__WEBPACK_IMPORTED_MODULE_9__lib_utils__[\"a\" /* lerp */])(ring.startO, ring.endO, ring.t / ring.endT);\n\n    g.lineStyle(5 / (sprite.size / 100), 0x228822, a);\n    g.moveTo(-r, 0);\n    g.drawPolygon(repulsorPoints.map(function (p) {\n      return r * p;\n    }));\n  });\n});\n\nvar heroShape = [-50, 0, -37.5, -37.5, 0, -50, 37.5, -37.5, 50, 0, 37.5, 50, 25, 50, 12.5, 12.5, 5, 25, -5, 25, -12.5, 12.5, -25, 50, -37.5, 50, -50, 0];\n\nregisterSprite('hero', function (g, sprite /*, entityId*/) {\n  if (sprite.drawn) {\n    return;\n  }\n  g.drawPolygon(heroShape);\n});\n\nregisterSprite('asteroid', function (g, sprite /*, entityId*/) {\n  if (sprite.drawn) {\n    return;\n  }\n\n  var NUM_POINTS = 10 + Math.floor(8 * Math.random());\n  var MAX_RADIUS = 50;\n  var MIN_RADIUS = 35;\n  var ROTATION = PI2 / NUM_POINTS;\n\n  var idx = void 0;\n  var points = [];\n\n  for (idx = 0; idx < NUM_POINTS; idx++) {\n    var _rot2 = idx * ROTATION;\n    var dist = Math.random() * (MAX_RADIUS - MIN_RADIUS) + MIN_RADIUS;\n    points.push(dist * Math.cos(_rot2));\n    points.push(dist * Math.sin(_rot2));\n  }\n  points.push(points[0]);\n  points.push(points[1]);\n\n  g.drawPolygon(points);\n});\n\nregisterSprite('mine', function (g, sprite /*, entityId, timeDelta, world*/) {\n  if (!sprite.drawn) {\n    var NUM_POINTS = 10 + Math.floor(10 * Math.random());\n    if (NUM_POINTS % 2 !== 0) {\n      NUM_POINTS++;\n    }\n    var ROTATION = PI2 / NUM_POINTS;\n    var MAX_RADIUS = 60;\n    var MIN_RADIUS = 10;\n\n    var even = false;\n\n    sprite.legs = [];\n    for (var _idx3 = 0; _idx3 < NUM_POINTS; _idx3++) {\n      var dist = even ? 10 : Math.random() * (MAX_RADIUS - MIN_RADIUS) + MIN_RADIUS;\n      var _rot3 = _idx3 * ROTATION;\n      sprite.legs.push(dist * Math.cos(_rot3));\n      sprite.legs.push(dist * Math.sin(_rot3));\n      even = !even;\n    }\n    sprite.legs.push(sprite.legs[0]);\n    sprite.legs.push(sprite.legs[1]);\n  }\n\n  if (sprite.drawn && Math.random() > 0.15) {\n    return;\n  }\n\n  g.clear();\n  g.lineStyle(5 / (sprite.size / 100), 0xFF2222);\n  g.drawPolygon(sprite.legs.map(function (p) {\n    return p * (0.9 + 0.5 * Math.random());\n  }));\n});\n\nregisterSprite('explosion', function (g, sprite, entityId, timeDelta) {\n\n  if (!sprite.drawn) {\n    __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(sprite, {\n      ttl: 2.0,\n      radius: 100,\n      maxParticles: 25,\n      maxParticleSize: 4,\n      maxVelocity: 300,\n      age: 0,\n      alpha: 0,\n      stop: false,\n      particles: []\n    }, sprite);\n    for (idx = 0; idx < sprite.maxParticles; idx++) {\n      sprite.particles.push({ free: true });\n    }\n  }\n\n  for (idx = 0; idx < sprite.particles.length; idx++) {\n    p = sprite.particles[idx];\n\n    if (!sprite.stop && p.free) {\n\n      p.velocity = sprite.maxVelocity * Math.random();\n      p.angle = Math.PI * 2 * Math.random();\n      p.dx = 0 - p.velocity * Math.sin(p.angle);\n      p.dy = p.velocity * Math.cos(p.angle);\n      p.distance = p.x = p.y = 0;\n      p.maxDistance = sprite.radius * Math.random();\n      p.size = sprite.maxParticleSize;\n      p.free = false;\n    } else if (!p.free) {\n\n      p.x += p.dx * timeDelta;\n      p.y += p.dy * timeDelta;\n\n      p.distance += p.velocity * timeDelta;\n      if (p.distance >= p.maxDistance) {\n        p.distance = p.maxDistance;\n        p.free = true;\n      }\n    }\n  }\n\n  sprite.age += timeDelta;\n\n  if (sprite.age >= sprite.ttl) {\n    sprite.stop = true;\n  }\n\n  sprite.alpha = Math.max(0, 1 - sprite.age / sprite.ttl);\n\n  g.clear();\n\n  for (idx = 0; idx < sprite.particles.length; idx++) {\n    p = sprite.particles[idx];\n    if (p.free) {\n      continue;\n    }\n\n    g.lineStyle(5 / (sprite.size / 100), sprite.color, (1 - p.distance / p.maxDistance) * sprite.alpha);\n    g.moveTo(0, 0);\n    g.lineTo(p.x, p.y);\n  }\n});\n\n/***/ }),\n/* 129 */\n/*!**************************!*\\\n  !*** ./src/lib/utils.js ***!\n  \\**************************/\n/*! exports provided: lerp */\n/*! exports used: lerp */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = lerp;\n// Linear interpolation from v0 to v1 over t[0..1]\nfunction lerp(v0, v1, t) {\n  return (1 - t) * v0 + t * v1;\n}\n\n/***/ }),\n/* 130 */\n/*!*****************************************************************!*\\\n  !*** ./node_modules/babel-runtime/helpers/toConsumableArray.js ***!\n  \\*****************************************************************/\n/*! no static exports found */\n/*! exports used: default */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\n\nvar _from = __webpack_require__(/*! ../core-js/array/from */ 131);\n\nvar _from2 = _interopRequireDefault(_from);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return (0, _from2.default)(arr);\n  }\n};\n\n/***/ }),\n/* 131 */\n/*!**********************************************************!*\\\n  !*** ./node_modules/babel-runtime/core-js/array/from.js ***!\n  \\**********************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(/*! core-js/library/fn/array/from */ 132), __esModule: true };\n\n/***/ }),\n/* 132 */\n/*!*******************************************************!*\\\n  !*** ./node_modules/core-js/library/fn/array/from.js ***!\n  \\*******************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(/*! ../../modules/es6.string.iterator */ 68);\n__webpack_require__(/*! ../../modules/es6.array.from */ 133);\nmodule.exports = __webpack_require__(/*! ../../modules/_core */ 6).Array.from;\n\n\n/***/ }),\n/* 133 */\n/*!****************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/es6.array.from.js ***!\n  \\****************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar ctx = __webpack_require__(/*! ./_ctx */ 42);\nvar $export = __webpack_require__(/*! ./_export */ 10);\nvar toObject = __webpack_require__(/*! ./_to-object */ 34);\nvar call = __webpack_require__(/*! ./_iter-call */ 134);\nvar isArrayIter = __webpack_require__(/*! ./_is-array-iter */ 135);\nvar toLength = __webpack_require__(/*! ./_to-length */ 65);\nvar createProperty = __webpack_require__(/*! ./_create-property */ 136);\nvar getIterFn = __webpack_require__(/*! ./core.get-iterator-method */ 137);\n\n$export($export.S + $export.F * !__webpack_require__(/*! ./_iter-detect */ 139)(function (iter) { Array.from(iter); }), 'Array', {\n  // 22.1.2.1 Array.from(arrayLike, mapfn = undefined, thisArg = undefined)\n  from: function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {\n    var O = toObject(arrayLike);\n    var C = typeof this == 'function' ? this : Array;\n    var aLen = arguments.length;\n    var mapfn = aLen > 1 ? arguments[1] : undefined;\n    var mapping = mapfn !== undefined;\n    var index = 0;\n    var iterFn = getIterFn(O);\n    var length, result, step, iterator;\n    if (mapping) mapfn = ctx(mapfn, aLen > 2 ? arguments[2] : undefined, 2);\n    // if object isn't iterable or it's array with default iterator - use simple case\n    if (iterFn != undefined && !(C == Array && isArrayIter(iterFn))) {\n      for (iterator = iterFn.call(O), result = new C(); !(step = iterator.next()).done; index++) {\n        createProperty(result, index, mapping ? call(iterator, mapfn, [step.value, index], true) : step.value);\n      }\n    } else {\n      length = toLength(O.length);\n      for (result = new C(length); length > index; index++) {\n        createProperty(result, index, mapping ? mapfn(O[index], index) : O[index]);\n      }\n    }\n    result.length = index;\n    return result;\n  }\n});\n\n\n/***/ }),\n/* 134 */\n/*!************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_iter-call.js ***!\n  \\************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// call something on iterator step with safe closing on error\nvar anObject = __webpack_require__(/*! ./_an-object */ 23);\nmodule.exports = function (iterator, fn, value, entries) {\n  try {\n    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch (e) {\n    var ret = iterator['return'];\n    if (ret !== undefined) anObject(ret.call(iterator));\n    throw e;\n  }\n};\n\n\n/***/ }),\n/* 135 */\n/*!****************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_is-array-iter.js ***!\n  \\****************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// check on default Array iterator\nvar Iterators = __webpack_require__(/*! ./_iterators */ 36);\nvar ITERATOR = __webpack_require__(/*! ./_wks */ 9)('iterator');\nvar ArrayProto = Array.prototype;\n\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n};\n\n\n/***/ }),\n/* 136 */\n/*!******************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_create-property.js ***!\n  \\******************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar $defineProperty = __webpack_require__(/*! ./_object-dp */ 13);\nvar createDesc = __webpack_require__(/*! ./_property-desc */ 32);\n\nmodule.exports = function (object, index, value) {\n  if (index in object) $defineProperty.f(object, index, createDesc(0, value));\n  else object[index] = value;\n};\n\n\n/***/ }),\n/* 137 */\n/*!**************************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/core.get-iterator-method.js ***!\n  \\**************************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar classof = __webpack_require__(/*! ./_classof */ 138);\nvar ITERATOR = __webpack_require__(/*! ./_wks */ 9)('iterator');\nvar Iterators = __webpack_require__(/*! ./_iterators */ 36);\nmodule.exports = __webpack_require__(/*! ./_core */ 6).getIteratorMethod = function (it) {\n  if (it != undefined) return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n\n\n/***/ }),\n/* 138 */\n/*!**********************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_classof.js ***!\n  \\**********************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = __webpack_require__(/*! ./_cof */ 44);\nvar TAG = __webpack_require__(/*! ./_wks */ 9)('toStringTag');\n// ES3 wrong here\nvar ARG = cof(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (e) { /* empty */ }\n};\n\nmodule.exports = function (it) {\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};\n\n\n/***/ }),\n/* 139 */\n/*!**************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_iter-detect.js ***!\n  \\**************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar ITERATOR = __webpack_require__(/*! ./_wks */ 9)('iterator');\nvar SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR]();\n  riter['return'] = function () { SAFE_CLOSING = true; };\n  // eslint-disable-next-line no-throw-literal\n  Array.from(riter, function () { throw 2; });\n} catch (e) { /* empty */ }\n\nmodule.exports = function (exec, skipClosing) {\n  if (!skipClosing && !SAFE_CLOSING) return false;\n  var safe = false;\n  try {\n    var arr = [7];\n    var iter = arr[ITERATOR]();\n    iter.next = function () { return { done: safe = true }; };\n    arr[ITERATOR] = function () { return iter; };\n    exec(arr);\n  } catch (e) { /* empty */ }\n  return safe;\n};\n\n\n/***/ }),\n/* 140 */\n/*!*************************************************************!*\\\n  !*** ./node_modules/babel-runtime/core-js/object/values.js ***!\n  \\*************************************************************/\n/*! no static exports found */\n/*! exports used: default */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(/*! core-js/library/fn/object/values */ 141), __esModule: true };\n\n/***/ }),\n/* 141 */\n/*!**********************************************************!*\\\n  !*** ./node_modules/core-js/library/fn/object/values.js ***!\n  \\**********************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(/*! ../../modules/es7.object.values */ 142);\nmodule.exports = __webpack_require__(/*! ../../modules/_core */ 6).Object.values;\n\n\n/***/ }),\n/* 142 */\n/*!*******************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/es7.object.values.js ***!\n  \\*******************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// https://github.com/tc39/proposal-object-values-entries\nvar $export = __webpack_require__(/*! ./_export */ 10);\nvar $values = __webpack_require__(/*! ./_object-to-array */ 143)(false);\n\n$export($export.S, 'Object', {\n  values: function values(it) {\n    return $values(it);\n  }\n});\n\n\n/***/ }),\n/* 143 */\n/*!******************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_object-to-array.js ***!\n  \\******************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar getKeys = __webpack_require__(/*! ./_object-keys */ 15);\nvar toIObject = __webpack_require__(/*! ./_to-iobject */ 11);\nvar isEnum = __webpack_require__(/*! ./_object-pie */ 33).f;\nmodule.exports = function (isEntries) {\n  return function (it) {\n    var O = toIObject(it);\n    var keys = getKeys(O);\n    var length = keys.length;\n    var i = 0;\n    var result = [];\n    var key;\n    while (length > i) if (isEnum.call(O, key = keys[i++])) {\n      result.push(isEntries ? [key, O[key]] : O[key]);\n    } return result;\n  };\n};\n\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// core.js"," \t// install a JSONP callback for chunk loading\n \tvar parentJsonpFunction = window[\"webpackJsonp\"];\n \twindow[\"webpackJsonp\"] = function webpackJsonpCallback(chunkIds, moreModules, executeModules) {\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [], result;\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(chunkIds, moreModules, executeModules);\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n \t\tif(executeModules) {\n \t\t\tfor(i=0; i < executeModules.length; i++) {\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = executeModules[i]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t};\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// objects to store loaded and loading chunks\n \tvar installedChunks = {\n \t\t7: 0\n \t};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData === 0) {\n \t\t\treturn new Promise(function(resolve) { resolve(); });\n \t\t}\n\n \t\t// a Promise means \"currently loading\".\n \t\tif(installedChunkData) {\n \t\t\treturn installedChunkData[2];\n \t\t}\n\n \t\t// setup Promise in chunk cache\n \t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t});\n \t\tinstalledChunkData[2] = promise;\n\n \t\t// start chunk loading\n \t\tvar head = document.getElementsByTagName('head')[0];\n \t\tvar script = document.createElement('script');\n \t\tscript.type = 'text/javascript';\n \t\tscript.charset = 'utf-8';\n \t\tscript.async = true;\n \t\tscript.timeout = 120000;\n\n \t\tif (__webpack_require__.nc) {\n \t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t}\n \t\tscript.src = __webpack_require__.p + \"\" + chunkId + \".bundle.js\";\n \t\tvar timeout = setTimeout(onScriptComplete, 120000);\n \t\tscript.onerror = script.onload = onScriptComplete;\n \t\tfunction onScriptComplete() {\n \t\t\t// avoid mem leaks in IE.\n \t\t\tscript.onerror = script.onload = null;\n \t\t\tclearTimeout(timeout);\n \t\t\tvar chunk = installedChunks[chunkId];\n \t\t\tif(chunk !== 0) {\n \t\t\t\tif(chunk) {\n \t\t\t\t\tchunk[1](new Error('Loading chunk ' + chunkId + ' failed.'));\n \t\t\t\t}\n \t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t}\n \t\t};\n \t\thead.appendChild(script);\n\n \t\treturn promise;\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 77);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap a77a3cc81af269a6e1e5","const TARGET_FPS = 60;\nconst TARGET_DURATION = 1000 / TARGET_FPS;\n\nconst requestAnimationFrame =\n  window.requestAnimationFrame ||\n  window.webkitRequestAnimationFrame ||\n  window.mozRequestAnimationFrame ||\n  window.oRequestAnimationFrame ||\n  window.msRequestAnimationFrame ||\n  function (fn) { setTimeout(fn, (1000/60)); };\n\n// Commonly used temp variables, pre-declared early.\nlet entityId, system, systemName, systemAttrs, systemCls, componentName,\n    timeNow, timeDelta, componentAttrs, matches, idx, item, handler;\n\nexport const Messages = {\n  ENTITY_INSERT: 'entity_insert',\n  ENTITY_DESTROY: 'entity_destroy'\n};\n\nexport class World {\n  constructor(options) {\n    options = options || {};\n\n    this.isRunning = false;\n    this.isPaused = false;\n    this.debug = false;\n\n    this.systems = {};\n    if (options.systems) {\n      this.addSystems(options.systems);\n    }\n\n    this.store = {};\n\n    this.subscribers = {};\n\n    this.tickDuration = TARGET_DURATION;\n    this.maxTickDelta = TARGET_DURATION * 5;\n    this.tickAccumulator = 0;\n\n    this.lastTickTime = 0;\n    this.lastDrawTime = 0;\n\n    this.boundTickLoop = () => this.tickLoop();\n    this.boundDrawLoop = (timestamp) => this.drawLoop(timestamp);\n\n    this.reset();\n  }\n\n  start() {\n    if (this.isRunning) { return; }\n    this.isRunning = true;\n\n    for (const systemName in this.systems) {\n      this.systems[systemName].initialize();\n    }\n\n    // Game logic separated from display rendering\n    // See also: http://www.chandlerprall.com/2012/06/requestanimationframe-is-not-your-logics-friend/\n    this.lastTickTime = Date.now();\n    this.lastDrawTime = 0;\n\n    setTimeout(this.boundTickLoop, this.tickDuration);\n    requestAnimationFrame(this.boundDrawLoop);\n\n    return this;\n  }\n\n  stop() {\n    this.isRunning = false;\n    return this;\n  }\n\n  pause() {\n    this.isPaused = true;\n    return this;\n  }\n\n  resume() {\n    this.isPaused = false;\n    return this;\n  }\n\n  reset() {\n    this.store = {};\n    this.lastEntityId = 0;\n  }\n\n  // TODO: Use a better pubsub library here. But, pubsub-js seemed to perform\n  // badly in a game loop.\n\n  subscribe(msg, handler) {\n    if (!this.subscribers[msg]) {\n      this.subscribers[msg] = [];\n    }\n    this.subscribers[msg].push(handler);\n    return this;\n  }\n\n  unsubscribe(/* msg, handler */) {\n    // TODO\n    return this;\n  }\n\n  publish(msg, data) {\n    if (!this.subscribers[msg]) { return; }\n    for (idx = 0, handler; handler = this.subscribers[msg][idx]; idx++) {\n      handler(msg, data);\n    }\n    return this;\n  }\n\n  addSystems(systemsData) {\n    for (systemName in systemsData) {\n      systemAttrs = systemsData[systemName];\n      systemCls = getSystem(systemName);\n      system = new systemCls(systemAttrs);\n      system.setWorld(this);\n      this.systems[systemName] = system;\n    }\n  }\n\n  getSystem(systemName) {\n    return this.systems[systemName];\n  }\n\n  tick(timeDeltaMS) {\n    timeDelta = timeDeltaMS / 1000;\n    for (systemName in this.systems) {\n      this.systems[systemName].updateStart(timeDelta);\n    }\n    for (systemName in this.systems) {\n      this.systems[systemName].update(timeDelta);\n    }\n    for (systemName in this.systems) {\n      this.systems[systemName].updateEnd(timeDelta);\n    }\n  }\n\n  tickLoop() {\n    timeNow = Date.now();\n    timeDelta = Math.min(timeNow - this.lastTickTime, this.maxTickDelta);\n    this.lastTickTime = timeNow;\n\n    if (!this.isPaused) {\n      // Fixed-step game logic loop\n      // see: http://gafferongames.com/game-physics/fix-your-timestep/\n      this.tickAccumulator += timeDelta;\n      while (this.tickAccumulator > this.tickDuration) {\n        this.tick(this.tickDuration);\n        this.tickAccumulator -= this.tickDuration;\n      }\n    }\n\n    if (this.isRunning) {\n      setTimeout(this.boundTickLoop, this.tickDuration);\n    }\n  }\n\n  draw(timeDeltaMS) {\n    timeDelta = timeDeltaMS / 1000;\n    for (systemName in this.systems) {\n      this.systems[systemName].drawStart(timeDelta);\n    }\n    for (systemName in this.systems) {\n      this.systems[systemName].draw(timeDelta);\n    }\n    for (systemName in this.systems) {\n      this.systems[systemName].drawEnd(timeDelta);\n    }\n  }\n\n  drawLoop(timestamp) {\n    if (!this.lastDrawTime) { this.lastDrawTime = timestamp; }\n    timeDelta = timestamp - this.lastDrawTime;\n    this.lastDrawTime = timestamp;\n\n    if (!this.isPaused) {\n      this.draw(timeDelta);\n    }\n\n    if (this.isRunning) {\n      requestAnimationFrame(this.boundDrawLoop);\n    }\n  }\n\n  generateEntityId() {\n    return ++(this.lastEntityId);\n  }\n\n  insert(...items) {\n    const out = [];\n    for (idx = 0; item = items[idx]; idx++) {\n      entityId = this.generateEntityId();\n      for (componentName in item) {\n        componentAttrs = item[componentName];\n        this.addComponent(entityId, componentName, componentAttrs);\n      }\n      if (this.world) this.world.publish(Messages.ENTITY_INSERT, entityId);\n      out.push(entityId);\n    }\n    return out.length > 1 ? out : out[0];\n  }\n\n  destroy(entityId) {\n    if (this.world) this.world.publish(Messages.ENTITY_DESTROY, entityId);\n    for (componentName in this.store) {\n      this.removeComponent(entityId, componentName);\n    }\n  }\n\n  addComponent(entityId, componentName, componentAttrs) {\n    const componentManager = getComponent(componentName);\n    const component = componentManager.create(componentAttrs);\n    if (!this.store[componentName]) {\n      this.store[componentName] = {};\n    }\n    this.store[componentName][entityId] = component;\n  }\n\n  removeComponent(entityId, componentName) {\n    if (entityId in this.store[componentName]) {\n      delete this.store[componentName][entityId];\n    }\n  }\n\n  hasComponent(entityId, componentName) {\n    return (componentName in this.store) &&\n           (entityId in this.store[componentName]);\n  }\n\n  get(componentName, entityId) {\n    if (!this.store[componentName]) {\n      return null;\n    } else if (!entityId) {\n      return this.store[componentName];\n    } else {\n      return this.store[componentName][entityId];\n    }\n  }\n\n\n}\n\nexport class Component {\n\n  static defaults() {\n    return {};\n  }\n\n  static create(attrs) {\n    return {...this.defaults(), ...(attrs || {})};\n  }\n\n}\n\nexport class System {\n\n  constructor(options) {\n    this.options = {...this.defaultOptions(), ...(options || {})};\n    this.debug = this.options.debug || false;\n  }\n\n  defaultOptions() {\n    return {};\n  }\n\n  setWorld(world) {\n    this.world = world;\n  }\n\n  matchComponent() { return ''; }\n\n  initialize() { }\n\n  getMatchingComponents() {\n    return this.world.get(this.matchComponent());\n  }\n\n  updateStart(/* timeDelta */) { }\n\n  update(timeDelta) {\n    matches = this.getMatchingComponents();\n    for (entityId in matches) {\n      this.updateComponent(timeDelta, entityId, matches[entityId]);\n    }\n  }\n\n  updateComponent(/* timeDelta, entityId, component */) { }\n\n  updateEnd(/* timeDelta */) { }\n\n  drawStart(/* timeDelta */) { }\n\n  draw(/* timeDelta */) { }\n\n  getDebugGraphics() {\n    // TODO make this work again someday\n    return;\n  }\n\n  drawEnd(/* timeDelta */) { }\n\n}\n\nconst componentRegistry = {};\n\nexport function registerComponent(componentName, componentManager) {\n  componentRegistry[componentName] = componentManager;\n}\n\nexport function getComponent(componentName) {\n  return componentRegistry[componentName];\n}\n\nconst systemRegistry = {};\n\nexport function registerSystem(systemName, system) {\n  systemRegistry[systemName] = system;\n}\n\nexport function getSystem(systemName) {\n  return systemRegistry[systemName];\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/core.js","\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/classCallCheck.js\n// module id = 1\n// module chunks = 7","\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"../core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/createClass.js\n// module id = 2\n// module chunks = 7","module.exports = { \"default\": require(\"core-js/library/fn/object/get-prototype-of\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/object/get-prototype-of.js\n// module id = 3\n// module chunks = 7","\"use strict\";\n\nexports.__esModule = true;\n\nvar _typeof2 = require(\"../helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && ((typeof call === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(call)) === \"object\" || typeof call === \"function\") ? call : self;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/possibleConstructorReturn.js\n// module id = 4\n// module chunks = 7","\"use strict\";\n\nexports.__esModule = true;\n\nvar _setPrototypeOf = require(\"../core-js/object/set-prototype-of\");\n\nvar _setPrototypeOf2 = _interopRequireDefault(_setPrototypeOf);\n\nvar _create = require(\"../core-js/object/create\");\n\nvar _create2 = _interopRequireDefault(_create);\n\nvar _typeof2 = require(\"../helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(superClass)));\n  }\n\n  subClass.prototype = (0, _create2.default)(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf2.default ? (0, _setPrototypeOf2.default)(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/inherits.js\n// module id = 5\n// module chunks = 7","var core = module.exports = { version: '2.5.0' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_core.js\n// module id = 6\n// module chunks = 7","import { Component, System, registerComponent, registerSystem } from '../lib/core';\r\nimport QuadTree from '../lib/QuadTree';\r\n\r\nexport class Position extends Component {\r\n  static defaults() {\r\n    return { x: 0, y: 0, rotation: 0 };\r\n  }\r\n}\r\n\r\nregisterComponent('Position', Position);\r\n\r\nlet entityId, sprite, position, positions;\r\n\r\nexport class PositionSystem extends System {\r\n\r\n  defaultOptions() {\r\n    return {\r\n      quadtreeMaxAge: 2,\r\n      quadtreeObjectsPerNode: 5,\r\n      quadtreeMaxLevels: 5\r\n    };\r\n  }\r\n\r\n  matchComponent() { return 'Position'; }\r\n\r\n  initialize() {\r\n    this.bounds = {\r\n      left: 0, top: 0, right: 0, bottom: 0,\r\n      width: 0, height: 0\r\n    };\r\n    this.quadtree = new QuadTree(\r\n      -1000, -1000, 2000, 2000,\r\n      this.options.quadtreeObjectsPerNode,\r\n      this.options.quadtreeMaxLevels\r\n    );\r\n  }\r\n\r\n  update(timeDelta) {\r\n    this.updateBounds();\r\n    this.resetQuadtree(timeDelta);\r\n    super.update(timeDelta);\r\n  }\r\n\r\n  resetQuadtree() {\r\n    this.quadtree.reset(\r\n      this.bounds.left,\r\n      this.bounds.top,\r\n      this.bounds.width,\r\n      this.bounds.height,\r\n      this.options.quadtreeObjectsPerNode,\r\n      this.options.quadtreeMaxLevels\r\n    );\r\n  }\r\n\r\n  updateBounds() {\r\n    this.bounds.left = this.bounds.top = this.bounds.right = this.bounds.bottom = null;\r\n    positions = this.getMatchingComponents();\r\n    for (entityId in positions) {\r\n      position = positions[entityId];\r\n      if (this.bounds.left === null || position.left < this.bounds.left) { this.bounds.left = position.left; }\r\n      if (this.bounds.top === null || position.top < this.bounds.top) { this.bounds.top = position.top; }\r\n      if (this.bounds.right === null || position.right > this.bounds.right) { this.bounds.right = position.right; }\r\n      if (this.bounds.bottom === null || position.bottom > this.bounds.bottom) { this.bounds.bottom = position.bottom; }\r\n    }\r\n    this.bounds.width = this.bounds.right - this.bounds.left;\r\n    this.bounds.height = this.bounds.bottom - this.bounds.top;\r\n  }\r\n\r\n  updateComponent(timeDelta, entityId, position) {\r\n    sprite = this.world.get('Sprite', entityId);\r\n    if (!sprite) { return; }\r\n\r\n    const halfWidth = sprite.width / 2;\r\n    const halfHeight = sprite.height / 2;\r\n\r\n    position.entityId = entityId;\r\n    position.width = sprite.width;\r\n    position.height = sprite.height;\r\n    position.left = position.x - halfWidth;\r\n    position.top = position.y - halfHeight;\r\n    position.right = position.x + halfWidth;\r\n    position.bottom = position.y + halfHeight;\r\n\r\n    this.quadtree.insert(position);\r\n  }\r\n\r\n  draw(/* timeDelta */) {\r\n    const g = this.getDebugGraphics();\r\n    if (!g) { return; }\r\n\r\n    g.lineStyle(4, 0x882222);\r\n    positions = this.getMatchingComponents();\r\n    for (entityId in positions) {\r\n      position = positions[entityId];\r\n      sprite = this.world.get('Sprite', entityId);\r\n      g.drawCircle(position.x, position.y, sprite.width / 2);\r\n      g.moveTo(position.x - 20, position.y);\r\n      g.lineTo(position.x + 20, position.y);\r\n      g.moveTo(position.x, position.y - 20);\r\n      g.lineTo(position.x, position.y + 20);\r\n    }\r\n\r\n    g.lineStyle(4, 0x228822);\r\n    this.drawDebugQuadtreeNode(g, this.quadtree);\r\n\r\n    g.lineStyle(4, 0xffff33);\r\n    g.moveTo(-20, 0);\r\n    g.lineTo(20, 0);\r\n    g.moveTo(0, -20);\r\n    g.lineTo(0, 20);\r\n    g.moveTo(0, 0);\r\n    g.drawRect(\r\n      this.bounds.left,\r\n      this.bounds.top,\r\n      this.bounds.width,\r\n      this.bounds.height\r\n    );\r\n  }\r\n\r\n  drawDebugQuadtreeNode(g, root) {\r\n    if (!root) { return; }\r\n\r\n    g.lineStyle(4, 0x883388);\r\n    g.drawRect(root.bounds.left, root.bounds.top,\r\n               root.bounds.width, root.bounds.height);\r\n\r\n    g.lineStyle(4, 0x112222);\r\n    root.objects.forEach(body =>\r\n      g.drawRect(body.left, body.top, body.width, body.height));\r\n\r\n    this.drawDebugQuadtreeNode(g, root.nodes[0]);\r\n    this.drawDebugQuadtreeNode(g, root.nodes[1]);\r\n    this.drawDebugQuadtreeNode(g, root.nodes[2]);\r\n    this.drawDebugQuadtreeNode(g, root.nodes[3]);\r\n  }\r\n}\r\n\r\nregisterSystem('Position', PositionSystem);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/position.js","import * as Core from '../lib/core';\r\n\r\nimport './position';\r\n\r\nconst PI2 = Math.PI * 2;\r\n\r\nexport class Motion extends Core.Component {\r\n  static defaults() {\r\n    return { dx: 0, dy: 0, drotation: 0 };\r\n  }\r\n}\r\nCore.registerComponent('Motion', Motion);\r\n\r\nexport class MotionSystem extends Core.System {\r\n  matchComponent() {\r\n    return 'Motion';\r\n  }\r\n  updateComponent(timeDelta, entityId, motion) {\r\n    const pos = this.world.get('Position', entityId);\r\n    pos.x += motion.dx * timeDelta;\r\n    pos.y += motion.dy * timeDelta;\r\n\r\n    // Update the rotation, ensuring a 0..2*Math.PI range.\r\n    pos.rotation = (pos.rotation + (motion.drotation * timeDelta)) % PI2;\r\n    if (pos.rotation < 0) {\r\n      pos.rotation += PI2;\r\n    }\r\n  }\r\n}\r\nCore.registerSystem('Motion', MotionSystem);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/motion.js","var store = require('./_shared')('wks');\nvar uid = require('./_uid');\nvar Symbol = require('./_global').Symbol;\nvar USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function (name) {\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_wks.js\n// module id = 9\n// module chunks = 7","var global = require('./_global');\nvar core = require('./_core');\nvar ctx = require('./_ctx');\nvar hide = require('./_hide');\nvar PROTOTYPE = 'prototype';\n\nvar $export = function (type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var IS_WRAP = type & $export.W;\n  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});\n  var expProto = exports[PROTOTYPE];\n  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE];\n  var key, own, out;\n  if (IS_GLOBAL) source = name;\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if (own && key in exports) continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function (C) {\n      var F = function (a, b, c) {\n        if (this instanceof C) {\n          switch (arguments.length) {\n            case 0: return new C();\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if (IS_PROTO) {\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if (type & $export.R && expProto && !expProto[key]) hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library`\nmodule.exports = $export;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_export.js\n// module id = 10\n// module chunks = 7","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject');\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return IObject(defined(it));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-iobject.js\n// module id = 11\n// module chunks = 7","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_global.js\n// module id = 12\n// module chunks = 7","var anObject = require('./_an-object');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar toPrimitive = require('./_to-primitive');\nvar dP = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return dP(O, P, Attributes);\n  } catch (e) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-dp.js\n// module id = 13\n// module chunks = 7","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_descriptors.js\n// module id = 14\n// module chunks = 7","// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys = require('./_object-keys-internal');\nvar enumBugKeys = require('./_enum-bug-keys');\n\nmodule.exports = Object.keys || function keys(O) {\n  return $keys(O, enumBugKeys);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-keys.js\n// module id = 15\n// module chunks = 7","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_has.js\n// module id = 16\n// module chunks = 7","/*\r\n  Originally by Vitalii [Nayjest] Stepanenko <gmail@vitaliy.in>\r\n  Tweaky & fixes by Les Orchard <me@lmorchard.com>\r\n*/\r\n\r\nexport default function Vector2D(x, y) {\r\n  this.x = x || 0;\r\n  this.y = y || 0;\r\n}\r\n\r\nVector2D.cloneFrom = function(object) {\r\n  return new Vector2D(object.x, object.y);\r\n};\r\n\r\nVector2D.fromArray = function(array) {\r\n  return new Vector2D(array[0], array[1]);\r\n};\r\n\r\nVector2D.zero = new Vector2D(0, 0);\r\n\r\nVector2D.prototype.add = function(vector) {\r\n  this.x += vector.x;\r\n  this.y += vector.y;\r\n  return this;\r\n};\r\n\r\nVector2D.prototype.addScalar = function(val) {\r\n  this.x += val;\r\n  this.y += val;\r\n  return this;\r\n};\r\n\r\nVector2D.prototype.eq = function(vector) {\r\n  return vector.x === this.x && vector.y === this.y;\r\n};\r\n\r\nVector2D.prototype.subtract = function(vector) {\r\n  this.x -= vector.x;\r\n  this.y -= vector.y;\r\n  return this;\r\n};\r\n\r\nVector2D.prototype.clone = function() {\r\n  return new Vector2D(this.x, this.y);\r\n};\r\n\r\nVector2D.prototype.set = function(vector) {\r\n  this.x = vector.x;\r\n  this.y = vector.y;\r\n  return this;\r\n};\r\n\r\nVector2D.prototype.setValues = function(_at_x, _at_y) {\r\n  this.x = _at_x;\r\n  this.y = _at_y;\r\n  return this;\r\n};\r\n\r\nVector2D.prototype.dist = function(vector) {\r\n  return Math.sqrt((vector.x - this.x) * (vector.x - this.x) + (vector.y - this.y) * (vector.y - this.y));\r\n};\r\n\r\nVector2D.prototype.normalise = function() {\r\n  return this.normalize();\r\n};\r\n\r\nVector2D.prototype.normalize = function() {\r\n  if (!this.isZero()) {\r\n    const m = this.magnitude();\r\n    this.x /= m;\r\n    this.y /= m;\r\n  }\r\n  return this;\r\n};\r\n\r\nVector2D.prototype.isZero = function() {\r\n  return this.x === 0 && this.y === 0;\r\n};\r\n\r\nVector2D.prototype.reverse = function() {\r\n  this.x = -this.x;\r\n  this.y = -this.y;\r\n  return this;\r\n};\r\n\r\nVector2D.prototype.magnitude = function() {\r\n  return Math.sqrt(this.x * this.x + this.y * this.y);\r\n};\r\n\r\nVector2D.prototype.toArray = function() {\r\n  return [this.x, this.y];\r\n};\r\n\r\nVector2D.prototype.angle = function() {\r\n  return Math.atan2(this.y, this.x);\r\n};\r\n\r\nVector2D.prototype.rotate = function(angle) {\r\n  const cos = Math.cos(angle);\r\n  const sin = Math.sin(angle);\r\n  return this.setValues(this.x * cos - this.y * sin, this.x * sin + this.y * cos);\r\n};\r\n\r\nVector2D.prototype.angleTo = function(vector) {\r\n  return Math.atan2(vector.y - this.y, vector.x - this.x);\r\n};\r\n\r\nVector2D.prototype.rotateAround = function(point, angle) {\r\n  return this.subtract(point).rotate(angle).add(point);\r\n};\r\n\r\nVector2D.prototype.multiplyScalar = function(val) {\r\n  this.x *= val;\r\n  this.y *= val;\r\n  return this;\r\n};\r\n\r\nVector2D.prototype.multiply = function(vector) {\r\n  this.x *= vector.x;\r\n  this.y *= vector.y;\r\n  return this;\r\n};\r\n\r\nVector2D.prototype.divide = function(vector) {\r\n  this.x /= vector.x;\r\n  this.y /= vector.y;\r\n  return this;\r\n};\r\n\r\nVector2D.prototype.divideScalar = function(val) {\r\n  this.x /= val;\r\n  this.y /= val;\r\n  return this;\r\n};\r\n\r\nVector2D.prototype.round = function() {\r\n  this.x = Math.round(this.x);\r\n  this.y = Math.round(this.y);\r\n  return this;\r\n};\r\n\r\nVector2D.prototype.dot = function(vector) {\r\n  return (this.x * vector.x) + (this.y * vector.y);\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/Vector2D.js","import * as Core from '../lib/core';\r\n\r\nimport dat from 'dat-gui';\r\n\r\nexport class DatGui extends Core.System {\r\n\r\n  initialize() {\r\n    this.gui = new dat.GUI();\r\n  }\r\n\r\n}\r\nCore.registerSystem('DatGui', DatGui);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/datGui.js","import * as Core from '../lib/core';\r\n\r\nimport Stats from 'stats-js';\r\n\r\nexport class DrawStats extends Core.System {\r\n\r\n  initialize() {\r\n\r\n    this.drawStats = new Stats();\r\n    this.drawStats.setMode(0);\r\n    this.drawStats.domElement.style.position = 'absolute';\r\n    this.drawStats.domElement.style.left = '0px';\r\n    this.drawStats.domElement.style.top = '0px';\r\n    document.body.appendChild(this.drawStats.domElement);\r\n\r\n    this.tickStats = new Stats();\r\n    this.tickStats.setMode(0);\r\n    this.tickStats.domElement.style.position = 'absolute';\r\n    this.tickStats.domElement.style.left = '0px';\r\n    this.tickStats.domElement.style.top = '55px';\r\n    document.body.appendChild(this.tickStats.domElement);\r\n\r\n  }\r\n\r\n  updateStart() { this.tickStats.begin(); }\r\n\r\n  updateEnd() { this.tickStats.end(); }\r\n\r\n  drawStart() { this.drawStats.begin(); }\r\n\r\n  drawEnd() { this.drawStats.end(); }\r\n\r\n}\r\nCore.registerSystem('DrawStats', DrawStats);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/drawStats.js","import * as Core from '../lib/core';\r\n\r\nimport MemoryStats from 'memory-stats';\r\n\r\nexport class MemoryStatsSystem extends Core.System {\r\n\r\n  initialize() {\r\n    this.stats = new MemoryStats();\r\n    this.stats.domElement.style.position = 'fixed';\r\n    this.stats.domElement.style.left = '85px';\r\n    this.stats.domElement.style.top = '0px';\r\n    document.body.appendChild(this.stats.domElement);\r\n  }\r\n\r\n  draw() { this.stats.update(); }\r\n\r\n}\r\nCore.registerSystem('MemoryStats', MemoryStatsSystem);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/memoryStats.js","import * as Core from '../lib/core';\r\n\r\nexport class Name extends Core.Component {\r\n  static defaults() {\r\n    return { name: 'unnamed' };\r\n  }\r\n  static findEntityByName(world, name) {\r\n    const names = world.get('Name');\r\n    for (const nid in names) {\r\n      const nameComponent = names[nid];\r\n      if (nameComponent.name === name) {\r\n        return nid;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nCore.registerComponent('Name', Name);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/name.js","var dP = require('./_object-dp');\nvar createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function (object, key, value) {\n  return dP.f(object, key, createDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_hide.js\n// module id = 22\n// module chunks = 7","var isObject = require('./_is-object');\nmodule.exports = function (it) {\n  if (!isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_an-object.js\n// module id = 23\n// module chunks = 7","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_fails.js\n// module id = 24\n// module chunks = 7","\"use strict\";\n\nexports.__esModule = true;\n\nvar _getPrototypeOf = require(\"../core-js/object/get-prototype-of\");\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _getOwnPropertyDescriptor = require(\"../core-js/object/get-own-property-descriptor\");\n\nvar _getOwnPropertyDescriptor2 = _interopRequireDefault(_getOwnPropertyDescriptor);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function get(object, property, receiver) {\n  if (object === null) object = Function.prototype;\n  var desc = (0, _getOwnPropertyDescriptor2.default)(object, property);\n\n  if (desc === undefined) {\n    var parent = (0, _getPrototypeOf2.default)(object);\n\n    if (parent === null) {\n      return undefined;\n    } else {\n      return get(parent, property, receiver);\n    }\n  } else if (\"value\" in desc) {\n    return desc.value;\n  } else {\n    var getter = desc.get;\n\n    if (getter === undefined) {\n      return undefined;\n    }\n\n    return getter.call(receiver);\n  }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/get.js\n// module id = 25\n// module chunks = 7","import { Component, System, registerComponent, registerSystem } from '../lib/core';\nimport { MSG_DESTROY } from './spawn';\n\nexport const MSG_DAMAGE = 'healthDamage';\nexport const MSG_HEAL = 'healthHeal';\n\nlet health;\n\nexport class Health extends Component {\n  static defaults() {\n    return {\n      max: 1000,\n      current: null,\n      show_bar: true\n    };\n  }\n  static create(attrs) {\n    const c = super.create(attrs);\n    c.current = c.max;\n    return c;\n  }\n}\n\nregisterComponent('Health', Health);\n\nexport class HealthSystem extends System {\n\n  initialize() {\n    this.world\n      .subscribe(MSG_DAMAGE, (msg, data) => {\n        health = this.world.get('Health', data.to);\n        if (health) { health.current -= data.amount; }\n      })\n      .subscribe(MSG_HEAL, (msg, data) => {\n        health = this.world.get('Health', data.to);\n        if (health) { health.current += data.amount; }\n      });\n  }\n\n  matchComponent() { return 'Health'; }\n\n  updateComponent(timeDelta, entityId, health) {\n    if (health.current === null) {\n      health.current = health.max;\n    }\n    if (health.current < 0) {\n      this.world.publish(MSG_DESTROY, entityId);\n    }\n  }\n\n}\n\nregisterSystem('Health', HealthSystem);\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/health.js","import { Component, System, registerComponent, registerSystem } from '../lib/core';\r\n\r\nexport const MSG_SPAWN = 'spawnSpawn';\r\nexport const MSG_DESTROY = 'spawnDestroy';\r\nexport const MSG_DESPAWN = 'spawnDespawn';\r\nexport const MSG_CAPTURE_CAMERA = 'spawnCaptureCamera';\r\n\r\nlet spawn;\r\n\r\nexport class Spawn extends Component {\r\n  static defaults() {\r\n    return {\r\n      ttl: null,\r\n      age: 0,\r\n      destroy: false,\r\n      tombstone: null\r\n    };\r\n  }\r\n}\r\n\r\nregisterComponent('Spawn', Spawn);\r\n\r\nexport class SpawnSystem extends System {\r\n  defaultOptions() {\r\n    return {\r\n\r\n    };\r\n  }\r\n\r\n  initialize() {\r\n    this.world.subscribe(MSG_DESTROY, (msg, entityId) => {\r\n      spawn = this.world.get('Spawn', entityId);\r\n      if (spawn) { spawn.destroy = true; }\r\n    });\r\n  }\r\n\r\n  matchComponent() { return 'Spawn'; }\r\n\r\n  updateComponent(timeDelta, entityId, spawn) {\r\n    if (!spawn.spawned) {\r\n      spawn.spawned = true;\r\n      this.world.publish(MSG_SPAWN, entityId);\r\n      if (spawn.captureCamera) {\r\n        this.world.publish(MSG_CAPTURE_CAMERA, entityId);\r\n      }\r\n    }\r\n    if (spawn.ttl !== null) {\r\n      spawn.age += timeDelta;\r\n      if (spawn.age >= spawn.ttl) {\r\n        spawn.destroy = true;\r\n      }\r\n    }\r\n    if (spawn.destroy) {\r\n      if (spawn.tombstone !== null) {\r\n        this.world.insert((typeof spawn.tombstone === 'function') ?\r\n          spawn.tombstone(spawn, entityId) : spawn.tombstone);\r\n      }\r\n      this.world.publish(MSG_DESPAWN, entityId);\r\n      this.world.destroy(entityId);\r\n    }\r\n  }\r\n}\r\n\r\nregisterSystem('Spawn', SpawnSystem);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/spawn.js","import * as Core from '../lib/core';\r\n\r\nimport '../plugins/position';\r\nimport '../plugins/motion';\r\n\r\nimport Vector2D from '../lib/Vector2D';\r\n\r\nexport class Seeker extends Core.Component {\r\n  static defaults() {\r\n    return {\r\n      active: true,\r\n      targetName: null,\r\n      targetEntityId: null,\r\n      targetPosition: null,\r\n      acquisitionDelay: 0,\r\n      radPerSec: Math.PI\r\n    };\r\n  }\r\n}\r\n\r\nCore.registerComponent('Seeker', Seeker);\r\n\r\nexport class SeekerSystem extends Core.System {\r\n\r\n  matchComponent() { return 'Seeker'; }\r\n\r\n  initialize() {\r\n    this.vSeeker = new Vector2D();\r\n    this.vTarget = new Vector2D();\r\n  }\r\n\r\n  updateComponent(timeDelta, entityId, seeker) {\r\n\r\n    if (!seeker.active) { return; }\r\n\r\n    // Look up the orbited entity ID, if only name given.\r\n    if (seeker.targetName && !seeker.targetEntityId) {\r\n      seeker.targetEntityId = Core.getComponent('Name')\r\n        .findEntityByName(this.world, seeker.targetName);\r\n    }\r\n\r\n    // Process a delay before the seeker 'acquires' the target and\r\n    // starts steering. Makes missiles look interesting.\r\n    if (seeker.acquisitionDelay > 0) {\r\n      seeker.acquisitionDelay -= timeDelta;\r\n      return;\r\n    }\r\n\r\n    const position = this.world.get('Position', entityId);\r\n    const motion = this.world.get('Motion', entityId);\r\n    if (!position || !motion) { return; }\r\n\r\n    // Accept either a raw x/y coord or entity ID as target\r\n    let targetPosition = seeker.targetPosition;\r\n    if (!targetPosition) {\r\n      targetPosition = this.world.get('Position', seeker.targetEntityId);\r\n    }\r\n    if (!targetPosition) { return; }\r\n\r\n    // Set up the vectors for angle math...\r\n    this.vSeeker.setValues(position.x, position.y);\r\n    this.vTarget.setValues(targetPosition.x, targetPosition.y);\r\n\r\n    // Get the target angle, ensuring a 0..2*Math.PI range.\r\n    let targetAngle = this.vSeeker.angleTo(this.vTarget);\r\n    if (targetAngle < 0) {\r\n      targetAngle += (2 * Math.PI);\r\n    }\r\n\r\n    // Pick the direction from current to target angle\r\n    let direction = (targetAngle < position.rotation) ? -1 : 1;\r\n\r\n    // If the offset between the angles is more than half a circle, go\r\n    // the other way because it'll be shorter.\r\n    const offset = Math.abs(targetAngle - position.rotation);\r\n    if (offset > Math.PI) {\r\n      direction = 0 - direction;\r\n    }\r\n\r\n    // Work out the desired delta-rotation to steer toward target\r\n    const targetDr = direction * Math.min(seeker.radPerSec, offset / timeDelta);\r\n\r\n    // Calculate the delta-rotation impulse required to meet the goal,\r\n    // but constrain to the capability of the steering thrusters\r\n    let impulseDr = (targetDr - motion.drotation);\r\n    if (Math.abs(impulseDr) > seeker.radPerSec) {\r\n      if (impulseDr > 0) {\r\n        impulseDr = seeker.radPerSec;\r\n      } else if (impulseDr < 0) {\r\n        impulseDr = 0 - seeker.radPerSec;\r\n      }\r\n    }\r\n    motion.drotation += impulseDr;\r\n\r\n  }\r\n\r\n}\r\n\r\nCore.registerSystem('Seeker', SeekerSystem);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/seeker.js","import * as Core from '../lib/core';\r\n\r\nimport './position';\r\nimport './motion';\r\n\r\nimport Vector2D from '../lib/Vector2D';\r\n\r\nexport class Thruster extends Core.Component {\r\n  static defaults() {\r\n    return {\r\n      active: true,\r\n      stop: false,\r\n      useBrakes: true,\r\n      deltaV: 0,\r\n      maxV: 0\r\n    };\r\n  }\r\n}\r\nCore.registerComponent('Thruster', Thruster);\r\n\r\nexport class ThrusterSystem extends Core.System {\r\n\r\n  matchComponent() { return 'Thruster'; }\r\n\r\n  initialize() {\r\n    this.vInertia = new Vector2D();\r\n    this.vThrust = new Vector2D();\r\n    this.vBrakes = new Vector2D();\r\n  }\r\n\r\n  updateComponent(timeDelta, entityId, thruster) {\r\n\r\n    if (!thruster.active) { return; }\r\n\r\n    const pos = this.world.get('Position', entityId);\r\n    const motion = this.world.get('Motion', entityId);\r\n    if (!pos || !motion) { return; }\r\n\r\n    // Inertia is current motion\r\n    this.vInertia.setValues(motion.dx, motion.dy);\r\n\r\n    // delta-v available for the current tick\r\n    const tickDeltaV = timeDelta * thruster.deltaV;\r\n\r\n    if (!thruster.stop) {\r\n      // Create thrust vector per rotation and add to inertia.\r\n      this.vThrust.setValues(tickDeltaV, 0);\r\n      this.vThrust.rotate(pos.rotation);\r\n      this.vInertia.add(this.vThrust);\r\n    }\r\n\r\n    if (thruster.useBrakes) {\r\n      // Try to enforce the max_v limit with braking thrust.\r\n      const maxV = thruster.stop ? 0 : thruster.maxV;\r\n      const currV = this.vInertia.magnitude();\r\n      const overV = currV - maxV;\r\n      if (overV > 0) {\r\n        // Braking delta-v is max thruster output or remaining overage,\r\n        // whichever is smallest. Braking vector opposes inertia.\r\n        const brakingDv = Math.min(tickDeltaV, overV);\r\n        this.vBrakes.setValues(this.vInertia.x, this.vInertia.y);\r\n        this.vBrakes.normalize();\r\n        this.vBrakes.multiplyScalar(0-brakingDv);\r\n        this.vInertia.add(this.vBrakes);\r\n      }\r\n      if (thruster.stop && currV === 0) {\r\n        thruster.active = false;\r\n      }\r\n    }\r\n\r\n    // Update inertia. Note that we've been careful only to make changes\r\n    // to inertia within the delta-v of the thruster. Other influences\r\n    // on inertia should be preserved.\r\n    motion.dx = this.vInertia.x;\r\n    motion.dy = this.vInertia.y;\r\n  }\r\n\r\n}\r\nCore.registerSystem('Thruster', ThrusterSystem);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/thruster.js","import * as Core from '../lib/core';\n\nconst PI2 = Math.PI * 2;\n\n// https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/Constants\nconst TYPE_SIZES = {\n  0x1406: 1, // FLOAT\n  0x8B50: 2, // FLOAT_VEC2\n  0x8B51: 3, // FLOAT_VEC3\n  0x8B52: 4  // FLOAT_VEC4\n};\n\nlet entityId, position, sprites, sprite, sceneSprite;\n\n// See also: http://phrogz.net/JS/wheeldelta.html\nconst wheelDistance = function(evt){\n  if (!evt) evt = event;\n  const w=evt.wheelDelta, d=evt.detail;\n  if (d){\n    if (w) return w/d/40*d>0?1:-1; // Opera\n    else return -d/3;              // Firefox;         TODO: do not /3 for OS X\n  } else return w/120;             // IE/Safari/Chrome TODO: /3 for Chrome OS X\n};\n\nexport class ViewportWebGL extends Core.System {\n\n  defaultOptions() {\n    return {\n      lineWidth: 2,\n      zoom: 1.0,\n      zoomMin: 0.1,\n      zoomMax: 10.0,\n      zoomWheelFactor: 0.05,\n      gridEnabled: true,\n      gridSize: 250,\n      gridColor: 0x222222,\n      followEnabled: true,\n      followName: null,\n      followEntityId: null\n    };\n  }\n\n  initialize() {\n    this.container = document.querySelector(this.options.container);\n    this.canvas = document.createElement('canvas');\n    this.container.appendChild(this.canvas);\n\n    this.initWebGL(this.canvas);\n\n    this.scene = {};\n\n    const events = {\n      'resize': (ev) => { this.updateMetrics(ev); },\n      'orientationchange': (ev) => { this.updateMetrics(ev); },\n      'mousedown': (ev) => { this.onMouseDown(ev); },\n      'mousemove': (ev) => { this.onMouseMove(ev); },\n      'mouseup': (ev) => { this.onMouseUp(ev); }\n    };\n\n    for (const name in events) {\n      this.canvas.addEventListener(name, events[name], false);\n    }\n\n    // See also: http://phrogz.net/JS/wheeldelta.html\n    const boundOnMouseWheel = (ev) => this.onMouseWheel(ev);\n    if (window.addEventListener){\n      window.addEventListener('mousewheel', boundOnMouseWheel, false); // Chrome/Safari/Opera\n      window.addEventListener('DOMMouseScroll', boundOnMouseWheel, false); // Firefox\n    } else if (window.attachEvent){\n      window.attachEvent('onmousewheel', boundOnMouseWheel); // IE\n    }\n\n    this.followEnabled = this.options.followEnabled;\n    this.zoom = this.options.zoom;\n    this.followEntityId = this.options.followEntityId;\n    this.gridEnabled = this.options.gridEnabled;\n    this.lineWidth = this.options.lineWidth;\n\n    this.cursorRawX = 0;\n    this.cursorRawY = 0;\n\n    this.cursorChanged = false;\n    this.cursorPosition = { x: 0, y: 0 };\n\n    this.cameraX = 0;\n    this.cameraY = 0;\n\n    this.debugDummySprite = { size: 100 };\n\n    this.updateMetrics();\n  }\n\n  onMouseWheel(ev) {\n    this.zoom += wheelDistance(ev) * this.options.zoomWheelFactor;\n    if (this.zoom < this.options.zoomMin) {\n      this.zoom = this.options.zoomMin;\n    }\n    if (this.zoom > this.options.zoomMax) {\n      this.zoom = this.options.zoomMax;\n    }\n  }\n\n  // TODO: Use a symbol for 'mouse{Down,Move,Up}' message?\n\n  onMouseDown(ev) {\n    this.setCursor(ev.clientX, ev.clientY);\n    this.world.publish('mouseDown', this.cursorPosition);\n  }\n\n  onMouseMove(ev) {\n    this.setCursor(ev.clientX, ev.clientY);\n    this.world.publish('mouseMove', this.cursorPosition);\n  }\n\n  onMouseUp(ev) {\n    this.setCursor(ev.clientX, ev.clientY, true);\n    this.world.publish('mouseUp', this.cursorPosition);\n  }\n\n  setCursor(x, y) {\n    const width = this.container.offsetWidth;\n    const height = this.container.offsetHeight;\n\n    this.cursorRawX = x;\n    this.cursorRawY = y;\n\n    const newX = ((x - (width / 2)) / this.zoom) + this.cameraX;\n    const newY = ((y - (height / 2)) / this.zoom) + this.cameraY;\n\n    this.cursorChanged = false;\n    if (newX !== this.cursorPosition.x || newY !== this.cursorPosition.y) {\n      this.cursorChanged = true;\n      this.cursorPosition.x = newX;\n      this.cursorPosition.y = newY;\n    }\n\n    return this.cursorPosition;\n  }\n\n  updateMetrics() {\n    const width = this.container.offsetWidth;\n    const height = this.container.offsetHeight;\n\n    this.visibleWidth = width / this.zoom;\n    this.visibleHeight = height / this.zoom;\n\n    this.visibleLeft = (0 - this.visibleWidth / 2) + this.cameraX;\n    this.visibleTop = (0 - this.visibleHeight / 2) + this.cameraY;\n    this.visibleRight = this.visibleLeft + this.visibleWidth;\n    this.visibleBottom = this.visibleTop + this.visibleHeight;\n  }\n\n  update(timeDelta) {\n    this.updateMetrics();\n\n    this.setCursor(this.cursorRawX, this.cursorRawY);\n    // FIXME: Should be able to skip doing this unless\n    // this.cursorChanged === true, but for some reason that's not working\n    this.world.publish('mouseMove', this.cursorPosition);\n\n    sprites = this.world.get('Sprite') || {};\n\n    // Delete any stage items not found in sprites\n    for (entityId in this.scene) {\n      if (!(entityId in sprites)) {\n        delete this.scene[entityId];\n      }\n    }\n\n    // Create items for any sprites not found in stage\n    for (entityId in sprites) {\n      sprite = sprites[entityId];\n      position = this.world.get('Position', entityId);\n\n      if (!(entityId in this.scene)) {\n        this.scene[entityId] = {\n          position: [0.0, 0.0],\n          shapes: WebGLSprite.init(sprite, entityId, timeDelta, this.world)\n        };\n      }\n\n      sprite.visible = (\n        (position.right > this.visibleLeft) &&\n        (position.left < this.visibleRight) &&\n        (position.bottom > this.visibleTop) &&\n        (position.top < this.visibleBottom)\n      );\n\n      sceneSprite = this.scene[entityId];\n      sceneSprite.visible = sprite.visible;\n      sceneSprite.position[0] = position.x;\n      sceneSprite.position[1] = position.y;\n      sceneSprite.rotation = position.rotation;\n      sceneSprite.scale = sprite.size;\n      sceneSprite.color = [\n        // TODO: this math is terrible\n        (sprite.color / 256 / 256) % 256 / 256,\n        (sprite.color / 256) % 256 / 256,\n        sprite.color % 256 / 256,\n        1.0\n      ];\n      WebGLSprite.update(sceneSprite, sprite, entityId, timeDelta, this.world);\n    }\n  }\n\n  draw() {\n    this.followEntity();\n\n    this.canvas.width = this.container.offsetWidth;\n    this.canvas.height = this.container.offsetHeight;\n\n    // gl.uniform1f(uniforms.uTime, currDrawTime);\n    this.setUniforms({\n      uLineWidth: [0.001 * this.lineWidth],\n      uCameraZoom: [this.zoom],\n      uCameraOrigin: [this.cameraX, this.cameraY],\n      uViewportSize: [this.canvas.clientWidth, this.canvas.clientHeight]\n    });\n\n    // this.drawBackdrop(timeDelta);\n\n    // Re-allocate larger buffer if current is too small for the scene.\n    const bufferSize = this.calculateBufferSizeForScene();\n    if (bufferSize > this.buffer.length) {\n      this.buffer = new Float32Array(Math.max(bufferSize * 1.5, this.buffer.length * 2));\n    }\n\n    const vertexCount = this.fillBufferFromScene();\n    this.gl.bufferData(this.gl.ARRAY_BUFFER, this.buffer, this.gl.STATIC_DRAW);\n    this.gl.viewport(0, 0, this.gl.canvas.width, this.gl.canvas.height);\n    this.gl.clearColor(0, 0, 0, 0.5);\n    this.gl.clear(this.gl.COLOR_BUFFER_BIT | this.gl.DEPTH_BUFFER_BIT);\n    this.gl.drawArrays(this.gl.TRIANGLE_STRIP, 0, vertexCount);\n  }\n\n  followEntity() {\n    if (!this.followEnabled) {\n      this.cameraX = this.cameraY = 0;\n      return;\n    }\n    if (this.options.followName && !this.followEntityId) {\n      // Look up named entity, if necessary.\n      this.followEntityId = Core.getComponent('Name')\n        .findEntityByName(this.world, this.options.followName);\n    }\n    if (this.followEntityId) {\n      // Adjust the viewport center offset to the entity position\n      const position = this.world.get('Position', this.followEntityId);\n      if (position) {\n        this.cameraX = position.x;\n        this.cameraY = position.y;\n        this.setCursor(this.cursorRawX, this.cursorRawY);\n      }\n    }\n  }\n\n  /*\n  drawBackdrop() {\n    const ctx = this.backdrop;\n\n    if (!this.gridEnabled) {\n      ctx.visible = false;\n      return;\n    }\n\n    const gridSize = this.options.gridSize;\n    const gridOffsetX = this.visibleLeft % gridSize;\n    const gridOffsetY = this.visibleTop % gridSize;\n\n    ctx.visible = true;\n    ctx.clear();\n    ctx.lineStyle(5, this.options.gridColor);\n    ctx.position.x = this.visibleLeft;\n    ctx.position.y = this.visibleTop;\n\n    for (let x = -gridOffsetX; x < this.visibleWidth; x += gridSize) {\n      ctx.moveTo(x, 0);\n      ctx.lineTo(x, this.visibleHeight + gridSize);\n    }\n\n    for (let y = -gridOffsetY; y < this.visibleHeight; y += gridSize) {\n      ctx.moveTo(0, y);\n      ctx.lineTo(this.visibleWidth + gridSize, y);\n    }\n  }\n  */\n\n  initWebGL(canvas) {\n    const gl = this.gl = canvas.getContext('webgl', {\n      antialias: true,\n      preserveDrawingBuffer: true,\n      premultipliedAlpha: true\n    });\n\n    const program = this.createProgram(\n      this.createShader(gl.VERTEX_SHADER, SHADER_VERTEX),\n      this.createShader(gl.FRAGMENT_SHADER, SHADER_FRAGMENT)\n    );\n    gl.useProgram(program);\n\n    // Set up for data buffer\n    gl.bindBuffer(gl.ARRAY_BUFFER, gl.createBuffer());\n\n    // First pass through attributes to count total vertex size and index by name\n    const numAttribs = gl.getProgramParameter(program, gl.ACTIVE_ATTRIBUTES);\n    const attribs = {};\n    let vertexSize = 0;\n    for (let i = 0; i < numAttribs; i++) {\n      const info = gl.getActiveAttrib(program, i);\n      const size = TYPE_SIZES[info.type];\n      vertexSize += size;\n      attribs[info.name] = i;\n    }\n\n    // Second pass through attributes to set up attribute pointers into the buffer\n    let pos = 0;\n    for (let i = 0; i < numAttribs; i++) {\n      const info = gl.getActiveAttrib(program, i);\n      const size = TYPE_SIZES[info.type];\n      gl.vertexAttribPointer(i, size, gl.FLOAT, false, vertexSize * 4, pos * 4);\n      gl.enableVertexAttribArray(i);\n      pos += size;\n    }\n\n    // Index uniform locations by name\n    const uniforms = {};\n    const numUniforms = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\n    for (let i = 0; i < numUniforms; i++) {\n      const info = gl.getActiveUniform(program, i);\n      uniforms[info.name] = gl.getUniformLocation(program, info.name);\n    }\n\n    const buffer = new Float32Array(200000);\n\n    Object.assign(this, { gl, uniforms, attribs, vertexSize, buffer });\n  }\n\n  createShader(type, source) {\n    const shader = this.gl.createShader(type);\n    this.gl.shaderSource(shader, source);\n    this.gl.compileShader(shader);\n    const success = this.gl.getShaderParameter(shader, this.gl.COMPILE_STATUS);\n    if (success) { return shader; }\n\n    // console.log('shader', type, 'failed to compile', this.gl.getShaderInfoLog(shader));\n    this.gl.deleteShader(shader);\n  }\n\n  createProgram(vertexShader, fragmentShader) {\n    const program = this.gl.createProgram();\n    this.gl.attachShader(program, vertexShader);\n    this.gl.attachShader(program, fragmentShader);\n    this.gl.linkProgram(program);\n    const success = this.gl.getProgramParameter(program, this.gl.LINK_STATUS);\n    if (success) { return program; }\n\n    // console.log(this.gl.getProgramInfoLog(program));\n    this.gl.deleteProgram(program);\n  }\n\n  calculateBufferSizeForScene() {\n    return Object.values(this.scene)\n      .reduce((acc, item) =>\n        item.shapes.reduce((acc, shape) =>\n          acc + (shape.length - 0.5) * this.vertexSize * 4, 0), 0);\n  }\n\n  fillBufferFromScene() {\n    let vertexCount = 0;\n    let bufferPos = 0;\n    let visible, shape, position, scale, rotation,\n        deltaPosition, deltaScale, deltaRotation, color,\n        lineIdx, shapesIdx, shapes;\n\n    const bufferVertex = (shapeIdx, lineIdx) => {\n      vertexCount++;\n      this.buffer[bufferPos++] = lineIdx;\n      this.buffer[bufferPos++] = shape[shapeIdx - 1][0];\n      this.buffer[bufferPos++] = shape[shapeIdx - 1][1];\n      this.buffer[bufferPos++] = shape[shapeIdx][0];\n      this.buffer[bufferPos++] = shape[shapeIdx][1];\n      this.buffer[bufferPos++] = position[0];\n      this.buffer[bufferPos++] = position[1];\n      this.buffer[bufferPos++] = scale;\n      this.buffer[bufferPos++] = rotation;\n      this.buffer[bufferPos++] = deltaPosition[0];\n      this.buffer[bufferPos++] = deltaPosition[1];\n      this.buffer[bufferPos++] = deltaScale;\n      this.buffer[bufferPos++] = deltaRotation;\n      this.buffer[bufferPos++] = color[0];\n      this.buffer[bufferPos++] = color[1];\n      this.buffer[bufferPos++] = color[2];\n      this.buffer[bufferPos++] = color[3];\n    };\n\n    const sceneKeys = Object.keys(this.scene);\n    sceneKeys.sort();\n    for (let sceneKeysIdx = 0; sceneKeysIdx < sceneKeys.length; sceneKeysIdx++) {\n      ({\n        visible, shapes, position=[0.0, 0.0], scale=0, rotation=0,\n        deltaPosition=[0.0, 0.0], deltaScale=0.0, deltaRotation=0.0,\n        color=[1, 1, 1, 1]\n      } = this.scene[sceneKeys[sceneKeysIdx]]);\n      if (!visible) { continue; }\n      for (shapesIdx = 0; shapesIdx < shapes.length; shapesIdx++) {\n        shape = shapes[shapesIdx];\n        bufferVertex(1, 0);\n        for (lineIdx = 1; lineIdx < shape.length; lineIdx += 1) {\n          bufferVertex(lineIdx, 0);\n          bufferVertex(lineIdx, 1);\n          bufferVertex(lineIdx, 2);\n          bufferVertex(lineIdx, 3);\n        }\n        bufferVertex(shape.length - 1, 3);\n      }\n    }\n\n    return vertexCount;\n  }\n\n  setUniforms(data) {\n    Object.keys(data).forEach(key =>\n      this.gl[`uniform${data[key].length}f`]\n        .call(this.gl, this.uniforms[key], ...data[key]));\n  }\n}\n\nCore.registerSystem('ViewportWebGL', ViewportWebGL);\n\nconst SHADER_VERTEX = `\n// see also: http://m1el.github.io/woscope-how/\nprecision mediump float;\n#define EPS 1E-6\n#define PI 3.141592653589793\n#define PI_2 6.283185307179586\n#define PI_H 1.5707963267948966\n#define PI_Q 0.7853981633974483\n\nuniform float uTime;\nuniform float uLineWidth;\nuniform float uCameraZoom;\nuniform float uCameraRotation;\nuniform vec2 uCameraOrigin;\nuniform vec2 uViewportSize;\n\nattribute float aIdx;\nattribute vec4 aLine;\nattribute vec4 aTransform;\nattribute vec4 aDeltaTransform;\nattribute vec4 aColor;\n\nvarying vec4 uvl;\nvarying vec4 vColor;\nvarying float vLen;\n\nvoid main () {\n  float c, s;\n\n  mat3 mViewportToClipSpace = mat3(\n    2.0 / uViewportSize.x, 0, 0,\n    0, -2.0 / uViewportSize.y, 0,\n    0, 0, 0\n  );\n\n  c = cos(uCameraRotation);\n  s = sin(uCameraRotation);\n  mat3 mCameraRotation = mat3(\n    c, -s, 0.0,\n    s, c, 0.0,\n    0.0, 0.0, 1.0\n  );\n\n  mat3 mCameraOrigin = mat3(\n    1.0, 0.0, 0.0,\n    0.0, 1.0, 0.0,\n    -uCameraOrigin.x, -uCameraOrigin.y, 1.0\n  );\n\n  mat3 mCameraZoom = mat3(\n    uCameraZoom, 0.0, 0.0,\n    0.0, uCameraZoom, 0.0,\n    0.0, 0.0, 1.0\n  );\n\n  c = cos(-aTransform.w + PI_H + (aDeltaTransform.w * uTime));\n  s = sin(-aTransform.w + PI_H + (aDeltaTransform.w * uTime));\n  mat3 mRotation = mat3(\n    c, -s, 0.0,\n    s, c, 0.0,\n    0.0, 0.0, 1.0\n  );\n\n  mat3 mPosition = mat3(\n    1.0, 0.0, 0.0,\n    0.0, 1.0, 0.0,\n    aTransform.x + (aDeltaTransform.x * uTime), aTransform.y + (aDeltaTransform.y * uTime), 1.0\n  );\n\n  mat3 mScale = mat3(\n    aTransform.z + (aDeltaTransform.z * uTime), 0.0, 0.0,\n    0.0, aTransform.z + (aDeltaTransform.z * uTime), 0.0,\n    0.0, 0.0, 1.0\n  );\n\n  // TODO: Move some of these matrices into JS?\n  mat3 mAll = mViewportToClipSpace\n    * mCameraZoom * mCameraRotation * mCameraOrigin\n    * mPosition * mScale * mRotation;\n\n  vec2 tStart = (mAll * vec3(aLine.xy, 1)).xy;\n  vec2 tEnd = (mAll * vec3(aLine.zw, 1)).xy;\n\n  float tang;\n  vec2 current;\n  float idx = aIdx;\n  if (idx >= 2.0) {\n    current = tEnd;\n    tang = 1.0;\n  } else {\n    current = tStart;\n    tang = -1.0;\n  }\n\n  float side = (mod(idx, 2.0)-0.5)*2.0;\n  vec2 dir = tEnd-tStart;\n\n  vColor = aColor;\n\n  uvl.xy = vec2(tang, side);\n  uvl.w = floor(aIdx / 4.0 + 0.5);\n  uvl.z = length(dir);\n  if (uvl.z > EPS) {\n    dir = dir / uvl.z;\n  } else {\n    // If the segment is too short draw a square;\n    dir = vec2(1.0, 0.0);\n  }\n  vec2 norm = vec2(-dir.y, dir.x);\n  gl_Position = vec4((current+(tang*dir+norm*side)*uLineWidth),0.0,1.0);\n}\n`;\n\nconst SHADER_FRAGMENT = `\nprecision mediump float;\nvarying vec4 vColor;\n\nvoid main (void)\n{\n    gl_FragColor = vColor;\n}\n`;\n\nexport class WebGLSprite extends Core.Component {\n  static defaults() {\n    return {\n      name: null,\n      color: 0xffffff,\n      size: 100,\n      width: null,\n      height: null,\n      drawn: false,\n      visible: false\n    };\n  }\n  static create(attrs) {\n    const c = super.create(attrs);\n    if (!c.width) { c.width = c.size; }\n    if (!c.height) { c.height = c.size; }\n    return c;\n  }\n  static register(name, handler) {\n    if (!WebGLSprite.registry) { WebGLSprite.registry = {}; }\n    WebGLSprite.registry[name] = handler;\n  }\n  static getHandler(name) {\n    return name in WebGLSprite.registry\n      ? WebGLSprite.registry[name]\n      : WebGLSprite.registry.default;\n  }\n  static init(sprite, entityId, timeDelta, world) {\n    return WebGLSprite\n      .getHandler(sprite.name)\n      .init(sprite, entityId, timeDelta, world);\n  }\n  static update(sceneSprite, sprite, entityId, timeDelta, world) {\n    const handler = WebGLSprite.getHandler(sprite.name);\n    return 'update' in handler\n      ? handler.update(sceneSprite, sprite, entityId, timeDelta, world)\n      : false;\n  }\n}\n\nCore.registerComponent('Sprite', WebGLSprite);\n\nconst defaultShape = [ [-0.5, 0], [0.5, 0], [0, 0], [0, -0.5], [0, 0.5], [0, 0] ];\nfor (let idx = 0; idx < 8; idx++) {\n  const rot = idx * (PI2 / 8);\n  defaultShape.push([ 0.5 * Math.cos(rot), 0.5 * Math.sin(rot) ]);\n}\ndefaultShape.push([ 0.5, 0 ]);\n\nWebGLSprite.register('default', {\n  init() { return defaultShape; }\n});\n\nconst heroShapes = [\n  [\n    [ 0.0,     0.5],\n    [ 0.125,   0.4167],\n    [ 0.25,    0.0],\n    [ 0.375,  -0.1667],\n    [ 0.25,   -0.5],\n    [ 0.125,  -0.5],\n    [ 0.0625, -0.25],\n    [-0.0625, -0.25],\n    [-0.125,  -0.5],\n    [-0.25,   -0.5],\n    [-0.375,  -0.1667],\n    [-0.25,    0.0],\n    [-0.125,   0.4167],\n    [ 0.0,     0.5],\n  ]\n];\nWebGLSprite.register('hero', {\n  init() { return heroShapes; }\n});\n\nconst repulsorSides = 8;\nconst repulsorPoints = [];\nfor (let idx = 0; idx < repulsorSides; idx++) {\n  const rot = idx * (PI2 / repulsorSides);\n  repulsorPoints.push([ Math.cos(rot), Math.sin(rot) ]);\n}\nrepulsorPoints.push(repulsorPoints[0]);\n\nconst repulsorShapes = [\n  repulsorPoints.map(p => [p[0] * 1, p[1] * 1]),\n  repulsorPoints.map(p => [p[0] * 2, p[1] * 2]),\n  repulsorPoints.map(p => [p[0] * 3, p[1] * 3]),\n  [\n    [-0.50,    0.0],\n    [-0.375,  -0.50],\n    [-0.25,   -0.50],\n    [-0.0625,  0.25],\n    [ 0.0625,  0.25],\n    [ 0.25,   -0.50],\n    [ 0.375,  -0.50],\n    [ 0.50,    0.0],\n    [ 0.375,   0.50],\n    [ 0.25,    0.50],\n    [ 0.0625, -0.25],\n    [-0.0625, -0.25],\n    [-0.25,    0.50],\n    [-0.375,   0.50],\n    [-0.50,    0.0]\n  ]\n];\nWebGLSprite.register('repulsor', {\n  init() { return repulsorShapes; }\n});\n\nWebGLSprite.register('asteroid', {\n  init(sprite) {\n    const NUM_POINTS = 7 + Math.floor(8 * Math.random());\n    const MAX_RADIUS = 0.50;\n    const MIN_RADIUS = 0.35;\n    const ROTATION = PI2 / NUM_POINTS;\n\n    sprite.shape = [];\n    for (let idx = 0; idx < NUM_POINTS; idx++) {\n      const rot = idx * ROTATION;\n      const dist = (Math.random() * (MAX_RADIUS - MIN_RADIUS)) + MIN_RADIUS;\n      sprite.shape.push([dist * Math.cos(rot), dist * Math.sin(rot)]);\n    }\n\n    sprite.shape.push(sprite.shape[0]);\n    return [\n      sprite.shape\n    ];\n  }\n});\n\nWebGLSprite.register('mine', {\n  init(sprite) {\n    let NUM_POINTS = 10 + Math.floor(10 * Math.random());\n    if (NUM_POINTS % 2 !== 0) { NUM_POINTS++; }\n    const ROTATION = PI2 / NUM_POINTS;\n    const MAX_RADIUS = 0.6;\n    const MIN_RADIUS = 0.1;\n\n    let even = false;\n\n    sprite.legs = [];\n    for (let idx = 0; idx < NUM_POINTS; idx++) {\n      const dist = even ? 0.1 : (Math.random() * (MAX_RADIUS - MIN_RADIUS)) + MIN_RADIUS;\n      const rot = idx * ROTATION;\n      sprite.legs.push([ dist * Math.cos(rot), dist * Math.sin(rot) ]);\n      even = !even;\n    }\n    sprite.legs.push([ sprite.legs[0][0], sprite.legs[0][1] ]);\n    sprite.shape = sprite.legs;\n    sprite.drawn = true;\n\n    return [\n      sprite.shape\n    ];\n  },\n  update(/* sceneSprite, sprite, entityId, timeDelta, world */) {\n    /*\n    if (sprite.drawn && Math.random() < 0.15) {\n      sceneSprite.shape = sprite.legs.map(p => [\n        p[0] * (0.9 + 0.5 * Math.random()),\n        p[1] * (0.9 + 0.5 * Math.random())\n      ]);\n    }\n    */\n  }\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/viewportWebGL.js","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_is-object.js\n// module id = 31\n// module chunks = 7","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_property-desc.js\n// module id = 32\n// module chunks = 7","exports.f = {}.propertyIsEnumerable;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-pie.js\n// module id = 33\n// module chunks = 7","// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return Object(defined(it));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-object.js\n// module id = 34\n// module chunks = 7","import * as Core from '../lib/core';\r\n\r\nimport './position';\r\nimport './motion';\r\nimport { MSG_DAMAGE } from './health';\r\n\r\nimport Vector2D from '../lib/Vector2D';\r\n\r\nexport class BounceComponent extends Core.Component {\r\n  static defaults() {\r\n    return {\r\n      mass: 1000.0\r\n    };\r\n  }\r\n}\r\n\r\nCore.registerComponent('Bounce', BounceComponent);\r\n\r\nexport class BounceSystem extends Core.System {\r\n\r\n  matchComponent() { return 'Bounce'; }\r\n\r\n  initialize() {\r\n    this.dn = new Vector2D();\r\n    this.dt = new Vector2D();\r\n    this.mt = new Vector2D();\r\n    this.v1 = new Vector2D();\r\n    this.v2 = new Vector2D();\r\n    this.v1n = new Vector2D();\r\n    this.v1t = new Vector2D();\r\n    this.v2n = new Vector2D();\r\n    this.v2t = new Vector2D();\r\n  }\r\n\r\n  update(timeDelta) {\r\n    const entities = this.world;\r\n    const matches = this.getMatchingComponents();\r\n\r\n    const pairs = {};\r\n    for (const aEntityId in matches) {\r\n\r\n      // const bounce = matches[aEntityId];\r\n      const aCollidable = entities.get('Collidable', aEntityId);\r\n\r\n      for (const bEntityId in aCollidable.inCollisionWith) {\r\n        const pair = [aEntityId, bEntityId];\r\n        pair.sort();\r\n        pairs[pair.join(':')] = pair;\r\n      }\r\n\r\n      // TODO: Process world boundary edge bounce?\r\n\r\n    }\r\n\r\n    for (const key in pairs) {\r\n      const aEntityId = pairs[key][0];\r\n      const aBouncer = entities.get('Bounce', aEntityId);\r\n      if (!aBouncer) { continue; }\r\n\r\n      const bEntityId = pairs[key][1];\r\n      const bBouncer = entities.get('Bounce', bEntityId);\r\n      if (!bBouncer) { continue; }\r\n\r\n      this.resolveElasticCollision(timeDelta, aEntityId, aBouncer, bEntityId, bBouncer);\r\n    }\r\n\r\n  }\r\n\r\n  // See also:\r\n  // http://en.m.wikipedia.org/wiki/Elastic_collision\r\n  // http://en.m.wikipedia.org/wiki/Dot_product\r\n  // https://github.com/Edifear/volleyball/blob/master/collision.html\r\n  // https://github.com/DominikWidomski/Processing/blob/master/sketch_canvas_red_particles/particles.pde#L47\r\n  resolveElasticCollision(timeDelta, aEntityId, aBouncer, bEntityId, bBouncer) {\r\n\r\n    const entities = this.world;\r\n\r\n    const aPosition = entities.get('Position', aEntityId);\r\n    const aSprite = entities.get('Sprite', aEntityId);\r\n    const aMotion = entities.get('Motion', aEntityId);\r\n\r\n    const bPosition = entities.get('Position', bEntityId);\r\n    const bSprite = entities.get('Sprite', bEntityId);\r\n    const bMotion = entities.get('Motion', bEntityId);\r\n\r\n    // First, back both entities off to try to prevent sticking\r\n    /*\r\n    aPosition.x -= aMotion.dx * timeDelta;\r\n    aPosition.y -= aMotion.dy * timeDelta;\r\n    bPosition.x -= bMotion.dx * timeDelta;\r\n    bPosition.y -= bMotion.dy * timeDelta;\r\n    const radii, dx, dy;\r\n    while (true) {\r\n      aPosition.x -= aMotion.dx * timeDelta;\r\n      aPosition.y -= aMotion.dy * timeDelta;\r\n      bPosition.x -= bMotion.dx * timeDelta;\r\n      bPosition.y -= bMotion.dy * timeDelta;\r\n\r\n      radii = (aSprite.size + bSprite.size) / 2;\r\n      dx = aPosition.x - bPosition.x;\r\n      dy = aPosition.y - bPosition.y;\r\n      if (dx*dx + dy*dy > radii*radii) { break; }\r\n    }\r\n    */\r\n\r\n    // Vector between entities\r\n    this.dn.setValues(aPosition.x - bPosition.x, aPosition.y - bPosition.y);\r\n\r\n    // Distance between entities\r\n    const delta = this.dn.magnitude();\r\n\r\n    // Normal vector of the collision plane\r\n    this.dn.normalize();\r\n\r\n    // Tangential vector of the collision plane\r\n    this.dt.setValues(this.dn.y, -this.dn.x);\r\n\r\n    // HACK: avoid divide by zero\r\n    if (delta === 0) { bPosition.x += 0.01; }\r\n\r\n    // Get total mass for entities\r\n    const m1 = aBouncer.mass;\r\n    const m2 = bBouncer.mass;\r\n    const M = m1 + m2;\r\n\r\n    // Minimum translation vector to push entities apart\r\n    this.mt.setValues(\r\n      this.dn.x * (aSprite.width + bSprite.width - delta) * 1.1,\r\n      this.dn.y * (aSprite.height + bSprite.height - delta) * 1.1\r\n    );\r\n\r\n    // Velocity vectors of entities before collision\r\n    this.v1.setValues((aMotion) ? aMotion.dx : 0, (aMotion) ? aMotion.dy : 0);\r\n    this.v2.setValues((bMotion) ? bMotion.dx : 0, (bMotion) ? bMotion.dy : 0);\r\n\r\n    // split the velocity vector of the first entity into a normal\r\n    // and a tangential component in respect of the collision plane\r\n    this.v1n.setValues(\r\n      this.dn.x * this.v1.dot(this.dn),\r\n      this.dn.y * this.v1.dot(this.dn)\r\n    );\r\n    this.v1t.setValues(\r\n      this.dt.x * this.v1.dot(this.dt),\r\n      this.dt.y * this.v1.dot(this.dt)\r\n    );\r\n\r\n    // split the velocity vector of the second entity into a normal\r\n    // and a tangential component in respect of the collision plane\r\n    this.v2n.setValues(\r\n      this.dn.x * this.v2.dot(this.dn),\r\n      this.dn.y * this.v2.dot(this.dn)\r\n    );\r\n    this.v2t.setValues(\r\n      this.dt.x * this.v2.dot(this.dt),\r\n      this.dt.y * this.v2.dot(this.dt)\r\n    );\r\n\r\n    // calculate new velocity vectors of the entities, the tangential\r\n    // component stays the same, the normal component changes analog to\r\n    // the 1-Dimensional case\r\n\r\n    if (aMotion) {\r\n      const aFactor = (m1 - m2) / M * this.v1n.magnitude() +\r\n                    2 * m2 / M * this.v2n.magnitude();\r\n      aMotion.dx = this.v1t.x + this.dn.x * aFactor;\r\n      aMotion.dy = this.v1t.y + this.dn.y * aFactor;\r\n      this.processDamage(aEntityId, bEntityId, aMotion, aBouncer, m1);\r\n    }\r\n\r\n    if (bMotion) {\r\n      const bFactor = (m2 - m1) / M * this.v2n.magnitude() +\r\n                    2 * m1 / M * this.v1n.magnitude();\r\n      bMotion.dx = this.v2t.x - this.dn.x * bFactor;\r\n      bMotion.dy = this.v2t.y - this.dn.y * bFactor;\r\n      this.processDamage(bEntityId, aEntityId, bMotion, bBouncer, m1);\r\n    }\r\n\r\n  }\r\n\r\n  processDamage(eid, c_eid, v_motion, bouncer, m1) {\r\n    if (!bouncer.damage) { return; }\r\n\r\n    // Convert a fraction of the rebound velocity into damage by mass\r\n    const dmg = Math.sqrt(v_motion.dx * v_motion.dx + v_motion.dy * v_motion.dy) *\r\n                bouncer.damage * m1;\r\n\r\n    this.world.publish(MSG_DAMAGE, {\r\n      to: eid,\r\n      from: c_eid,\r\n      amount: dmg / 2\r\n    });\r\n\r\n    this.world.publish(MSG_DAMAGE, {\r\n      to: c_eid,\r\n      from: eid,\r\n      amount: dmg / 2\r\n    });\r\n  }\r\n\r\n}\r\n\r\nCore.registerSystem('Bounce', BounceSystem);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/bounce.js","module.exports = {};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iterators.js\n// module id = 36\n// module chunks = 7","import * as Core from '../lib/core';\r\n\r\nexport class Collidable extends Core.Component {\r\n  static defaults() {\r\n    return {\r\n      inCollision: false,\r\n      inCollisionWith: {}\r\n    };\r\n  }\r\n}\r\n\r\nCore.registerComponent('Collidable', Collidable);\r\n\r\nlet match, matches, entityId, entityId2, position, aCollidable, bCollidable, dx, dy, radii;\r\n\r\nexport class CollisionSystem extends Core.System {\r\n\r\n  defaultOptions() {\r\n    return {\r\n      positionSystemName: 'Position'\r\n    };\r\n  }\r\n\r\n  matchComponent() { return 'Collidable'; }\r\n\r\n  initialize() {\r\n    this.positionSystem = this.world.getSystem(this.options.positionSystemName);\r\n    this.width = this.options.width;\r\n    this.height = this.options.height;\r\n    this.retrieveBounds = {};\r\n    this.checkCollisionBound = (neighbor, component) =>\r\n      this.checkCollision(neighbor, component);\r\n  }\r\n\r\n  update(/* timeDelta */) {\r\n    matches = this.getMatchingComponents();\r\n    for (entityId in matches) {\r\n      match = matches[entityId];\r\n      match.inCollision = false;\r\n      for (entityId2 in match.inCollisionWith) {\r\n        delete match.inCollisionWith[entityId2];\r\n      }\r\n    }\r\n    for (entityId in matches) {\r\n      position = this.world.get('Position', entityId);\r\n      if (position) {\r\n        this.positionSystem.quadtree.iterate(position, this.checkCollisionBound, position);\r\n      }\r\n    }\r\n  }\r\n\r\n  checkCollision(bPosition, aPosition) {\r\n    if (aPosition.entityId === bPosition.entityId) { return; }\r\n\r\n    aCollidable = this.world.get('Collidable', aPosition.entityId);\r\n    bCollidable = this.world.get('Collidable', bPosition.entityId);\r\n\r\n    if (!aCollidable || !bCollidable) { return; }\r\n\r\n    dx = aPosition.x - bPosition.x;\r\n    dy = aPosition.y - bPosition.y;\r\n\r\n    // TODO: Pluggable shape intersection detection here?\r\n\r\n    // Check collision circle via distance\r\n    radii = (aPosition.width + bPosition.width) / 2;\r\n    if (dx*dx + dy*dy > radii*radii) { return; }\r\n\r\n    aCollidable.inCollision = true;\r\n    aCollidable.inCollisionWith[bPosition.entityId] = 1;\r\n\r\n    bCollidable.inCollision = true;\r\n    bCollidable.inCollisionWith[aPosition.entityId] = 1;\r\n  }\r\n\r\n  draw(/* timeDelta */) {\r\n    const g = this.getDebugGraphics();\r\n    if (!g) { return; }\r\n\r\n    g.lineStyle(4, 0x999999);\r\n    const collidables = this.world.get('Collidable');\r\n    for (const entityId in collidables) {\r\n      const collidable = collidables[entityId];\r\n      const position = this.world.get('Position', entityId);\r\n\r\n      if (collidable.inCollision) {\r\n        g.drawCircle(position.x, position.y, 40);\r\n      }\r\n    }\r\n\r\n  }\r\n}\r\n\r\nCore.registerSystem('Collision', CollisionSystem);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/collision.js","module.exports = { \"default\": require(\"core-js/library/fn/object/keys\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/object/keys.js\n// module id = 38\n// module chunks = 7","import { Component, System, registerComponent, registerSystem } from '../lib/core';\n\nexport class PlayerInputSteering extends Component {\n  static defaults() {\n    return {\n      active: true,\n      radPerSec: Math.PI * 2\n    };\n  }\n}\n\nregisterComponent('PlayerInputSteering', PlayerInputSteering);\n\nconst PI2 = Math.PI * 2;\n\nexport class PlayerInputSteeringSystem extends System {\n\n  defaultOptions() {\n    return {\n      gamepadDeadzone: 0.2\n    };\n  }\n\n  matchComponent() { return 'PlayerInputSteering'; }\n\n  initialize() {\n    this.gamepad = { active: false };\n    this.pointer = { active: false, x: 0, y: 0 };\n    this.keys = { active: false };\n    this.touch = { active: false, x: 0, y: 0 };\n\n    this.world\n      .subscribe('mouseDown', (msg, cursorPosition) =>\n        this.setPointer(true, cursorPosition))\n      .subscribe('mouseUp', (msg, cursorPosition) =>\n        this.setPointer(false, cursorPosition))\n      .subscribe('mouseMove', (msg, cursorPosition) =>\n        this.setPointer(this.pointer.active, cursorPosition));\n\n    const windowEvents = {\n      keydown: this.handleKeyDown,\n      keyup: this.handleKeyUp\n    };\n    Object.keys(windowEvents)\n      .forEach(k => window.addEventListener(k, windowEvents[k].bind(this)));\n  }\n\n  setPointer(active, position) {\n    this.pointer.active = active;\n    this.pointer.x = position.x;\n    this.pointer.y = position.y;\n  }\n\n  update(timeDelta) {\n    this.updateGamepads(timeDelta);\n    this.updateKeyboard(timeDelta);\n    super.update(timeDelta);\n  }\n\n  updateComponent(timeDelta, entityId, steering) {\n    const thruster = this.world.get('Thruster', entityId);\n    const motion = this.world.get('Motion', entityId);\n\n    thruster.active = true;\n    thruster.stop = false;\n\n    if (this.keys.active) {\n      return this.updateComponentFromKeyboard(timeDelta, entityId, steering);\n    }\n\n    if (this.pointer.active) {\n      return this.updateComponentFromPointer(timeDelta, entityId, steering);\n    }\n\n    if (this.gamepad.active) {\n      return this.updateComponentFromGamepad(timeDelta, entityId, steering);\n    }\n\n    thruster.stop = true;\n    motion.drotation = 0;\n  }\n\n  updateComponentFromPointer(timeDelta, entityId, steering) {\n    const position = this.world.get('Position', entityId);\n    this.updateMotionFromTargetAngle(timeDelta, entityId, steering,\n      Math.atan2(this.pointer.y - position.y, this.pointer.x - position.x));\n  }\n\n  updateComponentFromGamepad(timeDelta, entityId, steering) {\n    this.updateMotionFromTargetAngle(timeDelta, entityId, steering,\n      Math.atan2(this.gamepad.axis1, this.gamepad.axis0));\n  }\n\n  updateComponentFromKeyboard(timeDelta, entityId, steering) {\n    const thruster = this.world.get('Thruster', entityId);\n    const motion = this.world.get('Motion', entityId);\n\n    const dleft  = (this.keys[65] || this.keys[37] || this.gamepad.button13);\n    const dright = (this.keys[68] || this.keys[39] || this.gamepad.button14);\n    const dup    = (this.keys[87] || this.keys[38] || this.gamepad.button11);\n    // const ddown  = (this.keys[83] || this.keys[40] || this.gamepad.button12);\n\n    if (dup) {\n      thruster.active = true;\n    } else {\n      thruster.stop = true;\n    }\n\n    const direction = dleft ? -1 : (dright ? 1 : 0);\n    const targetDr = direction * steering.radPerSec;\n    motion.drotation = targetDr;\n  }\n\n  updateGamepads() {\n    const gamepads = navigator.getGamepads ? navigator.getGamepads() : [];\n\n    // TODO: specify which gamepad, i.e. for multiplayer\n    for (let i = 0; i < gamepads.length; i++) {\n      const gp = gamepads[i];\n      if (!gp || !gp.connected) continue;\n      gp.buttons.forEach((val, idx) => this.gamepad[`button${idx}`] = val.pressed);\n      gp.axes.forEach((val, idx) => this.gamepad[`axis${idx}`] = val);\n      break; // stop after the first gamepad\n    }\n\n    Object.keys(this.gamepad).forEach(k => {\n      if (!this.gamepad[k]) { delete this.gamepad[k]; }\n    });\n\n    const axisX = this.gamepad.axis0;\n    const axisY = this.gamepad.axis1;\n    this.gamepad.active =\n      (Math.abs(axisX) > 0 || Math.abs(axisY) > 0) &&\n      (Math.sqrt(axisX * axisX + axisY * axisY) > this.options.gamepadDeadzone);\n  }\n\n  updateKeyboard() {\n    const dleft  = (this.keys[65] || this.keys[37] || this.gamepad.button13);\n    const dright = (this.keys[68] || this.keys[39] || this.gamepad.button14);\n    const dup    = (this.keys[87] || this.keys[38] || this.gamepad.button11);\n    const ddown  = (this.keys[83] || this.keys[40] || this.gamepad.button12);\n\n    this.keys.active = (dleft || dright || dup || ddown);\n  }\n\n  handleKeyDown(ev) {\n    this.keys[ev.keyCode] = true;\n    ev.preventDefault();\n  }\n\n  handleKeyUp(ev) {\n    delete this.keys[ev.keyCode];\n    ev.preventDefault();\n  }\n\n  updateMotionFromTargetAngle(timeDelta, entityId, steering, targetAngleRaw) {\n    const position = this.world.get('Position', entityId);\n    const motion = this.world.get('Motion', entityId);\n\n    const targetAngle = (targetAngleRaw < 0) ?\n      targetAngleRaw + PI2 : targetAngleRaw;\n\n    // Pick the direction from current to target angle\n    let direction = (targetAngle < position.rotation) ? -1 : 1;\n\n    // If the offset between the angles is more than half a circle, go\n    // the other way because it'll be shorter.\n    const offset = Math.abs(targetAngle - position.rotation);\n    if (offset > Math.PI) {\n      direction = 0 - direction;\n    }\n\n    // Work out the desired delta-rotation to steer toward target\n    const targetDr = direction * Math.min(steering.radPerSec, offset / timeDelta);\n\n    // Calculate the delta-rotation impulse required to meet the goal,\n    // but constrain to the capability of the steering thrusters\n    let impulseDr = (targetDr - motion.drotation);\n    if (Math.abs(impulseDr) > steering.radPerSec) {\n      if (impulseDr > 0) {\n        impulseDr = steering.radPerSec;\n      } else if (impulseDr < 0) {\n        impulseDr = 0 - steering.radPerSec;\n      }\n    }\n\n    motion.drotation += impulseDr;\n  }\n\n}\n\nregisterSystem('PlayerInputSteering', PlayerInputSteeringSystem);\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/playerInputSteering.js","module.exports = { \"default\": require(\"core-js/library/fn/object/assign\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/object/assign.js\n// module id = 40\n// module chunks = 7","var id = 0;\nvar px = Math.random();\nmodule.exports = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_uid.js\n// module id = 41\n// module chunks = 7","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_ctx.js\n// module id = 42\n// module chunks = 7","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-primitive.js\n// module id = 43\n// module chunks = 7","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_cof.js\n// module id = 44\n// module chunks = 7","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_defined.js\n// module id = 45\n// module chunks = 7","// 7.1.4 ToInteger\nvar ceil = Math.ceil;\nvar floor = Math.floor;\nmodule.exports = function (it) {\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-integer.js\n// module id = 46\n// module chunks = 7","var shared = require('./_shared')('keys');\nvar uid = require('./_uid');\nmodule.exports = function (key) {\n  return shared[key] || (shared[key] = uid(key));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_shared-key.js\n// module id = 47\n// module chunks = 7","var global = require('./_global');\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || (global[SHARED] = {});\nmodule.exports = function (key) {\n  return store[key] || (store[key] = {});\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_shared.js\n// module id = 48\n// module chunks = 7","// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_enum-bug-keys.js\n// module id = 49\n// module chunks = 7","exports.f = Object.getOwnPropertySymbols;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-gops.js\n// module id = 50\n// module chunks = 7","// most Object methods by ES6 should accept primitives\nvar $export = require('./_export');\nvar core = require('./_core');\nvar fails = require('./_fails');\nmodule.exports = function (KEY, exec) {\n  var fn = (core.Object || {})[KEY] || Object[KEY];\n  var exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function () { fn(1); }), 'Object', exp);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-sap.js\n// module id = 51\n// module chunks = 7","module.exports = true;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_library.js\n// module id = 52\n// module chunks = 7","// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\nvar anObject = require('./_an-object');\nvar dPs = require('./_object-dps');\nvar enumBugKeys = require('./_enum-bug-keys');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar Empty = function () { /* empty */ };\nvar PROTOTYPE = 'prototype';\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar createDict = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = require('./_dom-create')('iframe');\n  var i = enumBugKeys.length;\n  var lt = '<';\n  var gt = '>';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  require('./_html').appendChild(iframe);\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n  // createDict = iframe.contentWindow.Object;\n  // html.removeChild(iframe);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n  iframeDocument.close();\n  createDict = iframeDocument.F;\n  while (i--) delete createDict[PROTOTYPE][enumBugKeys[i]];\n  return createDict();\n};\n\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty();\n    Empty[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = createDict();\n  return Properties === undefined ? result : dPs(result, Properties);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-create.js\n// module id = 53\n// module chunks = 7","var def = require('./_object-dp').f;\nvar has = require('./_has');\nvar TAG = require('./_wks')('toStringTag');\n\nmodule.exports = function (it, tag, stat) {\n  if (it && !has(it = stat ? it : it.prototype, TAG)) def(it, TAG, { configurable: true, value: tag });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_set-to-string-tag.js\n// module id = 54\n// module chunks = 7","exports.f = require('./_wks');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_wks-ext.js\n// module id = 55\n// module chunks = 7","var global = require('./_global');\nvar core = require('./_core');\nvar LIBRARY = require('./_library');\nvar wksExt = require('./_wks-ext');\nvar defineProperty = require('./_object-dp').f;\nmodule.exports = function (name) {\n  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});\n  if (name.charAt(0) != '_' && !(name in $Symbol)) defineProperty($Symbol, name, { value: wksExt.f(name) });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_wks-define.js\n// module id = 56\n// module chunks = 7","var pIE = require('./_object-pie');\nvar createDesc = require('./_property-desc');\nvar toIObject = require('./_to-iobject');\nvar toPrimitive = require('./_to-primitive');\nvar has = require('./_has');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nexports.f = require('./_descriptors') ? gOPD : function getOwnPropertyDescriptor(O, P) {\n  O = toIObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return gOPD(O, P);\n  } catch (e) { /* empty */ }\n  if (has(O, P)) return createDesc(!pIE.f.call(O, P), O[P]);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-gopd.js\n// module id = 57\n// module chunks = 7","import { Component, System, registerComponent, registerSystem } from '../lib/core';\n\nimport { MSG_DESTROY } from './spawn';\n\n// Commonly used temp variables, pre-declared early.\nlet entityId, matches, sprite;\n\nexport class HordeSpawn extends Component {\n  static defaults() {\n    return { age: 0 };\n  }\n}\n\nregisterComponent('HordeSpawn', HordeSpawn);\n\nexport class HordeSpawnSystem extends System {\n\n  defaultOptions() {\n    return {\n      viewportSystemName: 'ViewportPixi',\n      minCount: 100,\n      maxFrameSpawn: 50,\n      offscreenTTL: 1.0,\n      spawnMargin: 100,\n      spawn: () => {}\n    };\n  }\n\n  initialize() {\n    this.spawnCount = 0;\n    this.viewportSystem = this.world.getSystem(this.options.viewportSystemName);\n  }\n\n  matchComponent() { return 'HordeSpawn'; }\n\n  update(timeDelta) {\n    matches = this.getMatchingComponents() || {};\n    this.spawnCount = Object.keys(matches).length;\n    if (this.spawnCount < this.options.minCount) {\n      const cnt = Math.max(\n        this.options.maxFrameSpawn,\n        this.options.minCount - this.spawnCount\n      );\n      for (let i = 0; i < cnt; i++) {\n        this.spawnOffscreen();\n      }\n    }\n    for (entityId in matches) {\n      this.updateComponent(timeDelta, entityId, matches[entityId]);\n    }\n  }\n\n  updateComponent(timeDelta, entityId, hordespawn) {\n    sprite = this.world.get('Sprite', entityId);\n    if (sprite.visible) {\n      hordespawn.age = 0;\n    } else {\n      hordespawn.age += timeDelta;\n      if (hordespawn.age >= this.options.offscreenTTL) {\n        this.world.publish(MSG_DESTROY, entityId);\n      }\n    }\n  }\n\n  spawnOffscreen() {\n    const {visibleLeft, visibleRight, visibleTop, visibleBottom} = this.viewportSystem;\n    const margin = this.options.spawnMargin;\n    const w = (visibleRight + margin) - (visibleLeft - margin);\n    const h = (visibleBottom + margin) - (visibleTop - margin);\n    const r = Math.random();\n\n    let x, y;\n\n    if (r < 0.5) {\n      y = (visibleTop - margin) + (Math.random() * h);\n    } else {\n      x = (visibleLeft - margin) + (Math.random() * w);\n    }\n\n    if (r < 0.25) {\n      x = visibleLeft - margin;\n    } else if (r < 0.5) {\n      x = visibleRight + margin;\n    } else if (r < 0.75) {\n      y = visibleTop - margin;\n    } else {\n      y = visibleBottom + margin;\n    }\n\n    this.options.spawn(x, y);\n  }\n\n}\n\nregisterSystem('HordeSpawn', HordeSpawnSystem);\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/hordeSpawn.js","import { Component, System, registerComponent, registerSystem } from '../lib/core';\r\n\r\nexport class Repulsor extends Component {\r\n    static defaults() {\r\n      return {\r\n        active: true,\r\n        range: 500,\r\n        force: 200\r\n      };\r\n    }\r\n}\r\n\r\nregisterComponent('Repulsor', Repulsor);\r\n\r\nlet components, component, entityId, position, repulsor, repulsorPosition,\r\n    neighborSprite, neighborPosition, neighborMotion, repelAngle, repelForce,\r\n    dist;\r\n\r\nconst queryBounds = {};\r\n\r\nexport class RepulsorSystem extends System {\r\n\r\n  defaultOptions() {\r\n    return {\r\n      positionSystemName: 'Position'\r\n    };\r\n  }\r\n\r\n  matchComponent() { return 'Repulsor'; }\r\n\r\n  initialize() {\r\n    this.positionSystem = this.world.getSystem(this.options.positionSystemName);\r\n    this.applyRepulsionBound = (neighbor, component) =>\r\n      this.applyRepulsion(neighbor, component);\r\n  }\r\n\r\n  updateComponent(timeDelta, entityId, component) {\r\n    if (!component.active) { return; }\r\n\r\n    position = this.world.get('Position', entityId);\r\n\r\n    queryBounds.left = position.left - component.range;\r\n    queryBounds.right = position.right + component.range;\r\n    queryBounds.top = position.top - component.range;\r\n    queryBounds.bottom = position.bottom + component.range;\r\n\r\n    this.positionSystem.quadtree.iterate(queryBounds, this.applyRepulsionBound, entityId);\r\n  }\r\n\r\n  applyRepulsion(neighbor, repulsorId) {\r\n    if (entityId === neighbor.entityId) { return; }\r\n\r\n    neighborSprite = this.world.get('Sprite', neighbor.entityId);\r\n    if (neighborSprite.name !== 'mine') { return; }\r\n\r\n    repulsor = this.world.get('Repulsor', repulsorId);\r\n    repulsorPosition = this.world.get('Position', repulsorId);\r\n    neighborPosition = this.world.get('Position', neighbor.entityId);\r\n    neighborMotion = this.world.get('Motion', neighbor.entityId);\r\n\r\n    dist =\r\n      (neighborPosition.x - repulsorPosition.x) *\r\n      (neighborPosition.x - repulsorPosition.x)\r\n      +\r\n      (neighborPosition.y - repulsorPosition.y) *\r\n      (neighborPosition.y - repulsorPosition.y)\r\n    ;\r\n\r\n    if (dist > (repulsor.range * repulsor.range)) { return; }\r\n    // if (dist < repulsor.range) { return; }\r\n\r\n    repelAngle = Math.atan2(\r\n      repulsorPosition.y - neighborPosition.y,\r\n      repulsorPosition.x - neighborPosition.x\r\n    );\r\n\r\n    repelForce = -repulsor.force;\r\n\r\n    neighborMotion.dx += repelForce * Math.cos(repelAngle);\r\n    neighborMotion.dy += repelForce * Math.sin(repelAngle);\r\n  }\r\n\r\n  draw(/* timeDelta */) {\r\n    const g = this.getDebugGraphics();\r\n    if (!g) { return; }\r\n\r\n    g.lineStyle(4, 0x882222);\r\n    components = this.getMatchingComponents();\r\n    for (entityId in components) {\r\n      component = components[entityId];\r\n      position = this.world.get('Position', entityId);\r\n      g.drawCircle(position.x, position.y, component.range);\r\n    }\r\n  }\r\n\r\n}\r\n\r\nregisterSystem('Repulsor', RepulsorSystem);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/repulsor.js","\"use strict\";\n\nexports.__esModule = true;\n\nvar _assign = require(\"../core-js/object/assign\");\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _assign2.default || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/extends.js\n// module id = 60\n// module chunks = 7","module.exports = !require('./_descriptors') && !require('./_fails')(function () {\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', { get: function () { return 7; } }).a != 7;\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_ie8-dom-define.js\n// module id = 61\n// module chunks = 7","var isObject = require('./_is-object');\nvar document = require('./_global').document;\n// typeof document.createElement is 'object' in old IE\nvar is = isObject(document) && isObject(document.createElement);\nmodule.exports = function (it) {\n  return is ? document.createElement(it) : {};\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_dom-create.js\n// module id = 62\n// module chunks = 7","var has = require('./_has');\nvar toIObject = require('./_to-iobject');\nvar arrayIndexOf = require('./_array-includes')(false);\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\n\nmodule.exports = function (object, names) {\n  var O = toIObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) if (key != IE_PROTO) has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-keys-internal.js\n// module id = 63\n// module chunks = 7","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\n// eslint-disable-next-line no-prototype-builtins\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iobject.js\n// module id = 64\n// module chunks = 7","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer');\nvar min = Math.min;\nmodule.exports = function (it) {\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-length.js\n// module id = 65\n// module chunks = 7","// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\nvar has = require('./_has');\nvar toObject = require('./_to-object');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar ObjectProto = Object.prototype;\n\nmodule.exports = Object.getPrototypeOf || function (O) {\n  O = toObject(O);\n  if (has(O, IE_PROTO)) return O[IE_PROTO];\n  if (typeof O.constructor == 'function' && O instanceof O.constructor) {\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectProto : null;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-gpo.js\n// module id = 66\n// module chunks = 7","\"use strict\";\n\nexports.__esModule = true;\n\nvar _iterator = require(\"../core-js/symbol/iterator\");\n\nvar _iterator2 = _interopRequireDefault(_iterator);\n\nvar _symbol = require(\"../core-js/symbol\");\n\nvar _symbol2 = _interopRequireDefault(_symbol);\n\nvar _typeof = typeof _symbol2.default === \"function\" && typeof _iterator2.default === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = typeof _symbol2.default === \"function\" && _typeof(_iterator2.default) === \"symbol\" ? function (obj) {\n  return typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n} : function (obj) {\n  return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/typeof.js\n// module id = 67\n// module chunks = 7","'use strict';\nvar $at = require('./_string-at')(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\nrequire('./_iter-define')(String, 'String', function (iterated) {\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var index = this._i;\n  var point;\n  if (index >= O.length) return { value: undefined, done: true };\n  point = $at(O, index);\n  this._i += point.length;\n  return { value: point, done: false };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.string.iterator.js\n// module id = 68\n// module chunks = 7","'use strict';\nvar LIBRARY = require('./_library');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar hide = require('./_hide');\nvar has = require('./_has');\nvar Iterators = require('./_iterators');\nvar $iterCreate = require('./_iter-create');\nvar setToStringTag = require('./_set-to-string-tag');\nvar getPrototypeOf = require('./_object-gpo');\nvar ITERATOR = require('./_wks')('iterator');\nvar BUGGY = !([].keys && 'next' in [].keys()); // Safari has buggy iterators w/o `next`\nvar FF_ITERATOR = '@@iterator';\nvar KEYS = 'keys';\nvar VALUES = 'values';\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED) {\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function (kind) {\n    if (!BUGGY && kind in proto) return proto[kind];\n    switch (kind) {\n      case KEYS: return function keys() { return new Constructor(this, kind); };\n      case VALUES: return function values() { return new Constructor(this, kind); };\n    } return function entries() { return new Constructor(this, kind); };\n  };\n  var TAG = NAME + ' Iterator';\n  var DEF_VALUES = DEFAULT == VALUES;\n  var VALUES_BUG = false;\n  var proto = Base.prototype;\n  var $native = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT];\n  var $default = $native || getMethod(DEFAULT);\n  var $entries = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined;\n  var $anyNative = NAME == 'Array' ? proto.entries || $native : $native;\n  var methods, key, IteratorPrototype;\n  // Fix native\n  if ($anyNative) {\n    IteratorPrototype = getPrototypeOf($anyNative.call(new Base()));\n    if (IteratorPrototype !== Object.prototype && IteratorPrototype.next) {\n      // Set @@toStringTag to native iterators\n      setToStringTag(IteratorPrototype, TAG, true);\n      // fix for some old engines\n      if (!LIBRARY && !has(IteratorPrototype, ITERATOR)) hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  }\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if (DEF_VALUES && $native && $native.name !== VALUES) {\n    VALUES_BUG = true;\n    $default = function values() { return $native.call(this); };\n  }\n  // Define iterator\n  if ((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])) {\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG] = returnThis;\n  if (DEFAULT) {\n    methods = {\n      values: DEF_VALUES ? $default : getMethod(VALUES),\n      keys: IS_SET ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if (FORCED) for (key in methods) {\n      if (!(key in proto)) redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iter-define.js\n// module id = 69\n// module chunks = 7","module.exports = require('./_hide');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_redefine.js\n// module id = 70\n// module chunks = 7","// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\nvar $keys = require('./_object-keys-internal');\nvar hiddenKeys = require('./_enum-bug-keys').concat('length', 'prototype');\n\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return $keys(O, hiddenKeys);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-gopn.js\n// module id = 71\n// module chunks = 7","import * as Core from '../lib/core';\r\n\r\nexport class Expiration extends Core.Component {\r\n  static defaults() {\r\n    return { ttl: 0, age: 0 };\r\n  }\r\n}\r\nCore.registerComponent('Expiration', Expiration);\r\n\r\nexport class ExpirationSystem extends Core.System {\r\n  matchComponent() {\r\n    return 'Expiration';\r\n  }\r\n  updateComponent(timeDelta, entityId, expiration) {\r\n    expiration.age += timeDelta;\r\n    if (expiration.age >= expiration.ttl) {\r\n      this.world.destroy(entityId);\r\n    }\r\n  }\r\n}\r\nCore.registerSystem('Expiration', ExpirationSystem);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/expiration.js","import * as Core from '../lib/core';\r\n\r\nimport './position';\r\n\r\nimport Vector2D from '../lib/Vector2D';\r\n\r\nexport class Orbiter extends Core.Component {\r\n  static defaults() {\r\n    return {\r\n      name: null,\r\n      entityId: null,\r\n      angle: 0.0,\r\n      rotate: true,\r\n      radPerSec: Math.PI / 4\r\n    };\r\n  }\r\n}\r\nCore.registerComponent('Orbiter', Orbiter);\r\n\r\nexport class OrbiterSystem extends Core.System {\r\n\r\n  matchComponent() { return 'Orbiter'; }\r\n\r\n  initialize() {\r\n    this.vOrbited = new Vector2D();\r\n    this.vOrbiter = new Vector2D();\r\n    this.vOld = new Vector2D();\r\n  }\r\n\r\n  updateComponent(timeDelta, entityId, orbiter) {\r\n\r\n    // Look up the orbited entity ID, if only name given.\r\n    if (orbiter.name && !orbiter.entityId) {\r\n      orbiter.entityId = Core.getComponent('Name')\r\n        .findEntityByName(this.world, orbiter.name);\r\n    }\r\n\r\n    const pos = this.world.get('Position', entityId);\r\n    const oPos = this.world.get('Position', orbiter.entityId);\r\n\r\n    this.vOrbited.setValues(oPos.x, oPos.y);\r\n    this.vOrbiter.setValues(pos.x, pos.y);\r\n\r\n    const angleDelta = timeDelta * orbiter.radPerSec;\r\n    this.vOrbiter.rotateAround(this.vOrbited, angleDelta);\r\n\r\n    this.vOld.setValues(pos.x, pos.y);\r\n    pos.x = this.vOrbiter.x;\r\n    pos.y = this.vOrbiter.y;\r\n    if (orbiter.rotate) {\r\n      pos.rotation = this.vOld.angleTo(this.vOrbiter);\r\n    }\r\n\r\n  }\r\n}\r\nCore.registerSystem('Orbiter', OrbiterSystem);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/orbiter.js","import * as Core from '../lib/core';\r\n\r\nexport class Pathfinder extends Core.Component {\r\n  static defaults() {\r\n    return {\r\n      width: 5000,\r\n      height: 5000\r\n    };\r\n  }\r\n}\r\n\r\nCore.registerComponent('Pathfinder', Pathfinder);\r\n\r\nexport class SpaceTree {\r\n\r\n  constructor(quadtree, x, y, width, height, level, maxLevel=4) {\r\n    const bounds = quadtree.bounds;\r\n\r\n    this.x = x || bounds.x;\r\n    this.y = y || bounds.y;\r\n    this.width = width || bounds.width;\r\n    this.height = height || bounds.height;\r\n    this.right = this.x + this.width;\r\n    this.bottom = this.y + this.height;\r\n    this.level = level || 0;\r\n    this.empty = true;\r\n    this.full = false;\r\n    this.children = [];\r\n\r\n    let ct = 0;\r\n\r\n    quadtree.iterate({\r\n      x: this.x, y: this.y, right: this.right, bottom: this.bottom\r\n    }, (obj) => {\r\n\r\n      const dx = Math.abs(obj.x - this.x) * 2;\r\n      const dy = Math.abs(obj.y - this.y) * 2;\r\n      const dwidth = (obj.right - obj.x) + this.width;\r\n      const dheight = (obj.bottom - obj.y) + this.height;\r\n\r\n      if (dx < dwidth && dy < dheight) {\r\n        ct++;\r\n        if (obj.x <= this.x && obj.y <= this.y &&\r\n            obj.right >= this.right && obj.bottom >= this.bottom) {\r\n          this.full = true;\r\n        }\r\n      }\r\n    });\r\n\r\n    if (ct === 0) {\r\n      this.empty = true;\r\n      return;\r\n    }\r\n\r\n    this.empty = false;\r\n    if (!this.full && this.level < maxLevel) {\r\n      this.split(quadtree);\r\n    }\r\n\r\n  }\r\n\r\n  split(quadtree) {\r\n    const splitWidth = this.width / 2;\r\n    const splitHeight = this.height / 2;\r\n\r\n    this.children[0] = new SpaceTree(quadtree,\r\n        this.x, this.y,\r\n        splitWidth, splitHeight, this.level + 1);\r\n\r\n    this.children[1] = new SpaceTree(quadtree,\r\n        this.x + splitWidth, this.y,\r\n        splitWidth, splitHeight, this.level + 1);\r\n\r\n    this.children[2] = new SpaceTree(quadtree,\r\n        this.x, this.y + splitHeight,\r\n        splitWidth, splitHeight, this.level + 1);\r\n\r\n    this.children[3] = new SpaceTree(quadtree,\r\n        this.x + splitWidth, this.y + splitHeight,\r\n        splitWidth, splitHeight, this.level + 1);\r\n  }\r\n\r\n}\r\n\r\nexport class PathfindingSystem extends Core.System {\r\n\r\n  matchComponent() { return 'Pathfinder'; }\r\n\r\n  initialize() {\r\n  }\r\n\r\n  update(/*timeDelta*/) {\r\n    /*\r\n    let collisionSystem = this.world.getSystem('Collision');\r\n    let quadtree = collisionSystem.quadtree;\r\n    */\r\n  }\r\n\r\n  draw(timeDelta) {\r\n    if (!this.debug) { return; }\r\n\r\n    const vpSystem = this.world.getSystem('ViewportCanvas');\r\n\r\n    const ctx = vpSystem.ctx;\r\n    ctx.save();\r\n\r\n    vpSystem.centerAndZoom(timeDelta);\r\n    vpSystem.followEntity(timeDelta);\r\n\r\n    // draw\r\n\r\n    ctx.restore();\r\n  }\r\n\r\n}\r\n\r\nCore.registerSystem('Pathfinding', PathfindingSystem);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/pathfinding.js","import * as Core from '../lib/core';\r\n\r\nimport '../plugins/position';\r\nimport '../plugins/motion';\r\n\r\nimport Vector2D from '../lib/Vector2D';\r\n\r\nconst PI2 = Math.PI * 2;\r\n\r\nexport class Steering extends Core.Component {\r\n  static defaults() {\r\n    return {\r\n      sensorRange: 350,\r\n      obstacleRepel: [400, 2.1]\r\n    };\r\n  }\r\n}\r\n\r\nCore.registerComponent('Steering', Steering);\r\n\r\nexport class SteeringSystem extends Core.System {\r\n\r\n  matchComponent() { return 'Steering'; }\r\n\r\n  initialize() {\r\n\r\n    this.seekFactor = 1;\r\n\r\n    this.pushFactor = 7;\r\n\r\n    this.avoidFactor = 10;\r\n\r\n    this.avoidSeeAhead = 500;\r\n    this.avoidRayWidthFactor = 1.5;\r\n\r\n    this.vTarget = new Vector2D();\r\n\r\n    this.vectors = {\r\n      avoid: new Vector2D(),\r\n      push: new Vector2D(),\r\n      seek: new Vector2D(),\r\n      flee: new Vector2D(),\r\n      wander: new Vector2D(),\r\n      evade: new Vector2D(),\r\n      pursue: new Vector2D()\r\n    };\r\n\r\n  }\r\n\r\n  updateComponent(timeDelta, entityId, steering) {\r\n\r\n    this.vTarget.setValues(0, 0);\r\n\r\n    for (const key in this.vectors) {\r\n      this.vectors[key].setValues(0, 0);\r\n      this[key](this.vectors[key], timeDelta, entityId, steering);\r\n      this.vTarget.add(this.vectors[key]);\r\n    }\r\n\r\n    this.applySteering(timeDelta, entityId, steering);\r\n\r\n  }\r\n\r\n  avoid(vector, timeDelta, entityId, steering) {\r\n\r\n    if (this.debug) { steering.vectors = []; }\r\n\r\n    const sprite = this.world.get('Sprite', entityId);\r\n    const position = this.world.get('Position', entityId);\r\n\r\n    const result = this.lookForObstacle(entityId, position, sprite, steering);\r\n    if (!result) { return; }\r\n\r\n    const range = steering.sensorRange;\r\n    this.world.getSystem('Collision').quadtree.iterate({\r\n      x: position.x - (range / 2),\r\n      y: position.y - (range / 2),\r\n      width: range,\r\n      height: range\r\n    }, (item) => {\r\n\r\n      if (entityId === item.entityId) { return; }\r\n\r\n      const targetPosition = this.world.get('Position', item.entityId);\r\n      if (!targetPosition) { return; }\r\n\r\n      const targetSprite = this.world.get('Sprite', item.entityId);\r\n\r\n      const A = 0;\r\n      const B = steering.obstacleRepel[0];\r\n      const n = 0;\r\n      const m = steering.obstacleRepel[1];\r\n\r\n      const dx = position.x - targetPosition.x;\r\n      const dy = position.y - targetPosition.y;\r\n      const edgeRange = sprite.size / 2 + targetSprite.size / 2;\r\n      let distance = Math.sqrt(dx*dx + dy*dy) - edgeRange;\r\n      if (distance <= 0) { distance = 0.01; }\r\n\r\n      if (distance > steering.sensorRange) { return; }\r\n\r\n      const U = (-A / Math.pow(distance, n)) +\r\n              ( B / Math.pow(distance, m));\r\n\r\n      vector.x += dx * U;\r\n      vector.y += dy * U;\r\n\r\n      if (this.debug) {\r\n        steering.vectors.push([targetPosition.x, targetPosition.y, U]);\r\n      }\r\n\r\n    });\r\n\r\n  }\r\n\r\n  push(/*vector, timeDelta, entityId, steering*/) {\r\n\r\n  }\r\n\r\n  avoid_ray(vector, timeDelta, entityId, steering) {\r\n\r\n    const sprite = this.world.get('Sprite', entityId);\r\n    const position = this.world.get('Position', entityId);\r\n\r\n    // Scan ahead for an obstacle, bail if none found.\r\n    const result = this.lookForObstacle(entityId, position, sprite, steering);\r\n    if (!result) { return; }\r\n\r\n    const obstacle = result[0];\r\n    const rayX = result[1];\r\n    const rayY = result[2];\r\n\r\n    // Opposite right triangle leg is distance from obstacle to avoid collision.\r\n    const oppositeLen = obstacle.sprite.size / 2 +\r\n      sprite.size * this.avoidRayWidthFactor;\r\n\r\n    // Hypotenuse length is distance from obstacle.\r\n    const hypotenuseLen = Math.sqrt(\r\n      Math.pow(obstacle.position.x - rayX, 2) +\r\n      Math.pow(obstacle.position.y - rayY, 2)\r\n    );\r\n\r\n    // Adjacent length would be avoid tangent, but no need to calculate.\r\n\r\n    // Find angle from direct collision to avoidance\r\n    let theta = Math.asin(oppositeLen / hypotenuseLen);\r\n\r\n    // HACK: Too close, panic and steer hard away\r\n    if (isNaN(theta)) { theta = Math.PI * 0.66; }\r\n\r\n    // Find the absolute angle to the obstacle from entity.\r\n    const obstacleAngle = Math.atan2(\r\n      obstacle.position.y - rayY,\r\n      obstacle.position.x - rayX\r\n    );\r\n\r\n    // Calculate nearest target angle for avoidance...\r\n    // Try turning clockwise from obstacle.\r\n    let avoidAngle = (obstacleAngle + theta);\r\n    // Calculate the 'travel' needed from current rotation.\r\n    const travel = Math.min(PI2 - Math.abs(position.rotation - avoidAngle),\r\n                          Math.abs(position.rotation - avoidAngle));\r\n    if (travel > theta) {\r\n      // Clockwise travel exceeds theta, so counterclockwise is shorter.\r\n      avoidAngle = obstacleAngle - theta;\r\n    }\r\n\r\n    // Set up the avoidance vector.\r\n    vector.setValues(this.avoidFactor, 0);\r\n    vector.rotate(avoidAngle);\r\n\r\n  }\r\n\r\n  lookForObstacle(entityId, position, sprite, steering) {\r\n    const rayWidth = sprite.size * this.avoidRayWidthFactor;\r\n\r\n    const vRayUnit = new Vector2D();\r\n    vRayUnit.setValues(rayWidth, 0);\r\n    vRayUnit.rotate(position.rotation);\r\n\r\n    if (this.debug) { steering.hitCircles = []; }\r\n\r\n    let obstacle, rayX, rayY;\r\n    const steps = this.avoidSeeAhead / rayWidth;\r\n    for (let step = 0; step < steps; step++) {\r\n      rayX = position.x + vRayUnit.x * step;\r\n      rayY = position.y + vRayUnit.y * step;\r\n      obstacle = this.searchCircleForObstacle(\r\n        steering, entityId,\r\n        rayX, rayY, rayWidth\r\n      );\r\n      if (obstacle) {\r\n        return [obstacle, rayX, rayY];\r\n      }\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  searchCircleForObstacle(steering, entityId, x, y, size) {\r\n\r\n    if (this.debug) {\r\n      steering.hitCircles.push([x, y, size]);\r\n    }\r\n\r\n    const hits = [];\r\n\r\n    this.world.getSystem('Collision').quadtree.iterate({\r\n      x: x - (size / 2),\r\n      y: y - (size / 2),\r\n      width: size,\r\n      height: size\r\n    }, (item) => {\r\n\r\n      if (entityId === item.entityId) { return; }\r\n      const dx = item.position.x - x;\r\n      const dy = item.position.y - y;\r\n      const range = dx*dx + dy*dy;\r\n      const radii = (size + item.sprite.size) / 2;\r\n      if (range < radii*radii) {\r\n        hits.push([range, item]);\r\n      }\r\n\r\n    });\r\n\r\n    hits.sort(function (a, b) { return b[0] - a[0]; });\r\n    return hits.length ? hits[0][1] : null;\r\n  }\r\n\r\n  seek(vector, timeDelta, entityId, steering) {\r\n\r\n    // Look up the entity ID to seek, if only name given.\r\n    if (steering.seekTargetName && !steering.seekTargetEntityId) {\r\n      steering.seekTargetEntityId = Core.getComponent('Name')\r\n        .findEntityByName(this.world, steering.seekTargetName);\r\n    }\r\n\r\n    if (!steering.seekTargetEntityId) { return; }\r\n\r\n    const position = this.world.get('Position', entityId);\r\n    if (!position) { return; }\r\n\r\n    // Accept either a raw x/y coord or entity ID as target\r\n    let targetPosition = steering.targetPosition;\r\n    if (!targetPosition) {\r\n      targetPosition = this.world.get('Position', steering.seekTargetEntityId);\r\n    }\r\n    if (!targetPosition) { return; }\r\n\r\n    vector.setValues(targetPosition.x - position.x, targetPosition.y - position.y);\r\n    vector.normalize();\r\n    vector.multiplyScalar(this.seekFactor);\r\n\r\n  }\r\n\r\n  flee(/*vector, timeDelta, entityId, steering*/) {\r\n  }\r\n\r\n  wander(/*vector, timeDelta, entityId, steering*/) {\r\n  }\r\n\r\n  evade(/*vector, timeDelta, entityId, steering*/) {\r\n  }\r\n\r\n  pursue(/*vector, timeDelta, entityId, steering*/) {\r\n  }\r\n\r\n  applySteering(timeDelta, entityId, steering) {\r\n\r\n    const motion = this.world.get('Motion', entityId);\r\n\r\n    let targetDr = 0;\r\n\r\n    if (!this.vTarget.isZero()) {\r\n      const position = this.world.get('Position', entityId);\r\n\r\n      // Get the target angle, ensuring a 0..2*Math.PI range.\r\n      let targetAngle = this.vTarget.angle();\r\n      if (targetAngle < 0) { targetAngle += (2 * Math.PI); }\r\n\r\n      if (this.debug) { steering.targetAngle = targetAngle; }\r\n\r\n      // Pick the direction from current to target angle\r\n      let direction = (targetAngle < position.rotation) ? -1 : 1;\r\n\r\n      // If the offset between the angles is more than half a circle, it's\r\n      // shorter to go the other way.\r\n      const offset = Math.abs(targetAngle - position.rotation);\r\n      if (offset > Math.PI) { direction = 0 - direction; }\r\n\r\n      // Work out the desired delta-rotation to steer toward target\r\n      targetDr = direction * Math.min(steering.radPerSec, offset / timeDelta);\r\n    }\r\n\r\n    // Calculate the delta-rotation impulse required to meet the goal,\r\n    // but constrain to the capability of the steering thrusters\r\n    let impulseDr = (targetDr - motion.drotation);\r\n    if (Math.abs(impulseDr) > steering.radPerSec) {\r\n      if (impulseDr > 0) {\r\n        impulseDr = steering.radPerSec;\r\n      } else if (impulseDr < 0) {\r\n        impulseDr = 0 - steering.radPerSec;\r\n      }\r\n    }\r\n\r\n    motion.drotation += impulseDr;\r\n\r\n  }\r\n\r\n  draw(/*timeDelta*/) {\r\n    if (!this.debug) { return; }\r\n\r\n    /*\r\n    const vpSystem = this.world.getSystem('CanvasViewport');\r\n    const ctx = vpSystem.ctx;\r\n    ctx.save();\r\n\r\n    vpSystem.centerAndZoom(timeDelta);\r\n    vpSystem.followEntity(timeDelta);\r\n\r\n    const matches = this.getMatchingComponents();\r\n    for (const entityId in matches) {\r\n      ctx.save();\r\n\r\n      const steering = matches[entityId];\r\n      const position = this.world.get('Position', entityId);\r\n      const sprite = this.world.get('Sprite', entityId);\r\n\r\n      this.drawSteeringVsPosition(ctx, steering, position);\r\n\r\n      if (steering.hitCircles) {\r\n        for (const [x, y, size] of steering.hitCircles) {\r\n          ctx.strokeStyle = '#d00';\r\n          ctx.beginPath();\r\n          ctx.arc(x, y, size, 0, PI2, false);\r\n          ctx.stroke();\r\n        }\r\n      }\r\n\r\n      if (steering.sensorRange) {\r\n          ctx.strokeStyle = 'rgba(0, 64, 64, 0.75)';\r\n          ctx.beginPath();\r\n          ctx.arc(position.x, position.y, steering.sensorRange, 0, PI2, false);\r\n          ctx.stroke();\r\n      }\r\n\r\n      if (steering.vectors) {\r\n        for (const [x, y, U] of steering.vectors) {\r\n          ctx.strokeStyle = 'rgba(0, 64, 64, 0.75)';\r\n          ctx.beginPath();\r\n          ctx.moveTo(position.x, position.y);\r\n          ctx.lineWidth = Math.max(1, Math.min(U, sprite.width));\r\n          ctx.lineTo(x, y);\r\n          ctx.stroke();\r\n        }\r\n      }\r\n\r\n      if (steering.pushing) {\r\n        this.drawAngle(ctx, position, position.rotation, '#d0d');\r\n      }\r\n\r\n      ctx.restore();\r\n    }\r\n\r\n    ctx.restore();\r\n    */\r\n  }\r\n\r\n  drawSteeringVsPosition(ctx, steering, position) {\r\n    this.drawAngle(ctx, position, position.rotation, '#ddd');\r\n    if (steering.targetAngle) {\r\n      this.drawAngle(ctx, position, steering.targetAngle, '#dd0');\r\n    }\r\n  }\r\n\r\n  drawAngle(ctx, position, angle, color) {\r\n    const vec = new Vector2D();\r\n    vec.setValues(this.avoidSeeAhead, 0);\r\n    vec.rotate(angle);\r\n    ctx.strokeStyle = color;\r\n    ctx.beginPath();\r\n    ctx.moveTo(position.x, position.y);\r\n    ctx.lineTo(position.x + vec.x, position.y + vec.y);\r\n    ctx.stroke();\r\n  }\r\n\r\n}\r\n\r\nCore.registerSystem('Steering', SteeringSystem);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/steering.js","import * as Core from '../lib/core';\r\n\r\nexport class CanvasSprite extends Core.Component {\r\n  static defaults() {\r\n    return {\r\n      name: null,\r\n      color: '#fff',\r\n      size: 100,\r\n      width: null,\r\n      height: null\r\n    };\r\n  }\r\n  static create(attrs) {\r\n    const c = super.create(attrs);\r\n    if (!c.width) { c.width = c.size; }\r\n    if (!c.height) { c.height = c.size; }\r\n    return c;\r\n  }\r\n}\r\nCore.registerComponent('Sprite', CanvasSprite);\r\n\r\n// See also: http://phrogz.net/JS/wheeldelta.html\r\nconst wheelDistance = function(evt){\r\n  if (!evt) evt = event;\r\n  const w=evt.wheelDelta, d=evt.detail;\r\n  if (d){\r\n    if (w) return w/d/40*d>0?1:-1; // Opera\r\n    else return -d/3;              // Firefox;         TODO: do not /3 for OS X\r\n  } else return w/120;             // IE/Safari/Chrome TODO: /3 for Chrome OS X\r\n};\r\n\r\nexport class ViewportCanvas extends Core.System {\r\n\r\n  defaultOptions() {\r\n    return {\r\n      lineWidth: 1.5,\r\n      zoom: 1.0,\r\n      zoomMin: 0.1,\r\n      zoomMax: 10.0,\r\n      zoomWheelFactor: 0.025,\r\n      gridEnabled: true,\r\n      gridSize: 500,\r\n      gridColor: '#111',\r\n      followEnabled: true,\r\n      followName: null,\r\n      followEntityId: null\r\n    };\r\n  }\r\n\r\n  initialize() {\r\n    this.container = document.querySelector(this.options.container);\r\n    this.canvas = document.createElement('canvas');\r\n    this.container.appendChild(this.canvas);\r\n\r\n    this.ctx = this.canvas.getContext('2d');\r\n\r\n    const events = {\r\n      'resize': (ev) => { this.updateMetrics(ev); },\r\n      'orientationchange': (ev) => { this.updateMetrics(ev); },\r\n      'mousedown': (ev) => { this.onMouseDown(ev); },\r\n      'mousemove': (ev) => { this.onMouseMove(ev); },\r\n      'mouseup': (ev) => { this.onMouseUp(ev); },\r\n      //'wheel': (ev) => { this.onMouseWheel(ev); }\r\n    };\r\n\r\n    for (const name in events) {\r\n      this.canvas.addEventListener(name, events[name], false);\r\n    }\r\n\r\n    // See also: http://phrogz.net/JS/wheeldelta.html\r\n    const boundOnMouseWheel = (ev) => this.onMouseWheel(ev);\r\n    if (window.addEventListener){\r\n      window.addEventListener('mousewheel', boundOnMouseWheel, false); // Chrome/Safari/Opera\r\n      window.addEventListener('DOMMouseScroll', boundOnMouseWheel, false); // Firefox\r\n    } else if (window.attachEvent){\r\n      window.attachEvent('onmousewheel', boundOnMouseWheel); // IE\r\n    }\r\n\r\n    this.followEnabled = this.options.followEnabled;\r\n    this.zoom = this.options.zoom;\r\n    this.followEntityId = this.options.followEntityId;\r\n    this.gridEnabled = this.options.gridEnabled;\r\n    this.lineWidth = this.options.lineWidth;\r\n\r\n    this.cursorRawX = 0;\r\n    this.cursorRawY = 0;\r\n\r\n    this.cursorChanged = false;\r\n    this.cursorPosition = { x: 0, y: 0 };\r\n\r\n    this.cameraX = 0;\r\n    this.cameraY = 0;\r\n\r\n    this.debugDummySprite = { size: 100 };\r\n  }\r\n\r\n  draw(timeDelta) {\r\n    this.updateMetrics();\r\n    this.ctx.save();\r\n\r\n    this.clear();\r\n    this.centerAndZoom(timeDelta);\r\n    this.followEntity(timeDelta);\r\n\r\n    if (this.gridEnabled) { this.drawBackdrop(timeDelta); }\r\n\r\n    this.drawScene(timeDelta);\r\n\r\n    if (this.world.debug) { this.drawDebugCursor(); }\r\n\r\n    this.ctx.restore();\r\n  }\r\n\r\n  onMouseWheel(ev) {\r\n    this.zoom += wheelDistance(ev) * this.options.zoomWheelFactor;\r\n    if (this.zoom < this.options.zoomMin) {\r\n      this.zoom = this.options.zoomMin;\r\n    }\r\n    if (this.zoom > this.options.zoomMax) {\r\n      this.zoom = this.options.zoomMax;\r\n    }\r\n  }\r\n\r\n  // TODO: Use a symbol for 'mouse{Down,Move,Up}' message?\r\n\r\n  onMouseDown(ev) {\r\n    this.setCursor(ev.clientX, ev.clientY);\r\n    this.world.publish('mouseDown', this.cursorPosition);\r\n  }\r\n\r\n  onMouseMove(ev) {\r\n    this.setCursor(ev.clientX, ev.clientY);\r\n  }\r\n\r\n  onMouseUp(ev) {\r\n    this.setCursor(ev.clientX, ev.clientY);\r\n    this.world.publish('mouseUp', this.cursorPosition);\r\n  }\r\n\r\n  update(/* timeDelta */) {\r\n    // Use the cursorChanged flag set by setCursor to limit mouseMove messages\r\n    // to one per game loop tick\r\n    if (this.cursorChanged) {\r\n      this.cursorChanged = false;\r\n      this.world.publish('mouseMove', this.cursorPosition);\r\n    }\r\n  }\r\n\r\n  setCursor(x, y) {\r\n    const width = this.container.offsetWidth;\r\n    const height = this.container.offsetHeight;\r\n\r\n    this.cursorRawX = x;\r\n    this.cursorRawY = y;\r\n\r\n    const newX = ((x - (width / 2)) / this.zoom) + this.cameraX;\r\n    const newY = ((y - (height / 2)) / this.zoom) + this.cameraY;\r\n\r\n    if (newX !== this.cursorPosition.x || newY !== this.cursorPosition.y) {\r\n      this.cursorChanged = true;\r\n      this.cursorPosition.x = newX;\r\n      this.cursorPosition.y = newY;\r\n    }\r\n  }\r\n\r\n  updateMetrics() {\r\n    const width = this.container.offsetWidth;\r\n    const height = this.container.offsetHeight;\r\n\r\n    this.canvas.width = width;\r\n    this.canvas.height = height;\r\n\r\n    this.visibleWidth = width / this.zoom;\r\n    this.visibleHeight = height / this.zoom;\r\n\r\n    this.visibleLeft = (0 - this.visibleWidth / 2) + this.cameraX;\r\n    this.visibleTop = (0 - this.visibleHeight / 2) + this.cameraY;\r\n    this.visibleRight = this.visibleLeft + this.visibleWidth;\r\n    this.visibleBottom = this.visibleTop + this.visibleHeight;\r\n  }\r\n\r\n  clear() {\r\n    this.ctx.fillStyle = 'rgba(0, 0, 0, 1.0)';\r\n    this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\r\n  }\r\n\r\n  centerAndZoom() {\r\n    this.ctx.translate(this.canvas.width / 2, this.canvas.height / 2);\r\n    this.ctx.scale(this.zoom, this.zoom);\r\n  }\r\n\r\n  followEntity() {\r\n    if (!this.followEnabled) {\r\n      this.cameraX = this.cameraY = 0;\r\n      return;\r\n    }\r\n    if (this.options.followName && !this.followEntityId) {\r\n      // Look up named entity, if necessary.\r\n      this.followEntityId = Core.getComponent('Name')\r\n        .findEntityByName(this.world, this.options.followName);\r\n    }\r\n    if (this.followEntityId) {\r\n      // Adjust the viewport center offset to the entity position\r\n      const position = this.world.get('Position', this.followEntityId);\r\n      if (position) {\r\n        this.cameraX = position.x;\r\n        this.cameraY = position.y;\r\n        this.setCursor(this.cursorRawX, this.cursorRawY);\r\n        this.ctx.translate(0 - this.cameraX, 0 - this.cameraY);\r\n      }\r\n    }\r\n  }\r\n\r\n  drawDebugCursor() {\r\n    const ctx = this.ctx;\r\n    ctx.save();\r\n    ctx.strokeStyle = '#f0f';\r\n    ctx.lineWidth = this.lineWidth / this.zoom;\r\n    ctx.translate(this.cursorPosition.x, this.cursorPosition.y);\r\n    ctx.beginPath();\r\n    ctx.moveTo(-20, 0);\r\n    ctx.lineTo(20, 0);\r\n    ctx.moveTo(0, -20);\r\n    ctx.lineTo(0, 20);\r\n    ctx.strokeRect(-10, -10, 20, 20);\r\n    ctx.stroke();\r\n    ctx.restore();\r\n  }\r\n\r\n  drawBackdrop() {\r\n    const gridSize = this.options.gridSize;\r\n    const gridOffsetX = this.visibleLeft % gridSize;\r\n    const gridOffsetY = this.visibleTop % gridSize;\r\n\r\n    const ctx = this.ctx;\r\n\r\n    ctx.save();\r\n    ctx.beginPath();\r\n\r\n    ctx.strokeStyle = this.options.gridColor;\r\n    ctx.lineWidth = this.lineWidth / this.zoom;\r\n\r\n    for (let x = (this.visibleLeft - gridOffsetX); x < this.visibleRight; x += gridSize) {\r\n      ctx.moveTo(x, this.visibleTop);\r\n      ctx.lineTo(x, this.visibleBottom);\r\n    }\r\n\r\n    for (let y = (this.visibleTop - gridOffsetY); y < this.visibleBottom; y += gridSize) {\r\n      ctx.moveTo(this.visibleLeft, y);\r\n      ctx.lineTo(this.visibleRight, y);\r\n    }\r\n\r\n    ctx.stroke();\r\n    ctx.restore();\r\n  }\r\n\r\n  drawScene(timeDelta) {\r\n    const positions = this.world.get('Position');\r\n    for (const entityId in positions) {\r\n      this.drawSprite(timeDelta, entityId, positions[entityId]);\r\n    }\r\n  }\r\n\r\n  drawSprite(timeDelta, entityId, position) {\r\n\r\n    let sprite = this.world.get('Sprite', entityId);\r\n    if (!sprite) { sprite = CanvasSprite.defaults(); }\r\n\r\n    let spriteFn = getSprite(sprite.name);\r\n    if (!spriteFn) { spriteFn = getSprite('default'); }\r\n\r\n    const ctx = this.ctx;\r\n\r\n    ctx.save();\r\n\r\n    ctx.translate(position.x, position.y);\r\n\r\n    ctx.rotate(position.rotation + Math.PI/2);\r\n    ctx.scale(sprite.size / 100, sprite.size / 100);\r\n\r\n    // HACK: Try to keep line width consistent regardless of zoom, to sort of\r\n    // simulate a vector display\r\n    ctx.lineWidth = this.lineWidth / this.zoom / (sprite.size / 100);\r\n\r\n    ctx.strokeStyle = sprite.color;\r\n    spriteFn(ctx, timeDelta, sprite, entityId);\r\n\r\n    ctx.restore();\r\n\r\n  }\r\n\r\n}\r\n\r\nCore.registerSystem('ViewportCanvas', ViewportCanvas);\r\n\r\nconst spriteRegistry = {};\r\nexport function registerSprite(name, sprite) {\r\n  spriteRegistry[name] = sprite;\r\n}\r\nexport function getSprite(name) {\r\n  return spriteRegistry[name];\r\n}\r\n\r\nconst PI2 = Math.PI * 2;\r\n\r\nregisterSprite('default', (ctx/*, timeDelta, sprite, entityId*/) => {\r\n  ctx.beginPath();\r\n  ctx.arc(0, 0, 50, 0, PI2, true);\r\n  ctx.moveTo(0, 0);\r\n  ctx.lineTo(0, -50);\r\n  ctx.moveTo(0, 0);\r\n  ctx.stroke();\r\n});\r\n\r\nregisterSprite('sun', (ctx/*, timeDelta, sprite, entityId*/) => {\r\n  ctx.beginPath();\r\n  ctx.arc(0, 0, 50, 0, PI2, true);\r\n  ctx.stroke();\r\n});\r\n\r\nregisterSprite('enemyscout', (ctx/*, timeDelta, sprite, entityId*/) => {\r\n  ctx.beginPath();\r\n  ctx.moveTo(0, -50);\r\n  ctx.lineTo(-45, 50);\r\n  ctx.lineTo(-12.5, 12.5);\r\n  ctx.lineTo(0, 25);\r\n  ctx.lineTo(12.5, 12.5);\r\n  ctx.lineTo(45, 50);\r\n  ctx.lineTo(0, -50);\r\n  ctx.moveTo(0, -50);\r\n  ctx.stroke();\r\n});\r\n\r\nregisterSprite('hero', (ctx/*, timeDelta, sprite, entityId*/) => {\r\n  ctx.rotate(Math.PI);\r\n  ctx.beginPath();\r\n  ctx.moveTo(-12.5, -50);\r\n  ctx.lineTo(-25, -50);\r\n  ctx.lineTo(-50, 0);\r\n  ctx.arc(0, 0, 50, Math.PI, 0, true);\r\n  ctx.lineTo(25, -50);\r\n  ctx.lineTo(12.5, -50);\r\n  ctx.lineTo(25, 0);\r\n  ctx.arc(0, 0, 25, 0, Math.PI, true);\r\n  ctx.lineTo(-12.5, -50);\r\n  ctx.stroke();\r\n});\r\n\r\nregisterSprite('asteroid', (ctx, timeDelta, sprite/*, entityId*/) => {\r\n  let idx;\r\n\r\n  if (!sprite.points) {\r\n    const NUM_POINTS = 7 + Math.floor(8 * Math.random());\r\n    const MAX_RADIUS = 50;\r\n    const MIN_RADIUS = 35;\r\n    const ROTATION = PI2 / NUM_POINTS;\r\n\r\n    sprite.points = [];\r\n    for (idx = 0; idx < NUM_POINTS; idx++) {\r\n      const rot = idx * ROTATION;\r\n      const dist = (Math.random() * (MAX_RADIUS - MIN_RADIUS)) + MIN_RADIUS;\r\n      sprite.points.push([dist * Math.cos(rot), dist * Math.sin(rot)]);\r\n    }\r\n  }\r\n\r\n  ctx.beginPath();\r\n  ctx.moveTo(sprite.points[0][0], sprite.points[0][1]);\r\n  for (idx = 0; idx < sprite.points.length; idx++) {\r\n    ctx.lineTo(sprite.points[idx][0], sprite.points[idx][1]);\r\n  }\r\n  ctx.lineTo(sprite.points[0][0], sprite.points[0][1]);\r\n  ctx.stroke();\r\n\r\n});\r\n\r\nregisterSprite('explosion', (ctx, timeDelta, sprite/*, entityId*/) => {\r\n  let p, idx;\r\n\r\n  if (!sprite.initialized) {\r\n\r\n    sprite.initialized = true;\r\n\r\n    Object.assign(sprite, {\r\n      ttl: 2.0,\r\n      radius: 100,\r\n      maxParticles: 25,\r\n      maxParticleSize: 4,\r\n      maxVelocity: 300,\r\n      color: '#f00',\r\n      age: 0,\r\n      stop: false,\r\n      ...sprite\r\n    });\r\n\r\n    sprite.particles = [];\r\n\r\n    for (idx = 0; idx < sprite.maxParticles; idx++) {\r\n      sprite.particles.push({ free: true });\r\n    }\r\n\r\n  }\r\n\r\n  for (idx = 0; idx < sprite.particles.length; idx++) {\r\n    p = sprite.particles[idx];\r\n\r\n    if (!sprite.stop && p.free) {\r\n\r\n      p.velocity = sprite.maxVelocity * Math.random();\r\n      p.angle = (Math.PI * 2) * Math.random();\r\n      p.dx = 0 - (p.velocity * Math.sin(p.angle));\r\n      p.dy = p.velocity * Math.cos(p.angle);\r\n      p.distance = p.x = p.y = 0;\r\n      p.maxDistance = sprite.radius * Math.random();\r\n      p.size = sprite.maxParticleSize;\r\n      p.free = false;\r\n\r\n    } else if (!p.free) {\r\n\r\n      p.x += p.dx * timeDelta;\r\n      p.y += p.dy * timeDelta;\r\n\r\n      p.distance += p.velocity * timeDelta;\r\n      if (p.distance >= p.maxDistance) {\r\n        p.distance = p.maxDistance;\r\n        p.free = true;\r\n      }\r\n\r\n    }\r\n\r\n  }\r\n\r\n  sprite.age += timeDelta;\r\n\r\n  if (sprite.age >= sprite.ttl) {\r\n    sprite.stop = true;\r\n  }\r\n\r\n  const alpha = Math.max(0, 1 - (sprite.age / sprite.ttl));\r\n\r\n  ctx.save();\r\n  ctx.strokeStyle = sprite.color;\r\n  ctx.fillStyle = sprite.color;\r\n\r\n  for (idx = 0; idx < sprite.particles.length; idx++) {\r\n    p = sprite.particles[idx];\r\n    if (p.free) { continue; }\r\n\r\n    ctx.globalAlpha = (1 - (p.distance / p.maxDistance)) * alpha;\r\n\r\n    ctx.beginPath();\r\n    ctx.moveTo(0, 0);\r\n    ctx.lineWidth = p.size;\r\n    ctx.lineTo(p.x, p.y);\r\n    ctx.stroke();\r\n  }\r\n\r\n  ctx.restore();\r\n\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/viewportCanvas.js","require('../../modules/es6.object.assign');\nmodule.exports = require('../../modules/_core').Object.assign;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/object/assign.js\n// module id = 78\n// module chunks = 7","// 19.1.3.1 Object.assign(target, source)\nvar $export = require('./_export');\n\n$export($export.S + $export.F, 'Object', { assign: require('./_object-assign') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.object.assign.js\n// module id = 79\n// module chunks = 7","module.exports = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_a-function.js\n// module id = 80\n// module chunks = 7","'use strict';\n// 19.1.2.1 Object.assign(target, source, ...)\nvar getKeys = require('./_object-keys');\nvar gOPS = require('./_object-gops');\nvar pIE = require('./_object-pie');\nvar toObject = require('./_to-object');\nvar IObject = require('./_iobject');\nvar $assign = Object.assign;\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = !$assign || require('./_fails')(function () {\n  var A = {};\n  var B = {};\n  // eslint-disable-next-line no-undef\n  var S = Symbol();\n  var K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function (k) { B[k] = k; });\n  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;\n}) ? function assign(target, source) { // eslint-disable-line no-unused-vars\n  var T = toObject(target);\n  var aLen = arguments.length;\n  var index = 1;\n  var getSymbols = gOPS.f;\n  var isEnum = pIE.f;\n  while (aLen > index) {\n    var S = IObject(arguments[index++]);\n    var keys = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S);\n    var length = keys.length;\n    var j = 0;\n    var key;\n    while (length > j) if (isEnum.call(S, key = keys[j++])) T[key] = S[key];\n  } return T;\n} : $assign;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-assign.js\n// module id = 81\n// module chunks = 7","// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject');\nvar toLength = require('./_to-length');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nmodule.exports = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) if (IS_INCLUDES || index in O) {\n      if (O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_array-includes.js\n// module id = 82\n// module chunks = 7","var toInteger = require('./_to-integer');\nvar max = Math.max;\nvar min = Math.min;\nmodule.exports = function (index, length) {\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-absolute-index.js\n// module id = 83\n// module chunks = 7","module.exports = { \"default\": require(\"core-js/library/fn/object/define-property\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/object/define-property.js\n// module id = 84\n// module chunks = 7","require('../../modules/es6.object.define-property');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperty(it, key, desc) {\n  return $Object.defineProperty(it, key, desc);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/object/define-property.js\n// module id = 85\n// module chunks = 7","var $export = require('./_export');\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', { defineProperty: require('./_object-dp').f });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.object.define-property.js\n// module id = 86\n// module chunks = 7","require('../../modules/es6.object.get-prototype-of');\nmodule.exports = require('../../modules/_core').Object.getPrototypeOf;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/object/get-prototype-of.js\n// module id = 87\n// module chunks = 7","// 19.1.2.9 Object.getPrototypeOf(O)\nvar toObject = require('./_to-object');\nvar $getPrototypeOf = require('./_object-gpo');\n\nrequire('./_object-sap')('getPrototypeOf', function () {\n  return function getPrototypeOf(it) {\n    return $getPrototypeOf(toObject(it));\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.object.get-prototype-of.js\n// module id = 88\n// module chunks = 7","module.exports = { \"default\": require(\"core-js/library/fn/symbol/iterator\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/symbol/iterator.js\n// module id = 89\n// module chunks = 7","require('../../modules/es6.string.iterator');\nrequire('../../modules/web.dom.iterable');\nmodule.exports = require('../../modules/_wks-ext').f('iterator');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/symbol/iterator.js\n// module id = 90\n// module chunks = 7","var toInteger = require('./_to-integer');\nvar defined = require('./_defined');\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function (TO_STRING) {\n  return function (that, pos) {\n    var s = String(defined(that));\n    var i = toInteger(pos);\n    var l = s.length;\n    var a, b;\n    if (i < 0 || i >= l) return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_string-at.js\n// module id = 91\n// module chunks = 7","'use strict';\nvar create = require('./_object-create');\nvar descriptor = require('./_property-desc');\nvar setToStringTag = require('./_set-to-string-tag');\nvar IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nrequire('./_hide')(IteratorPrototype, require('./_wks')('iterator'), function () { return this; });\n\nmodule.exports = function (Constructor, NAME, next) {\n  Constructor.prototype = create(IteratorPrototype, { next: descriptor(1, next) });\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iter-create.js\n// module id = 92\n// module chunks = 7","var dP = require('./_object-dp');\nvar anObject = require('./_an-object');\nvar getKeys = require('./_object-keys');\n\nmodule.exports = require('./_descriptors') ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = getKeys(Properties);\n  var length = keys.length;\n  var i = 0;\n  var P;\n  while (length > i) dP.f(O, P = keys[i++], Properties[P]);\n  return O;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-dps.js\n// module id = 93\n// module chunks = 7","var document = require('./_global').document;\nmodule.exports = document && document.documentElement;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_html.js\n// module id = 94\n// module chunks = 7","require('./es6.array.iterator');\nvar global = require('./_global');\nvar hide = require('./_hide');\nvar Iterators = require('./_iterators');\nvar TO_STRING_TAG = require('./_wks')('toStringTag');\n\nvar DOMIterables = ('CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,' +\n  'DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,' +\n  'MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,' +\n  'SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,' +\n  'TextTrackList,TouchList').split(',');\n\nfor (var i = 0; i < DOMIterables.length; i++) {\n  var NAME = DOMIterables[i];\n  var Collection = global[NAME];\n  var proto = Collection && Collection.prototype;\n  if (proto && !proto[TO_STRING_TAG]) hide(proto, TO_STRING_TAG, NAME);\n  Iterators[NAME] = Iterators.Array;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/web.dom.iterable.js\n// module id = 95\n// module chunks = 7","'use strict';\nvar addToUnscopables = require('./_add-to-unscopables');\nvar step = require('./_iter-step');\nvar Iterators = require('./_iterators');\nvar toIObject = require('./_to-iobject');\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = require('./_iter-define')(Array, 'Array', function (iterated, kind) {\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var kind = this._k;\n  var index = this._i++;\n  if (!O || index >= O.length) {\n    this._t = undefined;\n    return step(1);\n  }\n  if (kind == 'keys') return step(0, index);\n  if (kind == 'values') return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.array.iterator.js\n// module id = 96\n// module chunks = 7","module.exports = function () { /* empty */ };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_add-to-unscopables.js\n// module id = 97\n// module chunks = 7","module.exports = function (done, value) {\n  return { value: value, done: !!done };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iter-step.js\n// module id = 98\n// module chunks = 7","module.exports = { \"default\": require(\"core-js/library/fn/symbol\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/symbol.js\n// module id = 99\n// module chunks = 7","require('../../modules/es6.symbol');\nrequire('../../modules/es6.object.to-string');\nrequire('../../modules/es7.symbol.async-iterator');\nrequire('../../modules/es7.symbol.observable');\nmodule.exports = require('../../modules/_core').Symbol;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/symbol/index.js\n// module id = 100\n// module chunks = 7","'use strict';\n// ECMAScript 6 symbols shim\nvar global = require('./_global');\nvar has = require('./_has');\nvar DESCRIPTORS = require('./_descriptors');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar META = require('./_meta').KEY;\nvar $fails = require('./_fails');\nvar shared = require('./_shared');\nvar setToStringTag = require('./_set-to-string-tag');\nvar uid = require('./_uid');\nvar wks = require('./_wks');\nvar wksExt = require('./_wks-ext');\nvar wksDefine = require('./_wks-define');\nvar keyOf = require('./_keyof');\nvar enumKeys = require('./_enum-keys');\nvar isArray = require('./_is-array');\nvar anObject = require('./_an-object');\nvar toIObject = require('./_to-iobject');\nvar toPrimitive = require('./_to-primitive');\nvar createDesc = require('./_property-desc');\nvar _create = require('./_object-create');\nvar gOPNExt = require('./_object-gopn-ext');\nvar $GOPD = require('./_object-gopd');\nvar $DP = require('./_object-dp');\nvar $keys = require('./_object-keys');\nvar gOPD = $GOPD.f;\nvar dP = $DP.f;\nvar gOPN = gOPNExt.f;\nvar $Symbol = global.Symbol;\nvar $JSON = global.JSON;\nvar _stringify = $JSON && $JSON.stringify;\nvar PROTOTYPE = 'prototype';\nvar HIDDEN = wks('_hidden');\nvar TO_PRIMITIVE = wks('toPrimitive');\nvar isEnum = {}.propertyIsEnumerable;\nvar SymbolRegistry = shared('symbol-registry');\nvar AllSymbols = shared('symbols');\nvar OPSymbols = shared('op-symbols');\nvar ObjectProto = Object[PROTOTYPE];\nvar USE_NATIVE = typeof $Symbol == 'function';\nvar QObject = global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function () {\n  return _create(dP({}, 'a', {\n    get: function () { return dP(this, 'a', { value: 7 }).a; }\n  })).a != 7;\n}) ? function (it, key, D) {\n  var protoDesc = gOPD(ObjectProto, key);\n  if (protoDesc) delete ObjectProto[key];\n  dP(it, key, D);\n  if (protoDesc && it !== ObjectProto) dP(ObjectProto, key, protoDesc);\n} : dP;\n\nvar wrap = function (tag) {\n  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);\n  sym._k = tag;\n  return sym;\n};\n\nvar isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  return it instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(it, key, D) {\n  if (it === ObjectProto) $defineProperty(OPSymbols, key, D);\n  anObject(it);\n  key = toPrimitive(key, true);\n  anObject(D);\n  if (has(AllSymbols, key)) {\n    if (!D.enumerable) {\n      if (!has(it, HIDDEN)) dP(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if (has(it, HIDDEN) && it[HIDDEN][key]) it[HIDDEN][key] = false;\n      D = _create(D, { enumerable: createDesc(0, false) });\n    } return setSymbolDesc(it, key, D);\n  } return dP(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P) {\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P));\n  var i = 0;\n  var l = keys.length;\n  var key;\n  while (l > i) $defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P) {\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key) {\n  var E = isEnum.call(this, key = toPrimitive(key, true));\n  if (this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return false;\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key) {\n  it = toIObject(it);\n  key = toPrimitive(key, true);\n  if (it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return;\n  var D = gOPD(it, key);\n  if (D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key])) D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it) {\n  var names = gOPN(toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META) result.push(key);\n  } return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it) {\n  var IS_OP = it === ObjectProto;\n  var names = gOPN(IS_OP ? OPSymbols : toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true)) result.push(AllSymbols[key]);\n  } return result;\n};\n\n// 19.4.1.1 Symbol([description])\nif (!USE_NATIVE) {\n  $Symbol = function Symbol() {\n    if (this instanceof $Symbol) throw TypeError('Symbol is not a constructor!');\n    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);\n    var $set = function (value) {\n      if (this === ObjectProto) $set.call(OPSymbols, value);\n      if (has(this, HIDDEN) && has(this[HIDDEN], tag)) this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    };\n    if (DESCRIPTORS && setter) setSymbolDesc(ObjectProto, tag, { configurable: true, set: $set });\n    return wrap(tag);\n  };\n  redefine($Symbol[PROTOTYPE], 'toString', function toString() {\n    return this._k;\n  });\n\n  $GOPD.f = $getOwnPropertyDescriptor;\n  $DP.f = $defineProperty;\n  require('./_object-gopn').f = gOPNExt.f = $getOwnPropertyNames;\n  require('./_object-pie').f = $propertyIsEnumerable;\n  require('./_object-gops').f = $getOwnPropertySymbols;\n\n  if (DESCRIPTORS && !require('./_library')) {\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n\n  wksExt.f = function (name) {\n    return wrap(wks(name));\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Symbol: $Symbol });\n\nfor (var es6Symbols = (\n  // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'\n).split(','), j = 0; es6Symbols.length > j;)wks(es6Symbols[j++]);\n\nfor (var wellKnownSymbols = $keys(wks.store), k = 0; wellKnownSymbols.length > k;) wksDefine(wellKnownSymbols[k++]);\n\n$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function (key) {\n    return has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(key) {\n    if (isSymbol(key)) return keyOf(SymbolRegistry, key);\n    throw TypeError(key + ' is not a symbol!');\n  },\n  useSetter: function () { setter = true; },\n  useSimple: function () { setter = false; }\n});\n\n$export($export.S + $export.F * !USE_NATIVE, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function () {\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({ a: S }) != '{}' || _stringify(Object(S)) != '{}';\n})), 'JSON', {\n  stringify: function stringify(it) {\n    if (it === undefined || isSymbol(it)) return; // IE8 returns string on undefined\n    var args = [it];\n    var i = 1;\n    var replacer, $replacer;\n    while (arguments.length > i) args.push(arguments[i++]);\n    replacer = args[1];\n    if (typeof replacer == 'function') $replacer = replacer;\n    if ($replacer || !isArray(replacer)) replacer = function (key, value) {\n      if ($replacer) value = $replacer.call(this, key, value);\n      if (!isSymbol(value)) return value;\n    };\n    args[1] = replacer;\n    return _stringify.apply($JSON, args);\n  }\n});\n\n// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)\n$Symbol[PROTOTYPE][TO_PRIMITIVE] || require('./_hide')($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.symbol.js\n// module id = 101\n// module chunks = 7","var META = require('./_uid')('meta');\nvar isObject = require('./_is-object');\nvar has = require('./_has');\nvar setDesc = require('./_object-dp').f;\nvar id = 0;\nvar isExtensible = Object.isExtensible || function () {\n  return true;\n};\nvar FREEZE = !require('./_fails')(function () {\n  return isExtensible(Object.preventExtensions({}));\n});\nvar setMeta = function (it) {\n  setDesc(it, META, { value: {\n    i: 'O' + ++id, // object ID\n    w: {}          // weak collections IDs\n  } });\n};\nvar fastKey = function (it, create) {\n  // return primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F';\n    // not necessary to add metadata\n    if (!create) return 'E';\n    // add missing metadata\n    setMeta(it);\n  // return object ID\n  } return it[META].i;\n};\nvar getWeak = function (it, create) {\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true;\n    // not necessary to add metadata\n    if (!create) return false;\n    // add missing metadata\n    setMeta(it);\n  // return hash weak collections IDs\n  } return it[META].w;\n};\n// add metadata on freeze-family methods calling\nvar onFreeze = function (it) {\n  if (FREEZE && meta.NEED && isExtensible(it) && !has(it, META)) setMeta(it);\n  return it;\n};\nvar meta = module.exports = {\n  KEY: META,\n  NEED: false,\n  fastKey: fastKey,\n  getWeak: getWeak,\n  onFreeze: onFreeze\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_meta.js\n// module id = 102\n// module chunks = 7","var getKeys = require('./_object-keys');\nvar toIObject = require('./_to-iobject');\nmodule.exports = function (object, el) {\n  var O = toIObject(object);\n  var keys = getKeys(O);\n  var length = keys.length;\n  var index = 0;\n  var key;\n  while (length > index) if (O[key = keys[index++]] === el) return key;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_keyof.js\n// module id = 103\n// module chunks = 7","// all enumerable object keys, includes symbols\nvar getKeys = require('./_object-keys');\nvar gOPS = require('./_object-gops');\nvar pIE = require('./_object-pie');\nmodule.exports = function (it) {\n  var result = getKeys(it);\n  var getSymbols = gOPS.f;\n  if (getSymbols) {\n    var symbols = getSymbols(it);\n    var isEnum = pIE.f;\n    var i = 0;\n    var key;\n    while (symbols.length > i) if (isEnum.call(it, key = symbols[i++])) result.push(key);\n  } return result;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_enum-keys.js\n// module id = 104\n// module chunks = 7","// 7.2.2 IsArray(argument)\nvar cof = require('./_cof');\nmodule.exports = Array.isArray || function isArray(arg) {\n  return cof(arg) == 'Array';\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_is-array.js\n// module id = 105\n// module chunks = 7","// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = require('./_to-iobject');\nvar gOPN = require('./_object-gopn').f;\nvar toString = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function (it) {\n  try {\n    return gOPN(it);\n  } catch (e) {\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.f = function getOwnPropertyNames(it) {\n  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-gopn-ext.js\n// module id = 106\n// module chunks = 7","require('./_wks-define')('asyncIterator');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es7.symbol.async-iterator.js\n// module id = 108\n// module chunks = 7","require('./_wks-define')('observable');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es7.symbol.observable.js\n// module id = 109\n// module chunks = 7","module.exports = { \"default\": require(\"core-js/library/fn/object/set-prototype-of\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/object/set-prototype-of.js\n// module id = 110\n// module chunks = 7","require('../../modules/es6.object.set-prototype-of');\nmodule.exports = require('../../modules/_core').Object.setPrototypeOf;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/object/set-prototype-of.js\n// module id = 111\n// module chunks = 7","// 19.1.3.19 Object.setPrototypeOf(O, proto)\nvar $export = require('./_export');\n$export($export.S, 'Object', { setPrototypeOf: require('./_set-proto').set });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.object.set-prototype-of.js\n// module id = 112\n// module chunks = 7","// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar isObject = require('./_is-object');\nvar anObject = require('./_an-object');\nvar check = function (O, proto) {\n  anObject(O);\n  if (!isObject(proto) && proto !== null) throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function (test, buggy, set) {\n      try {\n        set = require('./_ctx')(Function.call, require('./_object-gopd').f(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch (e) { buggy = true; }\n      return function setPrototypeOf(O, proto) {\n        check(O, proto);\n        if (buggy) O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_set-proto.js\n// module id = 113\n// module chunks = 7","module.exports = { \"default\": require(\"core-js/library/fn/object/create\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/object/create.js\n// module id = 114\n// module chunks = 7","require('../../modules/es6.object.create');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function create(P, D) {\n  return $Object.create(P, D);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/object/create.js\n// module id = 115\n// module chunks = 7","var $export = require('./_export');\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\n$export($export.S, 'Object', { create: require('./_object-create') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.object.create.js\n// module id = 116\n// module chunks = 7","module.exports = { \"default\": require(\"core-js/library/fn/object/get-own-property-descriptor\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/object/get-own-property-descriptor.js\n// module id = 117\n// module chunks = 7","require('../../modules/es6.object.get-own-property-descriptor');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function getOwnPropertyDescriptor(it, key) {\n  return $Object.getOwnPropertyDescriptor(it, key);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/object/get-own-property-descriptor.js\n// module id = 118\n// module chunks = 7","// 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\nvar toIObject = require('./_to-iobject');\nvar $getOwnPropertyDescriptor = require('./_object-gopd').f;\n\nrequire('./_object-sap')('getOwnPropertyDescriptor', function () {\n  return function getOwnPropertyDescriptor(it, key) {\n    return $getOwnPropertyDescriptor(toIObject(it), key);\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.object.get-own-property-descriptor.js\n// module id = 119\n// module chunks = 7","/**\r\n * @author       Timo Hausmann\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2014 Photon Storm Ltd.\r\n * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n */\r\n\r\n/**\r\n * A QuadTree implementation. The original code was a conversion of the Java code posted to GameDevTuts.\r\n * However I've tweaked it massively to add node indexing, removed lots of temp. var creation and significantly increased performance as a result.\r\n * Original version at https://github.com/timohausmann/quadtree-js/\r\n *\r\n * @class QuadTree\r\n * @constructor\r\n * @param {number} x - The top left coordinate of the quadtree.\r\n * @param {number} y - The top left coordinate of the quadtree.\r\n * @param {number} width - The width of the quadtree in pixels.\r\n * @param {number} height - The height of the quadtree in pixels.\r\n * @param {number} [maxObjects=10] - The maximum number of objects per node.\r\n * @param {number} [maxLevels=4] - The maximum number of levels to iterate to.\r\n * @param {number} [level=0] - Which level is this?\r\n */\r\nexport default function QuadTree(left, top, width, height, maxObjects, maxLevels, level, root) {\r\n\r\n  /**\r\n   * @property {number} maxObjects - The maximum number of objects per node.\r\n   * @default\r\n   */\r\n  this.maxObjects = 10;\r\n\r\n  /**\r\n   * @property {number} maxLevels - The maximum number of levels to break down to.\r\n   * @default\r\n   */\r\n  this.maxLevels = 4;\r\n\r\n  /**\r\n   * @property {number} level - The current level.\r\n   */\r\n  this.level = 0;\r\n\r\n  /**\r\n   * @property {object} bounds - Object that contains the quadtree bounds.\r\n   */\r\n  this.bounds = {};\r\n\r\n  /**\r\n   * @property {array} objects - Array of quadtree children.\r\n   */\r\n  this.objects = [];\r\n\r\n  /**\r\n   * @property {array} nodes - Array of associated child nodes.\r\n   */\r\n  this.nodes = [];\r\n\r\n  /**\r\n   * @property {array} _empty - Internal empty array.\r\n   * @private\r\n   */\r\n  this._empty = [];\r\n\r\n  this.root = root || this;\r\n  this.entityMap = {};\r\n\r\n  this.reset(left, top, width, height, maxObjects, maxLevels, level);\r\n\r\n};\r\n\r\nQuadTree.prototype = {\r\n\r\n  /**\r\n   * Resets the QuadTree.\r\n   *\r\n   * @method QuadTree#reset\r\n   * @param {number} x - The top left coordinate of the quadtree.\r\n   * @param {number} y - The top left coordinate of the quadtree.\r\n   * @param {number} width - The width of the quadtree in pixels.\r\n   * @param {number} height - The height of the quadtree in pixels.\r\n   * @param {number} [maxObjects=10] - The maximum number of objects per node.\r\n   * @param {number} [maxLevels=4] - The maximum number of levels to iterate to.\r\n   * @param {number} [level=0] - Which level is this?\r\n   */\r\n  reset: function (left, top, width, height, maxObjects, maxLevels, level) {\r\n\r\n    this.maxObjects = maxObjects || 10;\r\n    this.maxLevels = maxLevels || 4;\r\n    this.level = level || 0;\r\n\r\n    this.bounds = {\r\n      width: width,\r\n      height: height,\r\n      subWidth: Math.floor(width / 2),\r\n      subHeight: Math.floor(height / 2),\r\n      left: Math.round(left),\r\n      top: Math.round(top),\r\n      midX: Math.round(left + width / 2),\r\n      midY: Math.round(top + height / 2),\r\n      right: Math.round(left + width),\r\n      bottom: Math.round(top + height)\r\n    };\r\n\r\n    this.objects.length = 0;\r\n    this.nodes.length = 0;\r\n\r\n  },\r\n\r\n  /**\r\n   * Split the node into 4 subnodes\r\n   *\r\n   * @method QuadTree#split\r\n   */\r\n  split: function () {\r\n\r\n    //  top right node\r\n    this.nodes[0] = new QuadTree(\r\n      this.bounds.left + this.bounds.subWidth,\r\n      this.bounds.top,\r\n      this.bounds.subWidth, this.bounds.subHeight,\r\n      this.maxObjects, this.maxLevels, (this.level + 1), this.root\r\n    );\r\n\r\n    //  top left node\r\n    this.nodes[1] = new QuadTree(\r\n      this.bounds.left,\r\n      this.bounds.top,\r\n      this.bounds.subWidth, this.bounds.subHeight,\r\n      this.maxObjects, this.maxLevels, (this.level + 1), this.root\r\n    );\r\n\r\n    //  bottom left node\r\n    this.nodes[2] = new QuadTree(\r\n      this.bounds.left,\r\n      this.bounds.top + this.bounds.subHeight,\r\n      this.bounds.subWidth, this.bounds.subHeight,\r\n      this.maxObjects, this.maxLevels, (this.level + 1), this.root\r\n    );\r\n\r\n    //  bottom right node\r\n    this.nodes[3] = new QuadTree(\r\n      this.bounds.left + this.bounds.subWidth,\r\n      this.bounds.top + this.bounds.subHeight,\r\n      this.bounds.subWidth, this.bounds.subHeight,\r\n      this.maxObjects, this.maxLevels, (this.level + 1), this.root\r\n    );\r\n\r\n  },\r\n\r\n  /**\r\n   * Insert the object into the node. If the node exceeds the capacity, it will split and add all objects to their corresponding subnodes.\r\n   *\r\n   * @method QuadTree#insert\r\n   * @param {Phaser.Physics.Arcade.Body|object} body - The Body object to insert into the quadtree. Can be any object so long as it exposes x, y, right and bottom properties.\r\n   */\r\n  insert: function (body) {\r\n\r\n    var i = 0;\r\n    var index;\r\n\r\n    //  if we have subnodes ...\r\n    if (this.nodes[0] != null) {\r\n      index = this.getIndex(body);\r\n      if (index !== -1) {\r\n        this.nodes[index].insert(body);\r\n        return;\r\n      }\r\n    }\r\n\r\n    // Check if we already have this item in the quadtree structure.\r\n    var oldNode = this.root.entityMap[body.entityId];\r\n    if (oldNode === this) {\r\n      // If we have the item, and it's this current sub-tree, then just bail.\r\n      return;\r\n    }\r\n    if (oldNode) {\r\n      // If the item is known, but in another sub-tree, then delete it from there.\r\n      var objectIndex = oldNode.objects.indexOf(body);\r\n      if (objectIndex !== -1) {\r\n        oldNode.objects.splice(objectIndex, 1);\r\n      }\r\n    }\r\n\r\n    /*\r\n    // TODO: Need the opposite of split() to consolidate subtrees when they\r\n    // lose items.\r\n\r\n    this.root.entityMap[body.entityId] = this;\r\n    */\r\n\r\n    this.objects.push(body);\r\n\r\n    if (this.objects.length > this.maxObjects && this.level < this.maxLevels) {\r\n      //  Split if we don't already have subnodes\r\n      if (this.nodes[0] == null) {\r\n        this.split();\r\n      }\r\n      //  Add objects to subnodes\r\n      while (i < this.objects.length) {\r\n        index = this.getIndex(this.objects[i]);\r\n        if (index !== -1) {\r\n          //  this is expensive - see what we can do about it\r\n          this.nodes[index].insert(this.objects.splice(i, 1)[0]);\r\n        } else {\r\n          i++;\r\n        }\r\n      }\r\n    }\r\n\r\n  },\r\n\r\n  /**\r\n   * Determine which node the object belongs to.\r\n   *\r\n   * @method QuadTree#getIndex\r\n   * @param {Phaser.Rectangle|object} rect - The bounds in which to check.\r\n   * @return {number} index - Index of the subnode (0-3), or -1 if rect cannot completely fit within a subnode and is part of the parent node.\r\n   */\r\n  getIndex: function (rect) {\r\n    if (rect.left < this.bounds.midX && rect.right < this.bounds.midX) {\r\n      if (rect.top < this.bounds.midY && rect.bottom < this.bounds.midY) {\r\n        //  rect fits within the top-left quadrant of this quadtree\r\n        return 1;\r\n      } else if (rect.top > this.bounds.midY) {\r\n        //  rect fits within the bottom-left quadrant of this quadtree\r\n        return 2;\r\n      }\r\n    } else if (rect.left > this.bounds.midX) {\r\n      //  rect can completely fit within the right quadrants\r\n      if (rect.top < this.bounds.midY && rect.bottom < this.bounds.midY) {\r\n        //  rect fits within the top-right quadrant of this quadtree\r\n        return 0;\r\n      } else if (rect.top > this.bounds.midY) {\r\n        //  rect fits within the bottom-right quadrant of this quadtree\r\n        return 3;\r\n      }\r\n    }\r\n    // rect doesn't fit, i.e. it straddles the internal quadrants\r\n    return -1;\r\n  },\r\n\r\n  /**\r\n   * Iterate through all objects that could collide with the given Sprite or Rectangle.\r\n   *\r\n   * @method QuadTree#retrieve\r\n   * @param {Phaser.Sprite|Phaser.Rectangle} source - The source object to check the QuadTree against. Either a Sprite or Rectangle.\r\n   */\r\n  iterate: function (source, iteratorFn, optionalParam) {\r\n    var index = this.getIndex(source);\r\n\r\n    for (var i = 0; i < this.objects.length; i++) {\r\n      iteratorFn(this.objects[i], optionalParam);\r\n    }\r\n\r\n    if (this.nodes[0]) {\r\n      //  If rect fits into a subnode ..\r\n      if (index !== -1) {\r\n        this.nodes[index].iterate(source, iteratorFn, optionalParam);\r\n      } else {\r\n        //  If rect does not fit into a subnode, check it against all subnodes (unrolled for speed)\r\n        this.nodes[0].iterate(source, iteratorFn, optionalParam);\r\n        this.nodes[1].iterate(source, iteratorFn, optionalParam);\r\n        this.nodes[2].iterate(source, iteratorFn, optionalParam);\r\n        this.nodes[3].iterate(source, iteratorFn, optionalParam);\r\n      }\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Clear the quadtree.\r\n   * @method QuadTree#clear\r\n   */\r\n  clear: function () {\r\n    this.objects.length = 0;\r\n    var i = this.nodes.length;\r\n    while (i--) {\r\n      this.nodes[i].clear();\r\n      this.nodes.splice(i, 1);\r\n    }\r\n    this.nodes.length = 0;\r\n  }\r\n\r\n};\r\n\r\n/**\r\n * Javascript QuadTree\r\n * @version 1.0\r\n *\r\n * @version 1.3, March 11th 2014\r\n * @author Richard Davey\r\n * The original code was a conversion of the Java code posted to GameDevTuts. However I've tweaked\r\n * it massively to add node indexing, removed lots of temp. var creation and significantly\r\n * increased performance as a result.\r\n *\r\n * Original version at https://github.com/timohausmann/quadtree-js/\r\n */\r\n\r\n/**\r\n * @copyright © 2012 Timo Hausmann\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining\r\n * a copy of this software and associated documentation files (the\r\n * \"Software\"), to deal in the Software without restriction, including\r\n * without limitation the rights to use, copy, modify, merge, publish,\r\n * distribute, sublicense, and/or sell copies of the Software, and to\r\n * permit persons to whom the Software is furnished to do so, subject to\r\n * the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be\r\n * included in all copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\r\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\r\n * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\r\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n */\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/QuadTree.js","module.exports = require('./vendor/dat.gui')\nmodule.exports.color = require('./vendor/dat.color')\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/dat-gui/index.js\n// module id = 121\n// module chunks = 7","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\n/** @namespace */\nvar dat = module.exports = dat || {};\n\n/** @namespace */\ndat.gui = dat.gui || {};\n\n/** @namespace */\ndat.utils = dat.utils || {};\n\n/** @namespace */\ndat.controllers = dat.controllers || {};\n\n/** @namespace */\ndat.dom = dat.dom || {};\n\n/** @namespace */\ndat.color = dat.color || {};\n\ndat.utils.css = (function () {\n  return {\n    load: function (url, doc) {\n      doc = doc || document;\n      var link = doc.createElement('link');\n      link.type = 'text/css';\n      link.rel = 'stylesheet';\n      link.href = url;\n      doc.getElementsByTagName('head')[0].appendChild(link);\n    },\n    inject: function(css, doc) {\n      doc = doc || document;\n      var injected = document.createElement('style');\n      injected.type = 'text/css';\n      injected.innerHTML = css;\n      doc.getElementsByTagName('head')[0].appendChild(injected);\n    }\n  }\n})();\n\n\ndat.utils.common = (function () {\n  \n  var ARR_EACH = Array.prototype.forEach;\n  var ARR_SLICE = Array.prototype.slice;\n\n  /**\n   * Band-aid methods for things that should be a lot easier in JavaScript.\n   * Implementation and structure inspired by underscore.js\n   * http://documentcloud.github.com/underscore/\n   */\n\n  return { \n    \n    BREAK: {},\n  \n    extend: function(target) {\n      \n      this.each(ARR_SLICE.call(arguments, 1), function(obj) {\n        \n        for (var key in obj)\n          if (!this.isUndefined(obj[key])) \n            target[key] = obj[key];\n        \n      }, this);\n      \n      return target;\n      \n    },\n    \n    defaults: function(target) {\n      \n      this.each(ARR_SLICE.call(arguments, 1), function(obj) {\n        \n        for (var key in obj)\n          if (this.isUndefined(target[key])) \n            target[key] = obj[key];\n        \n      }, this);\n      \n      return target;\n    \n    },\n    \n    compose: function() {\n      var toCall = ARR_SLICE.call(arguments);\n            return function() {\n              var args = ARR_SLICE.call(arguments);\n              for (var i = toCall.length -1; i >= 0; i--) {\n                args = [toCall[i].apply(this, args)];\n              }\n              return args[0];\n            }\n    },\n    \n    each: function(obj, itr, scope) {\n\n      \n      if (ARR_EACH && obj.forEach === ARR_EACH) { \n        \n        obj.forEach(itr, scope);\n        \n      } else if (obj.length === obj.length + 0) { // Is number but not NaN\n        \n        for (var key = 0, l = obj.length; key < l; key++)\n          if (key in obj && itr.call(scope, obj[key], key) === this.BREAK) \n            return;\n            \n      } else {\n\n        for (var key in obj) \n          if (itr.call(scope, obj[key], key) === this.BREAK)\n            return;\n            \n      }\n            \n    },\n    \n    defer: function(fnc) {\n      setTimeout(fnc, 0);\n    },\n    \n    toArray: function(obj) {\n      if (obj.toArray) return obj.toArray();\n      return ARR_SLICE.call(obj);\n    },\n\n    isUndefined: function(obj) {\n      return obj === undefined;\n    },\n    \n    isNull: function(obj) {\n      return obj === null;\n    },\n    \n    isNaN: function(obj) {\n      return obj !== obj;\n    },\n    \n    isArray: Array.isArray || function(obj) {\n      return obj.constructor === Array;\n    },\n    \n    isObject: function(obj) {\n      return obj === Object(obj);\n    },\n    \n    isNumber: function(obj) {\n      return obj === obj+0;\n    },\n    \n    isString: function(obj) {\n      return obj === obj+'';\n    },\n    \n    isBoolean: function(obj) {\n      return obj === false || obj === true;\n    },\n    \n    isFunction: function(obj) {\n      return Object.prototype.toString.call(obj) === '[object Function]';\n    }\n  \n  };\n    \n})();\n\n\ndat.controllers.Controller = (function (common) {\n\n  /**\n   * @class An \"abstract\" class that represents a given property of an object.\n   *\n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   *\n   * @member dat.controllers\n   */\n  var Controller = function(object, property) {\n\n    this.initialValue = object[property];\n\n    /**\n     * Those who extend this class will put their DOM elements in here.\n     * @type {DOMElement}\n     */\n    this.domElement = document.createElement('div');\n\n    /**\n     * The object to manipulate\n     * @type {Object}\n     */\n    this.object = object;\n\n    /**\n     * The name of the property to manipulate\n     * @type {String}\n     */\n    this.property = property;\n\n    /**\n     * The function to be called on change.\n     * @type {Function}\n     * @ignore\n     */\n    this.__onChange = undefined;\n\n    /**\n     * The function to be called on finishing change.\n     * @type {Function}\n     * @ignore\n     */\n    this.__onFinishChange = undefined;\n\n  };\n\n  common.extend(\n\n      Controller.prototype,\n\n      /** @lends dat.controllers.Controller.prototype */\n      {\n\n        /**\n         * Specify that a function fire every time someone changes the value with\n         * this Controller.\n         *\n         * @param {Function} fnc This function will be called whenever the value\n         * is modified via this Controller.\n         * @returns {dat.controllers.Controller} this\n         */\n        onChange: function(fnc) {\n          this.__onChange = fnc;\n          return this;\n        },\n\n        /**\n         * Specify that a function fire every time someone \"finishes\" changing\n         * the value wih this Controller. Useful for values that change\n         * incrementally like numbers or strings.\n         *\n         * @param {Function} fnc This function will be called whenever\n         * someone \"finishes\" changing the value via this Controller.\n         * @returns {dat.controllers.Controller} this\n         */\n        onFinishChange: function(fnc) {\n          this.__onFinishChange = fnc;\n          return this;\n        },\n\n        /**\n         * Change the value of <code>object[property]</code>\n         *\n         * @param {Object} newValue The new value of <code>object[property]</code>\n         */\n        setValue: function(newValue) {\n          this.object[this.property] = newValue;\n          if (this.__onChange) {\n            this.__onChange.call(this, newValue);\n          }\n          this.updateDisplay();\n          return this;\n        },\n\n        /**\n         * Gets the value of <code>object[property]</code>\n         *\n         * @returns {Object} The current value of <code>object[property]</code>\n         */\n        getValue: function() {\n          return this.object[this.property];\n        },\n\n        /**\n         * Refreshes the visual display of a Controller in order to keep sync\n         * with the object's current value.\n         * @returns {dat.controllers.Controller} this\n         */\n        updateDisplay: function() {\n          return this;\n        },\n\n        /**\n         * @returns {Boolean} true if the value has deviated from initialValue\n         */\n        isModified: function() {\n          return this.initialValue !== this.getValue()\n        }\n\n      }\n\n  );\n\n  return Controller;\n\n\n})(dat.utils.common);\n\n\ndat.dom.dom = (function (common) {\n\n  var EVENT_MAP = {\n    'HTMLEvents': ['change'],\n    'MouseEvents': ['click','mousemove','mousedown','mouseup', 'mouseover'],\n    'KeyboardEvents': ['keydown']\n  };\n\n  var EVENT_MAP_INV = {};\n  common.each(EVENT_MAP, function(v, k) {\n    common.each(v, function(e) {\n      EVENT_MAP_INV[e] = k;\n    });\n  });\n\n  var CSS_VALUE_PIXELS = /(\\d+(\\.\\d+)?)px/;\n\n  function cssValueToPixels(val) {\n\n    if (val === '0' || common.isUndefined(val)) return 0;\n\n    var match = val.match(CSS_VALUE_PIXELS);\n\n    if (!common.isNull(match)) {\n      return parseFloat(match[1]);\n    }\n\n    // TODO ...ems? %?\n\n    return 0;\n\n  }\n\n  /**\n   * @namespace\n   * @member dat.dom\n   */\n  var dom = {\n\n    /**\n     * \n     * @param elem\n     * @param selectable\n     */\n    makeSelectable: function(elem, selectable) {\n\n      if (elem === undefined || elem.style === undefined) return;\n\n      elem.onselectstart = selectable ? function() {\n        return false;\n      } : function() {\n      };\n\n      elem.style.MozUserSelect = selectable ? 'auto' : 'none';\n      elem.style.KhtmlUserSelect = selectable ? 'auto' : 'none';\n      elem.unselectable = selectable ? 'on' : 'off';\n\n    },\n\n    /**\n     *\n     * @param elem\n     * @param horizontal\n     * @param vertical\n     */\n    makeFullscreen: function(elem, horizontal, vertical) {\n\n      if (common.isUndefined(horizontal)) horizontal = true;\n      if (common.isUndefined(vertical)) vertical = true;\n\n      elem.style.position = 'absolute';\n\n      if (horizontal) {\n        elem.style.left = 0;\n        elem.style.right = 0;\n      }\n      if (vertical) {\n        elem.style.top = 0;\n        elem.style.bottom = 0;\n      }\n\n    },\n\n    /**\n     *\n     * @param elem\n     * @param eventType\n     * @param params\n     */\n    fakeEvent: function(elem, eventType, params, aux) {\n      params = params || {};\n      var className = EVENT_MAP_INV[eventType];\n      if (!className) {\n        throw new Error('Event type ' + eventType + ' not supported.');\n      }\n      var evt = document.createEvent(className);\n      switch (className) {\n        case 'MouseEvents':\n          var clientX = params.x || params.clientX || 0;\n          var clientY = params.y || params.clientY || 0;\n          evt.initMouseEvent(eventType, params.bubbles || false,\n              params.cancelable || true, window, params.clickCount || 1,\n              0, //screen X\n              0, //screen Y\n              clientX, //client X\n              clientY, //client Y\n              false, false, false, false, 0, null);\n          break;\n        case 'KeyboardEvents':\n          var init = evt.initKeyboardEvent || evt.initKeyEvent; // webkit || moz\n          common.defaults(params, {\n            cancelable: true,\n            ctrlKey: false,\n            altKey: false,\n            shiftKey: false,\n            metaKey: false,\n            keyCode: undefined,\n            charCode: undefined\n          });\n          init(eventType, params.bubbles || false,\n              params.cancelable, window,\n              params.ctrlKey, params.altKey,\n              params.shiftKey, params.metaKey,\n              params.keyCode, params.charCode);\n          break;\n        default:\n          evt.initEvent(eventType, params.bubbles || false,\n              params.cancelable || true);\n          break;\n      }\n      common.defaults(evt, aux);\n      elem.dispatchEvent(evt);\n    },\n\n    /**\n     *\n     * @param elem\n     * @param event\n     * @param func\n     * @param bool\n     */\n    bind: function(elem, event, func, bool) {\n      bool = bool || false;\n      if (elem.addEventListener)\n        elem.addEventListener(event, func, bool);\n      else if (elem.attachEvent)\n        elem.attachEvent('on' + event, func);\n      return dom;\n    },\n\n    /**\n     *\n     * @param elem\n     * @param event\n     * @param func\n     * @param bool\n     */\n    unbind: function(elem, event, func, bool) {\n      bool = bool || false;\n      if (elem.removeEventListener)\n        elem.removeEventListener(event, func, bool);\n      else if (elem.detachEvent)\n        elem.detachEvent('on' + event, func);\n      return dom;\n    },\n\n    /**\n     *\n     * @param elem\n     * @param className\n     */\n    addClass: function(elem, className) {\n      if (elem.className === undefined) {\n        elem.className = className;\n      } else if (elem.className !== className) {\n        var classes = elem.className.split(/ +/);\n        if (classes.indexOf(className) == -1) {\n          classes.push(className);\n          elem.className = classes.join(' ').replace(/^\\s+/, '').replace(/\\s+$/, '');\n        }\n      }\n      return dom;\n    },\n\n    /**\n     *\n     * @param elem\n     * @param className\n     */\n    removeClass: function(elem, className) {\n      if (className) {\n        if (elem.className === undefined) {\n          // elem.className = className;\n        } else if (elem.className === className) {\n          elem.removeAttribute('class');\n        } else {\n          var classes = elem.className.split(/ +/);\n          var index = classes.indexOf(className);\n          if (index != -1) {\n            classes.splice(index, 1);\n            elem.className = classes.join(' ');\n          }\n        }\n      } else {\n        elem.className = undefined;\n      }\n      return dom;\n    },\n\n    hasClass: function(elem, className) {\n      return new RegExp('(?:^|\\\\s+)' + className + '(?:\\\\s+|$)').test(elem.className) || false;\n    },\n\n    /**\n     *\n     * @param elem\n     */\n    getWidth: function(elem) {\n\n      var style = getComputedStyle(elem);\n\n      return cssValueToPixels(style['border-left-width']) +\n          cssValueToPixels(style['border-right-width']) +\n          cssValueToPixels(style['padding-left']) +\n          cssValueToPixels(style['padding-right']) +\n          cssValueToPixels(style['width']);\n    },\n\n    /**\n     *\n     * @param elem\n     */\n    getHeight: function(elem) {\n\n      var style = getComputedStyle(elem);\n\n      return cssValueToPixels(style['border-top-width']) +\n          cssValueToPixels(style['border-bottom-width']) +\n          cssValueToPixels(style['padding-top']) +\n          cssValueToPixels(style['padding-bottom']) +\n          cssValueToPixels(style['height']);\n    },\n\n    /**\n     *\n     * @param elem\n     */\n    getOffset: function(elem) {\n      var offset = {left: 0, top:0};\n      if (elem.offsetParent) {\n        do {\n          offset.left += elem.offsetLeft;\n          offset.top += elem.offsetTop;\n        } while (elem = elem.offsetParent);\n      }\n      return offset;\n    },\n\n    // http://stackoverflow.com/posts/2684561/revisions\n    /**\n     * \n     * @param elem\n     */\n    isActive: function(elem) {\n      return elem === document.activeElement && ( elem.type || elem.href );\n    }\n\n  };\n\n  return dom;\n\n})(dat.utils.common);\n\n\ndat.controllers.OptionController = (function (Controller, dom, common) {\n\n  /**\n   * @class Provides a select input to alter the property of an object, using a\n   * list of accepted values.\n   *\n   * @extends dat.controllers.Controller\n   *\n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   * @param {Object|string[]} options A map of labels to acceptable values, or\n   * a list of acceptable string values.\n   *\n   * @member dat.controllers\n   */\n  var OptionController = function(object, property, options) {\n\n    OptionController.superclass.call(this, object, property);\n\n    var _this = this;\n\n    /**\n     * The drop down menu\n     * @ignore\n     */\n    this.__select = document.createElement('select');\n\n    if (common.isArray(options)) {\n      var map = {};\n      common.each(options, function(element) {\n        map[element] = element;\n      });\n      options = map;\n    }\n\n    common.each(options, function(value, key) {\n\n      var opt = document.createElement('option');\n      opt.innerHTML = key;\n      opt.setAttribute('value', value);\n      _this.__select.appendChild(opt);\n\n    });\n\n    // Acknowledge original value\n    this.updateDisplay();\n\n    dom.bind(this.__select, 'change', function() {\n      var desiredValue = this.options[this.selectedIndex].value;\n      _this.setValue(desiredValue);\n    });\n\n    this.domElement.appendChild(this.__select);\n\n  };\n\n  OptionController.superclass = Controller;\n\n  common.extend(\n\n      OptionController.prototype,\n      Controller.prototype,\n\n      {\n\n        setValue: function(v) {\n          var toReturn = OptionController.superclass.prototype.setValue.call(this, v);\n          if (this.__onFinishChange) {\n            this.__onFinishChange.call(this, this.getValue());\n          }\n          return toReturn;\n        },\n\n        updateDisplay: function() {\n          this.__select.value = this.getValue();\n          return OptionController.superclass.prototype.updateDisplay.call(this);\n        }\n\n      }\n\n  );\n\n  return OptionController;\n\n})(dat.controllers.Controller,\ndat.dom.dom,\ndat.utils.common);\n\n\ndat.controllers.NumberController = (function (Controller, common) {\n\n  /**\n   * @class Represents a given property of an object that is a number.\n   *\n   * @extends dat.controllers.Controller\n   *\n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   * @param {Object} [params] Optional parameters\n   * @param {Number} [params.min] Minimum allowed value\n   * @param {Number} [params.max] Maximum allowed value\n   * @param {Number} [params.step] Increment by which to change value\n   *\n   * @member dat.controllers\n   */\n  var NumberController = function(object, property, params) {\n\n    NumberController.superclass.call(this, object, property);\n\n    params = params || {};\n\n    this.__min = params.min;\n    this.__max = params.max;\n    this.__step = params.step;\n\n    if (common.isUndefined(this.__step)) {\n\n      if (this.initialValue == 0) {\n        this.__impliedStep = 1; // What are we, psychics?\n      } else {\n        // Hey Doug, check this out.\n        this.__impliedStep = Math.pow(10, Math.floor(Math.log(this.initialValue)/Math.LN10))/10;\n      }\n\n    } else {\n\n      this.__impliedStep = this.__step;\n\n    }\n\n    this.__precision = numDecimals(this.__impliedStep);\n\n\n  };\n\n  NumberController.superclass = Controller;\n\n  common.extend(\n\n      NumberController.prototype,\n      Controller.prototype,\n\n      /** @lends dat.controllers.NumberController.prototype */\n      {\n\n        setValue: function(v) {\n\n          if (this.__min !== undefined && v < this.__min) {\n            v = this.__min;\n          } else if (this.__max !== undefined && v > this.__max) {\n            v = this.__max;\n          }\n\n          if (this.__step !== undefined && v % this.__step != 0) {\n            v = Math.round(v / this.__step) * this.__step;\n          }\n\n          return NumberController.superclass.prototype.setValue.call(this, v);\n\n        },\n\n        /**\n         * Specify a minimum value for <code>object[property]</code>.\n         *\n         * @param {Number} minValue The minimum value for\n         * <code>object[property]</code>\n         * @returns {dat.controllers.NumberController} this\n         */\n        min: function(v) {\n          this.__min = v;\n          return this;\n        },\n\n        /**\n         * Specify a maximum value for <code>object[property]</code>.\n         *\n         * @param {Number} maxValue The maximum value for\n         * <code>object[property]</code>\n         * @returns {dat.controllers.NumberController} this\n         */\n        max: function(v) {\n          this.__max = v;\n          return this;\n        },\n\n        /**\n         * Specify a step value that dat.controllers.NumberController\n         * increments by.\n         *\n         * @param {Number} stepValue The step value for\n         * dat.controllers.NumberController\n         * @default if minimum and maximum specified increment is 1% of the\n         * difference otherwise stepValue is 1\n         * @returns {dat.controllers.NumberController} this\n         */\n        step: function(v) {\n          this.__step = v;\n          return this;\n        }\n\n      }\n\n  );\n\n  function numDecimals(x) {\n    x = x.toString();\n    if (x.indexOf('.') > -1) {\n      return x.length - x.indexOf('.') - 1;\n    } else {\n      return 0;\n    }\n  }\n\n  return NumberController;\n\n})(dat.controllers.Controller,\ndat.utils.common);\n\n\ndat.controllers.NumberControllerBox = (function (NumberController, dom, common) {\n\n  /**\n   * @class Represents a given property of an object that is a number and\n   * provides an input element with which to manipulate it.\n   *\n   * @extends dat.controllers.Controller\n   * @extends dat.controllers.NumberController\n   *\n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   * @param {Object} [params] Optional parameters\n   * @param {Number} [params.min] Minimum allowed value\n   * @param {Number} [params.max] Maximum allowed value\n   * @param {Number} [params.step] Increment by which to change value\n   *\n   * @member dat.controllers\n   */\n  var NumberControllerBox = function(object, property, params) {\n\n    this.__truncationSuspended = false;\n\n    NumberControllerBox.superclass.call(this, object, property, params);\n\n    var _this = this;\n\n    /**\n     * {Number} Previous mouse y position\n     * @ignore\n     */\n    var prev_y;\n\n    this.__input = document.createElement('input');\n    this.__input.setAttribute('type', 'text');\n\n    // Makes it so manually specified values are not truncated.\n\n    dom.bind(this.__input, 'change', onChange);\n    dom.bind(this.__input, 'blur', onBlur);\n    dom.bind(this.__input, 'mousedown', onMouseDown);\n    dom.bind(this.__input, 'keydown', function(e) {\n\n      // When pressing entire, you can be as precise as you want.\n      if (e.keyCode === 13) {\n        _this.__truncationSuspended = true;\n        this.blur();\n        _this.__truncationSuspended = false;\n      }\n\n    });\n\n    function onChange() {\n      var attempted = parseFloat(_this.__input.value);\n      if (!common.isNaN(attempted)) _this.setValue(attempted);\n    }\n\n    function onBlur() {\n      onChange();\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n\n    function onMouseDown(e) {\n      dom.bind(window, 'mousemove', onMouseDrag);\n      dom.bind(window, 'mouseup', onMouseUp);\n      prev_y = e.clientY;\n    }\n\n    function onMouseDrag(e) {\n\n      var diff = prev_y - e.clientY;\n      _this.setValue(_this.getValue() + diff * _this.__impliedStep);\n\n      prev_y = e.clientY;\n\n    }\n\n    function onMouseUp() {\n      dom.unbind(window, 'mousemove', onMouseDrag);\n      dom.unbind(window, 'mouseup', onMouseUp);\n    }\n\n    this.updateDisplay();\n\n    this.domElement.appendChild(this.__input);\n\n  };\n\n  NumberControllerBox.superclass = NumberController;\n\n  common.extend(\n\n      NumberControllerBox.prototype,\n      NumberController.prototype,\n\n      {\n\n        updateDisplay: function() {\n\n          this.__input.value = this.__truncationSuspended ? this.getValue() : roundToDecimal(this.getValue(), this.__precision);\n          return NumberControllerBox.superclass.prototype.updateDisplay.call(this);\n        }\n\n      }\n\n  );\n\n  function roundToDecimal(value, decimals) {\n    var tenTo = Math.pow(10, decimals);\n    return Math.round(value * tenTo) / tenTo;\n  }\n\n  return NumberControllerBox;\n\n})(dat.controllers.NumberController,\ndat.dom.dom,\ndat.utils.common);\n\n\ndat.controllers.NumberControllerSlider = (function (NumberController, dom, css, common, styleSheet) {\n\n  /**\n   * @class Represents a given property of an object that is a number, contains\n   * a minimum and maximum, and provides a slider element with which to\n   * manipulate it. It should be noted that the slider element is made up of\n   * <code>&lt;div&gt;</code> tags, <strong>not</strong> the html5\n   * <code>&lt;slider&gt;</code> element.\n   *\n   * @extends dat.controllers.Controller\n   * @extends dat.controllers.NumberController\n   * \n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   * @param {Number} minValue Minimum allowed value\n   * @param {Number} maxValue Maximum allowed value\n   * @param {Number} stepValue Increment by which to change value\n   *\n   * @member dat.controllers\n   */\n  var NumberControllerSlider = function(object, property, min, max, step) {\n\n    NumberControllerSlider.superclass.call(this, object, property, { min: min, max: max, step: step });\n\n    var _this = this;\n\n    this.__background = document.createElement('div');\n    this.__foreground = document.createElement('div');\n    \n\n\n    dom.bind(this.__background, 'mousedown', onMouseDown);\n    \n    dom.addClass(this.__background, 'slider');\n    dom.addClass(this.__foreground, 'slider-fg');\n\n    function onMouseDown(e) {\n\n      dom.bind(window, 'mousemove', onMouseDrag);\n      dom.bind(window, 'mouseup', onMouseUp);\n\n      onMouseDrag(e);\n    }\n\n    function onMouseDrag(e) {\n\n      e.preventDefault();\n\n      var offset = dom.getOffset(_this.__background);\n      var width = dom.getWidth(_this.__background);\n      \n      _this.setValue(\n        map(e.clientX, offset.left, offset.left + width, _this.__min, _this.__max)\n      );\n\n      return false;\n\n    }\n\n    function onMouseUp() {\n      dom.unbind(window, 'mousemove', onMouseDrag);\n      dom.unbind(window, 'mouseup', onMouseUp);\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n\n    this.updateDisplay();\n\n    this.__background.appendChild(this.__foreground);\n    this.domElement.appendChild(this.__background);\n\n  };\n\n  NumberControllerSlider.superclass = NumberController;\n\n  /**\n   * Injects default stylesheet for slider elements.\n   */\n  NumberControllerSlider.useDefaultStyles = function() {\n    css.inject(styleSheet);\n  };\n\n  common.extend(\n\n      NumberControllerSlider.prototype,\n      NumberController.prototype,\n\n      {\n\n        updateDisplay: function() {\n          var pct = (this.getValue() - this.__min)/(this.__max - this.__min);\n          this.__foreground.style.width = pct*100+'%';\n          return NumberControllerSlider.superclass.prototype.updateDisplay.call(this);\n        }\n\n      }\n\n\n\n  );\n\n  function map(v, i1, i2, o1, o2) {\n    return o1 + (o2 - o1) * ((v - i1) / (i2 - i1));\n  }\n\n  return NumberControllerSlider;\n  \n})(dat.controllers.NumberController,\ndat.dom.dom,\ndat.utils.css,\ndat.utils.common,\n\".slider {\\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\\n  height: 1em;\\n  border-radius: 1em;\\n  background-color: #eee;\\n  padding: 0 0.5em;\\n  overflow: hidden;\\n}\\n\\n.slider-fg {\\n  padding: 1px 0 2px 0;\\n  background-color: #aaa;\\n  height: 1em;\\n  margin-left: -0.5em;\\n  padding-right: 0.5em;\\n  border-radius: 1em 0 0 1em;\\n}\\n\\n.slider-fg:after {\\n  display: inline-block;\\n  border-radius: 1em;\\n  background-color: #fff;\\n  border:  1px solid #aaa;\\n  content: '';\\n  float: right;\\n  margin-right: -1em;\\n  margin-top: -1px;\\n  height: 0.9em;\\n  width: 0.9em;\\n}\");\n\n\ndat.controllers.FunctionController = (function (Controller, dom, common) {\n\n  /**\n   * @class Provides a GUI interface to fire a specified method, a property of an object.\n   *\n   * @extends dat.controllers.Controller\n   *\n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   *\n   * @member dat.controllers\n   */\n  var FunctionController = function(object, property, text) {\n\n    FunctionController.superclass.call(this, object, property);\n\n    var _this = this;\n\n    this.__button = document.createElement('div');\n    this.__button.innerHTML = text === undefined ? 'Fire' : text;\n    dom.bind(this.__button, 'click', function(e) {\n      e.preventDefault();\n      _this.fire();\n      return false;\n    });\n\n    dom.addClass(this.__button, 'button');\n\n    this.domElement.appendChild(this.__button);\n\n\n  };\n\n  FunctionController.superclass = Controller;\n\n  common.extend(\n\n      FunctionController.prototype,\n      Controller.prototype,\n      {\n        \n        fire: function() {\n          if (this.__onChange) {\n            this.__onChange.call(this);\n          }\n          if (this.__onFinishChange) {\n            this.__onFinishChange.call(this, this.getValue());\n          }\n          this.getValue().call(this.object);\n        }\n      }\n\n  );\n\n  return FunctionController;\n\n})(dat.controllers.Controller,\ndat.dom.dom,\ndat.utils.common);\n\n\ndat.controllers.BooleanController = (function (Controller, dom, common) {\n\n  /**\n   * @class Provides a checkbox input to alter the boolean property of an object.\n   * @extends dat.controllers.Controller\n   *\n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   *\n   * @member dat.controllers\n   */\n  var BooleanController = function(object, property) {\n\n    BooleanController.superclass.call(this, object, property);\n\n    var _this = this;\n    this.__prev = this.getValue();\n\n    this.__checkbox = document.createElement('input');\n    this.__checkbox.setAttribute('type', 'checkbox');\n\n\n    dom.bind(this.__checkbox, 'change', onChange, false);\n\n    this.domElement.appendChild(this.__checkbox);\n\n    // Match original value\n    this.updateDisplay();\n\n    function onChange() {\n      _this.setValue(!_this.__prev);\n    }\n\n  };\n\n  BooleanController.superclass = Controller;\n\n  common.extend(\n\n      BooleanController.prototype,\n      Controller.prototype,\n\n      {\n\n        setValue: function(v) {\n          var toReturn = BooleanController.superclass.prototype.setValue.call(this, v);\n          if (this.__onFinishChange) {\n            this.__onFinishChange.call(this, this.getValue());\n          }\n          this.__prev = this.getValue();\n          return toReturn;\n        },\n\n        updateDisplay: function() {\n          \n          if (this.getValue() === true) {\n            this.__checkbox.setAttribute('checked', 'checked');\n            this.__checkbox.checked = true;    \n          } else {\n              this.__checkbox.checked = false;\n          }\n\n          return BooleanController.superclass.prototype.updateDisplay.call(this);\n\n        }\n\n\n      }\n\n  );\n\n  return BooleanController;\n\n})(dat.controllers.Controller,\ndat.dom.dom,\ndat.utils.common);\n\n\ndat.color.toString = (function (common) {\n\n  return function(color) {\n\n    if (color.a == 1 || common.isUndefined(color.a)) {\n\n      var s = color.hex.toString(16);\n      while (s.length < 6) {\n        s = '0' + s;\n      }\n\n      return '#' + s;\n\n    } else {\n\n      return 'rgba(' + Math.round(color.r) + ',' + Math.round(color.g) + ',' + Math.round(color.b) + ',' + color.a + ')';\n\n    }\n\n  }\n\n})(dat.utils.common);\n\n\ndat.color.interpret = (function (toString, common) {\n\n  var result, toReturn;\n\n  var interpret = function() {\n\n    toReturn = false;\n\n    var original = arguments.length > 1 ? common.toArray(arguments) : arguments[0];\n\n    common.each(INTERPRETATIONS, function(family) {\n\n      if (family.litmus(original)) {\n\n        common.each(family.conversions, function(conversion, conversionName) {\n\n          result = conversion.read(original);\n\n          if (toReturn === false && result !== false) {\n            toReturn = result;\n            result.conversionName = conversionName;\n            result.conversion = conversion;\n            return common.BREAK;\n\n          }\n\n        });\n\n        return common.BREAK;\n\n      }\n\n    });\n\n    return toReturn;\n\n  };\n\n  var INTERPRETATIONS = [\n\n    // Strings\n    {\n\n      litmus: common.isString,\n\n      conversions: {\n\n        THREE_CHAR_HEX: {\n\n          read: function(original) {\n\n            var test = original.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);\n            if (test === null) return false;\n\n            return {\n              space: 'HEX',\n              hex: parseInt(\n                  '0x' +\n                      test[1].toString() + test[1].toString() +\n                      test[2].toString() + test[2].toString() +\n                      test[3].toString() + test[3].toString())\n            };\n\n          },\n\n          write: toString\n\n        },\n\n        SIX_CHAR_HEX: {\n\n          read: function(original) {\n\n            var test = original.match(/^#([A-F0-9]{6})$/i);\n            if (test === null) return false;\n\n            return {\n              space: 'HEX',\n              hex: parseInt('0x' + test[1].toString())\n            };\n\n          },\n\n          write: toString\n\n        },\n\n        CSS_RGB: {\n\n          read: function(original) {\n\n            var test = original.match(/^rgb\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/);\n            if (test === null) return false;\n\n            return {\n              space: 'RGB',\n              r: parseFloat(test[1]),\n              g: parseFloat(test[2]),\n              b: parseFloat(test[3])\n            };\n\n          },\n\n          write: toString\n\n        },\n\n        CSS_RGBA: {\n\n          read: function(original) {\n\n            var test = original.match(/^rgba\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\,\\s*(.+)\\s*\\)/);\n            if (test === null) return false;\n\n            return {\n              space: 'RGB',\n              r: parseFloat(test[1]),\n              g: parseFloat(test[2]),\n              b: parseFloat(test[3]),\n              a: parseFloat(test[4])\n            };\n\n          },\n\n          write: toString\n\n        }\n\n      }\n\n    },\n\n    // Numbers\n    {\n\n      litmus: common.isNumber,\n\n      conversions: {\n\n        HEX: {\n          read: function(original) {\n            return {\n              space: 'HEX',\n              hex: original,\n              conversionName: 'HEX'\n            }\n          },\n\n          write: function(color) {\n            return color.hex;\n          }\n        }\n\n      }\n\n    },\n\n    // Arrays\n    {\n\n      litmus: common.isArray,\n\n      conversions: {\n\n        RGB_ARRAY: {\n          read: function(original) {\n            if (original.length != 3) return false;\n            return {\n              space: 'RGB',\n              r: original[0],\n              g: original[1],\n              b: original[2]\n            };\n          },\n\n          write: function(color) {\n            return [color.r, color.g, color.b];\n          }\n\n        },\n\n        RGBA_ARRAY: {\n          read: function(original) {\n            if (original.length != 4) return false;\n            return {\n              space: 'RGB',\n              r: original[0],\n              g: original[1],\n              b: original[2],\n              a: original[3]\n            };\n          },\n\n          write: function(color) {\n            return [color.r, color.g, color.b, color.a];\n          }\n\n        }\n\n      }\n\n    },\n\n    // Objects\n    {\n\n      litmus: common.isObject,\n\n      conversions: {\n\n        RGBA_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.r) &&\n                common.isNumber(original.g) &&\n                common.isNumber(original.b) &&\n                common.isNumber(original.a)) {\n              return {\n                space: 'RGB',\n                r: original.r,\n                g: original.g,\n                b: original.b,\n                a: original.a\n              }\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              r: color.r,\n              g: color.g,\n              b: color.b,\n              a: color.a\n            }\n          }\n        },\n\n        RGB_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.r) &&\n                common.isNumber(original.g) &&\n                common.isNumber(original.b)) {\n              return {\n                space: 'RGB',\n                r: original.r,\n                g: original.g,\n                b: original.b\n              }\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              r: color.r,\n              g: color.g,\n              b: color.b\n            }\n          }\n        },\n\n        HSVA_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.h) &&\n                common.isNumber(original.s) &&\n                common.isNumber(original.v) &&\n                common.isNumber(original.a)) {\n              return {\n                space: 'HSV',\n                h: original.h,\n                s: original.s,\n                v: original.v,\n                a: original.a\n              }\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              h: color.h,\n              s: color.s,\n              v: color.v,\n              a: color.a\n            }\n          }\n        },\n\n        HSV_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.h) &&\n                common.isNumber(original.s) &&\n                common.isNumber(original.v)) {\n              return {\n                space: 'HSV',\n                h: original.h,\n                s: original.s,\n                v: original.v\n              }\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              h: color.h,\n              s: color.s,\n              v: color.v\n            }\n          }\n\n        }\n\n      }\n\n    }\n\n\n  ];\n\n  return interpret;\n\n\n})(dat.color.toString,\ndat.utils.common);\n\n\ndat.GUI = dat.gui.GUI = (function (css, saveDialogueContents, styleSheet, controllerFactory, Controller, BooleanController, FunctionController, NumberControllerBox, NumberControllerSlider, OptionController, ColorController, requestAnimationFrame, CenteredDiv, dom, common) {\n\n  css.inject(styleSheet);\n\n  /** Outer-most className for GUI's */\n  var CSS_NAMESPACE = 'dg';\n\n  var HIDE_KEY_CODE = 72;\n\n  /** The only value shared between the JS and SCSS. Use caution. */\n  var CLOSE_BUTTON_HEIGHT = 20;\n\n  var DEFAULT_DEFAULT_PRESET_NAME = 'Default';\n\n  var SUPPORTS_LOCAL_STORAGE = (function() {\n    try {\n      return 'localStorage' in window && window['localStorage'] !== null;\n    } catch (e) {\n      return false;\n    }\n  })();\n\n  var SAVE_DIALOGUE;\n\n  /** Have we yet to create an autoPlace GUI? */\n  var auto_place_virgin = true;\n\n  /** Fixed position div that auto place GUI's go inside */\n  var auto_place_container;\n\n  /** Are we hiding the GUI's ? */\n  var hide = false;\n\n  /** GUI's which should be hidden */\n  var hideable_guis = [];\n\n  /**\n   * A lightweight controller library for JavaScript. It allows you to easily\n   * manipulate variables and fire functions on the fly.\n   * @class\n   *\n   * @member dat.gui\n   *\n   * @param {Object} [params]\n   * @param {String} [params.name] The name of this GUI.\n   * @param {Object} [params.load] JSON object representing the saved state of\n   * this GUI.\n   * @param {Boolean} [params.auto=true]\n   * @param {dat.gui.GUI} [params.parent] The GUI I'm nested in.\n   * @param {Boolean} [params.closed] If true, starts closed\n   */\n  var GUI = function(params) {\n\n    var _this = this;\n\n    /**\n     * Outermost DOM Element\n     * @type DOMElement\n     */\n    this.domElement = document.createElement('div');\n    this.__ul = document.createElement('ul');\n    this.domElement.appendChild(this.__ul);\n\n    dom.addClass(this.domElement, CSS_NAMESPACE);\n\n    /**\n     * Nested GUI's by name\n     * @ignore\n     */\n    this.__folders = {};\n\n    this.__controllers = [];\n\n    /**\n     * List of objects I'm remembering for save, only used in top level GUI\n     * @ignore\n     */\n    this.__rememberedObjects = [];\n\n    /**\n     * Maps the index of remembered objects to a map of controllers, only used\n     * in top level GUI.\n     *\n     * @private\n     * @ignore\n     *\n     * @example\n     * [\n     *  {\n     *    propertyName: Controller,\n     *    anotherPropertyName: Controller\n     *  },\n     *  {\n     *    propertyName: Controller\n     *  }\n     * ]\n     */\n    this.__rememberedObjectIndecesToControllers = [];\n\n    this.__listening = [];\n\n    params = params || {};\n\n    // Default parameters\n    params = common.defaults(params, {\n      autoPlace: true,\n      width: GUI.DEFAULT_WIDTH\n    });\n\n    params = common.defaults(params, {\n      resizable: params.autoPlace,\n      hideable: params.autoPlace\n    });\n\n\n    if (!common.isUndefined(params.load)) {\n\n      // Explicit preset\n      if (params.preset) params.load.preset = params.preset;\n\n    } else {\n\n      params.load = { preset: DEFAULT_DEFAULT_PRESET_NAME };\n\n    }\n\n    if (common.isUndefined(params.parent) && params.hideable) {\n      hideable_guis.push(this);\n    }\n\n    // Only root level GUI's are resizable.\n    params.resizable = common.isUndefined(params.parent) && params.resizable;\n\n\n    if (params.autoPlace && common.isUndefined(params.scrollable)) {\n      params.scrollable = true;\n    }\n//    params.scrollable = common.isUndefined(params.parent) && params.scrollable === true;\n\n    // Not part of params because I don't want people passing this in via\n    // constructor. Should be a 'remembered' value.\n    var use_local_storage =\n        SUPPORTS_LOCAL_STORAGE &&\n            localStorage.getItem(getLocalStorageHash(this, 'isLocal')) === 'true';\n\n    Object.defineProperties(this,\n\n        /** @lends dat.gui.GUI.prototype */\n        {\n\n          /**\n           * The parent <code>GUI</code>\n           * @type dat.gui.GUI\n           */\n          parent: {\n            get: function() {\n              return params.parent;\n            }\n          },\n\n          scrollable: {\n            get: function() {\n              return params.scrollable;\n            }\n          },\n\n          /**\n           * Handles <code>GUI</code>'s element placement for you\n           * @type Boolean\n           */\n          autoPlace: {\n            get: function() {\n              return params.autoPlace;\n            }\n          },\n\n          /**\n           * The identifier for a set of saved values\n           * @type String\n           */\n          preset: {\n\n            get: function() {\n              if (_this.parent) {\n                return _this.getRoot().preset;\n              } else {\n                return params.load.preset;\n              }\n            },\n\n            set: function(v) {\n              if (_this.parent) {\n                _this.getRoot().preset = v;\n              } else {\n                params.load.preset = v;\n              }\n              setPresetSelectIndex(this);\n              _this.revert();\n            }\n\n          },\n\n          /**\n           * The width of <code>GUI</code> element\n           * @type Number\n           */\n          width: {\n            get: function() {\n              return params.width;\n            },\n            set: function(v) {\n              params.width = v;\n              setWidth(_this, v);\n            }\n          },\n\n          /**\n           * The name of <code>GUI</code>. Used for folders. i.e\n           * a folder's name\n           * @type String\n           */\n          name: {\n            get: function() {\n              return params.name;\n            },\n            set: function(v) {\n              // TODO Check for collisions among sibling folders\n              params.name = v;\n              if (title_row_name) {\n                title_row_name.innerHTML = params.name;\n              }\n            }\n          },\n\n          /**\n           * Whether the <code>GUI</code> is collapsed or not\n           * @type Boolean\n           */\n          closed: {\n            get: function() {\n              return params.closed;\n            },\n            set: function(v) {\n              params.closed = v;\n              if (params.closed) {\n                dom.addClass(_this.__ul, GUI.CLASS_CLOSED);\n              } else {\n                dom.removeClass(_this.__ul, GUI.CLASS_CLOSED);\n              }\n              // For browsers that aren't going to respect the CSS transition,\n              // Lets just check our height against the window height right off\n              // the bat.\n              this.onResize();\n\n              if (_this.__closeButton) {\n                _this.__closeButton.innerHTML = v ? GUI.TEXT_OPEN : GUI.TEXT_CLOSED;\n              }\n            }\n          },\n\n          /**\n           * Contains all presets\n           * @type Object\n           */\n          load: {\n            get: function() {\n              return params.load;\n            }\n          },\n\n          /**\n           * Determines whether or not to use <a href=\"https://developer.mozilla.org/en/DOM/Storage#localStorage\">localStorage</a> as the means for\n           * <code>remember</code>ing\n           * @type Boolean\n           */\n          useLocalStorage: {\n\n            get: function() {\n              return use_local_storage;\n            },\n            set: function(bool) {\n              if (SUPPORTS_LOCAL_STORAGE) {\n                use_local_storage = bool;\n                if (bool) {\n                  dom.bind(window, 'unload', saveToLocalStorage);\n                } else {\n                  dom.unbind(window, 'unload', saveToLocalStorage);\n                }\n                localStorage.setItem(getLocalStorageHash(_this, 'isLocal'), bool);\n              }\n            }\n\n          }\n\n        });\n\n    // Are we a root level GUI?\n    if (common.isUndefined(params.parent)) {\n\n      params.closed = false;\n\n      dom.addClass(this.domElement, GUI.CLASS_MAIN);\n      dom.makeSelectable(this.domElement, false);\n\n      // Are we supposed to be loading locally?\n      if (SUPPORTS_LOCAL_STORAGE) {\n\n        if (use_local_storage) {\n\n          _this.useLocalStorage = true;\n\n          var saved_gui = localStorage.getItem(getLocalStorageHash(this, 'gui'));\n\n          if (saved_gui) {\n            params.load = JSON.parse(saved_gui);\n          }\n\n        }\n\n      }\n\n      this.__closeButton = document.createElement('div');\n      this.__closeButton.innerHTML = GUI.TEXT_CLOSED;\n      dom.addClass(this.__closeButton, GUI.CLASS_CLOSE_BUTTON);\n      this.domElement.appendChild(this.__closeButton);\n\n      dom.bind(this.__closeButton, 'click', function() {\n\n        _this.closed = !_this.closed;\n\n\n      });\n\n\n      // Oh, you're a nested GUI!\n    } else {\n\n      if (params.closed === undefined) {\n        params.closed = true;\n      }\n\n      var title_row_name = document.createTextNode(params.name);\n      dom.addClass(title_row_name, 'controller-name');\n\n      var title_row = addRow(_this, title_row_name);\n\n      var on_click_title = function(e) {\n        e.preventDefault();\n        _this.closed = !_this.closed;\n        return false;\n      };\n\n      dom.addClass(this.__ul, GUI.CLASS_CLOSED);\n\n      dom.addClass(title_row, 'title');\n      dom.bind(title_row, 'click', on_click_title);\n\n      if (!params.closed) {\n        this.closed = false;\n      }\n\n    }\n\n    if (params.autoPlace) {\n\n      if (common.isUndefined(params.parent)) {\n\n        if (auto_place_virgin) {\n          auto_place_container = document.createElement('div');\n          dom.addClass(auto_place_container, CSS_NAMESPACE);\n          dom.addClass(auto_place_container, GUI.CLASS_AUTO_PLACE_CONTAINER);\n          document.body.appendChild(auto_place_container);\n          auto_place_virgin = false;\n        }\n\n        // Put it in the dom for you.\n        auto_place_container.appendChild(this.domElement);\n\n        // Apply the auto styles\n        dom.addClass(this.domElement, GUI.CLASS_AUTO_PLACE);\n\n      }\n\n\n      // Make it not elastic.\n      if (!this.parent) setWidth(_this, params.width);\n\n    }\n\n    dom.bind(window, 'resize', function() { _this.onResize() });\n    dom.bind(this.__ul, 'webkitTransitionEnd', function() { _this.onResize(); });\n    dom.bind(this.__ul, 'transitionend', function() { _this.onResize() });\n    dom.bind(this.__ul, 'oTransitionEnd', function() { _this.onResize() });\n    this.onResize();\n\n\n    if (params.resizable) {\n      addResizeHandle(this);\n    }\n\n    function saveToLocalStorage() {\n      localStorage.setItem(getLocalStorageHash(_this, 'gui'), JSON.stringify(_this.getSaveObject()));\n    }\n\n    var root = _this.getRoot();\n    function resetWidth() {\n        var root = _this.getRoot();\n        root.width += 1;\n        common.defer(function() {\n          root.width -= 1;\n        });\n      }\n\n      if (!params.parent) {\n        resetWidth();\n      }\n\n  };\n\n  GUI.toggleHide = function() {\n\n    hide = !hide;\n    common.each(hideable_guis, function(gui) {\n      gui.domElement.style.zIndex = hide ? -999 : 999;\n      gui.domElement.style.opacity = hide ? 0 : 1;\n    });\n  };\n\n  GUI.CLASS_AUTO_PLACE = 'a';\n  GUI.CLASS_AUTO_PLACE_CONTAINER = 'ac';\n  GUI.CLASS_MAIN = 'main';\n  GUI.CLASS_CONTROLLER_ROW = 'cr';\n  GUI.CLASS_TOO_TALL = 'taller-than-window';\n  GUI.CLASS_CLOSED = 'closed';\n  GUI.CLASS_CLOSE_BUTTON = 'close-button';\n  GUI.CLASS_DRAG = 'drag';\n\n  GUI.DEFAULT_WIDTH = 245;\n  GUI.TEXT_CLOSED = 'Close Controls';\n  GUI.TEXT_OPEN = 'Open Controls';\n\n  dom.bind(window, 'keydown', function(e) {\n\n    if (document.activeElement.type !== 'text' &&\n        (e.which === HIDE_KEY_CODE || e.keyCode == HIDE_KEY_CODE)) {\n      GUI.toggleHide();\n    }\n\n  }, false);\n\n  common.extend(\n\n      GUI.prototype,\n\n      /** @lends dat.gui.GUI */\n      {\n\n        /**\n         * @param object\n         * @param property\n         * @returns {dat.controllers.Controller} The new controller that was added.\n         * @instance\n         */\n        add: function(object, property) {\n\n          return add(\n              this,\n              object,\n              property,\n              {\n                factoryArgs: Array.prototype.slice.call(arguments, 2)\n              }\n          );\n\n        },\n\n        /**\n         * @param object\n         * @param property\n         * @returns {dat.controllers.ColorController} The new controller that was added.\n         * @instance\n         */\n        addColor: function(object, property) {\n\n          return add(\n              this,\n              object,\n              property,\n              {\n                color: true\n              }\n          );\n\n        },\n\n        /**\n         * @param controller\n         * @instance\n         */\n        remove: function(controller) {\n\n          // TODO listening?\n          this.__ul.removeChild(controller.__li);\n          this.__controllers.slice(this.__controllers.indexOf(controller), 1);\n          var _this = this;\n          common.defer(function() {\n            _this.onResize();\n          });\n\n        },\n\n        destroy: function() {\n\n          if (this.autoPlace) {\n            auto_place_container.removeChild(this.domElement);\n          }\n\n        },\n\n        /**\n         * @param name\n         * @returns {dat.gui.GUI} The new folder.\n         * @throws {Error} if this GUI already has a folder by the specified\n         * name\n         * @instance\n         */\n        addFolder: function(name) {\n\n          // We have to prevent collisions on names in order to have a key\n          // by which to remember saved values\n          if (this.__folders[name] !== undefined) {\n            throw new Error('You already have a folder in this GUI by the' +\n                ' name \"' + name + '\"');\n          }\n\n          var new_gui_params = { name: name, parent: this };\n\n          // We need to pass down the autoPlace trait so that we can\n          // attach event listeners to open/close folder actions to\n          // ensure that a scrollbar appears if the window is too short.\n          new_gui_params.autoPlace = this.autoPlace;\n\n          // Do we have saved appearance data for this folder?\n\n          if (this.load && // Anything loaded?\n              this.load.folders && // Was my parent a dead-end?\n              this.load.folders[name]) { // Did daddy remember me?\n\n            // Start me closed if I was closed\n            new_gui_params.closed = this.load.folders[name].closed;\n\n            // Pass down the loaded data\n            new_gui_params.load = this.load.folders[name];\n\n          }\n\n          var gui = new GUI(new_gui_params);\n          this.__folders[name] = gui;\n\n          var li = addRow(this, gui.domElement);\n          dom.addClass(li, 'folder');\n          return gui;\n\n        },\n\n        open: function() {\n          this.closed = false;\n        },\n\n        close: function() {\n          this.closed = true;\n        },\n\n        onResize: function() {\n\n          var root = this.getRoot();\n\n          if (root.scrollable) {\n\n            var top = dom.getOffset(root.__ul).top;\n            var h = 0;\n\n            common.each(root.__ul.childNodes, function(node) {\n              if (! (root.autoPlace && node === root.__save_row))\n                h += dom.getHeight(node);\n            });\n\n            if (window.innerHeight - top - CLOSE_BUTTON_HEIGHT < h) {\n              dom.addClass(root.domElement, GUI.CLASS_TOO_TALL);\n              root.__ul.style.height = window.innerHeight - top - CLOSE_BUTTON_HEIGHT + 'px';\n            } else {\n              dom.removeClass(root.domElement, GUI.CLASS_TOO_TALL);\n              root.__ul.style.height = 'auto';\n            }\n\n          }\n\n          if (root.__resize_handle) {\n            common.defer(function() {\n              root.__resize_handle.style.height = root.__ul.offsetHeight + 'px';\n            });\n          }\n\n          if (root.__closeButton) {\n            root.__closeButton.style.width = root.width + 'px';\n          }\n\n        },\n\n        /**\n         * Mark objects for saving. The order of these objects cannot change as\n         * the GUI grows. When remembering new objects, append them to the end\n         * of the list.\n         *\n         * @param {Object...} objects\n         * @throws {Error} if not called on a top level GUI.\n         * @instance\n         */\n        remember: function() {\n\n          if (common.isUndefined(SAVE_DIALOGUE)) {\n            SAVE_DIALOGUE = new CenteredDiv();\n            SAVE_DIALOGUE.domElement.innerHTML = saveDialogueContents;\n          }\n\n          if (this.parent) {\n            throw new Error(\"You can only call remember on a top level GUI.\");\n          }\n\n          var _this = this;\n\n          common.each(Array.prototype.slice.call(arguments), function(object) {\n            if (_this.__rememberedObjects.length == 0) {\n              addSaveMenu(_this);\n            }\n            if (_this.__rememberedObjects.indexOf(object) == -1) {\n              _this.__rememberedObjects.push(object);\n            }\n          });\n\n          if (this.autoPlace) {\n            // Set save row width\n            setWidth(this, this.width);\n          }\n\n        },\n\n        /**\n         * @returns {dat.gui.GUI} the topmost parent GUI of a nested GUI.\n         * @instance\n         */\n        getRoot: function() {\n          var gui = this;\n          while (gui.parent) {\n            gui = gui.parent;\n          }\n          return gui;\n        },\n\n        /**\n         * @returns {Object} a JSON object representing the current state of\n         * this GUI as well as its remembered properties.\n         * @instance\n         */\n        getSaveObject: function() {\n\n          var toReturn = this.load;\n\n          toReturn.closed = this.closed;\n\n          // Am I remembering any values?\n          if (this.__rememberedObjects.length > 0) {\n\n            toReturn.preset = this.preset;\n\n            if (!toReturn.remembered) {\n              toReturn.remembered = {};\n            }\n\n            toReturn.remembered[this.preset] = getCurrentPreset(this);\n\n          }\n\n          toReturn.folders = {};\n          common.each(this.__folders, function(element, key) {\n            toReturn.folders[key] = element.getSaveObject();\n          });\n\n          return toReturn;\n\n        },\n\n        save: function() {\n\n          if (!this.load.remembered) {\n            this.load.remembered = {};\n          }\n\n          this.load.remembered[this.preset] = getCurrentPreset(this);\n          markPresetModified(this, false);\n\n        },\n\n        saveAs: function(presetName) {\n\n          if (!this.load.remembered) {\n\n            // Retain default values upon first save\n            this.load.remembered = {};\n            this.load.remembered[DEFAULT_DEFAULT_PRESET_NAME] = getCurrentPreset(this, true);\n\n          }\n\n          this.load.remembered[presetName] = getCurrentPreset(this);\n          this.preset = presetName;\n          addPresetOption(this, presetName, true);\n\n        },\n\n        revert: function(gui) {\n\n          common.each(this.__controllers, function(controller) {\n            // Make revert work on Default.\n            if (!this.getRoot().load.remembered) {\n              controller.setValue(controller.initialValue);\n            } else {\n              recallSavedValue(gui || this.getRoot(), controller);\n            }\n          }, this);\n\n          common.each(this.__folders, function(folder) {\n            folder.revert(folder);\n          });\n\n          if (!gui) {\n            markPresetModified(this.getRoot(), false);\n          }\n\n\n        },\n\n        listen: function(controller) {\n\n          var init = this.__listening.length == 0;\n          this.__listening.push(controller);\n          if (init) updateDisplays(this.__listening);\n\n        }\n\n      }\n\n  );\n\n  function add(gui, object, property, params) {\n\n    if (object[property] === undefined) {\n      throw new Error(\"Object \" + object + \" has no property \\\"\" + property + \"\\\"\");\n    }\n\n    var controller;\n\n    if (params.color) {\n\n      controller = new ColorController(object, property);\n\n    } else {\n\n      var factoryArgs = [object,property].concat(params.factoryArgs);\n      controller = controllerFactory.apply(gui, factoryArgs);\n\n    }\n\n    if (params.before instanceof Controller) {\n      params.before = params.before.__li;\n    }\n\n    recallSavedValue(gui, controller);\n\n    dom.addClass(controller.domElement, 'c');\n\n    var name = document.createElement('span');\n    dom.addClass(name, 'property-name');\n    name.innerHTML = controller.property;\n\n    var container = document.createElement('div');\n    container.appendChild(name);\n    container.appendChild(controller.domElement);\n\n    var li = addRow(gui, container, params.before);\n\n    dom.addClass(li, GUI.CLASS_CONTROLLER_ROW);\n    dom.addClass(li, typeof controller.getValue());\n\n    augmentController(gui, li, controller);\n\n    gui.__controllers.push(controller);\n\n    return controller;\n\n  }\n\n  /**\n   * Add a row to the end of the GUI or before another row.\n   *\n   * @param gui\n   * @param [dom] If specified, inserts the dom content in the new row\n   * @param [liBefore] If specified, places the new row before another row\n   */\n  function addRow(gui, dom, liBefore) {\n    var li = document.createElement('li');\n    if (dom) li.appendChild(dom);\n    if (liBefore) {\n      gui.__ul.insertBefore(li, params.before);\n    } else {\n      gui.__ul.appendChild(li);\n    }\n    gui.onResize();\n    return li;\n  }\n\n  function augmentController(gui, li, controller) {\n\n    controller.__li = li;\n    controller.__gui = gui;\n\n    common.extend(controller, {\n\n      options: function(options) {\n\n        if (arguments.length > 1) {\n          controller.remove();\n\n          return add(\n              gui,\n              controller.object,\n              controller.property,\n              {\n                before: controller.__li.nextElementSibling,\n                factoryArgs: [common.toArray(arguments)]\n              }\n          );\n\n        }\n\n        if (common.isArray(options) || common.isObject(options)) {\n          controller.remove();\n\n          return add(\n              gui,\n              controller.object,\n              controller.property,\n              {\n                before: controller.__li.nextElementSibling,\n                factoryArgs: [options]\n              }\n          );\n\n        }\n\n      },\n\n      name: function(v) {\n        controller.__li.firstElementChild.firstElementChild.innerHTML = v;\n        return controller;\n      },\n\n      listen: function() {\n        controller.__gui.listen(controller);\n        return controller;\n      },\n\n      remove: function() {\n        controller.__gui.remove(controller);\n        return controller;\n      }\n\n    });\n\n    // All sliders should be accompanied by a box.\n    if (controller instanceof NumberControllerSlider) {\n\n      var box = new NumberControllerBox(controller.object, controller.property,\n          { min: controller.__min, max: controller.__max, step: controller.__step });\n\n      common.each(['updateDisplay', 'onChange', 'onFinishChange'], function(method) {\n        var pc = controller[method];\n        var pb = box[method];\n        controller[method] = box[method] = function() {\n          var args = Array.prototype.slice.call(arguments);\n          pc.apply(controller, args);\n          return pb.apply(box, args);\n        }\n      });\n\n      dom.addClass(li, 'has-slider');\n      controller.domElement.insertBefore(box.domElement, controller.domElement.firstElementChild);\n\n    }\n    else if (controller instanceof NumberControllerBox) {\n\n      var r = function(returned) {\n\n        // Have we defined both boundaries?\n        if (common.isNumber(controller.__min) && common.isNumber(controller.__max)) {\n\n          // Well, then lets just replace this with a slider.\n          controller.remove();\n          return add(\n              gui,\n              controller.object,\n              controller.property,\n              {\n                before: controller.__li.nextElementSibling,\n                factoryArgs: [controller.__min, controller.__max, controller.__step]\n              });\n\n        }\n\n        return returned;\n\n      };\n\n      controller.min = common.compose(r, controller.min);\n      controller.max = common.compose(r, controller.max);\n\n    }\n    else if (controller instanceof BooleanController) {\n\n      dom.bind(li, 'click', function() {\n        dom.fakeEvent(controller.__checkbox, 'click');\n      });\n\n      dom.bind(controller.__checkbox, 'click', function(e) {\n        e.stopPropagation(); // Prevents double-toggle\n      })\n\n    }\n    else if (controller instanceof FunctionController) {\n\n      dom.bind(li, 'click', function() {\n        dom.fakeEvent(controller.__button, 'click');\n      });\n\n      dom.bind(li, 'mouseover', function() {\n        dom.addClass(controller.__button, 'hover');\n      });\n\n      dom.bind(li, 'mouseout', function() {\n        dom.removeClass(controller.__button, 'hover');\n      });\n\n    }\n    else if (controller instanceof ColorController) {\n\n      dom.addClass(li, 'color');\n      controller.updateDisplay = common.compose(function(r) {\n        li.style.borderLeftColor = controller.__color.toString();\n        return r;\n      }, controller.updateDisplay);\n\n      controller.updateDisplay();\n\n    }\n\n    controller.setValue = common.compose(function(r) {\n      if (gui.getRoot().__preset_select && controller.isModified()) {\n        markPresetModified(gui.getRoot(), true);\n      }\n      return r;\n    }, controller.setValue);\n\n  }\n\n  function recallSavedValue(gui, controller) {\n\n    // Find the topmost GUI, that's where remembered objects live.\n    var root = gui.getRoot();\n\n    // Does the object we're controlling match anything we've been told to\n    // remember?\n    var matched_index = root.__rememberedObjects.indexOf(controller.object);\n\n    // Why yes, it does!\n    if (matched_index != -1) {\n\n      // Let me fetch a map of controllers for thcommon.isObject.\n      var controller_map =\n          root.__rememberedObjectIndecesToControllers[matched_index];\n\n      // Ohp, I believe this is the first controller we've created for this\n      // object. Lets make the map fresh.\n      if (controller_map === undefined) {\n        controller_map = {};\n        root.__rememberedObjectIndecesToControllers[matched_index] =\n            controller_map;\n      }\n\n      // Keep track of this controller\n      controller_map[controller.property] = controller;\n\n      // Okay, now have we saved any values for this controller?\n      if (root.load && root.load.remembered) {\n\n        var preset_map = root.load.remembered;\n\n        // Which preset are we trying to load?\n        var preset;\n\n        if (preset_map[gui.preset]) {\n\n          preset = preset_map[gui.preset];\n\n        } else if (preset_map[DEFAULT_DEFAULT_PRESET_NAME]) {\n\n          // Uhh, you can have the default instead?\n          preset = preset_map[DEFAULT_DEFAULT_PRESET_NAME];\n\n        } else {\n\n          // Nada.\n\n          return;\n\n        }\n\n\n        // Did the loaded object remember thcommon.isObject?\n        if (preset[matched_index] &&\n\n          // Did we remember this particular property?\n            preset[matched_index][controller.property] !== undefined) {\n\n          // We did remember something for this guy ...\n          var value = preset[matched_index][controller.property];\n\n          // And that's what it is.\n          controller.initialValue = value;\n          controller.setValue(value);\n\n        }\n\n      }\n\n    }\n\n  }\n\n  function getLocalStorageHash(gui, key) {\n    // TODO how does this deal with multiple GUI's?\n    return document.location.href + '.' + key;\n\n  }\n\n  function addSaveMenu(gui) {\n\n    var div = gui.__save_row = document.createElement('li');\n\n    dom.addClass(gui.domElement, 'has-save');\n\n    gui.__ul.insertBefore(div, gui.__ul.firstChild);\n\n    dom.addClass(div, 'save-row');\n\n    var gears = document.createElement('span');\n    gears.innerHTML = '&nbsp;';\n    dom.addClass(gears, 'button gears');\n\n    // TODO replace with FunctionController\n    var button = document.createElement('span');\n    button.innerHTML = 'Save';\n    dom.addClass(button, 'button');\n    dom.addClass(button, 'save');\n\n    var button2 = document.createElement('span');\n    button2.innerHTML = 'New';\n    dom.addClass(button2, 'button');\n    dom.addClass(button2, 'save-as');\n\n    var button3 = document.createElement('span');\n    button3.innerHTML = 'Revert';\n    dom.addClass(button3, 'button');\n    dom.addClass(button3, 'revert');\n\n    var select = gui.__preset_select = document.createElement('select');\n\n    if (gui.load && gui.load.remembered) {\n\n      common.each(gui.load.remembered, function(value, key) {\n        addPresetOption(gui, key, key == gui.preset);\n      });\n\n    } else {\n      addPresetOption(gui, DEFAULT_DEFAULT_PRESET_NAME, false);\n    }\n\n    dom.bind(select, 'change', function() {\n\n\n      for (var index = 0; index < gui.__preset_select.length; index++) {\n        gui.__preset_select[index].innerHTML = gui.__preset_select[index].value;\n      }\n\n      gui.preset = this.value;\n\n    });\n\n    div.appendChild(select);\n    div.appendChild(gears);\n    div.appendChild(button);\n    div.appendChild(button2);\n    div.appendChild(button3);\n\n    if (SUPPORTS_LOCAL_STORAGE) {\n\n      var saveLocally = document.getElementById('dg-save-locally');\n      var explain = document.getElementById('dg-local-explain');\n\n      saveLocally.style.display = 'block';\n\n      var localStorageCheckBox = document.getElementById('dg-local-storage');\n\n      if (localStorage.getItem(getLocalStorageHash(gui, 'isLocal')) === 'true') {\n        localStorageCheckBox.setAttribute('checked', 'checked');\n      }\n\n      function showHideExplain() {\n        explain.style.display = gui.useLocalStorage ? 'block' : 'none';\n      }\n\n      showHideExplain();\n\n      // TODO: Use a boolean controller, fool!\n      dom.bind(localStorageCheckBox, 'change', function() {\n        gui.useLocalStorage = !gui.useLocalStorage;\n        showHideExplain();\n      });\n\n    }\n\n    var newConstructorTextArea = document.getElementById('dg-new-constructor');\n\n    dom.bind(newConstructorTextArea, 'keydown', function(e) {\n      if (e.metaKey && (e.which === 67 || e.keyCode == 67)) {\n        SAVE_DIALOGUE.hide();\n      }\n    });\n\n    dom.bind(gears, 'click', function() {\n      newConstructorTextArea.innerHTML = JSON.stringify(gui.getSaveObject(), undefined, 2);\n      SAVE_DIALOGUE.show();\n      newConstructorTextArea.focus();\n      newConstructorTextArea.select();\n    });\n\n    dom.bind(button, 'click', function() {\n      gui.save();\n    });\n\n    dom.bind(button2, 'click', function() {\n      var presetName = prompt('Enter a new preset name.');\n      if (presetName) gui.saveAs(presetName);\n    });\n\n    dom.bind(button3, 'click', function() {\n      gui.revert();\n    });\n\n//    div.appendChild(button2);\n\n  }\n\n  function addResizeHandle(gui) {\n\n    gui.__resize_handle = document.createElement('div');\n\n    common.extend(gui.__resize_handle.style, {\n\n      width: '6px',\n      marginLeft: '-3px',\n      height: '200px',\n      cursor: 'ew-resize',\n      position: 'absolute'\n//      border: '1px solid blue'\n\n    });\n\n    var pmouseX;\n\n    dom.bind(gui.__resize_handle, 'mousedown', dragStart);\n    dom.bind(gui.__closeButton, 'mousedown', dragStart);\n\n    gui.domElement.insertBefore(gui.__resize_handle, gui.domElement.firstElementChild);\n\n    function dragStart(e) {\n\n      e.preventDefault();\n\n      pmouseX = e.clientX;\n\n      dom.addClass(gui.__closeButton, GUI.CLASS_DRAG);\n      dom.bind(window, 'mousemove', drag);\n      dom.bind(window, 'mouseup', dragStop);\n\n      return false;\n\n    }\n\n    function drag(e) {\n\n      e.preventDefault();\n\n      gui.width += pmouseX - e.clientX;\n      gui.onResize();\n      pmouseX = e.clientX;\n\n      return false;\n\n    }\n\n    function dragStop() {\n\n      dom.removeClass(gui.__closeButton, GUI.CLASS_DRAG);\n      dom.unbind(window, 'mousemove', drag);\n      dom.unbind(window, 'mouseup', dragStop);\n\n    }\n\n  }\n\n  function setWidth(gui, w) {\n    gui.domElement.style.width = w + 'px';\n    // Auto placed save-rows are position fixed, so we have to\n    // set the width manually if we want it to bleed to the edge\n    if (gui.__save_row && gui.autoPlace) {\n      gui.__save_row.style.width = w + 'px';\n    }if (gui.__closeButton) {\n      gui.__closeButton.style.width = w + 'px';\n    }\n  }\n\n  function getCurrentPreset(gui, useInitialValues) {\n\n    var toReturn = {};\n\n    // For each object I'm remembering\n    common.each(gui.__rememberedObjects, function(val, index) {\n\n      var saved_values = {};\n\n      // The controllers I've made for thcommon.isObject by property\n      var controller_map =\n          gui.__rememberedObjectIndecesToControllers[index];\n\n      // Remember each value for each property\n      common.each(controller_map, function(controller, property) {\n        saved_values[property] = useInitialValues ? controller.initialValue : controller.getValue();\n      });\n\n      // Save the values for thcommon.isObject\n      toReturn[index] = saved_values;\n\n    });\n\n    return toReturn;\n\n  }\n\n  function addPresetOption(gui, name, setSelected) {\n    var opt = document.createElement('option');\n    opt.innerHTML = name;\n    opt.value = name;\n    gui.__preset_select.appendChild(opt);\n    if (setSelected) {\n      gui.__preset_select.selectedIndex = gui.__preset_select.length - 1;\n    }\n  }\n\n  function setPresetSelectIndex(gui) {\n    for (var index = 0; index < gui.__preset_select.length; index++) {\n      if (gui.__preset_select[index].value == gui.preset) {\n        gui.__preset_select.selectedIndex = index;\n      }\n    }\n  }\n\n  function markPresetModified(gui, modified) {\n    var opt = gui.__preset_select[gui.__preset_select.selectedIndex];\n//    console.log('mark', modified, opt);\n    if (modified) {\n      opt.innerHTML = opt.value + \"*\";\n    } else {\n      opt.innerHTML = opt.value;\n    }\n  }\n\n  function updateDisplays(controllerArray) {\n\n\n    if (controllerArray.length != 0) {\n\n      requestAnimationFrame(function() {\n        updateDisplays(controllerArray);\n      });\n\n    }\n\n    common.each(controllerArray, function(c) {\n      c.updateDisplay();\n    });\n\n  }\n\n  return GUI;\n\n})(dat.utils.css,\n\"<div id=\\\"dg-save\\\" class=\\\"dg dialogue\\\">\\n\\n  Here's the new load parameter for your <code>GUI</code>'s constructor:\\n\\n  <textarea id=\\\"dg-new-constructor\\\"></textarea>\\n\\n  <div id=\\\"dg-save-locally\\\">\\n\\n    <input id=\\\"dg-local-storage\\\" type=\\\"checkbox\\\"/> Automatically save\\n    values to <code>localStorage</code> on exit.\\n\\n    <div id=\\\"dg-local-explain\\\">The values saved to <code>localStorage</code> will\\n      override those passed to <code>dat.GUI</code>'s constructor. This makes it\\n      easier to work incrementally, but <code>localStorage</code> is fragile,\\n      and your friends may not see the same values you do.\\n      \\n    </div>\\n    \\n  </div>\\n\\n</div>\",\n\".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear;border:0;position:absolute;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-x:hidden}.dg.a.has-save ul{margin-top:27px}.dg.a.has-save ul.closed{margin-top:0}.dg.a .save-row{position:fixed;top:0;z-index:1002}.dg li{-webkit-transition:height 0.1s ease-out;-o-transition:height 0.1s ease-out;-moz-transition:height 0.1s ease-out;transition:height 0.1s ease-out}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;overflow:hidden;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li > *{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:9px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2fa1d6}.dg .cr.number input[type=text]{color:#2fa1d6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2fa1d6}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\\n\",\ndat.controllers.factory = (function (OptionController, NumberControllerBox, NumberControllerSlider, StringController, FunctionController, BooleanController, common) {\n\n      return function(object, property) {\n\n        var initialValue = object[property];\n\n        // Providing options?\n        if (common.isArray(arguments[2]) || common.isObject(arguments[2])) {\n          return new OptionController(object, property, arguments[2]);\n        }\n\n        // Providing a map?\n\n        if (common.isNumber(initialValue)) {\n\n          if (common.isNumber(arguments[2]) && common.isNumber(arguments[3])) {\n\n            // Has min and max.\n            return new NumberControllerSlider(object, property, arguments[2], arguments[3]);\n\n          } else {\n\n            return new NumberControllerBox(object, property, { min: arguments[2], max: arguments[3] });\n\n          }\n\n        }\n\n        if (common.isString(initialValue)) {\n          return new StringController(object, property);\n        }\n\n        if (common.isFunction(initialValue)) {\n          return new FunctionController(object, property, '');\n        }\n\n        if (common.isBoolean(initialValue)) {\n          return new BooleanController(object, property);\n        }\n\n      }\n\n    })(dat.controllers.OptionController,\ndat.controllers.NumberControllerBox,\ndat.controllers.NumberControllerSlider,\ndat.controllers.StringController = (function (Controller, dom, common) {\n\n  /**\n   * @class Provides a text input to alter the string property of an object.\n   *\n   * @extends dat.controllers.Controller\n   *\n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   *\n   * @member dat.controllers\n   */\n  var StringController = function(object, property) {\n\n    StringController.superclass.call(this, object, property);\n\n    var _this = this;\n\n    this.__input = document.createElement('input');\n    this.__input.setAttribute('type', 'text');\n\n    dom.bind(this.__input, 'keyup', onChange);\n    dom.bind(this.__input, 'change', onChange);\n    dom.bind(this.__input, 'blur', onBlur);\n    dom.bind(this.__input, 'keydown', function(e) {\n      if (e.keyCode === 13) {\n        this.blur();\n      }\n    });\n    \n\n    function onChange() {\n      _this.setValue(_this.__input.value);\n    }\n\n    function onBlur() {\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n\n    this.updateDisplay();\n\n    this.domElement.appendChild(this.__input);\n\n  };\n\n  StringController.superclass = Controller;\n\n  common.extend(\n\n      StringController.prototype,\n      Controller.prototype,\n\n      {\n\n        updateDisplay: function() {\n          // Stops the caret from moving on account of:\n          // keyup -> setValue -> updateDisplay\n          if (!dom.isActive(this.__input)) {\n            this.__input.value = this.getValue();\n          }\n          return StringController.superclass.prototype.updateDisplay.call(this);\n        }\n\n      }\n\n  );\n\n  return StringController;\n\n})(dat.controllers.Controller,\ndat.dom.dom,\ndat.utils.common),\ndat.controllers.FunctionController,\ndat.controllers.BooleanController,\ndat.utils.common),\ndat.controllers.Controller,\ndat.controllers.BooleanController,\ndat.controllers.FunctionController,\ndat.controllers.NumberControllerBox,\ndat.controllers.NumberControllerSlider,\ndat.controllers.OptionController,\ndat.controllers.ColorController = (function (Controller, dom, Color, interpret, common) {\n\n  var ColorController = function(object, property) {\n\n    ColorController.superclass.call(this, object, property);\n\n    this.__color = new Color(this.getValue());\n    this.__temp = new Color(0);\n\n    var _this = this;\n\n    this.domElement = document.createElement('div');\n\n    dom.makeSelectable(this.domElement, false);\n\n    this.__selector = document.createElement('div');\n    this.__selector.className = 'selector';\n\n    this.__saturation_field = document.createElement('div');\n    this.__saturation_field.className = 'saturation-field';\n\n    this.__field_knob = document.createElement('div');\n    this.__field_knob.className = 'field-knob';\n    this.__field_knob_border = '2px solid ';\n\n    this.__hue_knob = document.createElement('div');\n    this.__hue_knob.className = 'hue-knob';\n\n    this.__hue_field = document.createElement('div');\n    this.__hue_field.className = 'hue-field';\n\n    this.__input = document.createElement('input');\n    this.__input.type = 'text';\n    this.__input_textShadow = '0 1px 1px ';\n\n    dom.bind(this.__input, 'keydown', function(e) {\n      if (e.keyCode === 13) { // on enter\n        onBlur.call(this);\n      }\n    });\n\n    dom.bind(this.__input, 'blur', onBlur);\n\n    dom.bind(this.__selector, 'mousedown', function(e) {\n\n      dom\n        .addClass(this, 'drag')\n        .bind(window, 'mouseup', function(e) {\n          dom.removeClass(_this.__selector, 'drag');\n        });\n\n    });\n\n    var value_field = document.createElement('div');\n\n    common.extend(this.__selector.style, {\n      width: '122px',\n      height: '102px',\n      padding: '3px',\n      backgroundColor: '#222',\n      boxShadow: '0px 1px 3px rgba(0,0,0,0.3)'\n    });\n\n    common.extend(this.__field_knob.style, {\n      position: 'absolute',\n      width: '12px',\n      height: '12px',\n      border: this.__field_knob_border + (this.__color.v < .5 ? '#fff' : '#000'),\n      boxShadow: '0px 1px 3px rgba(0,0,0,0.5)',\n      borderRadius: '12px',\n      zIndex: 1\n    });\n    \n    common.extend(this.__hue_knob.style, {\n      position: 'absolute',\n      width: '15px',\n      height: '2px',\n      borderRight: '4px solid #fff',\n      zIndex: 1\n    });\n\n    common.extend(this.__saturation_field.style, {\n      width: '100px',\n      height: '100px',\n      border: '1px solid #555',\n      marginRight: '3px',\n      display: 'inline-block',\n      cursor: 'pointer'\n    });\n\n    common.extend(value_field.style, {\n      width: '100%',\n      height: '100%',\n      background: 'none'\n    });\n    \n    linearGradient(value_field, 'top', 'rgba(0,0,0,0)', '#000');\n\n    common.extend(this.__hue_field.style, {\n      width: '15px',\n      height: '100px',\n      display: 'inline-block',\n      border: '1px solid #555',\n      cursor: 'ns-resize'\n    });\n\n    hueGradient(this.__hue_field);\n\n    common.extend(this.__input.style, {\n      outline: 'none',\n//      width: '120px',\n      textAlign: 'center',\n//      padding: '4px',\n//      marginBottom: '6px',\n      color: '#fff',\n      border: 0,\n      fontWeight: 'bold',\n      textShadow: this.__input_textShadow + 'rgba(0,0,0,0.7)'\n    });\n\n    dom.bind(this.__saturation_field, 'mousedown', fieldDown);\n    dom.bind(this.__field_knob, 'mousedown', fieldDown);\n\n    dom.bind(this.__hue_field, 'mousedown', function(e) {\n      setH(e);\n      dom.bind(window, 'mousemove', setH);\n      dom.bind(window, 'mouseup', unbindH);\n    });\n\n    function fieldDown(e) {\n      setSV(e);\n      // document.body.style.cursor = 'none';\n      dom.bind(window, 'mousemove', setSV);\n      dom.bind(window, 'mouseup', unbindSV);\n    }\n\n    function unbindSV() {\n      dom.unbind(window, 'mousemove', setSV);\n      dom.unbind(window, 'mouseup', unbindSV);\n      // document.body.style.cursor = 'default';\n    }\n\n    function onBlur() {\n      var i = interpret(this.value);\n      if (i !== false) {\n        _this.__color.__state = i;\n        _this.setValue(_this.__color.toOriginal());\n      } else {\n        this.value = _this.__color.toString();\n      }\n    }\n\n    function unbindH() {\n      dom.unbind(window, 'mousemove', setH);\n      dom.unbind(window, 'mouseup', unbindH);\n    }\n\n    this.__saturation_field.appendChild(value_field);\n    this.__selector.appendChild(this.__field_knob);\n    this.__selector.appendChild(this.__saturation_field);\n    this.__selector.appendChild(this.__hue_field);\n    this.__hue_field.appendChild(this.__hue_knob);\n\n    this.domElement.appendChild(this.__input);\n    this.domElement.appendChild(this.__selector);\n\n    this.updateDisplay();\n\n    function setSV(e) {\n\n      e.preventDefault();\n\n      var w = dom.getWidth(_this.__saturation_field);\n      var o = dom.getOffset(_this.__saturation_field);\n      var s = (e.clientX - o.left + document.body.scrollLeft) / w;\n      var v = 1 - (e.clientY - o.top + document.body.scrollTop) / w;\n\n      if (v > 1) v = 1;\n      else if (v < 0) v = 0;\n\n      if (s > 1) s = 1;\n      else if (s < 0) s = 0;\n\n      _this.__color.v = v;\n      _this.__color.s = s;\n\n      _this.setValue(_this.__color.toOriginal());\n\n\n      return false;\n\n    }\n\n    function setH(e) {\n\n      e.preventDefault();\n\n      var s = dom.getHeight(_this.__hue_field);\n      var o = dom.getOffset(_this.__hue_field);\n      var h = 1 - (e.clientY - o.top + document.body.scrollTop) / s;\n\n      if (h > 1) h = 1;\n      else if (h < 0) h = 0;\n\n      _this.__color.h = h * 360;\n\n      _this.setValue(_this.__color.toOriginal());\n\n      return false;\n\n    }\n\n  };\n\n  ColorController.superclass = Controller;\n\n  common.extend(\n\n      ColorController.prototype,\n      Controller.prototype,\n\n      {\n\n        updateDisplay: function() {\n\n          var i = interpret(this.getValue());\n\n          if (i !== false) {\n\n            var mismatch = false;\n\n            // Check for mismatch on the interpreted value.\n\n            common.each(Color.COMPONENTS, function(component) {\n              if (!common.isUndefined(i[component]) &&\n                  !common.isUndefined(this.__color.__state[component]) &&\n                  i[component] !== this.__color.__state[component]) {\n                mismatch = true;\n                return {}; // break\n              }\n            }, this);\n\n            // If nothing diverges, we keep our previous values\n            // for statefulness, otherwise we recalculate fresh\n            if (mismatch) {\n              common.extend(this.__color.__state, i);\n            }\n\n          }\n\n          common.extend(this.__temp.__state, this.__color.__state);\n\n          this.__temp.a = 1;\n\n          var flip = (this.__color.v < .5 || this.__color.s > .5) ? 255 : 0;\n          var _flip = 255 - flip;\n\n          common.extend(this.__field_knob.style, {\n            marginLeft: 100 * this.__color.s - 7 + 'px',\n            marginTop: 100 * (1 - this.__color.v) - 7 + 'px',\n            backgroundColor: this.__temp.toString(),\n            border: this.__field_knob_border + 'rgb(' + flip + ',' + flip + ',' + flip +')'\n          });\n\n          this.__hue_knob.style.marginTop = (1 - this.__color.h / 360) * 100 + 'px'\n\n          this.__temp.s = 1;\n          this.__temp.v = 1;\n\n          linearGradient(this.__saturation_field, 'left', '#fff', this.__temp.toString());\n\n          common.extend(this.__input.style, {\n            backgroundColor: this.__input.value = this.__color.toString(),\n            color: 'rgb(' + flip + ',' + flip + ',' + flip +')',\n            textShadow: this.__input_textShadow + 'rgba(' + _flip + ',' + _flip + ',' + _flip +',.7)'\n          });\n\n        }\n\n      }\n\n  );\n  \n  var vendors = ['-moz-','-o-','-webkit-','-ms-',''];\n  \n  function linearGradient(elem, x, a, b) {\n    elem.style.background = '';\n    common.each(vendors, function(vendor) {\n      elem.style.cssText += 'background: ' + vendor + 'linear-gradient('+x+', '+a+' 0%, ' + b + ' 100%); ';\n    });\n  }\n  \n  function hueGradient(elem) {\n    elem.style.background = '';\n    elem.style.cssText += 'background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);'\n    elem.style.cssText += 'background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);'\n    elem.style.cssText += 'background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);'\n    elem.style.cssText += 'background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);'\n    elem.style.cssText += 'background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);'\n  }\n\n\n  return ColorController;\n\n})(dat.controllers.Controller,\ndat.dom.dom,\ndat.color.Color = (function (interpret, math, toString, common) {\n\n  var Color = function() {\n\n    this.__state = interpret.apply(this, arguments);\n\n    if (this.__state === false) {\n      throw 'Failed to interpret color arguments';\n    }\n\n    this.__state.a = this.__state.a || 1;\n\n\n  };\n\n  Color.COMPONENTS = ['r','g','b','h','s','v','hex','a'];\n\n  common.extend(Color.prototype, {\n\n    toString: function() {\n      return toString(this);\n    },\n\n    toOriginal: function() {\n      return this.__state.conversion.write(this);\n    }\n\n  });\n\n  defineRGBComponent(Color.prototype, 'r', 2);\n  defineRGBComponent(Color.prototype, 'g', 1);\n  defineRGBComponent(Color.prototype, 'b', 0);\n\n  defineHSVComponent(Color.prototype, 'h');\n  defineHSVComponent(Color.prototype, 's');\n  defineHSVComponent(Color.prototype, 'v');\n\n  Object.defineProperty(Color.prototype, 'a', {\n\n    get: function() {\n      return this.__state.a;\n    },\n\n    set: function(v) {\n      this.__state.a = v;\n    }\n\n  });\n\n  Object.defineProperty(Color.prototype, 'hex', {\n\n    get: function() {\n\n      if (!this.__state.space !== 'HEX') {\n        this.__state.hex = math.rgb_to_hex(this.r, this.g, this.b);\n      }\n\n      return this.__state.hex;\n\n    },\n\n    set: function(v) {\n\n      this.__state.space = 'HEX';\n      this.__state.hex = v;\n\n    }\n\n  });\n\n  function defineRGBComponent(target, component, componentHexIndex) {\n\n    Object.defineProperty(target, component, {\n\n      get: function() {\n\n        if (this.__state.space === 'RGB') {\n          return this.__state[component];\n        }\n\n        recalculateRGB(this, component, componentHexIndex);\n\n        return this.__state[component];\n\n      },\n\n      set: function(v) {\n\n        if (this.__state.space !== 'RGB') {\n          recalculateRGB(this, component, componentHexIndex);\n          this.__state.space = 'RGB';\n        }\n\n        this.__state[component] = v;\n\n      }\n\n    });\n\n  }\n\n  function defineHSVComponent(target, component) {\n\n    Object.defineProperty(target, component, {\n\n      get: function() {\n\n        if (this.__state.space === 'HSV')\n          return this.__state[component];\n\n        recalculateHSV(this);\n\n        return this.__state[component];\n\n      },\n\n      set: function(v) {\n\n        if (this.__state.space !== 'HSV') {\n          recalculateHSV(this);\n          this.__state.space = 'HSV';\n        }\n\n        this.__state[component] = v;\n\n      }\n\n    });\n\n  }\n\n  function recalculateRGB(color, component, componentHexIndex) {\n\n    if (color.__state.space === 'HEX') {\n\n      color.__state[component] = math.component_from_hex(color.__state.hex, componentHexIndex);\n\n    } else if (color.__state.space === 'HSV') {\n\n      common.extend(color.__state, math.hsv_to_rgb(color.__state.h, color.__state.s, color.__state.v));\n\n    } else {\n\n      throw 'Corrupted color state';\n\n    }\n\n  }\n\n  function recalculateHSV(color) {\n\n    var result = math.rgb_to_hsv(color.r, color.g, color.b);\n\n    common.extend(color.__state,\n        {\n          s: result.s,\n          v: result.v\n        }\n    );\n\n    if (!common.isNaN(result.h)) {\n      color.__state.h = result.h;\n    } else if (common.isUndefined(color.__state.h)) {\n      color.__state.h = 0;\n    }\n\n  }\n\n  return Color;\n\n})(dat.color.interpret,\ndat.color.math = (function () {\n\n  var tmpComponent;\n\n  return {\n\n    hsv_to_rgb: function(h, s, v) {\n\n      var hi = Math.floor(h / 60) % 6;\n\n      var f = h / 60 - Math.floor(h / 60);\n      var p = v * (1.0 - s);\n      var q = v * (1.0 - (f * s));\n      var t = v * (1.0 - ((1.0 - f) * s));\n      var c = [\n        [v, t, p],\n        [q, v, p],\n        [p, v, t],\n        [p, q, v],\n        [t, p, v],\n        [v, p, q]\n      ][hi];\n\n      return {\n        r: c[0] * 255,\n        g: c[1] * 255,\n        b: c[2] * 255\n      };\n\n    },\n\n    rgb_to_hsv: function(r, g, b) {\n\n      var min = Math.min(r, g, b),\n          max = Math.max(r, g, b),\n          delta = max - min,\n          h, s;\n\n      if (max != 0) {\n        s = delta / max;\n      } else {\n        return {\n          h: NaN,\n          s: 0,\n          v: 0\n        };\n      }\n\n      if (r == max) {\n        h = (g - b) / delta;\n      } else if (g == max) {\n        h = 2 + (b - r) / delta;\n      } else {\n        h = 4 + (r - g) / delta;\n      }\n      h /= 6;\n      if (h < 0) {\n        h += 1;\n      }\n\n      return {\n        h: h * 360,\n        s: s,\n        v: max / 255\n      };\n    },\n\n    rgb_to_hex: function(r, g, b) {\n      var hex = this.hex_with_component(0, 2, r);\n      hex = this.hex_with_component(hex, 1, g);\n      hex = this.hex_with_component(hex, 0, b);\n      return hex;\n    },\n\n    component_from_hex: function(hex, componentIndex) {\n      return (hex >> (componentIndex * 8)) & 0xFF;\n    },\n\n    hex_with_component: function(hex, componentIndex, value) {\n      return value << (tmpComponent = componentIndex * 8) | (hex & ~ (0xFF << tmpComponent));\n    }\n\n  }\n\n})(),\ndat.color.toString,\ndat.utils.common),\ndat.color.interpret,\ndat.utils.common),\ndat.utils.requestAnimationFrame = (function () {\n\n  /**\n   * requirejs version of Paul Irish's RequestAnimationFrame\n   * http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n   */\n\n  return window.webkitRequestAnimationFrame ||\n      window.mozRequestAnimationFrame ||\n      window.oRequestAnimationFrame ||\n      window.msRequestAnimationFrame ||\n      function(callback, element) {\n\n        window.setTimeout(callback, 1000 / 60);\n\n      };\n})(),\ndat.dom.CenteredDiv = (function (dom, common) {\n\n\n  var CenteredDiv = function() {\n\n    this.backgroundElement = document.createElement('div');\n    common.extend(this.backgroundElement.style, {\n      backgroundColor: 'rgba(0,0,0,0.8)',\n      top: 0,\n      left: 0,\n      display: 'none',\n      zIndex: '1000',\n      opacity: 0,\n      WebkitTransition: 'opacity 0.2s linear'\n    });\n\n    dom.makeFullscreen(this.backgroundElement);\n    this.backgroundElement.style.position = 'fixed';\n\n    this.domElement = document.createElement('div');\n    common.extend(this.domElement.style, {\n      position: 'fixed',\n      display: 'none',\n      zIndex: '1001',\n      opacity: 0,\n      WebkitTransition: '-webkit-transform 0.2s ease-out, opacity 0.2s linear'\n    });\n\n\n    document.body.appendChild(this.backgroundElement);\n    document.body.appendChild(this.domElement);\n\n    var _this = this;\n    dom.bind(this.backgroundElement, 'click', function() {\n      _this.hide();\n    });\n\n\n  };\n\n  CenteredDiv.prototype.show = function() {\n\n    var _this = this;\n    \n\n\n    this.backgroundElement.style.display = 'block';\n\n    this.domElement.style.display = 'block';\n    this.domElement.style.opacity = 0;\n//    this.domElement.style.top = '52%';\n    this.domElement.style.webkitTransform = 'scale(1.1)';\n\n    this.layout();\n\n    common.defer(function() {\n      _this.backgroundElement.style.opacity = 1;\n      _this.domElement.style.opacity = 1;\n      _this.domElement.style.webkitTransform = 'scale(1)';\n    });\n\n  };\n\n  CenteredDiv.prototype.hide = function() {\n\n    var _this = this;\n\n    var hide = function() {\n\n      _this.domElement.style.display = 'none';\n      _this.backgroundElement.style.display = 'none';\n\n      dom.unbind(_this.domElement, 'webkitTransitionEnd', hide);\n      dom.unbind(_this.domElement, 'transitionend', hide);\n      dom.unbind(_this.domElement, 'oTransitionEnd', hide);\n\n    };\n\n    dom.bind(this.domElement, 'webkitTransitionEnd', hide);\n    dom.bind(this.domElement, 'transitionend', hide);\n    dom.bind(this.domElement, 'oTransitionEnd', hide);\n\n    this.backgroundElement.style.opacity = 0;\n//    this.domElement.style.top = '48%';\n    this.domElement.style.opacity = 0;\n    this.domElement.style.webkitTransform = 'scale(1.1)';\n\n  };\n\n  CenteredDiv.prototype.layout = function() {\n    this.domElement.style.left = window.innerWidth/2 - dom.getWidth(this.domElement) / 2 + 'px';\n    this.domElement.style.top = window.innerHeight/2 - dom.getHeight(this.domElement) / 2 + 'px';\n  };\n  \n  function lockScroll(e) {\n    console.log(e);\n  }\n\n  return CenteredDiv;\n\n})(dat.dom.dom,\ndat.utils.common),\ndat.dom.dom,\ndat.utils.common);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/dat-gui/vendor/dat.gui.js\n// module id = 122\n// module chunks = 7","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\n/** @namespace */\nvar dat = module.exports = dat || {};\n\n/** @namespace */\ndat.color = dat.color || {};\n\n/** @namespace */\ndat.utils = dat.utils || {};\n\ndat.utils.common = (function () {\n  \n  var ARR_EACH = Array.prototype.forEach;\n  var ARR_SLICE = Array.prototype.slice;\n\n  /**\n   * Band-aid methods for things that should be a lot easier in JavaScript.\n   * Implementation and structure inspired by underscore.js\n   * http://documentcloud.github.com/underscore/\n   */\n\n  return { \n    \n    BREAK: {},\n  \n    extend: function(target) {\n      \n      this.each(ARR_SLICE.call(arguments, 1), function(obj) {\n        \n        for (var key in obj)\n          if (!this.isUndefined(obj[key])) \n            target[key] = obj[key];\n        \n      }, this);\n      \n      return target;\n      \n    },\n    \n    defaults: function(target) {\n      \n      this.each(ARR_SLICE.call(arguments, 1), function(obj) {\n        \n        for (var key in obj)\n          if (this.isUndefined(target[key])) \n            target[key] = obj[key];\n        \n      }, this);\n      \n      return target;\n    \n    },\n    \n    compose: function() {\n      var toCall = ARR_SLICE.call(arguments);\n            return function() {\n              var args = ARR_SLICE.call(arguments);\n              for (var i = toCall.length -1; i >= 0; i--) {\n                args = [toCall[i].apply(this, args)];\n              }\n              return args[0];\n            }\n    },\n    \n    each: function(obj, itr, scope) {\n\n      \n      if (ARR_EACH && obj.forEach === ARR_EACH) { \n        \n        obj.forEach(itr, scope);\n        \n      } else if (obj.length === obj.length + 0) { // Is number but not NaN\n        \n        for (var key = 0, l = obj.length; key < l; key++)\n          if (key in obj && itr.call(scope, obj[key], key) === this.BREAK) \n            return;\n            \n      } else {\n\n        for (var key in obj) \n          if (itr.call(scope, obj[key], key) === this.BREAK)\n            return;\n            \n      }\n            \n    },\n    \n    defer: function(fnc) {\n      setTimeout(fnc, 0);\n    },\n    \n    toArray: function(obj) {\n      if (obj.toArray) return obj.toArray();\n      return ARR_SLICE.call(obj);\n    },\n\n    isUndefined: function(obj) {\n      return obj === undefined;\n    },\n    \n    isNull: function(obj) {\n      return obj === null;\n    },\n    \n    isNaN: function(obj) {\n      return obj !== obj;\n    },\n    \n    isArray: Array.isArray || function(obj) {\n      return obj.constructor === Array;\n    },\n    \n    isObject: function(obj) {\n      return obj === Object(obj);\n    },\n    \n    isNumber: function(obj) {\n      return obj === obj+0;\n    },\n    \n    isString: function(obj) {\n      return obj === obj+'';\n    },\n    \n    isBoolean: function(obj) {\n      return obj === false || obj === true;\n    },\n    \n    isFunction: function(obj) {\n      return Object.prototype.toString.call(obj) === '[object Function]';\n    }\n  \n  };\n    \n})();\n\n\ndat.color.toString = (function (common) {\n\n  return function(color) {\n\n    if (color.a == 1 || common.isUndefined(color.a)) {\n\n      var s = color.hex.toString(16);\n      while (s.length < 6) {\n        s = '0' + s;\n      }\n\n      return '#' + s;\n\n    } else {\n\n      return 'rgba(' + Math.round(color.r) + ',' + Math.round(color.g) + ',' + Math.round(color.b) + ',' + color.a + ')';\n\n    }\n\n  }\n\n})(dat.utils.common);\n\n\ndat.Color = dat.color.Color = (function (interpret, math, toString, common) {\n\n  var Color = function() {\n\n    this.__state = interpret.apply(this, arguments);\n\n    if (this.__state === false) {\n      throw 'Failed to interpret color arguments';\n    }\n\n    this.__state.a = this.__state.a || 1;\n\n\n  };\n\n  Color.COMPONENTS = ['r','g','b','h','s','v','hex','a'];\n\n  common.extend(Color.prototype, {\n\n    toString: function() {\n      return toString(this);\n    },\n\n    toOriginal: function() {\n      return this.__state.conversion.write(this);\n    }\n\n  });\n\n  defineRGBComponent(Color.prototype, 'r', 2);\n  defineRGBComponent(Color.prototype, 'g', 1);\n  defineRGBComponent(Color.prototype, 'b', 0);\n\n  defineHSVComponent(Color.prototype, 'h');\n  defineHSVComponent(Color.prototype, 's');\n  defineHSVComponent(Color.prototype, 'v');\n\n  Object.defineProperty(Color.prototype, 'a', {\n\n    get: function() {\n      return this.__state.a;\n    },\n\n    set: function(v) {\n      this.__state.a = v;\n    }\n\n  });\n\n  Object.defineProperty(Color.prototype, 'hex', {\n\n    get: function() {\n\n      if (!this.__state.space !== 'HEX') {\n        this.__state.hex = math.rgb_to_hex(this.r, this.g, this.b);\n      }\n\n      return this.__state.hex;\n\n    },\n\n    set: function(v) {\n\n      this.__state.space = 'HEX';\n      this.__state.hex = v;\n\n    }\n\n  });\n\n  function defineRGBComponent(target, component, componentHexIndex) {\n\n    Object.defineProperty(target, component, {\n\n      get: function() {\n\n        if (this.__state.space === 'RGB') {\n          return this.__state[component];\n        }\n\n        recalculateRGB(this, component, componentHexIndex);\n\n        return this.__state[component];\n\n      },\n\n      set: function(v) {\n\n        if (this.__state.space !== 'RGB') {\n          recalculateRGB(this, component, componentHexIndex);\n          this.__state.space = 'RGB';\n        }\n\n        this.__state[component] = v;\n\n      }\n\n    });\n\n  }\n\n  function defineHSVComponent(target, component) {\n\n    Object.defineProperty(target, component, {\n\n      get: function() {\n\n        if (this.__state.space === 'HSV')\n          return this.__state[component];\n\n        recalculateHSV(this);\n\n        return this.__state[component];\n\n      },\n\n      set: function(v) {\n\n        if (this.__state.space !== 'HSV') {\n          recalculateHSV(this);\n          this.__state.space = 'HSV';\n        }\n\n        this.__state[component] = v;\n\n      }\n\n    });\n\n  }\n\n  function recalculateRGB(color, component, componentHexIndex) {\n\n    if (color.__state.space === 'HEX') {\n\n      color.__state[component] = math.component_from_hex(color.__state.hex, componentHexIndex);\n\n    } else if (color.__state.space === 'HSV') {\n\n      common.extend(color.__state, math.hsv_to_rgb(color.__state.h, color.__state.s, color.__state.v));\n\n    } else {\n\n      throw 'Corrupted color state';\n\n    }\n\n  }\n\n  function recalculateHSV(color) {\n\n    var result = math.rgb_to_hsv(color.r, color.g, color.b);\n\n    common.extend(color.__state,\n        {\n          s: result.s,\n          v: result.v\n        }\n    );\n\n    if (!common.isNaN(result.h)) {\n      color.__state.h = result.h;\n    } else if (common.isUndefined(color.__state.h)) {\n      color.__state.h = 0;\n    }\n\n  }\n\n  return Color;\n\n})(dat.color.interpret = (function (toString, common) {\n\n  var result, toReturn;\n\n  var interpret = function() {\n\n    toReturn = false;\n\n    var original = arguments.length > 1 ? common.toArray(arguments) : arguments[0];\n\n    common.each(INTERPRETATIONS, function(family) {\n\n      if (family.litmus(original)) {\n\n        common.each(family.conversions, function(conversion, conversionName) {\n\n          result = conversion.read(original);\n\n          if (toReturn === false && result !== false) {\n            toReturn = result;\n            result.conversionName = conversionName;\n            result.conversion = conversion;\n            return common.BREAK;\n\n          }\n\n        });\n\n        return common.BREAK;\n\n      }\n\n    });\n\n    return toReturn;\n\n  };\n\n  var INTERPRETATIONS = [\n\n    // Strings\n    {\n\n      litmus: common.isString,\n\n      conversions: {\n\n        THREE_CHAR_HEX: {\n\n          read: function(original) {\n\n            var test = original.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);\n            if (test === null) return false;\n\n            return {\n              space: 'HEX',\n              hex: parseInt(\n                  '0x' +\n                      test[1].toString() + test[1].toString() +\n                      test[2].toString() + test[2].toString() +\n                      test[3].toString() + test[3].toString())\n            };\n\n          },\n\n          write: toString\n\n        },\n\n        SIX_CHAR_HEX: {\n\n          read: function(original) {\n\n            var test = original.match(/^#([A-F0-9]{6})$/i);\n            if (test === null) return false;\n\n            return {\n              space: 'HEX',\n              hex: parseInt('0x' + test[1].toString())\n            };\n\n          },\n\n          write: toString\n\n        },\n\n        CSS_RGB: {\n\n          read: function(original) {\n\n            var test = original.match(/^rgb\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/);\n            if (test === null) return false;\n\n            return {\n              space: 'RGB',\n              r: parseFloat(test[1]),\n              g: parseFloat(test[2]),\n              b: parseFloat(test[3])\n            };\n\n          },\n\n          write: toString\n\n        },\n\n        CSS_RGBA: {\n\n          read: function(original) {\n\n            var test = original.match(/^rgba\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\,\\s*(.+)\\s*\\)/);\n            if (test === null) return false;\n\n            return {\n              space: 'RGB',\n              r: parseFloat(test[1]),\n              g: parseFloat(test[2]),\n              b: parseFloat(test[3]),\n              a: parseFloat(test[4])\n            };\n\n          },\n\n          write: toString\n\n        }\n\n      }\n\n    },\n\n    // Numbers\n    {\n\n      litmus: common.isNumber,\n\n      conversions: {\n\n        HEX: {\n          read: function(original) {\n            return {\n              space: 'HEX',\n              hex: original,\n              conversionName: 'HEX'\n            }\n          },\n\n          write: function(color) {\n            return color.hex;\n          }\n        }\n\n      }\n\n    },\n\n    // Arrays\n    {\n\n      litmus: common.isArray,\n\n      conversions: {\n\n        RGB_ARRAY: {\n          read: function(original) {\n            if (original.length != 3) return false;\n            return {\n              space: 'RGB',\n              r: original[0],\n              g: original[1],\n              b: original[2]\n            };\n          },\n\n          write: function(color) {\n            return [color.r, color.g, color.b];\n          }\n\n        },\n\n        RGBA_ARRAY: {\n          read: function(original) {\n            if (original.length != 4) return false;\n            return {\n              space: 'RGB',\n              r: original[0],\n              g: original[1],\n              b: original[2],\n              a: original[3]\n            };\n          },\n\n          write: function(color) {\n            return [color.r, color.g, color.b, color.a];\n          }\n\n        }\n\n      }\n\n    },\n\n    // Objects\n    {\n\n      litmus: common.isObject,\n\n      conversions: {\n\n        RGBA_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.r) &&\n                common.isNumber(original.g) &&\n                common.isNumber(original.b) &&\n                common.isNumber(original.a)) {\n              return {\n                space: 'RGB',\n                r: original.r,\n                g: original.g,\n                b: original.b,\n                a: original.a\n              }\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              r: color.r,\n              g: color.g,\n              b: color.b,\n              a: color.a\n            }\n          }\n        },\n\n        RGB_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.r) &&\n                common.isNumber(original.g) &&\n                common.isNumber(original.b)) {\n              return {\n                space: 'RGB',\n                r: original.r,\n                g: original.g,\n                b: original.b\n              }\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              r: color.r,\n              g: color.g,\n              b: color.b\n            }\n          }\n        },\n\n        HSVA_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.h) &&\n                common.isNumber(original.s) &&\n                common.isNumber(original.v) &&\n                common.isNumber(original.a)) {\n              return {\n                space: 'HSV',\n                h: original.h,\n                s: original.s,\n                v: original.v,\n                a: original.a\n              }\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              h: color.h,\n              s: color.s,\n              v: color.v,\n              a: color.a\n            }\n          }\n        },\n\n        HSV_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.h) &&\n                common.isNumber(original.s) &&\n                common.isNumber(original.v)) {\n              return {\n                space: 'HSV',\n                h: original.h,\n                s: original.s,\n                v: original.v\n              }\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              h: color.h,\n              s: color.s,\n              v: color.v\n            }\n          }\n\n        }\n\n      }\n\n    }\n\n\n  ];\n\n  return interpret;\n\n\n})(dat.color.toString,\ndat.utils.common),\ndat.color.math = (function () {\n\n  var tmpComponent;\n\n  return {\n\n    hsv_to_rgb: function(h, s, v) {\n\n      var hi = Math.floor(h / 60) % 6;\n\n      var f = h / 60 - Math.floor(h / 60);\n      var p = v * (1.0 - s);\n      var q = v * (1.0 - (f * s));\n      var t = v * (1.0 - ((1.0 - f) * s));\n      var c = [\n        [v, t, p],\n        [q, v, p],\n        [p, v, t],\n        [p, q, v],\n        [t, p, v],\n        [v, p, q]\n      ][hi];\n\n      return {\n        r: c[0] * 255,\n        g: c[1] * 255,\n        b: c[2] * 255\n      };\n\n    },\n\n    rgb_to_hsv: function(r, g, b) {\n\n      var min = Math.min(r, g, b),\n          max = Math.max(r, g, b),\n          delta = max - min,\n          h, s;\n\n      if (max != 0) {\n        s = delta / max;\n      } else {\n        return {\n          h: NaN,\n          s: 0,\n          v: 0\n        };\n      }\n\n      if (r == max) {\n        h = (g - b) / delta;\n      } else if (g == max) {\n        h = 2 + (b - r) / delta;\n      } else {\n        h = 4 + (r - g) / delta;\n      }\n      h /= 6;\n      if (h < 0) {\n        h += 1;\n      }\n\n      return {\n        h: h * 360,\n        s: s,\n        v: max / 255\n      };\n    },\n\n    rgb_to_hex: function(r, g, b) {\n      var hex = this.hex_with_component(0, 2, r);\n      hex = this.hex_with_component(hex, 1, g);\n      hex = this.hex_with_component(hex, 0, b);\n      return hex;\n    },\n\n    component_from_hex: function(hex, componentIndex) {\n      return (hex >> (componentIndex * 8)) & 0xFF;\n    },\n\n    hex_with_component: function(hex, componentIndex, value) {\n      return value << (tmpComponent = componentIndex * 8) | (hex & ~ (0xFF << tmpComponent));\n    }\n\n  }\n\n})(),\ndat.color.toString,\ndat.utils.common);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/dat-gui/vendor/dat.color.js\n// module id = 123\n// module chunks = 7","// stats.js - http://github.com/mrdoob/stats.js\nvar Stats=function(){var l=Date.now(),m=l,g=0,n=Infinity,o=0,h=0,p=Infinity,q=0,r=0,s=0,f=document.createElement(\"div\");f.id=\"stats\";f.addEventListener(\"mousedown\",function(b){b.preventDefault();t(++s%2)},!1);f.style.cssText=\"width:80px;opacity:0.9;cursor:pointer\";var a=document.createElement(\"div\");a.id=\"fps\";a.style.cssText=\"padding:0 0 3px 3px;text-align:left;background-color:#002\";f.appendChild(a);var i=document.createElement(\"div\");i.id=\"fpsText\";i.style.cssText=\"color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px\";\ni.innerHTML=\"FPS\";a.appendChild(i);var c=document.createElement(\"div\");c.id=\"fpsGraph\";c.style.cssText=\"position:relative;width:74px;height:30px;background-color:#0ff\";for(a.appendChild(c);74>c.children.length;){var j=document.createElement(\"span\");j.style.cssText=\"width:1px;height:30px;float:left;background-color:#113\";c.appendChild(j)}var d=document.createElement(\"div\");d.id=\"ms\";d.style.cssText=\"padding:0 0 3px 3px;text-align:left;background-color:#020;display:none\";f.appendChild(d);var k=document.createElement(\"div\");\nk.id=\"msText\";k.style.cssText=\"color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px\";k.innerHTML=\"MS\";d.appendChild(k);var e=document.createElement(\"div\");e.id=\"msGraph\";e.style.cssText=\"position:relative;width:74px;height:30px;background-color:#0f0\";for(d.appendChild(e);74>e.children.length;)j=document.createElement(\"span\"),j.style.cssText=\"width:1px;height:30px;float:left;background-color:#131\",e.appendChild(j);var t=function(b){s=b;switch(s){case 0:a.style.display=\n\"block\";d.style.display=\"none\";break;case 1:a.style.display=\"none\",d.style.display=\"block\"}};return{REVISION:12,domElement:f,setMode:t,begin:function(){l=Date.now()},end:function(){var b=Date.now();g=b-l;n=Math.min(n,g);o=Math.max(o,g);k.textContent=g+\" MS (\"+n+\"-\"+o+\")\";var a=Math.min(30,30-30*(g/200));e.appendChild(e.firstChild).style.height=a+\"px\";r++;b>m+1E3&&(h=Math.round(1E3*r/(b-m)),p=Math.min(p,h),q=Math.max(q,h),i.textContent=h+\" FPS (\"+p+\"-\"+q+\")\",a=Math.min(30,30-30*(h/100)),c.appendChild(c.firstChild).style.height=\na+\"px\",m=b,r=0);return b},update:function(){l=this.end()}}};\"object\"===typeof module&&(module.exports=Stats);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/stats-js/build/stats.min.js\n// module id = 124\n// module chunks = 7","require('../../modules/es6.object.keys');\nmodule.exports = require('../../modules/_core').Object.keys;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/object/keys.js\n// module id = 125\n// module chunks = 7","// 19.1.2.14 Object.keys(O)\nvar toObject = require('./_to-object');\nvar $keys = require('./_object-keys');\n\nrequire('./_object-sap')('keys', function () {\n  return function keys(it) {\n    return $keys(toObject(it));\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.object.keys.js\n// module id = 126\n// module chunks = 7","/**\n * @author mrdoob / http://mrdoob.com/\n * @author jetienne / http://jetienne.com/\n * @author paulirish / http://paulirish.com/\n */\nfunction MemoryStats(){\n\n\tvar msMin\t= 100;\n\tvar msMax\t= 0;\n\n\tvar container\t= document.createElement( 'div' );\n\tcontainer.id\t= 'stats';\n\tcontainer.style.cssText = 'width:80px;opacity:0.9;cursor:pointer';\n\n\tvar msDiv\t= document.createElement( 'div' );\n\tmsDiv.id\t= 'ms';\n\tmsDiv.style.cssText = 'padding:0 0 3px 3px;text-align:left;background-color:#020;';\n\tcontainer.appendChild( msDiv );\n\n\tvar msText\t= document.createElement( 'div' );\n\tmsText.id\t= 'msText';\n\tmsText.style.cssText = 'color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px';\n\tmsText.innerHTML= 'Memory';\n\tmsDiv.appendChild( msText );\n\n\tvar msGraph\t= document.createElement( 'div' );\n\tmsGraph.id\t= 'msGraph';\n\tmsGraph.style.cssText = 'position:relative;width:74px;height:30px;background-color:#0f0';\n\tmsDiv.appendChild( msGraph );\n\n\twhile ( msGraph.children.length < 74 ) {\n\n\t\tvar bar = document.createElement( 'span' );\n\t\tbar.style.cssText = 'width:1px;height:30px;float:left;background-color:#131';\n\t\tmsGraph.appendChild( bar );\n\n\t}\n\n\tvar updateGraph = function ( dom, height, color ) {\n\n\t\tvar child = dom.appendChild( dom.firstChild );\n\t\tchild.style.height = height + 'px';\n\t\tif( color ) child.style.backgroundColor = color;\n\n\t}\n\n\t// polyfill usedJSHeapSize\n\tif (window.performance && !performance.memory){\n\t\tperformance.memory = { usedJSHeapSize : 0 };\n\t}\n\n\t// support of the API?\n\tif( performance.memory.totalJSHeapSize === 0 ){\n\t\tconsole.warn('totalJSHeapSize === 0... performance.memory is only available in Chrome .')\n\t}\n\n\t// TODO, add a sanity check to see if values are bucketed.\n\t// If so, reminde user to adopt the --enable-precise-memory-info flag.\n\t// open -a \"/Applications/Google Chrome.app\" --args --enable-precise-memory-info\n\n\tvar lastTime\t= Date.now();\n\tvar lastUsedHeap= performance.memory.usedJSHeapSize;\n\treturn {\n\t\tdomElement: container,\n\n\t\tupdate: function () {\n\n\t\t\t// refresh only 30time per second\n\t\t\tif( Date.now() - lastTime < 1000/30 )\treturn;\n\t\t\tlastTime\t= Date.now()\n\n\t\t\tvar delta\t= performance.memory.usedJSHeapSize - lastUsedHeap;\n\t\t\tlastUsedHeap\t= performance.memory.usedJSHeapSize;\n\t\t\tvar color\t= delta < 0 ? '#830' : '#131';\n\n\t\t\tvar ms\t= performance.memory.usedJSHeapSize;\n\t\t\tmsMin\t= Math.min( msMin, ms );\n\t\t\tmsMax\t= Math.max( msMax, ms );\n\t\t\tmsText.textContent = \"Mem: \" + bytesToSize(ms, 2);\n\n\t\t\tvar normValue\t= ms / (30*1024*1024);\n\t\t\tvar height\t= (1-(normValue% 1)) * 30;\n\t\t\tupdateGraph( msGraph, height, color);\n\n\t\t\tfunction bytesToSize( bytes, nFractDigit ){\n\t\t\t\tvar sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\n\t\t\t\tif (bytes == 0) return 'n/a';\n\t\t\t\tnFractDigit\t= nFractDigit !== undefined ? nFractDigit : 0;\n\t\t\t\tvar precision\t= Math.pow(10, nFractDigit);\n\t\t\t\tvar i \t\t= Math.floor(Math.log(bytes) / Math.log(1024));\n\t\t\t\treturn Math.round(bytes*precision / Math.pow(1024, i))/precision + ' ' + sizes[i];\n\t\t\t};\n\t\t}\n\n\t}\n\n};\n\nmodule.exports = MemoryStats;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/memory-stats/memory-stats.js\n// module id = 127\n// module chunks = 7","/* global PIXI */\nimport * as Core from '../lib/core';\nimport { lerp } from '../lib/utils';\n\n// import filters from 'pixi-filters';\n// import extraFilters from 'pixi-extra-filters';\n\nconst PI2 = Math.PI * 2;\n\nlet idx, p, entityId, position, sprite;\n\n// See also: http://phrogz.net/JS/wheeldelta.html\nconst wheelDistance = function(evt){\n  if (!evt) evt = event;\n  const w=evt.wheelDelta, d=evt.detail;\n  if (d){\n    if (w) return w/d/40*d>0?1:-1; // Opera\n    else return -d/3;              // Firefox;         TODO: do not /3 for OS X\n  } else return w/120;             // IE/Safari/Chrome TODO: /3 for Chrome OS X\n};\n\nexport class ViewportPixi extends Core.System {\n\n  defaultOptions() {\n    return {\n      lineWidth: 5,\n      zoom: 1.0,\n      zoomMin: 0.1,\n      zoomMax: 10.0,\n      zoomWheelFactor: 0.05,\n      gridEnabled: true,\n      gridSize: 250,\n      gridColor: 0x222222,\n      followEnabled: true,\n      followName: null,\n      followEntityId: null\n    };\n  }\n\n  initialize() {\n    this.container = document.querySelector(this.options.container);\n    this.renderer = PIXI.autoDetectRenderer(\n      this.container.offsetWidth,\n      this.container.offsetHeight,\n      { antialias: true }\n    );\n    this.renderer.autoResize = true;\n    this.canvas = this.renderer.view;\n    this.container.appendChild(this.canvas);\n    this.stage = new PIXI.Container();\n\n    this.stage.filters = [\n      // new PIXI.filters.VoidFilter(),\n      // new PIXI.filters.BlurFilter(1, 1, 5)\n    ];\n\n    this.healthBarGraphics = new PIXI.Graphics();\n    this.stage.addChild(this.healthBarGraphics);\n\n    this.backdrop = new PIXI.Graphics();\n    this.stage.addChild(this.backdrop);\n\n    this.graphics = {};\n\n    const events = {\n      'resize': (ev) => { this.updateMetrics(ev); },\n      'orientationchange': (ev) => { this.updateMetrics(ev); },\n      'mousedown': (ev) => { this.onMouseDown(ev); },\n      'mousemove': (ev) => { this.onMouseMove(ev); },\n      'mouseup': (ev) => { this.onMouseUp(ev); }\n    };\n\n    for (const name in events) {\n      this.canvas.addEventListener(name, events[name], false);\n    }\n\n    // See also: http://phrogz.net/JS/wheeldelta.html\n    const boundOnMouseWheel = (ev) => this.onMouseWheel(ev);\n    if (window.addEventListener){\n      window.addEventListener('mousewheel', boundOnMouseWheel, false); // Chrome/Safari/Opera\n      window.addEventListener('DOMMouseScroll', boundOnMouseWheel, false); // Firefox\n    } else if (window.attachEvent){\n      window.attachEvent('onmousewheel', boundOnMouseWheel); // IE\n    }\n\n    this.followEnabled = this.options.followEnabled;\n    this.zoom = this.options.zoom;\n    this.followEntityId = this.options.followEntityId;\n    this.gridEnabled = this.options.gridEnabled;\n    this.lineWidth = this.options.lineWidth;\n\n    this.cursorRawX = 0;\n    this.cursorRawY = 0;\n\n    this.cursorChanged = false;\n    this.cursorPosition = { x: 0, y: 0 };\n\n    this.cameraX = 0;\n    this.cameraY = 0;\n\n    this.debugDummySprite = { size: 100 };\n\n    this.updateMetrics();\n  }\n\n  onMouseWheel(ev) {\n    this.zoom += wheelDistance(ev) * this.options.zoomWheelFactor;\n    if (this.zoom < this.options.zoomMin) {\n      this.zoom = this.options.zoomMin;\n    }\n    if (this.zoom > this.options.zoomMax) {\n      this.zoom = this.options.zoomMax;\n    }\n  }\n\n  // TODO: Use a symbol for 'mouse{Down,Move,Up}' message?\n\n  onMouseDown(ev) {\n    this.setCursor(ev.clientX, ev.clientY);\n    this.world.publish('mouseDown', this.cursorPosition);\n  }\n\n  onMouseMove(ev) {\n    this.setCursor(ev.clientX, ev.clientY);\n    this.world.publish('mouseMove', this.cursorPosition);\n  }\n\n  onMouseUp(ev) {\n    this.setCursor(ev.clientX, ev.clientY);\n    this.world.publish('mouseUp', this.cursorPosition);\n  }\n\n  setCursor(x, y) {\n    const width = this.container.offsetWidth;\n    const height = this.container.offsetHeight;\n\n    this.cursorRawX = x;\n    this.cursorRawY = y;\n\n    const newX = ((x - (width / 2)) / this.zoom) + this.cameraX;\n    const newY = ((y - (height / 2)) / this.zoom) + this.cameraY;\n\n    this.cursorChanged = false;\n    if (newX !== this.cursorPosition.x || newY !== this.cursorPosition.y) {\n      this.cursorChanged = true;\n      this.cursorPosition.x = newX;\n      this.cursorPosition.y = newY;\n    }\n\n    return this.cursorPosition;\n  }\n\n  updateMetrics() {\n    const width = this.container.offsetWidth;\n    const height = this.container.offsetHeight;\n\n    this.visibleWidth = width / this.zoom;\n    this.visibleHeight = height / this.zoom;\n\n    this.visibleLeft = (0 - this.visibleWidth / 2) + this.cameraX;\n    this.visibleTop = (0 - this.visibleHeight / 2) + this.cameraY;\n    this.visibleRight = this.visibleLeft + this.visibleWidth;\n    this.visibleBottom = this.visibleTop + this.visibleHeight;\n  }\n\n  update(/*timeDelta*/) {\n    this.updateMetrics();\n\n    this.setCursor(this.cursorRawX, this.cursorRawY);\n    // FIXME: Should be able to skip doing this unless\n    // this.cursorChanged === true, but for some reason that's not working\n    this.world.publish('mouseMove', this.cursorPosition);\n\n    const sprites = this.world.get('Sprite') || {};\n\n    for (entityId in sprites) {\n      position = this.world.get('Position', entityId);\n      sprite = sprites[entityId];\n      sprite.visible = (\n        (position.right > this.visibleLeft) &&\n        (position.left < this.visibleRight) &&\n        (position.bottom > this.visibleTop) &&\n        (position.top < this.visibleBottom)\n      );\n    }\n\n    const toRemove = Object.keys(this.graphics).filter(key => !(key in sprites));\n    toRemove.forEach(entityId => {\n      this.stage.removeChild(this.graphics[entityId]);\n      delete this.graphics[entityId];\n    });\n\n    const toAdd = Object.keys(sprites).filter(key => !(key in this.graphics));\n    toAdd.forEach(entityId => {\n      this.stage.addChild(this.graphics[entityId] = new PIXI.Graphics());\n    });\n  }\n\n  draw(timeDelta) {\n    this.followEntity();\n    this.drawBackdrop(timeDelta);\n\n    for (const entityId in this.graphics) {\n      this.drawSprite(this.graphics[entityId], entityId, timeDelta);\n    }\n\n    this.stage.setTransform(\n      (this.container.offsetWidth / 2) - (this.cameraX * this.zoom),\n      (this.container.offsetHeight / 2) - (this.cameraY * this.zoom),\n      this.zoom,\n      this.zoom\n    );\n\n    this.renderer.resize(\n      this.container.offsetWidth,\n      this.container.offsetHeight\n    );\n\n    this.renderer.render(this.stage);\n  }\n\n  drawSprite(ctx, entityId, timeDelta) {\n    const sprite = this.world.get('Sprite', entityId);\n    if (!sprite) { return; }\n\n    const position = this.world.get('Position', entityId);\n\n    let spriteFn = getSprite(sprite.name);\n    if (!spriteFn) { spriteFn = getSprite('default'); }\n\n    ctx.position.x = Math.floor(position.x);\n    ctx.position.y = Math.floor(position.y);\n    ctx.rotation = position.rotation + (Math.PI / 2);\n    ctx.scale.x = ctx.scale.y = sprite.size / 100;\n    ctx.lineStyle(this.lineWidth / (sprite.size / 100), sprite.color);\n    spriteFn(ctx, sprite, entityId, timeDelta, this.world);\n\n      /*\n    const health = this.world.get('Health', entityId);\n    if (health) {\n      const perc = (health.current / health.max);\n      ctx.lineStyle(1.0, 0x333333);\n      ctx.moveTo(-50, -57);\n      ctx.drawRect(-50, -57, 100, 5);\n      ctx.moveTo(-50, -57);\n      ctx.beginFill(0x00ff00, 1.0);\n      ctx.drawRect(-50, -57, 100 * perc, 5);\n      ctx.endFill();\n    }\n    */\n\n    sprite.drawn = true;\n    return ctx;\n  }\n\n  followEntity() {\n    if (!this.followEnabled) {\n      this.cameraX = this.cameraY = 0;\n      return;\n    }\n    if (this.options.followName && !this.followEntityId) {\n      // Look up named entity, if necessary.\n      this.followEntityId = Core.getComponent('Name')\n        .findEntityByName(this.world, this.options.followName);\n    }\n    if (this.followEntityId) {\n      // Adjust the viewport center offset to the entity position\n      const position = this.world.get('Position', this.followEntityId);\n      if (position) {\n        this.cameraX = position.x;\n        this.cameraY = position.y;\n        this.setCursor(this.cursorRawX, this.cursorRawY);\n      }\n    }\n  }\n\n  drawBackdrop(/* timeDelta */) {\n    const ctx = this.backdrop;\n\n    if (!this.gridEnabled) {\n      ctx.visible = false;\n      return;\n    }\n\n    const gridSize = this.options.gridSize;\n    const gridOffsetX = this.visibleLeft % gridSize;\n    const gridOffsetY = this.visibleTop % gridSize;\n\n    ctx.visible = true;\n    ctx.clear();\n    ctx.lineStyle(5, this.options.gridColor);\n    ctx.position.x = this.visibleLeft;\n    ctx.position.y = this.visibleTop;\n\n    for (let x = -gridOffsetX; x < this.visibleWidth; x += gridSize) {\n      ctx.moveTo(x, 0);\n      ctx.lineTo(x, this.visibleHeight + gridSize);\n    }\n\n    for (let y = -gridOffsetY; y < this.visibleHeight; y += gridSize) {\n      ctx.moveTo(0, y);\n      ctx.lineTo(this.visibleWidth + gridSize, y);\n    }\n  }\n\n}\n\nCore.registerSystem('ViewportPixi', ViewportPixi);\n\nexport class CanvasSprite extends Core.Component {\n  static defaults() {\n    return {\n      name: null,\n      color: 0xffffff,\n      size: 100,\n      width: null,\n      height: null,\n      drawn: false,\n      visible: false\n    };\n  }\n  static create(attrs) {\n    const c = super.create(attrs);\n    if (!c.width) { c.width = c.size; }\n    if (!c.height) { c.height = c.size; }\n    return c;\n  }\n}\n\nCore.registerComponent('Sprite', CanvasSprite);\n\nconst spriteRegistry = {};\nexport function registerSprite(name, sprite) {\n  spriteRegistry[name] = sprite;\n}\nexport function getSprite(name) {\n  return spriteRegistry[name];\n}\n\nconst defaultShape = [ -50, 0, 50, 0, 0, 0, 0, -50, 0, 50, 0, 0 ];\nfor (let idx = 0; idx < 8; idx++) {\n  const rot = idx * (PI2 / 8);\n  defaultShape.push(50 * Math.cos(rot));\n  defaultShape.push(50 * Math.sin(rot));\n}\ndefaultShape.push(50);\ndefaultShape.push(0);\n\nregisterSprite('default', (g, sprite/*, entityId*/) => {\n  if (sprite.drawn) { return; }\n  g.drawPolygon(defaultShape);\n});\n\nregisterSprite('sun', (ctx, sprite/*, entityId*/) => {\n  if (sprite.drawn) { return; }\n\n  ctx.arc(0, 0, 50, 0, PI2, true);\n});\n\nregisterSprite('enemyscout', (ctx, sprite/*, entityId*/) => {\n  if (sprite.drawn) { return; }\n\n  ctx.moveTo(0, -50);\n  ctx.lineTo(-45, 50);\n  ctx.lineTo(-12.5, 12.5);\n  ctx.lineTo(0, 25);\n  ctx.lineTo(12.5, 12.5);\n  ctx.lineTo(45, 50);\n  ctx.lineTo(0, -50);\n  ctx.moveTo(0, -50);\n});\n\nregisterSprite('enemywing', (g, sprite/*, entityId*/) => {\n  if (sprite.drawn) { return; }\n\n  g.lineColor = 0x228822;\n\n  g.moveTo(-50, 0);\n  g.lineTo(-37.5, -37.5);\n  g.lineTo(0, 50);\n  g.lineTo(37.5, -37.5);\n  g.lineTo(50, 0);\n  g.lineTo(37.5, 50);\n  g.lineTo(25, 50);\n  g.lineTo(0, 0);\n  g.lineTo(-25, 50);\n  g.lineTo(-37.5, 50);\n  g.lineTo(-50, 0);\n});\n\nconst repulsorShape = [\n -50,  0,\n -37.5, -50,\n -25, -50,\n -6.25, 25,\n 6.25, 25,\n 25, -50,\n 37.5, -50,\n 50,  0,\n 37.5, 50,\n 25, 50,\n 6.25, -25,\n -6.25, -25,\n -25, 50,\n -37.5, 50,\n -50, 0\n];\nconst repulsorSides = 8;\nconst repulsorPoints = [];\nfor (let idx = 0; idx < repulsorSides; idx++) {\n  const rot = idx * (PI2 / repulsorSides);\n  repulsorPoints.push(Math.cos(rot));\n  repulsorPoints.push(Math.sin(rot));\n}\nrepulsorPoints.push(repulsorPoints[0]);\nrepulsorPoints.push(repulsorPoints[1]);\n\nregisterSprite('repulsor', (g, sprite, entityId, timeDelta, world) => {\n  if (!sprite.drawn) {\n    const t = 0; // Math.floor(Math.random() * 15) * 100;\n    sprite.rings = [\n      { t: t,       startR: 0, endR: 500, startO: 1.0, endO: 0.0, endT: 1500 },\n      { t: t + 250, startR: 0, endR: 500, startO: 1.0, endO: 0.0, endT: 1500 },\n      { t: t + 500, startR: 0, endR: 500, startO: 1.0, endO: 0.0, endT: 1500 }\n    ];\n  }\n\n  const repulsor = world.get('Repulsor', entityId);\n  if (repulsor) {\n    sprite.rings.forEach(ring => ring.endR = repulsor.range);\n  }\n\n  g.clear();\n  g.lineStyle(5 / (sprite.size / 100), 0x228822);\n  g.drawPolygon(repulsorShape);\n\n  const dt = Math.floor(timeDelta * 1000);\n  sprite.rings.forEach(ring => {\n    ring.t += dt;\n    if (ring.t >= ring.endT) { ring.t = 0; }\n\n    if (!sprite.visible) { return; }\n\n    const r = lerp(ring.startR, ring.endR, ring.t / ring.endT);\n    const a = lerp(ring.startO, ring.endO, ring.t / ring.endT);\n\n    g.lineStyle(5 / (sprite.size / 100), 0x228822, a);\n    g.moveTo(-r, 0);\n    g.drawPolygon(repulsorPoints.map(p => r * p));\n  });\n});\n\nconst heroShape = [\n  -50, 0,\n  -37.5, -37.5,\n  0, -50,\n  37.5, -37.5,\n  50, 0,\n  37.5, 50,\n  25, 50,\n  12.5, 12.5,\n  5, 25,\n  -5, 25,\n  -12.5, 12.5,\n  -25, 50,\n  -37.5, 50,\n  -50, 0\n];\n\nregisterSprite('hero', (g, sprite/*, entityId*/) => {\n  if (sprite.drawn) { return; }\n  g.drawPolygon(heroShape);\n});\n\nregisterSprite('asteroid', (g, sprite/*, entityId*/) => {\n  if (sprite.drawn) { return; }\n\n  const NUM_POINTS = 10 + Math.floor(8 * Math.random());\n  const MAX_RADIUS = 50;\n  const MIN_RADIUS = 35;\n  const ROTATION = PI2 / NUM_POINTS;\n\n  let idx;\n  const points = [];\n\n  for (idx = 0; idx < NUM_POINTS; idx++) {\n    const rot = idx * ROTATION;\n    const dist = (Math.random() * (MAX_RADIUS - MIN_RADIUS)) + MIN_RADIUS;\n    points.push(dist * Math.cos(rot));\n    points.push(dist * Math.sin(rot));\n  }\n  points.push(points[0]);\n  points.push(points[1]);\n\n  g.drawPolygon(points);\n});\n\nregisterSprite('mine', (g, sprite/*, entityId, timeDelta, world*/) => {\n  if (!sprite.drawn) {\n    let NUM_POINTS = 10 + Math.floor(10 * Math.random());\n    if (NUM_POINTS % 2 !== 0) { NUM_POINTS++; }\n    const ROTATION = PI2 / NUM_POINTS;\n    const MAX_RADIUS = 60;\n    const MIN_RADIUS = 10;\n\n    let even = false;\n\n    sprite.legs = [];\n    for (let idx = 0; idx < NUM_POINTS; idx++) {\n      const dist = even ? 10 : (Math.random() * (MAX_RADIUS - MIN_RADIUS)) + MIN_RADIUS;\n      const rot = idx * ROTATION;\n      sprite.legs.push(dist * Math.cos(rot));\n      sprite.legs.push(dist * Math.sin(rot));\n      even = !even;\n    }\n    sprite.legs.push(sprite.legs[0]);\n    sprite.legs.push(sprite.legs[1]);\n  }\n\n  if (sprite.drawn && Math.random() > 0.15) { return; }\n\n  g.clear();\n  g.lineStyle(5 / (sprite.size / 100), 0xFF2222);\n  g.drawPolygon(sprite.legs.map(p => p * (0.9 + 0.5 * Math.random())));\n});\n\nregisterSprite('explosion', (g, sprite, entityId, timeDelta) => {\n\n  if (!sprite.drawn) {\n    Object.assign(sprite, {\n      ttl: 2.0,\n      radius: 100,\n      maxParticles: 25,\n      maxParticleSize: 4,\n      maxVelocity: 300,\n      age: 0,\n      alpha: 0,\n      stop: false,\n      particles: []\n    }, sprite);\n    for (idx = 0; idx < sprite.maxParticles; idx++) {\n      sprite.particles.push({ free: true });\n    }\n  }\n\n  for (idx = 0; idx < sprite.particles.length; idx++) {\n    p = sprite.particles[idx];\n\n    if (!sprite.stop && p.free) {\n\n      p.velocity = sprite.maxVelocity * Math.random();\n      p.angle = (Math.PI * 2) * Math.random();\n      p.dx = 0 - (p.velocity * Math.sin(p.angle));\n      p.dy = p.velocity * Math.cos(p.angle);\n      p.distance = p.x = p.y = 0;\n      p.maxDistance = sprite.radius * Math.random();\n      p.size = sprite.maxParticleSize;\n      p.free = false;\n\n    } else if (!p.free) {\n\n      p.x += p.dx * timeDelta;\n      p.y += p.dy * timeDelta;\n\n      p.distance += p.velocity * timeDelta;\n      if (p.distance >= p.maxDistance) {\n        p.distance = p.maxDistance;\n        p.free = true;\n      }\n\n    }\n\n  }\n\n  sprite.age += timeDelta;\n\n  if (sprite.age >= sprite.ttl) {\n    sprite.stop = true;\n  }\n\n  sprite.alpha = Math.max(0, 1 - (sprite.age / sprite.ttl));\n\n  g.clear();\n\n  for (idx = 0; idx < sprite.particles.length; idx++) {\n    p = sprite.particles[idx];\n    if (p.free) { continue; }\n\n    g.lineStyle(5 / (sprite.size / 100), sprite.color,\n      (1 - (p.distance / p.maxDistance)) * sprite.alpha);\n    g.moveTo(0, 0);\n    g.lineTo(p.x, p.y);\n  }\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/viewportPixi.js","// Linear interpolation from v0 to v1 over t[0..1]\r\nexport function lerp(v0, v1, t) {\r\n  return (1-t)*v0 + t*v1;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/utils.js","\"use strict\";\n\nexports.__esModule = true;\n\nvar _from = require(\"../core-js/array/from\");\n\nvar _from2 = _interopRequireDefault(_from);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return (0, _from2.default)(arr);\n  }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/toConsumableArray.js\n// module id = 130\n// module chunks = 7","module.exports = { \"default\": require(\"core-js/library/fn/array/from\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/array/from.js\n// module id = 131\n// module chunks = 7","require('../../modules/es6.string.iterator');\nrequire('../../modules/es6.array.from');\nmodule.exports = require('../../modules/_core').Array.from;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/array/from.js\n// module id = 132\n// module chunks = 7","'use strict';\nvar ctx = require('./_ctx');\nvar $export = require('./_export');\nvar toObject = require('./_to-object');\nvar call = require('./_iter-call');\nvar isArrayIter = require('./_is-array-iter');\nvar toLength = require('./_to-length');\nvar createProperty = require('./_create-property');\nvar getIterFn = require('./core.get-iterator-method');\n\n$export($export.S + $export.F * !require('./_iter-detect')(function (iter) { Array.from(iter); }), 'Array', {\n  // 22.1.2.1 Array.from(arrayLike, mapfn = undefined, thisArg = undefined)\n  from: function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {\n    var O = toObject(arrayLike);\n    var C = typeof this == 'function' ? this : Array;\n    var aLen = arguments.length;\n    var mapfn = aLen > 1 ? arguments[1] : undefined;\n    var mapping = mapfn !== undefined;\n    var index = 0;\n    var iterFn = getIterFn(O);\n    var length, result, step, iterator;\n    if (mapping) mapfn = ctx(mapfn, aLen > 2 ? arguments[2] : undefined, 2);\n    // if object isn't iterable or it's array with default iterator - use simple case\n    if (iterFn != undefined && !(C == Array && isArrayIter(iterFn))) {\n      for (iterator = iterFn.call(O), result = new C(); !(step = iterator.next()).done; index++) {\n        createProperty(result, index, mapping ? call(iterator, mapfn, [step.value, index], true) : step.value);\n      }\n    } else {\n      length = toLength(O.length);\n      for (result = new C(length); length > index; index++) {\n        createProperty(result, index, mapping ? mapfn(O[index], index) : O[index]);\n      }\n    }\n    result.length = index;\n    return result;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.array.from.js\n// module id = 133\n// module chunks = 7","// call something on iterator step with safe closing on error\nvar anObject = require('./_an-object');\nmodule.exports = function (iterator, fn, value, entries) {\n  try {\n    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch (e) {\n    var ret = iterator['return'];\n    if (ret !== undefined) anObject(ret.call(iterator));\n    throw e;\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iter-call.js\n// module id = 134\n// module chunks = 7","// check on default Array iterator\nvar Iterators = require('./_iterators');\nvar ITERATOR = require('./_wks')('iterator');\nvar ArrayProto = Array.prototype;\n\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_is-array-iter.js\n// module id = 135\n// module chunks = 7","'use strict';\nvar $defineProperty = require('./_object-dp');\nvar createDesc = require('./_property-desc');\n\nmodule.exports = function (object, index, value) {\n  if (index in object) $defineProperty.f(object, index, createDesc(0, value));\n  else object[index] = value;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_create-property.js\n// module id = 136\n// module chunks = 7","var classof = require('./_classof');\nvar ITERATOR = require('./_wks')('iterator');\nvar Iterators = require('./_iterators');\nmodule.exports = require('./_core').getIteratorMethod = function (it) {\n  if (it != undefined) return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/core.get-iterator-method.js\n// module id = 137\n// module chunks = 7","// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = require('./_cof');\nvar TAG = require('./_wks')('toStringTag');\n// ES3 wrong here\nvar ARG = cof(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (e) { /* empty */ }\n};\n\nmodule.exports = function (it) {\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_classof.js\n// module id = 138\n// module chunks = 7","var ITERATOR = require('./_wks')('iterator');\nvar SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR]();\n  riter['return'] = function () { SAFE_CLOSING = true; };\n  // eslint-disable-next-line no-throw-literal\n  Array.from(riter, function () { throw 2; });\n} catch (e) { /* empty */ }\n\nmodule.exports = function (exec, skipClosing) {\n  if (!skipClosing && !SAFE_CLOSING) return false;\n  var safe = false;\n  try {\n    var arr = [7];\n    var iter = arr[ITERATOR]();\n    iter.next = function () { return { done: safe = true }; };\n    arr[ITERATOR] = function () { return iter; };\n    exec(arr);\n  } catch (e) { /* empty */ }\n  return safe;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iter-detect.js\n// module id = 139\n// module chunks = 7","module.exports = { \"default\": require(\"core-js/library/fn/object/values\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/object/values.js\n// module id = 140\n// module chunks = 7","require('../../modules/es7.object.values');\nmodule.exports = require('../../modules/_core').Object.values;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/object/values.js\n// module id = 141\n// module chunks = 7","// https://github.com/tc39/proposal-object-values-entries\nvar $export = require('./_export');\nvar $values = require('./_object-to-array')(false);\n\n$export($export.S, 'Object', {\n  values: function values(it) {\n    return $values(it);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es7.object.values.js\n// module id = 142\n// module chunks = 7","var getKeys = require('./_object-keys');\nvar toIObject = require('./_to-iobject');\nvar isEnum = require('./_object-pie').f;\nmodule.exports = function (isEntries) {\n  return function (it) {\n    var O = toIObject(it);\n    var keys = getKeys(O);\n    var length = keys.length;\n    var i = 0;\n    var result = [];\n    var key;\n    while (length > i) if (isEnum.call(O, key = keys[i++])) {\n      result.push(isEntries ? [key, O[key]] : O[key]);\n    } return result;\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-to-array.js\n// module id = 143\n// module chunks = 7"],"sourceRoot":""}