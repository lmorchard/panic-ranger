{"version":3,"sources":["webpack:///core.js","webpack:///webpack/bootstrap 3ee30861ab6592d357f1","webpack:///./src/lib/core.js","webpack:///./node_modules/babel-runtime/helpers/classCallCheck.js","webpack:///./node_modules/babel-runtime/helpers/createClass.js","webpack:///./node_modules/babel-runtime/core-js/object/get-prototype-of.js","webpack:///./node_modules/babel-runtime/helpers/possibleConstructorReturn.js","webpack:///./node_modules/babel-runtime/helpers/inherits.js","webpack:///./node_modules/core-js/library/modules/_core.js","webpack:///./src/plugins/position.js","webpack:///./src/plugins/motion.js","webpack:///./node_modules/core-js/library/modules/_wks.js","webpack:///./node_modules/core-js/library/modules/_export.js","webpack:///./node_modules/core-js/library/modules/_to-iobject.js","webpack:///./node_modules/core-js/library/modules/_global.js","webpack:///./node_modules/core-js/library/modules/_object-dp.js","webpack:///./node_modules/core-js/library/modules/_descriptors.js","webpack:///./node_modules/core-js/library/modules/_object-keys.js","webpack:///./node_modules/core-js/library/modules/_has.js","webpack:///./src/lib/Vector2D.js","webpack:///./src/plugins/datGui.js","webpack:///./src/plugins/drawStats.js","webpack:///./src/plugins/memoryStats.js","webpack:///./src/plugins/name.js","webpack:///./node_modules/core-js/library/modules/_hide.js","webpack:///./node_modules/core-js/library/modules/_an-object.js","webpack:///./node_modules/core-js/library/modules/_fails.js","webpack:///./node_modules/babel-runtime/helpers/get.js","webpack:///./src/plugins/health.js","webpack:///./src/plugins/spawn.js","webpack:///./src/plugins/seeker.js","webpack:///./src/plugins/thruster.js","webpack:///./src/plugins/viewportWebGL.js","webpack:///./node_modules/core-js/library/modules/_is-object.js","webpack:///./node_modules/core-js/library/modules/_property-desc.js","webpack:///./node_modules/core-js/library/modules/_object-pie.js","webpack:///./node_modules/core-js/library/modules/_to-object.js","webpack:///./src/plugins/bounce.js","webpack:///./node_modules/core-js/library/modules/_iterators.js","webpack:///./src/plugins/collision.js","webpack:///./node_modules/babel-runtime/core-js/object/keys.js","webpack:///./src/plugins/playerInputSteering.js","webpack:///./node_modules/babel-runtime/core-js/object/assign.js","webpack:///./node_modules/core-js/library/modules/_uid.js","webpack:///./node_modules/core-js/library/modules/_ctx.js","webpack:///./node_modules/core-js/library/modules/_to-primitive.js","webpack:///./node_modules/core-js/library/modules/_cof.js","webpack:///./node_modules/core-js/library/modules/_defined.js","webpack:///./node_modules/core-js/library/modules/_to-integer.js","webpack:///./node_modules/core-js/library/modules/_shared-key.js","webpack:///./node_modules/core-js/library/modules/_shared.js","webpack:///./node_modules/core-js/library/modules/_enum-bug-keys.js","webpack:///./node_modules/core-js/library/modules/_object-gops.js","webpack:///./node_modules/core-js/library/modules/_object-sap.js","webpack:///./node_modules/core-js/library/modules/_library.js","webpack:///./node_modules/core-js/library/modules/_object-create.js","webpack:///./node_modules/core-js/library/modules/_set-to-string-tag.js","webpack:///./node_modules/core-js/library/modules/_wks-ext.js","webpack:///./node_modules/core-js/library/modules/_wks-define.js","webpack:///./node_modules/core-js/library/modules/_object-gopd.js","webpack:///./src/plugins/hordeSpawn.js","webpack:///./src/plugins/repulsor.js","webpack:///./node_modules/babel-runtime/helpers/extends.js","webpack:///./node_modules/core-js/library/modules/_ie8-dom-define.js","webpack:///./node_modules/core-js/library/modules/_dom-create.js","webpack:///./node_modules/core-js/library/modules/_object-keys-internal.js","webpack:///./node_modules/core-js/library/modules/_iobject.js","webpack:///./node_modules/core-js/library/modules/_to-length.js","webpack:///./node_modules/core-js/library/modules/_object-gpo.js","webpack:///./node_modules/babel-runtime/helpers/typeof.js","webpack:///./node_modules/core-js/library/modules/es6.string.iterator.js","webpack:///./node_modules/core-js/library/modules/_iter-define.js","webpack:///./node_modules/core-js/library/modules/_redefine.js","webpack:///./node_modules/core-js/library/modules/_object-gopn.js","webpack:///./src/plugins/expiration.js","webpack:///./src/plugins/orbiter.js","webpack:///./src/plugins/pathfinding.js","webpack:///./src/plugins/steering.js","webpack:///./src/plugins/viewportCanvas.js","webpack:///./node_modules/core-js/library/fn/object/assign.js","webpack:///./node_modules/core-js/library/modules/es6.object.assign.js","webpack:///./node_modules/core-js/library/modules/_a-function.js","webpack:///./node_modules/core-js/library/modules/_object-assign.js","webpack:///./node_modules/core-js/library/modules/_array-includes.js","webpack:///./node_modules/core-js/library/modules/_to-absolute-index.js","webpack:///./node_modules/babel-runtime/core-js/object/define-property.js","webpack:///./node_modules/core-js/library/fn/object/define-property.js","webpack:///./node_modules/core-js/library/modules/es6.object.define-property.js","webpack:///./node_modules/core-js/library/fn/object/get-prototype-of.js","webpack:///./node_modules/core-js/library/modules/es6.object.get-prototype-of.js","webpack:///./node_modules/babel-runtime/core-js/symbol/iterator.js","webpack:///./node_modules/core-js/library/fn/symbol/iterator.js","webpack:///./node_modules/core-js/library/modules/_string-at.js","webpack:///./node_modules/core-js/library/modules/_iter-create.js","webpack:///./node_modules/core-js/library/modules/_object-dps.js","webpack:///./node_modules/core-js/library/modules/_html.js","webpack:///./node_modules/core-js/library/modules/web.dom.iterable.js","webpack:///./node_modules/core-js/library/modules/es6.array.iterator.js","webpack:///./node_modules/core-js/library/modules/_add-to-unscopables.js","webpack:///./node_modules/core-js/library/modules/_iter-step.js","webpack:///./node_modules/babel-runtime/core-js/symbol.js","webpack:///./node_modules/core-js/library/fn/symbol/index.js","webpack:///./node_modules/core-js/library/modules/es6.symbol.js","webpack:///./node_modules/core-js/library/modules/_meta.js","webpack:///./node_modules/core-js/library/modules/_keyof.js","webpack:///./node_modules/core-js/library/modules/_enum-keys.js","webpack:///./node_modules/core-js/library/modules/_is-array.js","webpack:///./node_modules/core-js/library/modules/_object-gopn-ext.js","webpack:///./node_modules/core-js/library/modules/es7.symbol.async-iterator.js","webpack:///./node_modules/core-js/library/modules/es7.symbol.observable.js","webpack:///./node_modules/babel-runtime/core-js/object/set-prototype-of.js","webpack:///./node_modules/core-js/library/fn/object/set-prototype-of.js","webpack:///./node_modules/core-js/library/modules/es6.object.set-prototype-of.js","webpack:///./node_modules/core-js/library/modules/_set-proto.js","webpack:///./node_modules/babel-runtime/core-js/object/create.js","webpack:///./node_modules/core-js/library/fn/object/create.js","webpack:///./node_modules/core-js/library/modules/es6.object.create.js","webpack:///./node_modules/babel-runtime/core-js/object/get-own-property-descriptor.js","webpack:///./node_modules/core-js/library/fn/object/get-own-property-descriptor.js","webpack:///./node_modules/core-js/library/modules/es6.object.get-own-property-descriptor.js","webpack:///./src/lib/QuadTree.js","webpack:///./node_modules/dat-gui/index.js","webpack:///./node_modules/dat-gui/vendor/dat.gui.js","webpack:///./node_modules/dat-gui/vendor/dat.color.js","webpack:///./node_modules/stats-js/build/stats.min.js","webpack:///./node_modules/core-js/library/fn/object/keys.js","webpack:///./node_modules/core-js/library/modules/es6.object.keys.js","webpack:///./node_modules/memory-stats/memory-stats.js","webpack:///./src/plugins/viewportPixi.js","webpack:///./src/lib/utils.js","webpack:///./node_modules/babel-runtime/helpers/toConsumableArray.js","webpack:///./node_modules/babel-runtime/core-js/array/from.js","webpack:///./node_modules/core-js/library/fn/array/from.js","webpack:///./node_modules/core-js/library/modules/es6.array.from.js","webpack:///./node_modules/core-js/library/modules/_iter-call.js","webpack:///./node_modules/core-js/library/modules/_is-array-iter.js","webpack:///./node_modules/core-js/library/modules/_create-property.js","webpack:///./node_modules/core-js/library/modules/core.get-iterator-method.js","webpack:///./node_modules/core-js/library/modules/_classof.js","webpack:///./node_modules/core-js/library/modules/_iter-detect.js","webpack:///./node_modules/babel-runtime/core-js/object/values.js","webpack:///./node_modules/core-js/library/fn/object/values.js","webpack:///./node_modules/core-js/library/modules/es7.object.values.js","webpack:///./node_modules/core-js/library/modules/_object-to-array.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","parentJsonpFunction","window","chunkIds","moreModules","executeModules","chunkId","result","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","shift","s","7","e","onScriptComplete","script","onerror","onload","clearTimeout","timeout","chunk","Error","undefined","installedChunkData","Promise","resolve","promise","reject","head","document","getElementsByTagName","createElement","type","charset","async","nc","setAttribute","src","p","setTimeout","appendChild","m","c","d","name","getter","o","defineProperty","configurable","enumerable","get","n","__esModule","object","property","oe","err","console","error","__webpack_exports__","registerComponent","componentName","componentManager","componentRegistry","getComponent","registerSystem","systemName","system","systemRegistry","getSystem","value","Messages","World","Component","System","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default","TARGET_DURATION","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","fn","entityId","systemAttrs","systemCls","timeNow","timeDelta","componentAttrs","matches","idx","item","handler","ENTITY_INSERT","ENTITY_DESTROY","options","_this","this","isRunning","isPaused","debug","systems","addSystems","store","subscribers","tickDuration","maxTickDelta","tickAccumulator","lastTickTime","lastDrawTime","boundTickLoop","tickLoop","boundDrawLoop","timestamp","drawLoop","reset","key","initialize","Date","now","lastEntityId","msg","data","systemsData","setWorld","timeDeltaMS","updateStart","update","updateEnd","Math","min","tick","drawStart","draw","drawEnd","out","_len","arguments","items","Array","_key","generateEntityId","addComponent","world","publish","removeComponent","component","create","attrs","defaults","defaultOptions","matchComponent","getMatchingComponents","updateComponent","default","instance","Constructor","TypeError","_defineProperty","_defineProperty2","obj","defineProperties","target","props","descriptor","writable","protoProps","staticProps","_typeof2","_typeof3","self","ReferenceError","_interopRequireDefault","_setPrototypeOf","_setPrototypeOf2","_create","_create2","subClass","superClass","constructor","__proto__","core","version","__e","Position","PositionSystem","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_get__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_get___default","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of___default","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck__","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck___default","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass__","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass___default","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn__","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn___default","__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits__","__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits___default","__WEBPACK_IMPORTED_MODULE_6__lib_core__","__WEBPACK_IMPORTED_MODULE_7__lib_QuadTree__","_Component","apply","x","y","rotation","sprite","position","positions","_System","quadtreeMaxAge","quadtreeObjectsPerNode","quadtreeMaxLevels","bounds","left","top","right","bottom","width","height","quadtree","updateBounds","resetQuadtree","halfWidth","halfHeight","insert","g","getDebugGraphics","lineStyle","drawCircle","moveTo","lineTo","drawDebugQuadtreeNode","drawRect","root","objects","forEach","body","nodes","Motion","MotionSystem","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default","__WEBPACK_IMPORTED_MODULE_5__lib_core__","PI2","PI","_Core$Component","dx","dy","drotation","_Core$System","motion","pos","uid","Symbol","USE_SYMBOL","global","ctx","hide","$export","source","own","IS_FORCED","F","IS_GLOBAL","G","IS_STATIC","S","IS_PROTO","P","IS_BIND","B","IS_WRAP","W","expProto","C","a","b","Function","virtual","R","U","IObject","defined","it","__g","anObject","IE8_DOM_DEFINE","toPrimitive","dP","f","O","Attributes","$keys","enumBugKeys","keys","Vector2D","cloneFrom","fromArray","array","zero","add","vector","addScalar","val","eq","subtract","clone","set","setValues","_at_x","_at_y","dist","sqrt","normalise","normalize","isZero","magnitude","reverse","toArray","angle","atan2","rotate","cos","sin","angleTo","rotateAround","point","multiplyScalar","multiply","divide","divideScalar","round","dot","DatGui","__WEBPACK_IMPORTED_MODULE_6_dat_gui__","__WEBPACK_IMPORTED_MODULE_6_dat_gui___default","gui","GUI","DrawStats","__WEBPACK_IMPORTED_MODULE_6_stats_js__","__WEBPACK_IMPORTED_MODULE_6_stats_js___default","drawStats","setMode","domElement","style","tickStats","begin","end","MemoryStatsSystem","__WEBPACK_IMPORTED_MODULE_6_memory_stats__","__WEBPACK_IMPORTED_MODULE_6_memory_stats___default","stats","Name","names","nid","createDesc","isObject","exec","_getPrototypeOf","_getPrototypeOf2","_getOwnPropertyDescriptor","_getOwnPropertyDescriptor2","receiver","desc","parent","MSG_DAMAGE","MSG_HEAL","Health","HealthSystem","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_get__","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_get___default","__WEBPACK_IMPORTED_MODULE_7__spawn__","health","max","current","show_bar","_this3","subscribe","to","amount","MSG_SPAWN","MSG_DESTROY","MSG_DESPAWN","MSG_CAPTURE_CAMERA","Spawn","SpawnSystem","spawn","ttl","age","destroy","tombstone","spawned","captureCamera","Seeker","SeekerSystem","__WEBPACK_IMPORTED_MODULE_8__lib_Vector2D__","active","targetName","targetEntityId","targetPosition","acquisitionDelay","radPerSec","vSeeker","vTarget","seeker","findEntityByName","targetAngle","direction","offset","abs","targetDr","impulseDr","Thruster","ThrusterSystem","stop","useBrakes","deltaV","maxV","vInertia","vThrust","vBrakes","thruster","tickDeltaV","currV","overV","brakingDv","registerSprite","spriteRegistry","getSprite","ViewportWebGL","WebGLSprite","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_toConsumableArray__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_toConsumableArray___default","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_keys__","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_keys___default","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_object_values__","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_object_values___default","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_assign__","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_assign___default","__WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_object_get_prototype_of__","__WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_object_get_prototype_of___default","__WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_classCallCheck__","__WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_classCallCheck___default","__WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_createClass__","__WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_createClass___default","__WEBPACK_IMPORTED_MODULE_8_babel_runtime_helpers_possibleConstructorReturn__","__WEBPACK_IMPORTED_MODULE_8_babel_runtime_helpers_possibleConstructorReturn___default","__WEBPACK_IMPORTED_MODULE_9_babel_runtime_helpers_inherits__","__WEBPACK_IMPORTED_MODULE_9_babel_runtime_helpers_inherits___default","__WEBPACK_IMPORTED_MODULE_10__lib_core__","TYPE_SIZES","5126","35664","35665","35666","sprites","sceneSprite","wheelDistance","evt","event","w","wheelDelta","detail","lineWidth","zoom","zoomMin","zoomMax","zoomWheelFactor","gridEnabled","gridSize","gridColor","followEnabled","followName","followEntityId","_this2","container","querySelector","canvas","initWebGL","scene","events","resize","ev","updateMetrics","orientationchange","mousedown","onMouseDown","mousemove","onMouseMove","mouseup","onMouseUp","addEventListener","boundOnMouseWheel","onMouseWheel","attachEvent","cursorRawX","cursorRawY","cursorChanged","cursorPosition","cameraX","cameraY","debugDummySprite","size","setCursor","clientX","clientY","offsetWidth","offsetHeight","newX","newY","visibleWidth","visibleHeight","visibleLeft","visibleTop","visibleRight","visibleBottom","shape","visible","scale","color","followEntity","setUniforms","uLineWidth","uCameraZoom","uCameraOrigin","uViewportSize","clientWidth","clientHeight","bufferSize","calculateBufferSizeForScene","buffer","Float32Array","vertexCount","fillBufferFromScene","gl","bufferData","ARRAY_BUFFER","STATIC_DRAW","viewport","clearColor","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","drawArrays","TRIANGLE_STRIP","getContext","antialias","preserveDrawingBuffer","premultipliedAlpha","program","createProgram","createShader","VERTEX_SHADER","SHADER_VERTEX","FRAGMENT_SHADER","SHADER_FRAGMENT","useProgram","bindBuffer","createBuffer","numAttribs","getProgramParameter","ACTIVE_ATTRIBUTES","attribs","vertexSize","info","getActiveAttrib","vertexAttribPointer","FLOAT","enableVertexAttribArray","uniforms","numUniforms","ACTIVE_UNIFORMS","getActiveUniform","getUniformLocation","shader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","deleteShader","vertexShader","fragmentShader","attachShader","linkProgram","LINK_STATUS","deleteProgram","reduce","acc","_this4","bufferPos","deltaPosition","deltaScale","deltaRotation","sceneKeys","sort","sceneItems","map","bufferVertex","shapeIdx","lineIdx","spriteIdx","_sceneItems$spriteIdx","_sceneItems$spriteIdx2","_sceneItems$spriteIdx3","_sceneItems$spriteIdx4","_sceneItems$spriteIdx5","_sceneItems$spriteIdx6","_sceneItems$spriteIdx7","_sceneItems$spriteIdx8","_this5","_gl$","concat","drawn","defaultShape","rot","heroShape","repulsorShape","points","NUM_POINTS","floor","random","ROTATION","even","legs","bitmap","propertyIsEnumerable","BounceComponent","BounceSystem","__WEBPACK_IMPORTED_MODULE_8__health__","__WEBPACK_IMPORTED_MODULE_9__lib_Vector2D__","mass","dn","dt","mt","v1","v2","v1n","v1t","v2n","v2t","entities","pairs","aEntityId","aCollidable","bEntityId","inCollisionWith","pair","join","aBouncer","bBouncer","resolveElasticCollision","aPosition","aSprite","aMotion","bPosition","bSprite","bMotion","delta","m1","m2","M","aFactor","processDamage","bFactor","eid","c_eid","v_motion","bouncer","damage","dmg","from","Collidable","CollisionSystem","inCollision","match","entityId2","bCollidable","radii","positionSystemName","positionSystem","retrieveBounds","checkCollisionBound","neighbor","checkCollision","iterate","collidables","collidable","PlayerInputSteering","PlayerInputSteeringSystem","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys___default","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_get__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_get___default","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of__","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of___default","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck__","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck___default","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass__","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass___default","__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn__","__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn___default","__WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_inherits__","__WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_inherits___default","__WEBPACK_IMPORTED_MODULE_7__lib_core__","gamepadDeadzone","gamepad","pointer","touch","setPointer","windowEvents","keydown","handleKeyDown","keyup","handleKeyUp","k","bind","updateGamepads","updateKeyboard","steering","updateComponentFromKeyboard","updateComponentFromPointer","updateComponentFromGamepad","updateMotionFromTargetAngle","axis1","axis0","dleft","button13","dright","button14","button11","gamepads","navigator","getGamepads","gp","connected","buttons","pressed","axes","axisX","axisY","dup","ddown","button12","keyCode","preventDefault","targetAngleRaw","id","px","toString","aFunction","that","valueOf","slice","ceil","isNaN","shared","split","getOwnPropertySymbols","fails","KEY","exp","dPs","IE_PROTO","Empty","createDict","iframeDocument","iframe","display","contentWindow","open","write","lt","close","Properties","def","has","TAG","tag","stat","LIBRARY","wksExt","$Symbol","charAt","pIE","toIObject","gOPD","getOwnPropertyDescriptor","HordeSpawn","HordeSpawnSystem","viewportSystemName","minCount","offscreenTTL","spawnMargin","spawnCount","viewportSystem","spawnOffscreen","hordespawn","_viewportSystem","margin","h","r","Repulsor","RepulsorSystem","range","force","components","repulsor","repulsorPosition","neighborSprite","neighborPosition","neighborMotion","repelAngle","repelForce","queryBounds","applyRepulsionBound","applyRepulsion","repulsorId","_assign","_assign2","is","arrayIndexOf","cof","toInteger","toObject","ObjectProto","getPrototypeOf","_iterator","_iterator2","_symbol","_symbol2","_typeof","$at","String","iterated","_t","_i","index","done","redefine","Iterators","$iterCreate","setToStringTag","ITERATOR","BUGGY","returnThis","Base","NAME","next","DEFAULT","IS_SET","FORCED","methods","IteratorPrototype","getMethod","kind","proto","DEF_VALUES","VALUES_BUG","$native","$default","$entries","$anyNative","entries","values","hiddenKeys","getOwnPropertyNames","Expiration","ExpirationSystem","expiration","Orbiter","OrbiterSystem","__WEBPACK_IMPORTED_MODULE_7__lib_Vector2D__","vOrbited","vOrbiter","vOld","orbiter","oPos","angleDelta","Pathfinder","SpaceTree","PathfindingSystem","level","maxLevel","empty","full","children","ct","dwidth","dheight","splitWidth","splitHeight","vpSystem","save","centerAndZoom","restore","Steering","SteeringSystem","sensorRange","obstacleRepel","seekFactor","pushFactor","avoidFactor","avoidSeeAhead","avoidRayWidthFactor","vectors","avoid","seek","flee","wander","evade","pursue","applySteering","lookForObstacle","targetSprite","edgeRange","distance","pow","obstacle","rayX","rayY","oppositeLen","hypotenuseLen","theta","asin","obstacleAngle","avoidAngle","rayWidth","vRayUnit","hitCircles","steps","step","searchCircleForObstacle","hits","seekTargetName","seekTargetEntityId","drawAngle","vec","strokeStyle","beginPath","stroke","CanvasSprite","ViewportCanvas","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default","__WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_get__","__WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_get___default","__WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_inherits__","__WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_inherits___default","__WEBPACK_IMPORTED_MODULE_8__lib_core__","drawBackdrop","drawScene","drawDebugCursor","fillStyle","fillRect","translate","strokeRect","gridOffsetX","gridOffsetY","drawSprite","spriteFn","arc","initialized","radius","maxParticles","maxParticleSize","maxVelocity","particles","free","velocity","maxDistance","alpha","globalAlpha","assign","getKeys","gOPS","$assign","A","K","T","aLen","getSymbols","isEnum","j","toLength","toAbsoluteIndex","IS_INCLUDES","$this","el","fromIndex","$Object","$getPrototypeOf","TO_STRING","charCodeAt","documentElement","TO_STRING_TAG","DOMIterables","Collection","addToUnscopables","_k","Arguments","DESCRIPTORS","META","$fails","wks","wksDefine","keyOf","enumKeys","isArray","gOPNExt","$GOPD","$DP","gOPN","$JSON","JSON","_stringify","stringify","HIDDEN","TO_PRIMITIVE","SymbolRegistry","AllSymbols","OPSymbols","USE_NATIVE","QObject","setter","findChild","setSymbolDesc","D","protoDesc","wrap","sym","isSymbol","iterator","$defineProperty","$defineProperties","$create","$propertyIsEnumerable","E","$getOwnPropertyDescriptor","$getOwnPropertyNames","$getOwnPropertySymbols","IS_OP","$set","es6Symbols","wellKnownSymbols","for","keyFor","useSetter","useSimple","replacer","$replacer","args","setDesc","isExtensible","FREEZE","preventExtensions","setMeta","fastKey","getWeak","onFreeze","meta","NEED","symbols","arg","windowNames","getWindowNames","setPrototypeOf","check","test","buggy","QuadTree","maxObjects","maxLevels","_empty","entityMap","subWidth","subHeight","midX","midY","getIndex","oldNode","objectIndex","indexOf","splice","rect","iteratorFn","optionalParam","dat","utils","controllers","dom","css","load","url","doc","link","rel","href","inject","injected","innerHTML","common","ARR_EACH","ARR_SLICE","BREAK","extend","each","isUndefined","compose","toCall","itr","scope","defer","fnc","isNull","isNumber","isString","isBoolean","isFunction","Controller","initialValue","__onChange","__onFinishChange","onChange","onFinishChange","setValue","newValue","updateDisplay","getValue","isModified","cssValueToPixels","CSS_VALUE_PIXELS","parseFloat","EVENT_MAP","HTMLEvents","MouseEvents","KeyboardEvents","EVENT_MAP_INV","v","makeSelectable","elem","selectable","onselectstart","MozUserSelect","KhtmlUserSelect","unselectable","makeFullscreen","horizontal","vertical","fakeEvent","eventType","params","aux","className","createEvent","initMouseEvent","bubbles","cancelable","clickCount","init","initKeyboardEvent","initKeyEvent","ctrlKey","altKey","shiftKey","metaKey","charCode","initEvent","dispatchEvent","func","bool","unbind","removeEventListener","detachEvent","addClass","classes","replace","removeClass","removeAttribute","hasClass","RegExp","getWidth","getComputedStyle","getHeight","getOffset","offsetParent","offsetLeft","offsetTop","isActive","activeElement","OptionController","superclass","__select","element","opt","desiredValue","selectedIndex","toReturn","NumberController","numDecimals","__min","__max","__step","__impliedStep","log","LN10","__precision","NumberControllerBox","roundToDecimal","decimals","tenTo","attempted","__input","onBlur","onMouseDrag","prev_y","diff","__truncationSuspended","blur","NumberControllerSlider","styleSheet","i1","i2","o1","o2","__background","__foreground","useDefaultStyles","pct","FunctionController","text","__button","fire","BooleanController","__prev","__checkbox","checked","hex","interpret","original","INTERPRETATIONS","family","litmus","conversions","conversion","conversionName","read","THREE_CHAR_HEX","space","parseInt","SIX_CHAR_HEX","CSS_RGB","CSS_RGBA","HEX","RGB_ARRAY","RGBA_ARRAY","RGBA_OBJ","RGB_OBJ","HSVA_OBJ","HSV_OBJ","saveDialogueContents","controllerFactory","ColorController","CenteredDiv","controller","factoryArgs","before","__li","recallSavedValue","li","addRow","CLASS_CONTROLLER_ROW","augmentController","__controllers","liBefore","__ul","insertBefore","onResize","__gui","remove","nextElementSibling","firstElementChild","listen","box","method","pc","pb","returned","stopPropagation","borderLeftColor","__color","getRoot","__preset_select","markPresetModified","matched_index","__rememberedObjects","controller_map","__rememberedObjectIndecesToControllers","remembered","preset","preset_map","DEFAULT_DEFAULT_PRESET_NAME","getLocalStorageHash","location","addSaveMenu","showHideExplain","explain","useLocalStorage","div","__save_row","firstChild","gears","button","button2","button3","select","addPresetOption","SUPPORTS_LOCAL_STORAGE","saveLocally","getElementById","localStorageCheckBox","localStorage","getItem","newConstructorTextArea","which","SAVE_DIALOGUE","getSaveObject","show","focus","presetName","prompt","saveAs","revert","addResizeHandle","dragStart","pmouseX","__closeButton","CLASS_DRAG","drag","dragStop","__resize_handle","marginLeft","cursor","setWidth","autoPlace","getCurrentPreset","useInitialValues","saved_values","setSelected","setPresetSelectIndex","modified","updateDisplays","controllerArray","auto_place_container","auto_place_virgin","hideable_guis","saveToLocalStorage","setItem","__folders","__listening","DEFAULT_WIDTH","resizable","hideable","scrollable","use_local_storage","title_row_name","closed","CLASS_CLOSED","TEXT_OPEN","TEXT_CLOSED","CLASS_MAIN","saved_gui","parse","CLASS_CLOSE_BUTTON","createTextNode","title_row","on_click_title","CLASS_AUTO_PLACE_CONTAINER","CLASS_AUTO_PLACE","toggleHide","zIndex","opacity","CLASS_TOO_TALL","addColor","removeChild","addFolder","new_gui_params","folders","childNodes","node","innerHeight","remember","folder","factory","StringController","Color","linearGradient","background","vendors","vendor","cssText","hueGradient","fieldDown","setSV","unbindSV","__state","toOriginal","unbindH","setH","__saturation_field","scrollLeft","scrollTop","__hue_field","__temp","__selector","__field_knob","__field_knob_border","__hue_knob","__input_textShadow","value_field","padding","backgroundColor","boxShadow","border","borderRadius","borderRight","marginRight","outline","textAlign","fontWeight","textShadow","mismatch","COMPONENTS","flip","_flip","marginTop","math","defineRGBComponent","componentHexIndex","recalculateRGB","defineHSVComponent","recalculateHSV","component_from_hex","hsv_to_rgb","rgb_to_hsv","rgb_to_hex","tmpComponent","hi","q","t","NaN","hex_with_component","componentIndex","callback","backgroundElement","WebkitTransition","webkitTransform","layout","innerWidth","Stats","Infinity","REVISION","textContent","MemoryStats","msMin","msMax","msDiv","msText","msGraph","bar","updateGraph","child","performance","memory","usedJSHeapSize","totalJSHeapSize","warn","lastTime","lastUsedHeap","ms","bytes","nFractDigit","sizes","precision","ViewportPixi","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_object_get_prototype_of__","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_object_get_prototype_of___default","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_classCallCheck__","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_classCallCheck___default","__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_createClass__","__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_createClass___default","__WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_possibleConstructorReturn__","__WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_possibleConstructorReturn___default","__WEBPACK_IMPORTED_MODULE_9__lib_utils__","renderer","PIXI","autoDetectRenderer","autoResize","view","stage","Container","filters","healthBarGraphics","Graphics","addChild","backdrop","graphics","filter","setTransform","render","drawPolygon","lineColor","repulsorPoints","rings","startR","endR","startO","endO","endT","ring","lerp","v0","_from","_from2","arr","arr2","isArrayIter","createProperty","getIterFn","iter","arrayLike","mapfn","mapping","iterFn","ret","ArrayProto","classof","getIteratorMethod","ARG","tryGet","callee","SAFE_CLOSING","riter","skipClosing","safe","$values","isEntries"],"mappings":"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","file":"core.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// install a JSONP callback for chunk loading\n/******/ \tvar parentJsonpFunction = window[\"webpackJsonp\"];\n/******/ \twindow[\"webpackJsonp\"] = function webpackJsonpCallback(chunkIds, moreModules, executeModules) {\n/******/ \t\t// add \"moreModules\" to the modules object,\n/******/ \t\t// then flag all \"chunkIds\" as loaded and fire callback\n/******/ \t\tvar moduleId, chunkId, i = 0, resolves = [], result;\n/******/ \t\tfor(;i < chunkIds.length; i++) {\n/******/ \t\t\tchunkId = chunkIds[i];\n/******/ \t\t\tif(installedChunks[chunkId]) {\n/******/ \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n/******/ \t\t\t}\n/******/ \t\t\tinstalledChunks[chunkId] = 0;\n/******/ \t\t}\n/******/ \t\tfor(moduleId in moreModules) {\n/******/ \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n/******/ \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n/******/ \t\t\t}\n/******/ \t\t}\n/******/ \t\tif(parentJsonpFunction) parentJsonpFunction(chunkIds, moreModules, executeModules);\n/******/ \t\twhile(resolves.length) {\n/******/ \t\t\tresolves.shift()();\n/******/ \t\t}\n/******/ \t\tif(executeModules) {\n/******/ \t\t\tfor(i=0; i < executeModules.length; i++) {\n/******/ \t\t\t\tresult = __webpack_require__(__webpack_require__.s = executeModules[i]);\n/******/ \t\t\t}\n/******/ \t\t}\n/******/ \t\treturn result;\n/******/ \t};\n/******/\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// objects to store loaded and loading chunks\n/******/ \tvar installedChunks = {\n/******/ \t\t7: 0\n/******/ \t};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/ \t// This file contains only the entry chunk.\n/******/ \t// The chunk loading function for additional chunks\n/******/ \t__webpack_require__.e = function requireEnsure(chunkId) {\n/******/ \t\tvar installedChunkData = installedChunks[chunkId];\n/******/ \t\tif(installedChunkData === 0) {\n/******/ \t\t\treturn new Promise(function(resolve) { resolve(); });\n/******/ \t\t}\n/******/\n/******/ \t\t// a Promise means \"currently loading\".\n/******/ \t\tif(installedChunkData) {\n/******/ \t\t\treturn installedChunkData[2];\n/******/ \t\t}\n/******/\n/******/ \t\t// setup Promise in chunk cache\n/******/ \t\tvar promise = new Promise(function(resolve, reject) {\n/******/ \t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n/******/ \t\t});\n/******/ \t\tinstalledChunkData[2] = promise;\n/******/\n/******/ \t\t// start chunk loading\n/******/ \t\tvar head = document.getElementsByTagName('head')[0];\n/******/ \t\tvar script = document.createElement('script');\n/******/ \t\tscript.type = 'text/javascript';\n/******/ \t\tscript.charset = 'utf-8';\n/******/ \t\tscript.async = true;\n/******/ \t\tscript.timeout = 120000;\n/******/\n/******/ \t\tif (__webpack_require__.nc) {\n/******/ \t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n/******/ \t\t}\n/******/ \t\tscript.src = __webpack_require__.p + \"\" + chunkId + \".bundle.js\";\n/******/ \t\tvar timeout = setTimeout(onScriptComplete, 120000);\n/******/ \t\tscript.onerror = script.onload = onScriptComplete;\n/******/ \t\tfunction onScriptComplete() {\n/******/ \t\t\t// avoid mem leaks in IE.\n/******/ \t\t\tscript.onerror = script.onload = null;\n/******/ \t\t\tclearTimeout(timeout);\n/******/ \t\t\tvar chunk = installedChunks[chunkId];\n/******/ \t\t\tif(chunk !== 0) {\n/******/ \t\t\t\tif(chunk) {\n/******/ \t\t\t\t\tchunk[1](new Error('Loading chunk ' + chunkId + ' failed.'));\n/******/ \t\t\t\t}\n/******/ \t\t\t\tinstalledChunks[chunkId] = undefined;\n/******/ \t\t\t}\n/******/ \t\t};\n/******/ \t\thead.appendChild(script);\n/******/\n/******/ \t\treturn promise;\n/******/ \t};\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// on error function for async loading\n/******/ \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 77);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/*!*************************!*\\\n  !*** ./src/lib/core.js ***!\n  \\*************************/\n/*! exports provided: Messages, World, Component, System, registerComponent, getComponent, registerSystem, getSystem */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Messages\", function() { return Messages; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"World\", function() { return World; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Component\", function() { return Component; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"System\", function() { return System; });\n/* harmony export (immutable) */ __webpack_exports__[\"registerComponent\"] = registerComponent;\n/* harmony export (immutable) */ __webpack_exports__[\"getComponent\"] = getComponent;\n/* harmony export (immutable) */ __webpack_exports__[\"registerSystem\"] = registerSystem;\n/* harmony export (immutable) */ __webpack_exports__[\"getSystem\"] = getSystem;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(/*! babel-runtime/helpers/extends */ 60);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__ = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__ = __webpack_require__(/*! babel-runtime/helpers/createClass */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__);\n\n\n\nvar TARGET_FPS = 60;\nvar TARGET_DURATION = 1000 / TARGET_FPS;\n\nvar requestAnimationFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function (fn) {\n  setTimeout(fn, 1000 / 60);\n};\n\n// Commonly used temp variables, pre-declared early.\nvar entityId = void 0,\n    system = void 0,\n    systemName = void 0,\n    systemAttrs = void 0,\n    systemCls = void 0,\n    componentName = void 0,\n    timeNow = void 0,\n    timeDelta = void 0,\n    componentAttrs = void 0,\n    matches = void 0,\n    idx = void 0,\n    item = void 0,\n    handler = void 0;\n\nvar Messages = {\n  ENTITY_INSERT: 'entity_insert',\n  ENTITY_DESTROY: 'entity_destroy'\n};\n\nvar World = function () {\n  function World(options) {\n    var _this = this;\n\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, World);\n\n    options = options || {};\n\n    this.isRunning = false;\n    this.isPaused = false;\n    this.debug = false;\n\n    this.systems = {};\n    if (options.systems) {\n      this.addSystems(options.systems);\n    }\n\n    this.store = {};\n\n    this.subscribers = {};\n\n    this.tickDuration = TARGET_DURATION;\n    this.maxTickDelta = TARGET_DURATION * 5;\n    this.tickAccumulator = 0;\n\n    this.lastTickTime = 0;\n    this.lastDrawTime = 0;\n\n    this.boundTickLoop = function () {\n      return _this.tickLoop();\n    };\n    this.boundDrawLoop = function (timestamp) {\n      return _this.drawLoop(timestamp);\n    };\n\n    this.reset();\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(World, [{\n    key: 'start',\n    value: function start() {\n      if (this.isRunning) {\n        return;\n      }\n      this.isRunning = true;\n\n      for (var _systemName in this.systems) {\n        this.systems[_systemName].initialize();\n      }\n\n      // Game logic separated from display rendering\n      // See also: http://www.chandlerprall.com/2012/06/requestanimationframe-is-not-your-logics-friend/\n      this.lastTickTime = Date.now();\n      this.lastDrawTime = 0;\n\n      setTimeout(this.boundTickLoop, this.tickDuration);\n      requestAnimationFrame(this.boundDrawLoop);\n\n      return this;\n    }\n  }, {\n    key: 'stop',\n    value: function stop() {\n      this.isRunning = false;\n      return this;\n    }\n  }, {\n    key: 'pause',\n    value: function pause() {\n      this.isPaused = true;\n      return this;\n    }\n  }, {\n    key: 'resume',\n    value: function resume() {\n      this.isPaused = false;\n      return this;\n    }\n  }, {\n    key: 'reset',\n    value: function reset() {\n      this.store = {};\n      this.lastEntityId = 0;\n    }\n\n    // TODO: Use a better pubsub library here. But, pubsub-js seemed to perform\n    // badly in a game loop.\n\n  }, {\n    key: 'subscribe',\n    value: function subscribe(msg, handler) {\n      if (!this.subscribers[msg]) {\n        this.subscribers[msg] = [];\n      }\n      this.subscribers[msg].push(handler);\n      return this;\n    }\n  }, {\n    key: 'unsubscribe',\n    value: function unsubscribe() /* msg, handler */{\n      // TODO\n      return this;\n    }\n  }, {\n    key: 'publish',\n    value: function publish(msg, data) {\n      if (!this.subscribers[msg]) {\n        return;\n      }\n      for (idx = 0, handler; handler = this.subscribers[msg][idx]; idx++) {\n        handler(msg, data);\n      }\n      return this;\n    }\n  }, {\n    key: 'addSystems',\n    value: function addSystems(systemsData) {\n      for (systemName in systemsData) {\n        systemAttrs = systemsData[systemName];\n        systemCls = getSystem(systemName);\n        system = new systemCls(systemAttrs);\n        system.setWorld(this);\n        this.systems[systemName] = system;\n      }\n    }\n  }, {\n    key: 'getSystem',\n    value: function getSystem(systemName) {\n      return this.systems[systemName];\n    }\n  }, {\n    key: 'tick',\n    value: function tick(timeDeltaMS) {\n      timeDelta = timeDeltaMS / 1000;\n      for (systemName in this.systems) {\n        this.systems[systemName].updateStart(timeDelta);\n      }\n      for (systemName in this.systems) {\n        this.systems[systemName].update(timeDelta);\n      }\n      for (systemName in this.systems) {\n        this.systems[systemName].updateEnd(timeDelta);\n      }\n    }\n  }, {\n    key: 'tickLoop',\n    value: function tickLoop() {\n      timeNow = Date.now();\n      timeDelta = Math.min(timeNow - this.lastTickTime, this.maxTickDelta);\n      this.lastTickTime = timeNow;\n\n      if (!this.isPaused) {\n        // Fixed-step game logic loop\n        // see: http://gafferongames.com/game-physics/fix-your-timestep/\n        this.tickAccumulator += timeDelta;\n        while (this.tickAccumulator > this.tickDuration) {\n          this.tick(this.tickDuration);\n          this.tickAccumulator -= this.tickDuration;\n        }\n      }\n\n      if (this.isRunning) {\n        setTimeout(this.boundTickLoop, this.tickDuration);\n      }\n    }\n  }, {\n    key: 'draw',\n    value: function draw(timeDeltaMS) {\n      timeDelta = timeDeltaMS / 1000;\n      for (systemName in this.systems) {\n        this.systems[systemName].drawStart(timeDelta);\n      }\n      for (systemName in this.systems) {\n        this.systems[systemName].draw(timeDelta);\n      }\n      for (systemName in this.systems) {\n        this.systems[systemName].drawEnd(timeDelta);\n      }\n    }\n  }, {\n    key: 'drawLoop',\n    value: function drawLoop(timestamp) {\n      if (!this.lastDrawTime) {\n        this.lastDrawTime = timestamp;\n      }\n      timeDelta = timestamp - this.lastDrawTime;\n      this.lastDrawTime = timestamp;\n\n      if (!this.isPaused) {\n        this.draw(timeDelta);\n      }\n\n      if (this.isRunning) {\n        requestAnimationFrame(this.boundDrawLoop);\n      }\n    }\n  }, {\n    key: 'generateEntityId',\n    value: function generateEntityId() {\n      return ++this.lastEntityId;\n    }\n  }, {\n    key: 'insert',\n    value: function insert() {\n      var out = [];\n\n      for (var _len = arguments.length, items = Array(_len), _key = 0; _key < _len; _key++) {\n        items[_key] = arguments[_key];\n      }\n\n      for (idx = 0; item = items[idx]; idx++) {\n        entityId = this.generateEntityId();\n        for (componentName in item) {\n          componentAttrs = item[componentName];\n          this.addComponent(entityId, componentName, componentAttrs);\n        }\n        if (this.world) this.world.publish(Messages.ENTITY_INSERT, entityId);\n        out.push(entityId);\n      }\n      return out.length > 1 ? out : out[0];\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy(entityId) {\n      if (this.world) this.world.publish(Messages.ENTITY_DESTROY, entityId);\n      for (componentName in this.store) {\n        this.removeComponent(entityId, componentName);\n      }\n    }\n  }, {\n    key: 'addComponent',\n    value: function addComponent(entityId, componentName, componentAttrs) {\n      var componentManager = getComponent(componentName);\n      var component = componentManager.create(componentAttrs);\n      if (!this.store[componentName]) {\n        this.store[componentName] = {};\n      }\n      this.store[componentName][entityId] = component;\n    }\n  }, {\n    key: 'removeComponent',\n    value: function removeComponent(entityId, componentName) {\n      if (entityId in this.store[componentName]) {\n        delete this.store[componentName][entityId];\n      }\n    }\n  }, {\n    key: 'hasComponent',\n    value: function hasComponent(entityId, componentName) {\n      return componentName in this.store && entityId in this.store[componentName];\n    }\n  }, {\n    key: 'get',\n    value: function get(componentName, entityId) {\n      if (!this.store[componentName]) {\n        return null;\n      } else if (!entityId) {\n        return this.store[componentName];\n      } else {\n        return this.store[componentName][entityId];\n      }\n    }\n  }]);\n\n  return World;\n}();\n\nvar Component = function () {\n  function Component() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, Component);\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(Component, null, [{\n    key: 'defaults',\n    value: function defaults() {\n      return {};\n    }\n  }, {\n    key: 'create',\n    value: function create(attrs) {\n      return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({}, this.defaults(), attrs || {});\n    }\n  }]);\n\n  return Component;\n}();\n\nvar System = function () {\n  function System(options) {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, System);\n\n    this.options = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({}, this.defaultOptions(), options || {});\n    this.debug = this.options.debug || false;\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(System, [{\n    key: 'defaultOptions',\n    value: function defaultOptions() {\n      return {};\n    }\n  }, {\n    key: 'setWorld',\n    value: function setWorld(world) {\n      this.world = world;\n    }\n  }, {\n    key: 'matchComponent',\n    value: function matchComponent() {\n      return '';\n    }\n  }, {\n    key: 'initialize',\n    value: function initialize() {}\n  }, {\n    key: 'getMatchingComponents',\n    value: function getMatchingComponents() {\n      return this.world.get(this.matchComponent());\n    }\n  }, {\n    key: 'updateStart',\n    value: function updateStart() /* timeDelta */{}\n  }, {\n    key: 'update',\n    value: function update(timeDelta) {\n      matches = this.getMatchingComponents();\n      for (entityId in matches) {\n        this.updateComponent(timeDelta, entityId, matches[entityId]);\n      }\n    }\n  }, {\n    key: 'updateComponent',\n    value: function updateComponent() /* timeDelta, entityId, component */{}\n  }, {\n    key: 'updateEnd',\n    value: function updateEnd() /* timeDelta */{}\n  }, {\n    key: 'drawStart',\n    value: function drawStart() /* timeDelta */{}\n  }, {\n    key: 'draw',\n    value: function draw() /* timeDelta */{}\n  }, {\n    key: 'getDebugGraphics',\n    value: function getDebugGraphics() {\n      // TODO make this work again someday\n      return;\n    }\n  }, {\n    key: 'drawEnd',\n    value: function drawEnd() /* timeDelta */{}\n  }]);\n\n  return System;\n}();\n\nvar componentRegistry = {};\n\nfunction registerComponent(componentName, componentManager) {\n  componentRegistry[componentName] = componentManager;\n}\n\nfunction getComponent(componentName) {\n  return componentRegistry[componentName];\n}\n\nvar systemRegistry = {};\n\nfunction registerSystem(systemName, system) {\n  systemRegistry[systemName] = system;\n}\n\nfunction getSystem(systemName) {\n  return systemRegistry[systemName];\n}\n\n/***/ }),\n/* 1 */\n/*!**************************************************************!*\\\n  !*** ./node_modules/babel-runtime/helpers/classCallCheck.js ***!\n  \\**************************************************************/\n/*! no static exports found */\n/*! exports used: default */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\n/***/ }),\n/* 2 */\n/*!***********************************************************!*\\\n  !*** ./node_modules/babel-runtime/helpers/createClass.js ***!\n  \\***********************************************************/\n/*! no static exports found */\n/*! exports used: default */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\n\nvar _defineProperty = __webpack_require__(/*! ../core-js/object/define-property */ 84);\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n/***/ }),\n/* 3 */\n/*!***********************************************************************!*\\\n  !*** ./node_modules/babel-runtime/core-js/object/get-prototype-of.js ***!\n  \\***********************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(/*! core-js/library/fn/object/get-prototype-of */ 87), __esModule: true };\n\n/***/ }),\n/* 4 */\n/*!*************************************************************************!*\\\n  !*** ./node_modules/babel-runtime/helpers/possibleConstructorReturn.js ***!\n  \\*************************************************************************/\n/*! no static exports found */\n/*! exports used: default */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\n\nvar _typeof2 = __webpack_require__(/*! ../helpers/typeof */ 67);\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && ((typeof call === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(call)) === \"object\" || typeof call === \"function\") ? call : self;\n};\n\n/***/ }),\n/* 5 */\n/*!********************************************************!*\\\n  !*** ./node_modules/babel-runtime/helpers/inherits.js ***!\n  \\********************************************************/\n/*! no static exports found */\n/*! exports used: default */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\n\nvar _setPrototypeOf = __webpack_require__(/*! ../core-js/object/set-prototype-of */ 110);\n\nvar _setPrototypeOf2 = _interopRequireDefault(_setPrototypeOf);\n\nvar _create = __webpack_require__(/*! ../core-js/object/create */ 114);\n\nvar _create2 = _interopRequireDefault(_create);\n\nvar _typeof2 = __webpack_require__(/*! ../helpers/typeof */ 67);\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(superClass)));\n  }\n\n  subClass.prototype = (0, _create2.default)(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf2.default ? (0, _setPrototypeOf2.default)(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\n/***/ }),\n/* 6 */\n/*!*******************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_core.js ***!\n  \\*******************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports) {\n\nvar core = module.exports = { version: '2.5.0' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n\n\n/***/ }),\n/* 7 */\n/*!*********************************!*\\\n  !*** ./src/plugins/position.js ***!\n  \\*********************************/\n/*! exports provided: Position, PositionSystem */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Position\", function() { return Position; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PositionSystem\", function() { return PositionSystem; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_get__ = __webpack_require__(/*! babel-runtime/helpers/get */ 25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_get___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_get__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(/*! babel-runtime/core-js/object/get-prototype-of */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck__ = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass__ = __webpack_require__(/*! babel-runtime/helpers/createClass */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(/*! babel-runtime/helpers/possibleConstructorReturn */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits__ = __webpack_require__(/*! babel-runtime/helpers/inherits */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__lib_core__ = __webpack_require__(/*! ../lib/core */ 0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__lib_QuadTree__ = __webpack_require__(/*! ../lib/QuadTree */ 120);\n\n\n\n\n\n\n\n\n\nvar Position = function (_Component) {\n  __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits___default()(Position, _Component);\n\n  function Position() {\n    __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck___default()(this, Position);\n\n    return __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn___default()(this, (Position.__proto__ || __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of___default()(Position)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass___default()(Position, null, [{\n    key: 'defaults',\n    value: function defaults() {\n      return { x: 0, y: 0, rotation: 0 };\n    }\n  }]);\n\n  return Position;\n}(__WEBPACK_IMPORTED_MODULE_6__lib_core__[\"Component\"]);\n\nObject(__WEBPACK_IMPORTED_MODULE_6__lib_core__[\"registerComponent\"])('Position', Position);\n\nvar entityId = void 0,\n    sprite = void 0,\n    position = void 0,\n    positions = void 0;\n\nvar PositionSystem = function (_System) {\n  __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits___default()(PositionSystem, _System);\n\n  function PositionSystem() {\n    __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck___default()(this, PositionSystem);\n\n    return __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn___default()(this, (PositionSystem.__proto__ || __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of___default()(PositionSystem)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass___default()(PositionSystem, [{\n    key: 'defaultOptions',\n    value: function defaultOptions() {\n      return {\n        quadtreeMaxAge: 2,\n        quadtreeObjectsPerNode: 5,\n        quadtreeMaxLevels: 5\n      };\n    }\n  }, {\n    key: 'matchComponent',\n    value: function matchComponent() {\n      return 'Position';\n    }\n  }, {\n    key: 'initialize',\n    value: function initialize() {\n      this.bounds = {\n        left: 0, top: 0, right: 0, bottom: 0,\n        width: 0, height: 0\n      };\n      this.quadtree = new __WEBPACK_IMPORTED_MODULE_7__lib_QuadTree__[\"a\" /* default */](-1000, -1000, 2000, 2000, this.options.quadtreeObjectsPerNode, this.options.quadtreeMaxLevels);\n    }\n  }, {\n    key: 'update',\n    value: function update(timeDelta) {\n      this.updateBounds();\n      this.resetQuadtree(timeDelta);\n      __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_get___default()(PositionSystem.prototype.__proto__ || __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of___default()(PositionSystem.prototype), 'update', this).call(this, timeDelta);\n    }\n  }, {\n    key: 'resetQuadtree',\n    value: function resetQuadtree() {\n      this.quadtree.reset(this.bounds.left, this.bounds.top, this.bounds.width, this.bounds.height, this.options.quadtreeObjectsPerNode, this.options.quadtreeMaxLevels);\n    }\n  }, {\n    key: 'updateBounds',\n    value: function updateBounds() {\n      this.bounds.left = this.bounds.top = this.bounds.right = this.bounds.bottom = null;\n      positions = this.getMatchingComponents();\n      for (entityId in positions) {\n        position = positions[entityId];\n        if (this.bounds.left === null || position.left < this.bounds.left) {\n          this.bounds.left = position.left;\n        }\n        if (this.bounds.top === null || position.top < this.bounds.top) {\n          this.bounds.top = position.top;\n        }\n        if (this.bounds.right === null || position.right > this.bounds.right) {\n          this.bounds.right = position.right;\n        }\n        if (this.bounds.bottom === null || position.bottom > this.bounds.bottom) {\n          this.bounds.bottom = position.bottom;\n        }\n      }\n      this.bounds.width = this.bounds.right - this.bounds.left;\n      this.bounds.height = this.bounds.bottom - this.bounds.top;\n    }\n  }, {\n    key: 'updateComponent',\n    value: function updateComponent(timeDelta, entityId, position) {\n      sprite = this.world.get('Sprite', entityId);\n      if (!sprite) {\n        return;\n      }\n\n      var halfWidth = sprite.width / 2;\n      var halfHeight = sprite.height / 2;\n\n      position.entityId = entityId;\n      position.width = sprite.width;\n      position.height = sprite.height;\n      position.left = position.x - halfWidth;\n      position.top = position.y - halfHeight;\n      position.right = position.x + halfWidth;\n      position.bottom = position.y + halfHeight;\n\n      this.quadtree.insert(position);\n    }\n  }, {\n    key: 'draw',\n    value: function draw() /* timeDelta */{\n      var g = this.getDebugGraphics();\n      if (!g) {\n        return;\n      }\n\n      g.lineStyle(4, 0x882222);\n      positions = this.getMatchingComponents();\n      for (entityId in positions) {\n        position = positions[entityId];\n        sprite = this.world.get('Sprite', entityId);\n        g.drawCircle(position.x, position.y, sprite.width / 2);\n        g.moveTo(position.x - 20, position.y);\n        g.lineTo(position.x + 20, position.y);\n        g.moveTo(position.x, position.y - 20);\n        g.lineTo(position.x, position.y + 20);\n      }\n\n      g.lineStyle(4, 0x228822);\n      this.drawDebugQuadtreeNode(g, this.quadtree);\n\n      g.lineStyle(4, 0xffff33);\n      g.moveTo(-20, 0);\n      g.lineTo(20, 0);\n      g.moveTo(0, -20);\n      g.lineTo(0, 20);\n      g.moveTo(0, 0);\n      g.drawRect(this.bounds.left, this.bounds.top, this.bounds.width, this.bounds.height);\n    }\n  }, {\n    key: 'drawDebugQuadtreeNode',\n    value: function drawDebugQuadtreeNode(g, root) {\n      if (!root) {\n        return;\n      }\n\n      g.lineStyle(4, 0x883388);\n      g.drawRect(root.bounds.left, root.bounds.top, root.bounds.width, root.bounds.height);\n\n      g.lineStyle(4, 0x112222);\n      root.objects.forEach(function (body) {\n        return g.drawRect(body.left, body.top, body.width, body.height);\n      });\n\n      this.drawDebugQuadtreeNode(g, root.nodes[0]);\n      this.drawDebugQuadtreeNode(g, root.nodes[1]);\n      this.drawDebugQuadtreeNode(g, root.nodes[2]);\n      this.drawDebugQuadtreeNode(g, root.nodes[3]);\n    }\n  }]);\n\n  return PositionSystem;\n}(__WEBPACK_IMPORTED_MODULE_6__lib_core__[\"System\"]);\n\nObject(__WEBPACK_IMPORTED_MODULE_6__lib_core__[\"registerSystem\"])('Position', PositionSystem);\n\n/***/ }),\n/* 8 */\n/*!*******************************!*\\\n  !*** ./src/plugins/motion.js ***!\n  \\*******************************/\n/*! exports provided: Motion, MotionSystem */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Motion\", function() { return Motion; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MotionSystem\", function() { return MotionSystem; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(/*! babel-runtime/core-js/object/get-prototype-of */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__ = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__ = __webpack_require__(/*! babel-runtime/helpers/createClass */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(/*! babel-runtime/helpers/possibleConstructorReturn */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__ = __webpack_require__(/*! babel-runtime/helpers/inherits */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__lib_core__ = __webpack_require__(/*! ../lib/core */ 0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__position__ = __webpack_require__(/*! ./position */ 7);\n\n\n\n\n\n\n\n\n\nvar PI2 = Math.PI * 2;\n\nvar Motion = function (_Core$Component) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(Motion, _Core$Component);\n\n  function Motion() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, Motion);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (Motion.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(Motion)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(Motion, null, [{\n    key: 'defaults',\n    value: function defaults() {\n      return { dx: 0, dy: 0, drotation: 0 };\n    }\n  }]);\n\n  return Motion;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"Component\"]);\n__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerComponent\"]('Motion', Motion);\n\nvar MotionSystem = function (_Core$System) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(MotionSystem, _Core$System);\n\n  function MotionSystem() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, MotionSystem);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (MotionSystem.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(MotionSystem)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(MotionSystem, [{\n    key: 'matchComponent',\n    value: function matchComponent() {\n      return 'Motion';\n    }\n  }, {\n    key: 'updateComponent',\n    value: function updateComponent(timeDelta, entityId, motion) {\n      var pos = this.world.get('Position', entityId);\n      pos.x += motion.dx * timeDelta;\n      pos.y += motion.dy * timeDelta;\n\n      // Update the rotation, ensuring a 0..2*Math.PI range.\n      pos.rotation = (pos.rotation + motion.drotation * timeDelta) % PI2;\n      if (pos.rotation < 0) {\n        pos.rotation += PI2;\n      }\n    }\n  }]);\n\n  return MotionSystem;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"System\"]);\n__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerSystem\"]('Motion', MotionSystem);\n\n/***/ }),\n/* 9 */\n/*!******************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_wks.js ***!\n  \\******************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar store = __webpack_require__(/*! ./_shared */ 48)('wks');\nvar uid = __webpack_require__(/*! ./_uid */ 41);\nvar Symbol = __webpack_require__(/*! ./_global */ 12).Symbol;\nvar USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function (name) {\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n\n\n/***/ }),\n/* 10 */\n/*!*********************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_export.js ***!\n  \\*********************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar global = __webpack_require__(/*! ./_global */ 12);\nvar core = __webpack_require__(/*! ./_core */ 6);\nvar ctx = __webpack_require__(/*! ./_ctx */ 42);\nvar hide = __webpack_require__(/*! ./_hide */ 22);\nvar PROTOTYPE = 'prototype';\n\nvar $export = function (type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var IS_WRAP = type & $export.W;\n  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});\n  var expProto = exports[PROTOTYPE];\n  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE];\n  var key, own, out;\n  if (IS_GLOBAL) source = name;\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if (own && key in exports) continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function (C) {\n      var F = function (a, b, c) {\n        if (this instanceof C) {\n          switch (arguments.length) {\n            case 0: return new C();\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if (IS_PROTO) {\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if (type & $export.R && expProto && !expProto[key]) hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library`\nmodule.exports = $export;\n\n\n/***/ }),\n/* 11 */\n/*!*************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_to-iobject.js ***!\n  \\*************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = __webpack_require__(/*! ./_iobject */ 64);\nvar defined = __webpack_require__(/*! ./_defined */ 45);\nmodule.exports = function (it) {\n  return IObject(defined(it));\n};\n\n\n/***/ }),\n/* 12 */\n/*!*********************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_global.js ***!\n  \\*********************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports) {\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n\n\n/***/ }),\n/* 13 */\n/*!************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_object-dp.js ***!\n  \\************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar anObject = __webpack_require__(/*! ./_an-object */ 23);\nvar IE8_DOM_DEFINE = __webpack_require__(/*! ./_ie8-dom-define */ 61);\nvar toPrimitive = __webpack_require__(/*! ./_to-primitive */ 43);\nvar dP = Object.defineProperty;\n\nexports.f = __webpack_require__(/*! ./_descriptors */ 14) ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return dP(O, P, Attributes);\n  } catch (e) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n\n\n/***/ }),\n/* 14 */\n/*!**************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_descriptors.js ***!\n  \\**************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// Thank's IE8 for his funny defineProperty\nmodule.exports = !__webpack_require__(/*! ./_fails */ 24)(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n\n\n/***/ }),\n/* 15 */\n/*!**************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_object-keys.js ***!\n  \\**************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys = __webpack_require__(/*! ./_object-keys-internal */ 63);\nvar enumBugKeys = __webpack_require__(/*! ./_enum-bug-keys */ 49);\n\nmodule.exports = Object.keys || function keys(O) {\n  return $keys(O, enumBugKeys);\n};\n\n\n/***/ }),\n/* 16 */\n/*!******************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_has.js ***!\n  \\******************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports) {\n\nvar hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n\n\n/***/ }),\n/* 17 */\n/*!*****************************!*\\\n  !*** ./src/lib/Vector2D.js ***!\n  \\*****************************/\n/*! exports provided: default */\n/*! exports used: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = Vector2D;\n/*\r\n  Originally by Vitalii [Nayjest] Stepanenko <gmail@vitaliy.in>\r\n  Tweaky & fixes by Les Orchard <me@lmorchard.com>\r\n*/\n\nfunction Vector2D(x, y) {\n  this.x = x || 0;\n  this.y = y || 0;\n}\n\nVector2D.cloneFrom = function (object) {\n  return new Vector2D(object.x, object.y);\n};\n\nVector2D.fromArray = function (array) {\n  return new Vector2D(array[0], array[1]);\n};\n\nVector2D.zero = new Vector2D(0, 0);\n\nVector2D.prototype.add = function (vector) {\n  this.x += vector.x;\n  this.y += vector.y;\n  return this;\n};\n\nVector2D.prototype.addScalar = function (val) {\n  this.x += val;\n  this.y += val;\n  return this;\n};\n\nVector2D.prototype.eq = function (vector) {\n  return vector.x === this.x && vector.y === this.y;\n};\n\nVector2D.prototype.subtract = function (vector) {\n  this.x -= vector.x;\n  this.y -= vector.y;\n  return this;\n};\n\nVector2D.prototype.clone = function () {\n  return new Vector2D(this.x, this.y);\n};\n\nVector2D.prototype.set = function (vector) {\n  this.x = vector.x;\n  this.y = vector.y;\n  return this;\n};\n\nVector2D.prototype.setValues = function (_at_x, _at_y) {\n  this.x = _at_x;\n  this.y = _at_y;\n  return this;\n};\n\nVector2D.prototype.dist = function (vector) {\n  return Math.sqrt((vector.x - this.x) * (vector.x - this.x) + (vector.y - this.y) * (vector.y - this.y));\n};\n\nVector2D.prototype.normalise = function () {\n  return this.normalize();\n};\n\nVector2D.prototype.normalize = function () {\n  if (!this.isZero()) {\n    var m = this.magnitude();\n    this.x /= m;\n    this.y /= m;\n  }\n  return this;\n};\n\nVector2D.prototype.isZero = function () {\n  return this.x === 0 && this.y === 0;\n};\n\nVector2D.prototype.reverse = function () {\n  this.x = -this.x;\n  this.y = -this.y;\n  return this;\n};\n\nVector2D.prototype.magnitude = function () {\n  return Math.sqrt(this.x * this.x + this.y * this.y);\n};\n\nVector2D.prototype.toArray = function () {\n  return [this.x, this.y];\n};\n\nVector2D.prototype.angle = function () {\n  return Math.atan2(this.y, this.x);\n};\n\nVector2D.prototype.rotate = function (angle) {\n  var cos = Math.cos(angle);\n  var sin = Math.sin(angle);\n  return this.setValues(this.x * cos - this.y * sin, this.x * sin + this.y * cos);\n};\n\nVector2D.prototype.angleTo = function (vector) {\n  return Math.atan2(vector.y - this.y, vector.x - this.x);\n};\n\nVector2D.prototype.rotateAround = function (point, angle) {\n  return this.subtract(point).rotate(angle).add(point);\n};\n\nVector2D.prototype.multiplyScalar = function (val) {\n  this.x *= val;\n  this.y *= val;\n  return this;\n};\n\nVector2D.prototype.multiply = function (vector) {\n  this.x *= vector.x;\n  this.y *= vector.y;\n  return this;\n};\n\nVector2D.prototype.divide = function (vector) {\n  this.x /= vector.x;\n  this.y /= vector.y;\n  return this;\n};\n\nVector2D.prototype.divideScalar = function (val) {\n  this.x /= val;\n  this.y /= val;\n  return this;\n};\n\nVector2D.prototype.round = function () {\n  this.x = Math.round(this.x);\n  this.y = Math.round(this.y);\n  return this;\n};\n\nVector2D.prototype.dot = function (vector) {\n  return this.x * vector.x + this.y * vector.y;\n};\n\n/***/ }),\n/* 18 */\n/*!*******************************!*\\\n  !*** ./src/plugins/datGui.js ***!\n  \\*******************************/\n/*! exports provided: DatGui */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DatGui\", function() { return DatGui; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(/*! babel-runtime/core-js/object/get-prototype-of */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__ = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__ = __webpack_require__(/*! babel-runtime/helpers/createClass */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(/*! babel-runtime/helpers/possibleConstructorReturn */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__ = __webpack_require__(/*! babel-runtime/helpers/inherits */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__lib_core__ = __webpack_require__(/*! ../lib/core */ 0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_dat_gui__ = __webpack_require__(/*! dat-gui */ 121);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_dat_gui___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_dat_gui__);\n\n\n\n\n\n\n\n\n\nvar DatGui = function (_Core$System) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(DatGui, _Core$System);\n\n  function DatGui() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, DatGui);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (DatGui.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(DatGui)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(DatGui, [{\n    key: 'initialize',\n    value: function initialize() {\n      this.gui = new __WEBPACK_IMPORTED_MODULE_6_dat_gui___default.a.GUI();\n    }\n  }]);\n\n  return DatGui;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"System\"]);\n__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerSystem\"]('DatGui', DatGui);\n\n/***/ }),\n/* 19 */\n/*!**********************************!*\\\n  !*** ./src/plugins/drawStats.js ***!\n  \\**********************************/\n/*! exports provided: DrawStats */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DrawStats\", function() { return DrawStats; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(/*! babel-runtime/core-js/object/get-prototype-of */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__ = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__ = __webpack_require__(/*! babel-runtime/helpers/createClass */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(/*! babel-runtime/helpers/possibleConstructorReturn */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__ = __webpack_require__(/*! babel-runtime/helpers/inherits */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__lib_core__ = __webpack_require__(/*! ../lib/core */ 0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_stats_js__ = __webpack_require__(/*! stats-js */ 124);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_stats_js___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_stats_js__);\n\n\n\n\n\n\n\n\n\nvar DrawStats = function (_Core$System) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(DrawStats, _Core$System);\n\n  function DrawStats() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, DrawStats);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (DrawStats.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(DrawStats)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(DrawStats, [{\n    key: 'initialize',\n    value: function initialize() {\n\n      this.drawStats = new __WEBPACK_IMPORTED_MODULE_6_stats_js___default.a();\n      this.drawStats.setMode(0);\n      this.drawStats.domElement.style.position = 'absolute';\n      this.drawStats.domElement.style.left = '0px';\n      this.drawStats.domElement.style.top = '0px';\n      document.body.appendChild(this.drawStats.domElement);\n\n      this.tickStats = new __WEBPACK_IMPORTED_MODULE_6_stats_js___default.a();\n      this.tickStats.setMode(0);\n      this.tickStats.domElement.style.position = 'absolute';\n      this.tickStats.domElement.style.left = '0px';\n      this.tickStats.domElement.style.top = '55px';\n      document.body.appendChild(this.tickStats.domElement);\n    }\n  }, {\n    key: 'updateStart',\n    value: function updateStart() {\n      this.tickStats.begin();\n    }\n  }, {\n    key: 'updateEnd',\n    value: function updateEnd() {\n      this.tickStats.end();\n    }\n  }, {\n    key: 'drawStart',\n    value: function drawStart() {\n      this.drawStats.begin();\n    }\n  }, {\n    key: 'drawEnd',\n    value: function drawEnd() {\n      this.drawStats.end();\n    }\n  }]);\n\n  return DrawStats;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"System\"]);\n__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerSystem\"]('DrawStats', DrawStats);\n\n/***/ }),\n/* 20 */\n/*!************************************!*\\\n  !*** ./src/plugins/memoryStats.js ***!\n  \\************************************/\n/*! exports provided: MemoryStatsSystem */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MemoryStatsSystem\", function() { return MemoryStatsSystem; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(/*! babel-runtime/core-js/object/get-prototype-of */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__ = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__ = __webpack_require__(/*! babel-runtime/helpers/createClass */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(/*! babel-runtime/helpers/possibleConstructorReturn */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__ = __webpack_require__(/*! babel-runtime/helpers/inherits */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__lib_core__ = __webpack_require__(/*! ../lib/core */ 0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_memory_stats__ = __webpack_require__(/*! memory-stats */ 127);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_memory_stats___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_memory_stats__);\n\n\n\n\n\n\n\n\n\nvar MemoryStatsSystem = function (_Core$System) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(MemoryStatsSystem, _Core$System);\n\n  function MemoryStatsSystem() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, MemoryStatsSystem);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (MemoryStatsSystem.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(MemoryStatsSystem)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(MemoryStatsSystem, [{\n    key: 'initialize',\n    value: function initialize() {\n      this.stats = new __WEBPACK_IMPORTED_MODULE_6_memory_stats___default.a();\n      this.stats.domElement.style.position = 'fixed';\n      this.stats.domElement.style.left = '85px';\n      this.stats.domElement.style.top = '0px';\n      document.body.appendChild(this.stats.domElement);\n    }\n  }, {\n    key: 'draw',\n    value: function draw() {\n      this.stats.update();\n    }\n  }]);\n\n  return MemoryStatsSystem;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"System\"]);\n__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerSystem\"]('MemoryStats', MemoryStatsSystem);\n\n/***/ }),\n/* 21 */\n/*!*****************************!*\\\n  !*** ./src/plugins/name.js ***!\n  \\*****************************/\n/*! exports provided: Name */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Name\", function() { return Name; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(/*! babel-runtime/core-js/object/get-prototype-of */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__ = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__ = __webpack_require__(/*! babel-runtime/helpers/createClass */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(/*! babel-runtime/helpers/possibleConstructorReturn */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__ = __webpack_require__(/*! babel-runtime/helpers/inherits */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__lib_core__ = __webpack_require__(/*! ../lib/core */ 0);\n\n\n\n\n\n\n\nvar Name = function (_Core$Component) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(Name, _Core$Component);\n\n  function Name() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, Name);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (Name.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(Name)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(Name, null, [{\n    key: 'defaults',\n    value: function defaults() {\n      return { name: 'unnamed' };\n    }\n  }, {\n    key: 'findEntityByName',\n    value: function findEntityByName(world, name) {\n      var names = world.get('Name');\n      for (var nid in names) {\n        var nameComponent = names[nid];\n        if (nameComponent.name === name) {\n          return nid;\n        }\n      }\n    }\n  }]);\n\n  return Name;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"Component\"]);\n\n__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerComponent\"]('Name', Name);\n\n/***/ }),\n/* 22 */\n/*!*******************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_hide.js ***!\n  \\*******************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar dP = __webpack_require__(/*! ./_object-dp */ 13);\nvar createDesc = __webpack_require__(/*! ./_property-desc */ 32);\nmodule.exports = __webpack_require__(/*! ./_descriptors */ 14) ? function (object, key, value) {\n  return dP.f(object, key, createDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n\n\n/***/ }),\n/* 23 */\n/*!************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_an-object.js ***!\n  \\************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar isObject = __webpack_require__(/*! ./_is-object */ 31);\nmodule.exports = function (it) {\n  if (!isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n\n\n/***/ }),\n/* 24 */\n/*!********************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_fails.js ***!\n  \\********************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports) {\n\nmodule.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n\n\n/***/ }),\n/* 25 */\n/*!***************************************************!*\\\n  !*** ./node_modules/babel-runtime/helpers/get.js ***!\n  \\***************************************************/\n/*! no static exports found */\n/*! exports used: default */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\n\nvar _getPrototypeOf = __webpack_require__(/*! ../core-js/object/get-prototype-of */ 3);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _getOwnPropertyDescriptor = __webpack_require__(/*! ../core-js/object/get-own-property-descriptor */ 117);\n\nvar _getOwnPropertyDescriptor2 = _interopRequireDefault(_getOwnPropertyDescriptor);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function get(object, property, receiver) {\n  if (object === null) object = Function.prototype;\n  var desc = (0, _getOwnPropertyDescriptor2.default)(object, property);\n\n  if (desc === undefined) {\n    var parent = (0, _getPrototypeOf2.default)(object);\n\n    if (parent === null) {\n      return undefined;\n    } else {\n      return get(parent, property, receiver);\n    }\n  } else if (\"value\" in desc) {\n    return desc.value;\n  } else {\n    var getter = desc.get;\n\n    if (getter === undefined) {\n      return undefined;\n    }\n\n    return getter.call(receiver);\n  }\n};\n\n/***/ }),\n/* 26 */\n/*!*******************************!*\\\n  !*** ./src/plugins/health.js ***!\n  \\*******************************/\n/*! exports provided: MSG_DAMAGE, MSG_HEAL, Health, HealthSystem */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MSG_DAMAGE\", function() { return MSG_DAMAGE; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MSG_HEAL\", function() { return MSG_HEAL; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Health\", function() { return Health; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"HealthSystem\", function() { return HealthSystem; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(/*! babel-runtime/core-js/object/get-prototype-of */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__ = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__ = __webpack_require__(/*! babel-runtime/helpers/createClass */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(/*! babel-runtime/helpers/possibleConstructorReturn */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_get__ = __webpack_require__(/*! babel-runtime/helpers/get */ 25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_get___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_get__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits__ = __webpack_require__(/*! babel-runtime/helpers/inherits */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__lib_core__ = __webpack_require__(/*! ../lib/core */ 0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__spawn__ = __webpack_require__(/*! ./spawn */ 27);\n\n\n\n\n\n\n\n\n\nvar MSG_DAMAGE = 'healthDamage';\nvar MSG_HEAL = 'healthHeal';\n\nvar health = void 0;\n\nvar Health = function (_Component) {\n  __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits___default()(Health, _Component);\n\n  function Health() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, Health);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (Health.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(Health)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(Health, null, [{\n    key: 'defaults',\n    value: function defaults() {\n      return {\n        max: 1000,\n        current: null,\n        show_bar: true\n      };\n    }\n  }, {\n    key: 'create',\n    value: function create(attrs) {\n      var c = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_get___default()(Health.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(Health), 'create', this).call(this, attrs);\n      c.current = c.max;\n      return c;\n    }\n  }]);\n\n  return Health;\n}(__WEBPACK_IMPORTED_MODULE_6__lib_core__[\"Component\"]);\n\nObject(__WEBPACK_IMPORTED_MODULE_6__lib_core__[\"registerComponent\"])('Health', Health);\n\nvar HealthSystem = function (_System) {\n  __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits___default()(HealthSystem, _System);\n\n  function HealthSystem() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, HealthSystem);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (HealthSystem.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(HealthSystem)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(HealthSystem, [{\n    key: 'initialize',\n    value: function initialize() {\n      var _this3 = this;\n\n      this.world.subscribe(MSG_DAMAGE, function (msg, data) {\n        health = _this3.world.get('Health', data.to);\n        if (health) {\n          health.current -= data.amount;\n        }\n      }).subscribe(MSG_HEAL, function (msg, data) {\n        health = _this3.world.get('Health', data.to);\n        if (health) {\n          health.current += data.amount;\n        }\n      });\n    }\n  }, {\n    key: 'matchComponent',\n    value: function matchComponent() {\n      return 'Health';\n    }\n  }, {\n    key: 'updateComponent',\n    value: function updateComponent(timeDelta, entityId, health) {\n      if (health.current === null) {\n        health.current = health.max;\n      }\n      if (health.current < 0) {\n        this.world.publish(__WEBPACK_IMPORTED_MODULE_7__spawn__[\"MSG_DESTROY\"], entityId);\n      }\n    }\n  }]);\n\n  return HealthSystem;\n}(__WEBPACK_IMPORTED_MODULE_6__lib_core__[\"System\"]);\n\nObject(__WEBPACK_IMPORTED_MODULE_6__lib_core__[\"registerSystem\"])('Health', HealthSystem);\n\n/***/ }),\n/* 27 */\n/*!******************************!*\\\n  !*** ./src/plugins/spawn.js ***!\n  \\******************************/\n/*! exports provided: MSG_SPAWN, MSG_DESTROY, MSG_DESPAWN, MSG_CAPTURE_CAMERA, Spawn, SpawnSystem */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MSG_SPAWN\", function() { return MSG_SPAWN; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MSG_DESTROY\", function() { return MSG_DESTROY; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MSG_DESPAWN\", function() { return MSG_DESPAWN; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MSG_CAPTURE_CAMERA\", function() { return MSG_CAPTURE_CAMERA; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Spawn\", function() { return Spawn; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SpawnSystem\", function() { return SpawnSystem; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(/*! babel-runtime/core-js/object/get-prototype-of */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__ = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__ = __webpack_require__(/*! babel-runtime/helpers/createClass */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(/*! babel-runtime/helpers/possibleConstructorReturn */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__ = __webpack_require__(/*! babel-runtime/helpers/inherits */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__lib_core__ = __webpack_require__(/*! ../lib/core */ 0);\n\n\n\n\n\n\n\nvar MSG_SPAWN = 'spawnSpawn';\nvar MSG_DESTROY = 'spawnDestroy';\nvar MSG_DESPAWN = 'spawnDespawn';\nvar MSG_CAPTURE_CAMERA = 'spawnCaptureCamera';\n\nvar spawn = void 0;\n\nvar Spawn = function (_Component) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(Spawn, _Component);\n\n  function Spawn() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, Spawn);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (Spawn.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(Spawn)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(Spawn, null, [{\n    key: 'defaults',\n    value: function defaults() {\n      return {\n        ttl: null,\n        age: 0,\n        destroy: false,\n        tombstone: null\n      };\n    }\n  }]);\n\n  return Spawn;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"Component\"]);\n\nObject(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerComponent\"])('Spawn', Spawn);\n\nvar SpawnSystem = function (_System) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(SpawnSystem, _System);\n\n  function SpawnSystem() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, SpawnSystem);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (SpawnSystem.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(SpawnSystem)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(SpawnSystem, [{\n    key: 'defaultOptions',\n    value: function defaultOptions() {\n      return {};\n    }\n  }, {\n    key: 'initialize',\n    value: function initialize() {\n      var _this3 = this;\n\n      this.world.subscribe(MSG_DESTROY, function (msg, entityId) {\n        spawn = _this3.world.get('Spawn', entityId);\n        if (spawn) {\n          spawn.destroy = true;\n        }\n      });\n    }\n  }, {\n    key: 'matchComponent',\n    value: function matchComponent() {\n      return 'Spawn';\n    }\n  }, {\n    key: 'updateComponent',\n    value: function updateComponent(timeDelta, entityId, spawn) {\n      if (!spawn.spawned) {\n        spawn.spawned = true;\n        this.world.publish(MSG_SPAWN, entityId);\n        if (spawn.captureCamera) {\n          this.world.publish(MSG_CAPTURE_CAMERA, entityId);\n        }\n      }\n      if (spawn.ttl !== null) {\n        spawn.age += timeDelta;\n        if (spawn.age >= spawn.ttl) {\n          spawn.destroy = true;\n        }\n      }\n      if (spawn.destroy) {\n        if (spawn.tombstone !== null) {\n          this.world.insert(typeof spawn.tombstone === 'function' ? spawn.tombstone(spawn, entityId) : spawn.tombstone);\n        }\n        this.world.publish(MSG_DESPAWN, entityId);\n        this.world.destroy(entityId);\n      }\n    }\n  }]);\n\n  return SpawnSystem;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"System\"]);\n\nObject(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerSystem\"])('Spawn', SpawnSystem);\n\n/***/ }),\n/* 28 */\n/*!*******************************!*\\\n  !*** ./src/plugins/seeker.js ***!\n  \\*******************************/\n/*! exports provided: Seeker, SeekerSystem */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Seeker\", function() { return Seeker; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SeekerSystem\", function() { return SeekerSystem; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(/*! babel-runtime/core-js/object/get-prototype-of */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__ = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__ = __webpack_require__(/*! babel-runtime/helpers/createClass */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(/*! babel-runtime/helpers/possibleConstructorReturn */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__ = __webpack_require__(/*! babel-runtime/helpers/inherits */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__lib_core__ = __webpack_require__(/*! ../lib/core */ 0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__plugins_position__ = __webpack_require__(/*! ../plugins/position */ 7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__plugins_motion__ = __webpack_require__(/*! ../plugins/motion */ 8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__lib_Vector2D__ = __webpack_require__(/*! ../lib/Vector2D */ 17);\n\n\n\n\n\n\n\n\n\n\n\n\nvar Seeker = function (_Core$Component) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(Seeker, _Core$Component);\n\n  function Seeker() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, Seeker);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (Seeker.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(Seeker)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(Seeker, null, [{\n    key: 'defaults',\n    value: function defaults() {\n      return {\n        active: true,\n        targetName: null,\n        targetEntityId: null,\n        targetPosition: null,\n        acquisitionDelay: 0,\n        radPerSec: Math.PI\n      };\n    }\n  }]);\n\n  return Seeker;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"Component\"]);\n\n__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerComponent\"]('Seeker', Seeker);\n\nvar SeekerSystem = function (_Core$System) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(SeekerSystem, _Core$System);\n\n  function SeekerSystem() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, SeekerSystem);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (SeekerSystem.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(SeekerSystem)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(SeekerSystem, [{\n    key: 'matchComponent',\n    value: function matchComponent() {\n      return 'Seeker';\n    }\n  }, {\n    key: 'initialize',\n    value: function initialize() {\n      this.vSeeker = new __WEBPACK_IMPORTED_MODULE_8__lib_Vector2D__[\"a\" /* default */]();\n      this.vTarget = new __WEBPACK_IMPORTED_MODULE_8__lib_Vector2D__[\"a\" /* default */]();\n    }\n  }, {\n    key: 'updateComponent',\n    value: function updateComponent(timeDelta, entityId, seeker) {\n\n      if (!seeker.active) {\n        return;\n      }\n\n      // Look up the orbited entity ID, if only name given.\n      if (seeker.targetName && !seeker.targetEntityId) {\n        seeker.targetEntityId = __WEBPACK_IMPORTED_MODULE_5__lib_core__[\"getComponent\"]('Name').findEntityByName(this.world, seeker.targetName);\n      }\n\n      // Process a delay before the seeker 'acquires' the target and\n      // starts steering. Makes missiles look interesting.\n      if (seeker.acquisitionDelay > 0) {\n        seeker.acquisitionDelay -= timeDelta;\n        return;\n      }\n\n      var position = this.world.get('Position', entityId);\n      var motion = this.world.get('Motion', entityId);\n      if (!position || !motion) {\n        return;\n      }\n\n      // Accept either a raw x/y coord or entity ID as target\n      var targetPosition = seeker.targetPosition;\n      if (!targetPosition) {\n        targetPosition = this.world.get('Position', seeker.targetEntityId);\n      }\n      if (!targetPosition) {\n        return;\n      }\n\n      // Set up the vectors for angle math...\n      this.vSeeker.setValues(position.x, position.y);\n      this.vTarget.setValues(targetPosition.x, targetPosition.y);\n\n      // Get the target angle, ensuring a 0..2*Math.PI range.\n      var targetAngle = this.vSeeker.angleTo(this.vTarget);\n      if (targetAngle < 0) {\n        targetAngle += 2 * Math.PI;\n      }\n\n      // Pick the direction from current to target angle\n      var direction = targetAngle < position.rotation ? -1 : 1;\n\n      // If the offset between the angles is more than half a circle, go\n      // the other way because it'll be shorter.\n      var offset = Math.abs(targetAngle - position.rotation);\n      if (offset > Math.PI) {\n        direction = 0 - direction;\n      }\n\n      // Work out the desired delta-rotation to steer toward target\n      var targetDr = direction * Math.min(seeker.radPerSec, offset / timeDelta);\n\n      // Calculate the delta-rotation impulse required to meet the goal,\n      // but constrain to the capability of the steering thrusters\n      var impulseDr = targetDr - motion.drotation;\n      if (Math.abs(impulseDr) > seeker.radPerSec) {\n        if (impulseDr > 0) {\n          impulseDr = seeker.radPerSec;\n        } else if (impulseDr < 0) {\n          impulseDr = 0 - seeker.radPerSec;\n        }\n      }\n      motion.drotation += impulseDr;\n    }\n  }]);\n\n  return SeekerSystem;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"System\"]);\n\n__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerSystem\"]('Seeker', SeekerSystem);\n\n/***/ }),\n/* 29 */\n/*!*********************************!*\\\n  !*** ./src/plugins/thruster.js ***!\n  \\*********************************/\n/*! exports provided: Thruster, ThrusterSystem */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Thruster\", function() { return Thruster; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ThrusterSystem\", function() { return ThrusterSystem; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(/*! babel-runtime/core-js/object/get-prototype-of */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__ = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__ = __webpack_require__(/*! babel-runtime/helpers/createClass */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(/*! babel-runtime/helpers/possibleConstructorReturn */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__ = __webpack_require__(/*! babel-runtime/helpers/inherits */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__lib_core__ = __webpack_require__(/*! ../lib/core */ 0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__position__ = __webpack_require__(/*! ./position */ 7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__motion__ = __webpack_require__(/*! ./motion */ 8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__lib_Vector2D__ = __webpack_require__(/*! ../lib/Vector2D */ 17);\n\n\n\n\n\n\n\n\n\n\n\n\nvar Thruster = function (_Core$Component) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(Thruster, _Core$Component);\n\n  function Thruster() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, Thruster);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (Thruster.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(Thruster)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(Thruster, null, [{\n    key: 'defaults',\n    value: function defaults() {\n      return {\n        active: true,\n        stop: false,\n        useBrakes: true,\n        deltaV: 0,\n        maxV: 0\n      };\n    }\n  }]);\n\n  return Thruster;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"Component\"]);\n__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerComponent\"]('Thruster', Thruster);\n\nvar ThrusterSystem = function (_Core$System) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(ThrusterSystem, _Core$System);\n\n  function ThrusterSystem() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, ThrusterSystem);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (ThrusterSystem.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(ThrusterSystem)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(ThrusterSystem, [{\n    key: 'matchComponent',\n    value: function matchComponent() {\n      return 'Thruster';\n    }\n  }, {\n    key: 'initialize',\n    value: function initialize() {\n      this.vInertia = new __WEBPACK_IMPORTED_MODULE_8__lib_Vector2D__[\"a\" /* default */]();\n      this.vThrust = new __WEBPACK_IMPORTED_MODULE_8__lib_Vector2D__[\"a\" /* default */]();\n      this.vBrakes = new __WEBPACK_IMPORTED_MODULE_8__lib_Vector2D__[\"a\" /* default */]();\n    }\n  }, {\n    key: 'updateComponent',\n    value: function updateComponent(timeDelta, entityId, thruster) {\n\n      if (!thruster.active) {\n        return;\n      }\n\n      var pos = this.world.get('Position', entityId);\n      var motion = this.world.get('Motion', entityId);\n      if (!pos || !motion) {\n        return;\n      }\n\n      // Inertia is current motion\n      this.vInertia.setValues(motion.dx, motion.dy);\n\n      // delta-v available for the current tick\n      var tickDeltaV = timeDelta * thruster.deltaV;\n\n      if (!thruster.stop) {\n        // Create thrust vector per rotation and add to inertia.\n        this.vThrust.setValues(tickDeltaV, 0);\n        this.vThrust.rotate(pos.rotation);\n        this.vInertia.add(this.vThrust);\n      }\n\n      if (thruster.useBrakes) {\n        // Try to enforce the max_v limit with braking thrust.\n        var maxV = thruster.stop ? 0 : thruster.maxV;\n        var currV = this.vInertia.magnitude();\n        var overV = currV - maxV;\n        if (overV > 0) {\n          // Braking delta-v is max thruster output or remaining overage,\n          // whichever is smallest. Braking vector opposes inertia.\n          var brakingDv = Math.min(tickDeltaV, overV);\n          this.vBrakes.setValues(this.vInertia.x, this.vInertia.y);\n          this.vBrakes.normalize();\n          this.vBrakes.multiplyScalar(0 - brakingDv);\n          this.vInertia.add(this.vBrakes);\n        }\n        if (thruster.stop && currV === 0) {\n          thruster.active = false;\n        }\n      }\n\n      // Update inertia. Note that we've been careful only to make changes\n      // to inertia within the delta-v of the thruster. Other influences\n      // on inertia should be preserved.\n      motion.dx = this.vInertia.x;\n      motion.dy = this.vInertia.y;\n    }\n  }]);\n\n  return ThrusterSystem;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"System\"]);\n__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerSystem\"]('Thruster', ThrusterSystem);\n\n/***/ }),\n/* 30 */\n/*!**************************************!*\\\n  !*** ./src/plugins/viewportWebGL.js ***!\n  \\**************************************/\n/*! exports provided: ViewportWebGL, WebGLSprite, registerSprite, getSprite */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ViewportWebGL\", function() { return ViewportWebGL; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"WebGLSprite\", function() { return WebGLSprite; });\n/* harmony export (immutable) */ __webpack_exports__[\"registerSprite\"] = registerSprite;\n/* harmony export (immutable) */ __webpack_exports__[\"getSprite\"] = getSprite;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_get__ = __webpack_require__(/*! babel-runtime/helpers/get */ 25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_get___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_get__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_toConsumableArray__ = __webpack_require__(/*! babel-runtime/helpers/toConsumableArray */ 130);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_toConsumableArray___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_toConsumableArray__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_keys__ = __webpack_require__(/*! babel-runtime/core-js/object/keys */ 38);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_keys___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_keys__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_object_values__ = __webpack_require__(/*! babel-runtime/core-js/object/values */ 140);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_object_values___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_object_values__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_assign__ = __webpack_require__(/*! babel-runtime/core-js/object/assign */ 40);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_assign___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_assign__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(/*! babel-runtime/core-js/object/get-prototype-of */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_classCallCheck__ = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_createClass__ = __webpack_require__(/*! babel-runtime/helpers/createClass */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(/*! babel-runtime/helpers/possibleConstructorReturn */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_babel_runtime_helpers_inherits__ = __webpack_require__(/*! babel-runtime/helpers/inherits */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_9_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__lib_core__ = __webpack_require__(/*! ../lib/core */ 0);\n\n\n\n\n\n\n\n\n\n\n\n\nvar PI2 = Math.PI * 2;\n\n// https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/Constants\nvar TYPE_SIZES = {\n  0x1406: 1, // FLOAT\n  0x8B50: 2, // FLOAT_VEC2\n  0x8B51: 3, // FLOAT_VEC3\n  0x8B52: 4 // FLOAT_VEC4\n};\n\nvar entityId = void 0,\n    position = void 0,\n    sprites = void 0,\n    sprite = void 0,\n    sceneSprite = void 0;\n\n// See also: http://phrogz.net/JS/wheeldelta.html\nvar wheelDistance = function wheelDistance(evt) {\n  if (!evt) evt = event;\n  var w = evt.wheelDelta,\n      d = evt.detail;\n  if (d) {\n    if (w) return w / d / 40 * d > 0 ? 1 : -1; // Opera\n    else return -d / 3; // Firefox;         TODO: do not /3 for OS X\n  } else return w / 120; // IE/Safari/Chrome TODO: /3 for Chrome OS X\n};\n\nvar ViewportWebGL = function (_Core$System) {\n  __WEBPACK_IMPORTED_MODULE_9_babel_runtime_helpers_inherits___default()(ViewportWebGL, _Core$System);\n\n  function ViewportWebGL() {\n    __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_classCallCheck___default()(this, ViewportWebGL);\n\n    return __WEBPACK_IMPORTED_MODULE_8_babel_runtime_helpers_possibleConstructorReturn___default()(this, (ViewportWebGL.__proto__ || __WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_object_get_prototype_of___default()(ViewportWebGL)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_createClass___default()(ViewportWebGL, [{\n    key: 'defaultOptions',\n    value: function defaultOptions() {\n      return {\n        lineWidth: 2,\n        zoom: 1.0,\n        zoomMin: 0.1,\n        zoomMax: 10.0,\n        zoomWheelFactor: 0.05,\n        gridEnabled: true,\n        gridSize: 250,\n        gridColor: 0x222222,\n        followEnabled: true,\n        followName: null,\n        followEntityId: null\n      };\n    }\n  }, {\n    key: 'initialize',\n    value: function initialize() {\n      var _this2 = this;\n\n      this.container = document.querySelector(this.options.container);\n      this.canvas = document.createElement('canvas');\n      this.container.appendChild(this.canvas);\n\n      this.initWebGL(this.canvas);\n\n      this.scene = {};\n\n      var events = {\n        'resize': function resize(ev) {\n          _this2.updateMetrics(ev);\n        },\n        'orientationchange': function orientationchange(ev) {\n          _this2.updateMetrics(ev);\n        },\n        'mousedown': function mousedown(ev) {\n          _this2.onMouseDown(ev);\n        },\n        'mousemove': function mousemove(ev) {\n          _this2.onMouseMove(ev);\n        },\n        'mouseup': function mouseup(ev) {\n          _this2.onMouseUp(ev);\n        }\n      };\n\n      for (var name in events) {\n        this.canvas.addEventListener(name, events[name], false);\n      }\n\n      // See also: http://phrogz.net/JS/wheeldelta.html\n      var boundOnMouseWheel = function boundOnMouseWheel(ev) {\n        return _this2.onMouseWheel(ev);\n      };\n      if (window.addEventListener) {\n        window.addEventListener('mousewheel', boundOnMouseWheel, false); // Chrome/Safari/Opera\n        window.addEventListener('DOMMouseScroll', boundOnMouseWheel, false); // Firefox\n      } else if (window.attachEvent) {\n        window.attachEvent('onmousewheel', boundOnMouseWheel); // IE\n      }\n\n      this.followEnabled = this.options.followEnabled;\n      this.zoom = this.options.zoom;\n      this.followEntityId = this.options.followEntityId;\n      this.gridEnabled = this.options.gridEnabled;\n      this.lineWidth = this.options.lineWidth;\n\n      this.cursorRawX = 0;\n      this.cursorRawY = 0;\n\n      this.cursorChanged = false;\n      this.cursorPosition = { x: 0, y: 0 };\n\n      this.cameraX = 0;\n      this.cameraY = 0;\n\n      this.debugDummySprite = { size: 100 };\n\n      this.updateMetrics();\n    }\n  }, {\n    key: 'onMouseWheel',\n    value: function onMouseWheel(ev) {\n      this.zoom += wheelDistance(ev) * this.options.zoomWheelFactor;\n      if (this.zoom < this.options.zoomMin) {\n        this.zoom = this.options.zoomMin;\n      }\n      if (this.zoom > this.options.zoomMax) {\n        this.zoom = this.options.zoomMax;\n      }\n    }\n\n    // TODO: Use a symbol for 'mouse{Down,Move,Up}' message?\n\n  }, {\n    key: 'onMouseDown',\n    value: function onMouseDown(ev) {\n      this.setCursor(ev.clientX, ev.clientY);\n      this.world.publish('mouseDown', this.cursorPosition);\n    }\n  }, {\n    key: 'onMouseMove',\n    value: function onMouseMove(ev) {\n      this.setCursor(ev.clientX, ev.clientY);\n      this.world.publish('mouseMove', this.cursorPosition);\n    }\n  }, {\n    key: 'onMouseUp',\n    value: function onMouseUp(ev) {\n      this.setCursor(ev.clientX, ev.clientY, true);\n      this.world.publish('mouseUp', this.cursorPosition);\n    }\n  }, {\n    key: 'setCursor',\n    value: function setCursor(x, y) {\n      var width = this.container.offsetWidth;\n      var height = this.container.offsetHeight;\n\n      this.cursorRawX = x;\n      this.cursorRawY = y;\n\n      var newX = (x - width / 2) / this.zoom + this.cameraX;\n      var newY = (y - height / 2) / this.zoom + this.cameraY;\n\n      this.cursorChanged = false;\n      if (newX !== this.cursorPosition.x || newY !== this.cursorPosition.y) {\n        this.cursorChanged = true;\n        this.cursorPosition.x = newX;\n        this.cursorPosition.y = newY;\n      }\n\n      return this.cursorPosition;\n    }\n  }, {\n    key: 'updateMetrics',\n    value: function updateMetrics() {\n      var width = this.container.offsetWidth;\n      var height = this.container.offsetHeight;\n\n      this.visibleWidth = width / this.zoom;\n      this.visibleHeight = height / this.zoom;\n\n      this.visibleLeft = 0 - this.visibleWidth / 2 + this.cameraX;\n      this.visibleTop = 0 - this.visibleHeight / 2 + this.cameraY;\n      this.visibleRight = this.visibleLeft + this.visibleWidth;\n      this.visibleBottom = this.visibleTop + this.visibleHeight;\n    }\n  }, {\n    key: 'update',\n    value: function update(timeDelta) {\n      this.updateMetrics();\n\n      this.setCursor(this.cursorRawX, this.cursorRawY);\n      // FIXME: Should be able to skip doing this unless\n      // this.cursorChanged === true, but for some reason that's not working\n      this.world.publish('mouseMove', this.cursorPosition);\n\n      sprites = this.world.get('Sprite') || {};\n\n      // Delete any stage items not found in sprites\n      for (entityId in this.scene) {\n        if (!(entityId in sprites)) {\n          delete this.scene[entityId];\n        }\n      }\n\n      // Create items for any sprites not found in stage\n      for (entityId in sprites) {\n        sprite = sprites[entityId];\n        position = this.world.get('Position', entityId);\n\n        if (!(entityId in this.scene)) {\n          this.scene[entityId] = {\n            position: [0.0, 0.0],\n            shape: getSprite(sprite.name)(sprite, entityId, timeDelta)\n          };\n        }\n        sceneSprite = this.scene[entityId];\n\n        sprite.visible = position.right > this.visibleLeft && position.left < this.visibleRight && position.bottom > this.visibleTop && position.top < this.visibleBottom;\n\n        sceneSprite.visible = sprite.visible;\n        sceneSprite.position[0] = position.x;\n        sceneSprite.position[1] = position.y;\n        sceneSprite.rotation = position.rotation;\n        sceneSprite.scale = sprite.size;\n        sceneSprite.color = [\n        // TODO: this math is terrible\n        sprite.color / 256 / 256 % 256 / 256, sprite.color / 256 % 256 / 256, sprite.color % 256 / 256, 1.0];\n      }\n    }\n  }, {\n    key: 'draw',\n    value: function draw() {\n      this.followEntity();\n\n      this.canvas.width = this.container.offsetWidth;\n      this.canvas.height = this.container.offsetHeight;\n\n      // gl.uniform1f(uniforms.uTime, currDrawTime);\n      this.setUniforms({\n        uLineWidth: [0.001 * this.lineWidth],\n        uCameraZoom: [this.zoom],\n        uCameraOrigin: [this.cameraX, this.cameraY],\n        uViewportSize: [this.canvas.clientWidth, this.canvas.clientHeight]\n      });\n\n      // this.drawBackdrop(timeDelta);\n\n      // Re-allocate larger buffer if current is too small for the scene.\n      var bufferSize = this.calculateBufferSizeForScene();\n      if (bufferSize > this.buffer.length) {\n        this.buffer = new Float32Array(Math.max(bufferSize * 1.5, this.buffer.length * 2));\n      }\n\n      var vertexCount = this.fillBufferFromScene();\n      this.gl.bufferData(this.gl.ARRAY_BUFFER, this.buffer, this.gl.STATIC_DRAW);\n      this.gl.viewport(0, 0, this.gl.canvas.width, this.gl.canvas.height);\n      this.gl.clearColor(0, 0, 0, 0.5);\n      this.gl.clear(this.gl.COLOR_BUFFER_BIT | this.gl.DEPTH_BUFFER_BIT);\n      this.gl.drawArrays(this.gl.TRIANGLE_STRIP, 0, vertexCount);\n    }\n  }, {\n    key: 'followEntity',\n    value: function followEntity() {\n      if (!this.followEnabled) {\n        this.cameraX = this.cameraY = 0;\n        return;\n      }\n      if (this.options.followName && !this.followEntityId) {\n        // Look up named entity, if necessary.\n        this.followEntityId = __WEBPACK_IMPORTED_MODULE_10__lib_core__[\"getComponent\"]('Name').findEntityByName(this.world, this.options.followName);\n      }\n      if (this.followEntityId) {\n        // Adjust the viewport center offset to the entity position\n        var _position = this.world.get('Position', this.followEntityId);\n        if (_position) {\n          this.cameraX = _position.x;\n          this.cameraY = _position.y;\n          this.setCursor(this.cursorRawX, this.cursorRawY);\n        }\n      }\n    }\n\n    /*\n    drawBackdrop() {\n      const ctx = this.backdrop;\n       if (!this.gridEnabled) {\n        ctx.visible = false;\n        return;\n      }\n       const gridSize = this.options.gridSize;\n      const gridOffsetX = this.visibleLeft % gridSize;\n      const gridOffsetY = this.visibleTop % gridSize;\n       ctx.visible = true;\n      ctx.clear();\n      ctx.lineStyle(5, this.options.gridColor);\n      ctx.position.x = this.visibleLeft;\n      ctx.position.y = this.visibleTop;\n       for (let x = -gridOffsetX; x < this.visibleWidth; x += gridSize) {\n        ctx.moveTo(x, 0);\n        ctx.lineTo(x, this.visibleHeight + gridSize);\n      }\n       for (let y = -gridOffsetY; y < this.visibleHeight; y += gridSize) {\n        ctx.moveTo(0, y);\n        ctx.lineTo(this.visibleWidth + gridSize, y);\n      }\n    }\n    */\n\n  }, {\n    key: 'initWebGL',\n    value: function initWebGL(canvas) {\n      var gl = this.gl = canvas.getContext('webgl', {\n        antialias: true,\n        preserveDrawingBuffer: true,\n        premultipliedAlpha: true\n      });\n\n      var program = this.createProgram(this.createShader(gl.VERTEX_SHADER, SHADER_VERTEX), this.createShader(gl.FRAGMENT_SHADER, SHADER_FRAGMENT));\n      gl.useProgram(program);\n\n      // Set up for data buffer\n      gl.bindBuffer(gl.ARRAY_BUFFER, gl.createBuffer());\n\n      // First pass through attributes to count total vertex size and index by name\n      var numAttribs = gl.getProgramParameter(program, gl.ACTIVE_ATTRIBUTES);\n      var attribs = {};\n      var vertexSize = 0;\n      for (var i = 0; i < numAttribs; i++) {\n        var info = gl.getActiveAttrib(program, i);\n        var size = TYPE_SIZES[info.type];\n        vertexSize += size;\n        attribs[info.name] = i;\n      }\n\n      // Second pass through attributes to set up attribute pointers into the buffer\n      var pos = 0;\n      for (var _i = 0; _i < numAttribs; _i++) {\n        var _info = gl.getActiveAttrib(program, _i);\n        var _size = TYPE_SIZES[_info.type];\n        gl.vertexAttribPointer(_i, _size, gl.FLOAT, false, vertexSize * 4, pos * 4);\n        gl.enableVertexAttribArray(_i);\n        pos += _size;\n      }\n\n      // Index uniform locations by name\n      var uniforms = {};\n      var numUniforms = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\n      for (var _i2 = 0; _i2 < numUniforms; _i2++) {\n        var _info2 = gl.getActiveUniform(program, _i2);\n        uniforms[_info2.name] = gl.getUniformLocation(program, _info2.name);\n      }\n\n      var buffer = new Float32Array(200000);\n\n      __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_assign___default()(this, { gl: gl, uniforms: uniforms, attribs: attribs, vertexSize: vertexSize, buffer: buffer });\n    }\n  }, {\n    key: 'createShader',\n    value: function createShader(type, source) {\n      var shader = this.gl.createShader(type);\n      this.gl.shaderSource(shader, source);\n      this.gl.compileShader(shader);\n      var success = this.gl.getShaderParameter(shader, this.gl.COMPILE_STATUS);\n      if (success) {\n        return shader;\n      }\n\n      // console.log('shader', type, 'failed to compile', this.gl.getShaderInfoLog(shader));\n      this.gl.deleteShader(shader);\n    }\n  }, {\n    key: 'createProgram',\n    value: function createProgram(vertexShader, fragmentShader) {\n      var program = this.gl.createProgram();\n      this.gl.attachShader(program, vertexShader);\n      this.gl.attachShader(program, fragmentShader);\n      this.gl.linkProgram(program);\n      var success = this.gl.getProgramParameter(program, this.gl.LINK_STATUS);\n      if (success) {\n        return program;\n      }\n\n      // console.log(this.gl.getProgramInfoLog(program));\n      this.gl.deleteProgram(program);\n    }\n  }, {\n    key: 'calculateBufferSizeForScene',\n    value: function calculateBufferSizeForScene() {\n      var _this3 = this;\n\n      return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_object_values___default()(this.scene).reduce(function (acc, item) {\n        return acc + (item.shape.length - 0.5) * _this3.vertexSize * 4;\n      }, 0);\n    }\n  }, {\n    key: 'fillBufferFromScene',\n    value: function fillBufferFromScene() {\n      var _this4 = this;\n\n      var vertexCount = 0;\n      var bufferPos = 0;\n      var visible = void 0,\n          shape = void 0,\n          position = void 0,\n          scale = void 0,\n          rotation = void 0,\n          deltaPosition = void 0,\n          deltaScale = void 0,\n          deltaRotation = void 0,\n          color = void 0;\n\n      var sceneKeys = __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_keys___default()(this.scene);\n      sceneKeys.sort();\n      var sceneItems = sceneKeys.map(function (key) {\n        return _this4.scene[key];\n      });\n\n      var bufferVertex = function bufferVertex(shapeIdx, lineIdx) {\n        vertexCount++;\n        _this4.buffer[bufferPos++] = lineIdx;\n        _this4.buffer[bufferPos++] = shape[shapeIdx - 1][0];\n        _this4.buffer[bufferPos++] = shape[shapeIdx - 1][1];\n        _this4.buffer[bufferPos++] = shape[shapeIdx][0];\n        _this4.buffer[bufferPos++] = shape[shapeIdx][1];\n        _this4.buffer[bufferPos++] = position[0];\n        _this4.buffer[bufferPos++] = position[1];\n        _this4.buffer[bufferPos++] = scale;\n        _this4.buffer[bufferPos++] = rotation;\n        _this4.buffer[bufferPos++] = deltaPosition[0];\n        _this4.buffer[bufferPos++] = deltaPosition[1];\n        _this4.buffer[bufferPos++] = deltaScale;\n        _this4.buffer[bufferPos++] = deltaRotation;\n        _this4.buffer[bufferPos++] = color[0];\n        _this4.buffer[bufferPos++] = color[1];\n        _this4.buffer[bufferPos++] = color[2];\n        _this4.buffer[bufferPos++] = color[3];\n      };\n\n      for (var spriteIdx = 0; spriteIdx < sceneItems.length; spriteIdx++) {\n        var _sceneItems$spriteIdx = sceneItems[spriteIdx];\n        visible = _sceneItems$spriteIdx.visible;\n        shape = _sceneItems$spriteIdx.shape;\n        var _sceneItems$spriteIdx2 = _sceneItems$spriteIdx.position;\n        position = _sceneItems$spriteIdx2 === undefined ? [0.0, 0.0] : _sceneItems$spriteIdx2;\n        var _sceneItems$spriteIdx3 = _sceneItems$spriteIdx.scale;\n        scale = _sceneItems$spriteIdx3 === undefined ? 0 : _sceneItems$spriteIdx3;\n        var _sceneItems$spriteIdx4 = _sceneItems$spriteIdx.rotation;\n        rotation = _sceneItems$spriteIdx4 === undefined ? 0 : _sceneItems$spriteIdx4;\n        var _sceneItems$spriteIdx5 = _sceneItems$spriteIdx.deltaPosition;\n        deltaPosition = _sceneItems$spriteIdx5 === undefined ? [0.0, 0.0] : _sceneItems$spriteIdx5;\n        var _sceneItems$spriteIdx6 = _sceneItems$spriteIdx.deltaScale;\n        deltaScale = _sceneItems$spriteIdx6 === undefined ? 0.0 : _sceneItems$spriteIdx6;\n        var _sceneItems$spriteIdx7 = _sceneItems$spriteIdx.deltaRotation;\n        deltaRotation = _sceneItems$spriteIdx7 === undefined ? 0.0 : _sceneItems$spriteIdx7;\n        var _sceneItems$spriteIdx8 = _sceneItems$spriteIdx.color;\n        color = _sceneItems$spriteIdx8 === undefined ? [1, 1, 1, 1] : _sceneItems$spriteIdx8;\n\n        if (!visible) {\n          continue;\n        }\n        bufferVertex(1, 0);\n        for (var shapeIdx = 1; shapeIdx < shape.length; shapeIdx += 1) {\n          bufferVertex(shapeIdx, 0);\n          bufferVertex(shapeIdx, 1);\n          bufferVertex(shapeIdx, 2);\n          bufferVertex(shapeIdx, 3);\n        }\n        bufferVertex(shape.length - 1, 3);\n      }\n\n      return vertexCount;\n    }\n  }, {\n    key: 'setUniforms',\n    value: function setUniforms(data) {\n      var _this5 = this;\n\n      __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_keys___default()(data).forEach(function (key) {\n        var _gl$;\n\n        return (_gl$ = _this5.gl['uniform' + data[key].length + 'f']).call.apply(_gl$, [_this5.gl, _this5.uniforms[key]].concat(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_toConsumableArray___default()(data[key])));\n      });\n    }\n  }]);\n\n  return ViewportWebGL;\n}(__WEBPACK_IMPORTED_MODULE_10__lib_core__[\"System\"]);\n\n__WEBPACK_IMPORTED_MODULE_10__lib_core__[\"registerSystem\"]('ViewportWebGL', ViewportWebGL);\n\nvar SHADER_VERTEX = '\\n// see also: http://m1el.github.io/woscope-how/\\nprecision mediump float;\\n#define EPS 1E-6\\n#define PI 3.141592653589793\\n#define PI_2 6.283185307179586\\n#define PI_H 1.5707963267948966\\n#define PI_Q 0.7853981633974483\\n\\nuniform float uTime;\\nuniform float uLineWidth;\\nuniform float uCameraZoom;\\nuniform float uCameraRotation;\\nuniform vec2 uCameraOrigin;\\nuniform vec2 uViewportSize;\\n\\nattribute float aIdx;\\nattribute vec4 aLine;\\nattribute vec4 aTransform;\\nattribute vec4 aDeltaTransform;\\nattribute vec4 aColor;\\n\\nvarying vec4 uvl;\\nvarying vec4 vColor;\\nvarying float vLen;\\n\\nvoid main () {\\n  float c, s;\\n\\n  mat3 mViewportToClipSpace = mat3(\\n    2.0 / uViewportSize.x, 0, 0,\\n    0, -2.0 / uViewportSize.y, 0,\\n    0, 0, 0\\n  );\\n\\n  c = cos(uCameraRotation);\\n  s = sin(uCameraRotation);\\n  mat3 mCameraRotation = mat3(\\n    c, -s, 0.0,\\n    s, c, 0.0,\\n    0.0, 0.0, 1.0\\n  );\\n\\n  mat3 mCameraOrigin = mat3(\\n    1.0, 0.0, 0.0,\\n    0.0, 1.0, 0.0,\\n    -uCameraOrigin.x, -uCameraOrigin.y, 1.0\\n  );\\n\\n  mat3 mCameraZoom = mat3(\\n    uCameraZoom, 0.0, 0.0,\\n    0.0, uCameraZoom, 0.0,\\n    0.0, 0.0, 1.0\\n  );\\n\\n  c = cos(-aTransform.w + PI_H + (aDeltaTransform.w * uTime));\\n  s = sin(-aTransform.w + PI_H + (aDeltaTransform.w * uTime));\\n  mat3 mRotation = mat3(\\n    c, -s, 0.0,\\n    s, c, 0.0,\\n    0.0, 0.0, 1.0\\n  );\\n\\n  mat3 mPosition = mat3(\\n    1.0, 0.0, 0.0,\\n    0.0, 1.0, 0.0,\\n    aTransform.x + (aDeltaTransform.x * uTime), aTransform.y + (aDeltaTransform.y * uTime), 1.0\\n  );\\n\\n  mat3 mScale = mat3(\\n    aTransform.z + (aDeltaTransform.z * uTime), 0.0, 0.0,\\n    0.0, aTransform.z + (aDeltaTransform.z * uTime), 0.0,\\n    0.0, 0.0, 1.0\\n  );\\n\\n  // TODO: Move some of these matrices into JS?\\n  mat3 mAll = mViewportToClipSpace\\n    * mCameraZoom * mCameraRotation * mCameraOrigin\\n    * mPosition * mScale * mRotation;\\n\\n  vec2 tStart = (mAll * vec3(aLine.xy, 1)).xy;\\n  vec2 tEnd = (mAll * vec3(aLine.zw, 1)).xy;\\n\\n  float tang;\\n  vec2 current;\\n  float idx = aIdx;\\n  if (idx >= 2.0) {\\n    current = tEnd;\\n    tang = 1.0;\\n  } else {\\n    current = tStart;\\n    tang = -1.0;\\n  }\\n\\n  float side = (mod(idx, 2.0)-0.5)*2.0;\\n  vec2 dir = tEnd-tStart;\\n\\n  vColor = aColor;\\n\\n  uvl.xy = vec2(tang, side);\\n  uvl.w = floor(aIdx / 4.0 + 0.5);\\n  uvl.z = length(dir);\\n  if (uvl.z > EPS) {\\n    dir = dir / uvl.z;\\n  } else {\\n    // If the segment is too short draw a square;\\n    dir = vec2(1.0, 0.0);\\n  }\\n  vec2 norm = vec2(-dir.y, dir.x);\\n  gl_Position = vec4((current+(tang*dir+norm*side)*uLineWidth),0.0,1.0);\\n}\\n';\n\nvar SHADER_FRAGMENT = '\\nprecision mediump float;\\nvarying vec4 vColor;\\n\\nvoid main (void)\\n{\\n    gl_FragColor = vColor;\\n}\\n';\n\nvar WebGLSprite = function (_Core$Component) {\n  __WEBPACK_IMPORTED_MODULE_9_babel_runtime_helpers_inherits___default()(WebGLSprite, _Core$Component);\n\n  function WebGLSprite() {\n    __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_classCallCheck___default()(this, WebGLSprite);\n\n    return __WEBPACK_IMPORTED_MODULE_8_babel_runtime_helpers_possibleConstructorReturn___default()(this, (WebGLSprite.__proto__ || __WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_object_get_prototype_of___default()(WebGLSprite)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_createClass___default()(WebGLSprite, null, [{\n    key: 'defaults',\n    value: function defaults() {\n      return {\n        name: null,\n        color: 0xffffff,\n        size: 100,\n        width: null,\n        height: null,\n        drawn: false,\n        visible: false\n      };\n    }\n  }, {\n    key: 'create',\n    value: function create(attrs) {\n      var c = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_get___default()(WebGLSprite.__proto__ || __WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_object_get_prototype_of___default()(WebGLSprite), 'create', this).call(this, attrs);\n      if (!c.width) {\n        c.width = c.size;\n      }\n      if (!c.height) {\n        c.height = c.size;\n      }\n      return c;\n    }\n  }]);\n\n  return WebGLSprite;\n}(__WEBPACK_IMPORTED_MODULE_10__lib_core__[\"Component\"]);\n\n__WEBPACK_IMPORTED_MODULE_10__lib_core__[\"registerComponent\"]('Sprite', WebGLSprite);\n\nvar spriteRegistry = {};\nfunction registerSprite(name, sprite) {\n  spriteRegistry[name] = sprite;\n}\nfunction getSprite(name) {\n  return name in spriteRegistry ? spriteRegistry[name] : spriteRegistry.default;\n}\n\nvar defaultShape = [[-0.5, 0], [0.5, 0], [0, 0], [0, -0.5], [0, 0.5], [0, 0]];\nfor (var idx = 0; idx < 8; idx++) {\n  var rot = idx * (PI2 / 8);\n  defaultShape.push([0.5 * Math.cos(rot), 0.5 * Math.sin(rot)]);\n}\ndefaultShape.push([0.5, 0]);\n\nregisterSprite('default', function () /*sprite, entityId*/{\n  return defaultShape;\n});\n\nvar heroShape = [[0.0, 0.5], [0.125, 0.4167], [0.25, 0.0], [0.375, -0.1667], [0.25, -0.5], [0.125, -0.5], [0.0625, -0.25], [-0.0625, -0.25], [-0.125, -0.5], [-0.25, -0.5], [-0.375, -0.1667], [-0.25, 0.0], [-0.125, 0.4167], [0.0, 0.5]];\nregisterSprite('hero', function () {\n  return heroShape;\n});\n\nvar repulsorShape = [[-0.50, 0.0], [-0.375, -0.50], [-0.25, -0.50], [-0.0625, 0.25], [0.0625, 0.25], [0.25, -0.50], [0.375, -0.50], [0.50, 0.0], [0.375, 0.50], [0.25, 0.50], [0.0625, -0.25], [-0.0625, -0.25], [-0.25, 0.50], [-0.375, 0.50], [-0.50, 0.0]];\n\nregisterSprite('repulsor', function () /*sprite, entityId, timeDelta, world*/{\n  return repulsorShape;\n});\n\nregisterSprite('asteroid', function (sprite) {\n  var idx = void 0;\n\n  if (!sprite.points) {\n    var NUM_POINTS = 7 + Math.floor(8 * Math.random());\n    var MAX_RADIUS = 0.50;\n    var MIN_RADIUS = 0.35;\n    var ROTATION = PI2 / NUM_POINTS;\n\n    sprite.points = [];\n    for (idx = 0; idx < NUM_POINTS; idx++) {\n      var _rot = idx * ROTATION;\n      var dist = Math.random() * (MAX_RADIUS - MIN_RADIUS) + MIN_RADIUS;\n      sprite.points.push([dist * Math.cos(_rot), dist * Math.sin(_rot)]);\n    }\n\n    sprite.points.push(sprite.points[0]);\n  }\n\n  return sprite.points;\n});\n\nregisterSprite('mine', function (sprite /*, entityId, timeDelta, world*/) {\n  if (!sprite.drawn) {\n    var NUM_POINTS = 10 + Math.floor(10 * Math.random());\n    if (NUM_POINTS % 2 !== 0) {\n      NUM_POINTS++;\n    }\n    var ROTATION = PI2 / NUM_POINTS;\n    var MAX_RADIUS = 0.6;\n    var MIN_RADIUS = 0.1;\n\n    var even = false;\n\n    sprite.legs = [];\n    for (var _idx = 0; _idx < NUM_POINTS; _idx++) {\n      var dist = even ? 0.1 : Math.random() * (MAX_RADIUS - MIN_RADIUS) + MIN_RADIUS;\n      var _rot2 = _idx * ROTATION;\n      sprite.legs.push([dist * Math.cos(_rot2), dist * Math.sin(_rot2)]);\n      even = !even;\n    }\n    sprite.legs.push([sprite.legs[0][0], sprite.legs[0][1]]);\n    sprite.shape = sprite.legs;\n    sprite.drawn = true;\n  }\n\n  return sprite.shape;\n\n  /*\n  if (sprite.drawn && Math.random() < 0.15) {\n    sprite.shape = sprite.legs.map(p => [\n      p[0] * (0.9 + 0.5 * Math.random()),\n      p[1] * (0.9 + 0.5 * Math.random())\n    ]);\n  }\n  return sprite.shape;\n  */\n});\n\n/***/ }),\n/* 31 */\n/*!************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_is-object.js ***!\n  \\************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports) {\n\nmodule.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n\n\n/***/ }),\n/* 32 */\n/*!****************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_property-desc.js ***!\n  \\****************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports) {\n\nmodule.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n\n\n/***/ }),\n/* 33 */\n/*!*************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_object-pie.js ***!\n  \\*************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports) {\n\nexports.f = {}.propertyIsEnumerable;\n\n\n/***/ }),\n/* 34 */\n/*!************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_to-object.js ***!\n  \\************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 7.1.13 ToObject(argument)\nvar defined = __webpack_require__(/*! ./_defined */ 45);\nmodule.exports = function (it) {\n  return Object(defined(it));\n};\n\n\n/***/ }),\n/* 35 */\n/*!*******************************!*\\\n  !*** ./src/plugins/bounce.js ***!\n  \\*******************************/\n/*! exports provided: BounceComponent, BounceSystem */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BounceComponent\", function() { return BounceComponent; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BounceSystem\", function() { return BounceSystem; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(/*! babel-runtime/core-js/object/get-prototype-of */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__ = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__ = __webpack_require__(/*! babel-runtime/helpers/createClass */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(/*! babel-runtime/helpers/possibleConstructorReturn */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__ = __webpack_require__(/*! babel-runtime/helpers/inherits */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__lib_core__ = __webpack_require__(/*! ../lib/core */ 0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__position__ = __webpack_require__(/*! ./position */ 7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__motion__ = __webpack_require__(/*! ./motion */ 8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__health__ = __webpack_require__(/*! ./health */ 26);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__lib_Vector2D__ = __webpack_require__(/*! ../lib/Vector2D */ 17);\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar BounceComponent = function (_Core$Component) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(BounceComponent, _Core$Component);\n\n  function BounceComponent() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, BounceComponent);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (BounceComponent.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(BounceComponent)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(BounceComponent, null, [{\n    key: 'defaults',\n    value: function defaults() {\n      return {\n        mass: 1000.0\n      };\n    }\n  }]);\n\n  return BounceComponent;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"Component\"]);\n\n__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerComponent\"]('Bounce', BounceComponent);\n\nvar BounceSystem = function (_Core$System) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(BounceSystem, _Core$System);\n\n  function BounceSystem() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, BounceSystem);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (BounceSystem.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(BounceSystem)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(BounceSystem, [{\n    key: 'matchComponent',\n    value: function matchComponent() {\n      return 'Bounce';\n    }\n  }, {\n    key: 'initialize',\n    value: function initialize() {\n      this.dn = new __WEBPACK_IMPORTED_MODULE_9__lib_Vector2D__[\"a\" /* default */]();\n      this.dt = new __WEBPACK_IMPORTED_MODULE_9__lib_Vector2D__[\"a\" /* default */]();\n      this.mt = new __WEBPACK_IMPORTED_MODULE_9__lib_Vector2D__[\"a\" /* default */]();\n      this.v1 = new __WEBPACK_IMPORTED_MODULE_9__lib_Vector2D__[\"a\" /* default */]();\n      this.v2 = new __WEBPACK_IMPORTED_MODULE_9__lib_Vector2D__[\"a\" /* default */]();\n      this.v1n = new __WEBPACK_IMPORTED_MODULE_9__lib_Vector2D__[\"a\" /* default */]();\n      this.v1t = new __WEBPACK_IMPORTED_MODULE_9__lib_Vector2D__[\"a\" /* default */]();\n      this.v2n = new __WEBPACK_IMPORTED_MODULE_9__lib_Vector2D__[\"a\" /* default */]();\n      this.v2t = new __WEBPACK_IMPORTED_MODULE_9__lib_Vector2D__[\"a\" /* default */]();\n    }\n  }, {\n    key: 'update',\n    value: function update(timeDelta) {\n      var entities = this.world;\n      var matches = this.getMatchingComponents();\n\n      var pairs = {};\n      for (var aEntityId in matches) {\n\n        // const bounce = matches[aEntityId];\n        var aCollidable = entities.get('Collidable', aEntityId);\n\n        for (var bEntityId in aCollidable.inCollisionWith) {\n          var pair = [aEntityId, bEntityId];\n          pair.sort();\n          pairs[pair.join(':')] = pair;\n        }\n\n        // TODO: Process world boundary edge bounce?\n      }\n\n      for (var key in pairs) {\n        var _aEntityId = pairs[key][0];\n        var aBouncer = entities.get('Bounce', _aEntityId);\n        if (!aBouncer) {\n          continue;\n        }\n\n        var _bEntityId = pairs[key][1];\n        var bBouncer = entities.get('Bounce', _bEntityId);\n        if (!bBouncer) {\n          continue;\n        }\n\n        this.resolveElasticCollision(timeDelta, _aEntityId, aBouncer, _bEntityId, bBouncer);\n      }\n    }\n\n    // See also:\n    // http://en.m.wikipedia.org/wiki/Elastic_collision\n    // http://en.m.wikipedia.org/wiki/Dot_product\n    // https://github.com/Edifear/volleyball/blob/master/collision.html\n    // https://github.com/DominikWidomski/Processing/blob/master/sketch_canvas_red_particles/particles.pde#L47\n\n  }, {\n    key: 'resolveElasticCollision',\n    value: function resolveElasticCollision(timeDelta, aEntityId, aBouncer, bEntityId, bBouncer) {\n\n      var entities = this.world;\n\n      var aPosition = entities.get('Position', aEntityId);\n      var aSprite = entities.get('Sprite', aEntityId);\n      var aMotion = entities.get('Motion', aEntityId);\n\n      var bPosition = entities.get('Position', bEntityId);\n      var bSprite = entities.get('Sprite', bEntityId);\n      var bMotion = entities.get('Motion', bEntityId);\n\n      // First, back both entities off to try to prevent sticking\n      /*\r\n      aPosition.x -= aMotion.dx * timeDelta;\r\n      aPosition.y -= aMotion.dy * timeDelta;\r\n      bPosition.x -= bMotion.dx * timeDelta;\r\n      bPosition.y -= bMotion.dy * timeDelta;\r\n      const radii, dx, dy;\r\n      while (true) {\r\n        aPosition.x -= aMotion.dx * timeDelta;\r\n        aPosition.y -= aMotion.dy * timeDelta;\r\n        bPosition.x -= bMotion.dx * timeDelta;\r\n        bPosition.y -= bMotion.dy * timeDelta;\r\n          radii = (aSprite.size + bSprite.size) / 2;\r\n        dx = aPosition.x - bPosition.x;\r\n        dy = aPosition.y - bPosition.y;\r\n        if (dx*dx + dy*dy > radii*radii) { break; }\r\n      }\r\n      */\n\n      // Vector between entities\n      this.dn.setValues(aPosition.x - bPosition.x, aPosition.y - bPosition.y);\n\n      // Distance between entities\n      var delta = this.dn.magnitude();\n\n      // Normal vector of the collision plane\n      this.dn.normalize();\n\n      // Tangential vector of the collision plane\n      this.dt.setValues(this.dn.y, -this.dn.x);\n\n      // HACK: avoid divide by zero\n      if (delta === 0) {\n        bPosition.x += 0.01;\n      }\n\n      // Get total mass for entities\n      var m1 = aBouncer.mass;\n      var m2 = bBouncer.mass;\n      var M = m1 + m2;\n\n      // Minimum translation vector to push entities apart\n      this.mt.setValues(this.dn.x * (aSprite.width + bSprite.width - delta) * 1.1, this.dn.y * (aSprite.height + bSprite.height - delta) * 1.1);\n\n      // Velocity vectors of entities before collision\n      this.v1.setValues(aMotion ? aMotion.dx : 0, aMotion ? aMotion.dy : 0);\n      this.v2.setValues(bMotion ? bMotion.dx : 0, bMotion ? bMotion.dy : 0);\n\n      // split the velocity vector of the first entity into a normal\n      // and a tangential component in respect of the collision plane\n      this.v1n.setValues(this.dn.x * this.v1.dot(this.dn), this.dn.y * this.v1.dot(this.dn));\n      this.v1t.setValues(this.dt.x * this.v1.dot(this.dt), this.dt.y * this.v1.dot(this.dt));\n\n      // split the velocity vector of the second entity into a normal\n      // and a tangential component in respect of the collision plane\n      this.v2n.setValues(this.dn.x * this.v2.dot(this.dn), this.dn.y * this.v2.dot(this.dn));\n      this.v2t.setValues(this.dt.x * this.v2.dot(this.dt), this.dt.y * this.v2.dot(this.dt));\n\n      // calculate new velocity vectors of the entities, the tangential\n      // component stays the same, the normal component changes analog to\n      // the 1-Dimensional case\n\n      if (aMotion) {\n        var aFactor = (m1 - m2) / M * this.v1n.magnitude() + 2 * m2 / M * this.v2n.magnitude();\n        aMotion.dx = this.v1t.x + this.dn.x * aFactor;\n        aMotion.dy = this.v1t.y + this.dn.y * aFactor;\n        this.processDamage(aEntityId, bEntityId, aMotion, aBouncer, m1);\n      }\n\n      if (bMotion) {\n        var bFactor = (m2 - m1) / M * this.v2n.magnitude() + 2 * m1 / M * this.v1n.magnitude();\n        bMotion.dx = this.v2t.x - this.dn.x * bFactor;\n        bMotion.dy = this.v2t.y - this.dn.y * bFactor;\n        this.processDamage(bEntityId, aEntityId, bMotion, bBouncer, m1);\n      }\n    }\n  }, {\n    key: 'processDamage',\n    value: function processDamage(eid, c_eid, v_motion, bouncer, m1) {\n      if (!bouncer.damage) {\n        return;\n      }\n\n      // Convert a fraction of the rebound velocity into damage by mass\n      var dmg = Math.sqrt(v_motion.dx * v_motion.dx + v_motion.dy * v_motion.dy) * bouncer.damage * m1;\n\n      this.world.publish(__WEBPACK_IMPORTED_MODULE_8__health__[\"MSG_DAMAGE\"], {\n        to: eid,\n        from: c_eid,\n        amount: dmg / 2\n      });\n\n      this.world.publish(__WEBPACK_IMPORTED_MODULE_8__health__[\"MSG_DAMAGE\"], {\n        to: c_eid,\n        from: eid,\n        amount: dmg / 2\n      });\n    }\n  }]);\n\n  return BounceSystem;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"System\"]);\n\n__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerSystem\"]('Bounce', BounceSystem);\n\n/***/ }),\n/* 36 */\n/*!************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_iterators.js ***!\n  \\************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports) {\n\nmodule.exports = {};\n\n\n/***/ }),\n/* 37 */\n/*!**********************************!*\\\n  !*** ./src/plugins/collision.js ***!\n  \\**********************************/\n/*! exports provided: Collidable, CollisionSystem */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Collidable\", function() { return Collidable; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CollisionSystem\", function() { return CollisionSystem; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(/*! babel-runtime/core-js/object/get-prototype-of */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__ = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__ = __webpack_require__(/*! babel-runtime/helpers/createClass */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(/*! babel-runtime/helpers/possibleConstructorReturn */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__ = __webpack_require__(/*! babel-runtime/helpers/inherits */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__lib_core__ = __webpack_require__(/*! ../lib/core */ 0);\n\n\n\n\n\n\n\nvar Collidable = function (_Core$Component) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(Collidable, _Core$Component);\n\n  function Collidable() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, Collidable);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (Collidable.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(Collidable)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(Collidable, null, [{\n    key: 'defaults',\n    value: function defaults() {\n      return {\n        inCollision: false,\n        inCollisionWith: {}\n      };\n    }\n  }]);\n\n  return Collidable;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"Component\"]);\n\n__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerComponent\"]('Collidable', Collidable);\n\nvar match = void 0,\n    matches = void 0,\n    entityId = void 0,\n    entityId2 = void 0,\n    position = void 0,\n    aCollidable = void 0,\n    bCollidable = void 0,\n    dx = void 0,\n    dy = void 0,\n    radii = void 0;\n\nvar CollisionSystem = function (_Core$System) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(CollisionSystem, _Core$System);\n\n  function CollisionSystem() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, CollisionSystem);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (CollisionSystem.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(CollisionSystem)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(CollisionSystem, [{\n    key: 'defaultOptions',\n    value: function defaultOptions() {\n      return {\n        positionSystemName: 'Position'\n      };\n    }\n  }, {\n    key: 'matchComponent',\n    value: function matchComponent() {\n      return 'Collidable';\n    }\n  }, {\n    key: 'initialize',\n    value: function initialize() {\n      var _this3 = this;\n\n      this.positionSystem = this.world.getSystem(this.options.positionSystemName);\n      this.width = this.options.width;\n      this.height = this.options.height;\n      this.retrieveBounds = {};\n      this.checkCollisionBound = function (neighbor, component) {\n        return _this3.checkCollision(neighbor, component);\n      };\n    }\n  }, {\n    key: 'update',\n    value: function update() /* timeDelta */{\n      matches = this.getMatchingComponents();\n      for (entityId in matches) {\n        match = matches[entityId];\n        match.inCollision = false;\n        for (entityId2 in match.inCollisionWith) {\n          delete match.inCollisionWith[entityId2];\n        }\n      }\n      for (entityId in matches) {\n        position = this.world.get('Position', entityId);\n        if (position) {\n          this.positionSystem.quadtree.iterate(position, this.checkCollisionBound, position);\n        }\n      }\n    }\n  }, {\n    key: 'checkCollision',\n    value: function checkCollision(bPosition, aPosition) {\n      if (aPosition.entityId === bPosition.entityId) {\n        return;\n      }\n\n      aCollidable = this.world.get('Collidable', aPosition.entityId);\n      bCollidable = this.world.get('Collidable', bPosition.entityId);\n\n      if (!aCollidable || !bCollidable) {\n        return;\n      }\n\n      dx = aPosition.x - bPosition.x;\n      dy = aPosition.y - bPosition.y;\n\n      // TODO: Pluggable shape intersection detection here?\n\n      // Check collision circle via distance\n      radii = (aPosition.width + bPosition.width) / 2;\n      if (dx * dx + dy * dy > radii * radii) {\n        return;\n      }\n\n      aCollidable.inCollision = true;\n      aCollidable.inCollisionWith[bPosition.entityId] = 1;\n\n      bCollidable.inCollision = true;\n      bCollidable.inCollisionWith[aPosition.entityId] = 1;\n    }\n  }, {\n    key: 'draw',\n    value: function draw() /* timeDelta */{\n      var g = this.getDebugGraphics();\n      if (!g) {\n        return;\n      }\n\n      g.lineStyle(4, 0x999999);\n      var collidables = this.world.get('Collidable');\n      for (var _entityId in collidables) {\n        var collidable = collidables[_entityId];\n        var _position = this.world.get('Position', _entityId);\n\n        if (collidable.inCollision) {\n          g.drawCircle(_position.x, _position.y, 40);\n        }\n      }\n    }\n  }]);\n\n  return CollisionSystem;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"System\"]);\n\n__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerSystem\"]('Collision', CollisionSystem);\n\n/***/ }),\n/* 38 */\n/*!***********************************************************!*\\\n  !*** ./node_modules/babel-runtime/core-js/object/keys.js ***!\n  \\***********************************************************/\n/*! no static exports found */\n/*! exports used: default */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(/*! core-js/library/fn/object/keys */ 125), __esModule: true };\n\n/***/ }),\n/* 39 */\n/*!********************************************!*\\\n  !*** ./src/plugins/playerInputSteering.js ***!\n  \\********************************************/\n/*! exports provided: PlayerInputSteering, PlayerInputSteeringSystem */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PlayerInputSteering\", function() { return PlayerInputSteering; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PlayerInputSteeringSystem\", function() { return PlayerInputSteeringSystem; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys__ = __webpack_require__(/*! babel-runtime/core-js/object/keys */ 38);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_get__ = __webpack_require__(/*! babel-runtime/helpers/get */ 25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_get___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_get__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(/*! babel-runtime/core-js/object/get-prototype-of */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck__ = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass__ = __webpack_require__(/*! babel-runtime/helpers/createClass */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(/*! babel-runtime/helpers/possibleConstructorReturn */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_inherits__ = __webpack_require__(/*! babel-runtime/helpers/inherits */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__lib_core__ = __webpack_require__(/*! ../lib/core */ 0);\n\n\n\n\n\n\n\n\n\nvar PlayerInputSteering = function (_Component) {\n  __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_inherits___default()(PlayerInputSteering, _Component);\n\n  function PlayerInputSteering() {\n    __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck___default()(this, PlayerInputSteering);\n\n    return __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn___default()(this, (PlayerInputSteering.__proto__ || __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of___default()(PlayerInputSteering)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass___default()(PlayerInputSteering, null, [{\n    key: 'defaults',\n    value: function defaults() {\n      return {\n        active: true,\n        radPerSec: Math.PI * 2\n      };\n    }\n  }]);\n\n  return PlayerInputSteering;\n}(__WEBPACK_IMPORTED_MODULE_7__lib_core__[\"Component\"]);\n\nObject(__WEBPACK_IMPORTED_MODULE_7__lib_core__[\"registerComponent\"])('PlayerInputSteering', PlayerInputSteering);\n\nvar PI2 = Math.PI * 2;\n\nvar PlayerInputSteeringSystem = function (_System) {\n  __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_inherits___default()(PlayerInputSteeringSystem, _System);\n\n  function PlayerInputSteeringSystem() {\n    __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck___default()(this, PlayerInputSteeringSystem);\n\n    return __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn___default()(this, (PlayerInputSteeringSystem.__proto__ || __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of___default()(PlayerInputSteeringSystem)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass___default()(PlayerInputSteeringSystem, [{\n    key: 'defaultOptions',\n    value: function defaultOptions() {\n      return {\n        gamepadDeadzone: 0.2\n      };\n    }\n  }, {\n    key: 'matchComponent',\n    value: function matchComponent() {\n      return 'PlayerInputSteering';\n    }\n  }, {\n    key: 'initialize',\n    value: function initialize() {\n      var _this3 = this;\n\n      this.gamepad = { active: false };\n      this.pointer = { active: false, x: 0, y: 0 };\n      this.keys = { active: false };\n      this.touch = { active: false, x: 0, y: 0 };\n\n      this.world.subscribe('mouseDown', function (msg, cursorPosition) {\n        return _this3.setPointer(true, cursorPosition);\n      }).subscribe('mouseUp', function (msg, cursorPosition) {\n        return _this3.setPointer(false, cursorPosition);\n      }).subscribe('mouseMove', function (msg, cursorPosition) {\n        return _this3.setPointer(_this3.pointer.active, cursorPosition);\n      });\n\n      var windowEvents = {\n        keydown: this.handleKeyDown,\n        keyup: this.handleKeyUp\n      };\n      __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys___default()(windowEvents).forEach(function (k) {\n        return window.addEventListener(k, windowEvents[k].bind(_this3));\n      });\n    }\n  }, {\n    key: 'setPointer',\n    value: function setPointer(active, position) {\n      this.pointer.active = active;\n      this.pointer.x = position.x;\n      this.pointer.y = position.y;\n    }\n  }, {\n    key: 'update',\n    value: function update(timeDelta) {\n      this.updateGamepads(timeDelta);\n      this.updateKeyboard(timeDelta);\n      __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_get___default()(PlayerInputSteeringSystem.prototype.__proto__ || __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of___default()(PlayerInputSteeringSystem.prototype), 'update', this).call(this, timeDelta);\n    }\n  }, {\n    key: 'updateComponent',\n    value: function updateComponent(timeDelta, entityId, steering) {\n      var thruster = this.world.get('Thruster', entityId);\n      var motion = this.world.get('Motion', entityId);\n\n      thruster.active = true;\n      thruster.stop = false;\n\n      if (this.keys.active) {\n        return this.updateComponentFromKeyboard(timeDelta, entityId, steering);\n      }\n\n      if (this.pointer.active) {\n        return this.updateComponentFromPointer(timeDelta, entityId, steering);\n      }\n\n      if (this.gamepad.active) {\n        return this.updateComponentFromGamepad(timeDelta, entityId, steering);\n      }\n\n      thruster.stop = true;\n      motion.drotation = 0;\n    }\n  }, {\n    key: 'updateComponentFromPointer',\n    value: function updateComponentFromPointer(timeDelta, entityId, steering) {\n      var position = this.world.get('Position', entityId);\n      this.updateMotionFromTargetAngle(timeDelta, entityId, steering, Math.atan2(this.pointer.y - position.y, this.pointer.x - position.x));\n    }\n  }, {\n    key: 'updateComponentFromGamepad',\n    value: function updateComponentFromGamepad(timeDelta, entityId, steering) {\n      this.updateMotionFromTargetAngle(timeDelta, entityId, steering, Math.atan2(this.gamepad.axis1, this.gamepad.axis0));\n    }\n  }, {\n    key: 'updateComponentFromKeyboard',\n    value: function updateComponentFromKeyboard(timeDelta, entityId, steering) {\n      var thruster = this.world.get('Thruster', entityId);\n      var motion = this.world.get('Motion', entityId);\n\n      var dleft = this.keys[65] || this.keys[37] || this.gamepad.button13;\n      var dright = this.keys[68] || this.keys[39] || this.gamepad.button14;\n      var dup = this.keys[87] || this.keys[38] || this.gamepad.button11;\n      // const ddown  = (this.keys[83] || this.keys[40] || this.gamepad.button12);\n\n      if (dup) {\n        thruster.active = true;\n      } else {\n        thruster.stop = true;\n      }\n\n      var direction = dleft ? -1 : dright ? 1 : 0;\n      var targetDr = direction * steering.radPerSec;\n      motion.drotation = targetDr;\n    }\n  }, {\n    key: 'updateGamepads',\n    value: function updateGamepads() {\n      var _this4 = this;\n\n      var gamepads = navigator.getGamepads ? navigator.getGamepads() : [];\n\n      // TODO: specify which gamepad, i.e. for multiplayer\n      for (var i = 0; i < gamepads.length; i++) {\n        var gp = gamepads[i];\n        if (!gp || !gp.connected) continue;\n        gp.buttons.forEach(function (val, idx) {\n          return _this4.gamepad['button' + idx] = val.pressed;\n        });\n        gp.axes.forEach(function (val, idx) {\n          return _this4.gamepad['axis' + idx] = val;\n        });\n        break; // stop after the first gamepad\n      }\n\n      __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys___default()(this.gamepad).forEach(function (k) {\n        if (!_this4.gamepad[k]) {\n          delete _this4.gamepad[k];\n        }\n      });\n\n      var axisX = this.gamepad.axis0;\n      var axisY = this.gamepad.axis1;\n      this.gamepad.active = (Math.abs(axisX) > 0 || Math.abs(axisY) > 0) && Math.sqrt(axisX * axisX + axisY * axisY) > this.options.gamepadDeadzone;\n    }\n  }, {\n    key: 'updateKeyboard',\n    value: function updateKeyboard() {\n      var dleft = this.keys[65] || this.keys[37] || this.gamepad.button13;\n      var dright = this.keys[68] || this.keys[39] || this.gamepad.button14;\n      var dup = this.keys[87] || this.keys[38] || this.gamepad.button11;\n      var ddown = this.keys[83] || this.keys[40] || this.gamepad.button12;\n\n      this.keys.active = dleft || dright || dup || ddown;\n    }\n  }, {\n    key: 'handleKeyDown',\n    value: function handleKeyDown(ev) {\n      this.keys[ev.keyCode] = true;\n      ev.preventDefault();\n    }\n  }, {\n    key: 'handleKeyUp',\n    value: function handleKeyUp(ev) {\n      delete this.keys[ev.keyCode];\n      ev.preventDefault();\n    }\n  }, {\n    key: 'updateMotionFromTargetAngle',\n    value: function updateMotionFromTargetAngle(timeDelta, entityId, steering, targetAngleRaw) {\n      var position = this.world.get('Position', entityId);\n      var motion = this.world.get('Motion', entityId);\n\n      var targetAngle = targetAngleRaw < 0 ? targetAngleRaw + PI2 : targetAngleRaw;\n\n      // Pick the direction from current to target angle\n      var direction = targetAngle < position.rotation ? -1 : 1;\n\n      // If the offset between the angles is more than half a circle, go\n      // the other way because it'll be shorter.\n      var offset = Math.abs(targetAngle - position.rotation);\n      if (offset > Math.PI) {\n        direction = 0 - direction;\n      }\n\n      // Work out the desired delta-rotation to steer toward target\n      var targetDr = direction * Math.min(steering.radPerSec, offset / timeDelta);\n\n      // Calculate the delta-rotation impulse required to meet the goal,\n      // but constrain to the capability of the steering thrusters\n      var impulseDr = targetDr - motion.drotation;\n      if (Math.abs(impulseDr) > steering.radPerSec) {\n        if (impulseDr > 0) {\n          impulseDr = steering.radPerSec;\n        } else if (impulseDr < 0) {\n          impulseDr = 0 - steering.radPerSec;\n        }\n      }\n\n      motion.drotation += impulseDr;\n    }\n  }]);\n\n  return PlayerInputSteeringSystem;\n}(__WEBPACK_IMPORTED_MODULE_7__lib_core__[\"System\"]);\n\nObject(__WEBPACK_IMPORTED_MODULE_7__lib_core__[\"registerSystem\"])('PlayerInputSteering', PlayerInputSteeringSystem);\n\n/***/ }),\n/* 40 */\n/*!*************************************************************!*\\\n  !*** ./node_modules/babel-runtime/core-js/object/assign.js ***!\n  \\*************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(/*! core-js/library/fn/object/assign */ 78), __esModule: true };\n\n/***/ }),\n/* 41 */\n/*!******************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_uid.js ***!\n  \\******************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports) {\n\nvar id = 0;\nvar px = Math.random();\nmodule.exports = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n\n\n/***/ }),\n/* 42 */\n/*!******************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_ctx.js ***!\n  \\******************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// optional / simple context binding\nvar aFunction = __webpack_require__(/*! ./_a-function */ 80);\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n\n\n/***/ }),\n/* 43 */\n/*!***************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_to-primitive.js ***!\n  \\***************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = __webpack_require__(/*! ./_is-object */ 31);\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n\n\n/***/ }),\n/* 44 */\n/*!******************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_cof.js ***!\n  \\******************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports) {\n\nvar toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n\n\n/***/ }),\n/* 45 */\n/*!**********************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_defined.js ***!\n  \\**********************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports) {\n\n// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n\n\n/***/ }),\n/* 46 */\n/*!*************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_to-integer.js ***!\n  \\*************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports) {\n\n// 7.1.4 ToInteger\nvar ceil = Math.ceil;\nvar floor = Math.floor;\nmodule.exports = function (it) {\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n\n\n/***/ }),\n/* 47 */\n/*!*************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_shared-key.js ***!\n  \\*************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar shared = __webpack_require__(/*! ./_shared */ 48)('keys');\nvar uid = __webpack_require__(/*! ./_uid */ 41);\nmodule.exports = function (key) {\n  return shared[key] || (shared[key] = uid(key));\n};\n\n\n/***/ }),\n/* 48 */\n/*!*********************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_shared.js ***!\n  \\*********************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar global = __webpack_require__(/*! ./_global */ 12);\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || (global[SHARED] = {});\nmodule.exports = function (key) {\n  return store[key] || (store[key] = {});\n};\n\n\n/***/ }),\n/* 49 */\n/*!****************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_enum-bug-keys.js ***!\n  \\****************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports) {\n\n// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');\n\n\n/***/ }),\n/* 50 */\n/*!**************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_object-gops.js ***!\n  \\**************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports) {\n\nexports.f = Object.getOwnPropertySymbols;\n\n\n/***/ }),\n/* 51 */\n/*!*************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_object-sap.js ***!\n  \\*************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// most Object methods by ES6 should accept primitives\nvar $export = __webpack_require__(/*! ./_export */ 10);\nvar core = __webpack_require__(/*! ./_core */ 6);\nvar fails = __webpack_require__(/*! ./_fails */ 24);\nmodule.exports = function (KEY, exec) {\n  var fn = (core.Object || {})[KEY] || Object[KEY];\n  var exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function () { fn(1); }), 'Object', exp);\n};\n\n\n/***/ }),\n/* 52 */\n/*!**********************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_library.js ***!\n  \\**********************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports) {\n\nmodule.exports = true;\n\n\n/***/ }),\n/* 53 */\n/*!****************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_object-create.js ***!\n  \\****************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\nvar anObject = __webpack_require__(/*! ./_an-object */ 23);\nvar dPs = __webpack_require__(/*! ./_object-dps */ 93);\nvar enumBugKeys = __webpack_require__(/*! ./_enum-bug-keys */ 49);\nvar IE_PROTO = __webpack_require__(/*! ./_shared-key */ 47)('IE_PROTO');\nvar Empty = function () { /* empty */ };\nvar PROTOTYPE = 'prototype';\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar createDict = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = __webpack_require__(/*! ./_dom-create */ 62)('iframe');\n  var i = enumBugKeys.length;\n  var lt = '<';\n  var gt = '>';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  __webpack_require__(/*! ./_html */ 94).appendChild(iframe);\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n  // createDict = iframe.contentWindow.Object;\n  // html.removeChild(iframe);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n  iframeDocument.close();\n  createDict = iframeDocument.F;\n  while (i--) delete createDict[PROTOTYPE][enumBugKeys[i]];\n  return createDict();\n};\n\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty();\n    Empty[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = createDict();\n  return Properties === undefined ? result : dPs(result, Properties);\n};\n\n\n/***/ }),\n/* 54 */\n/*!********************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_set-to-string-tag.js ***!\n  \\********************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar def = __webpack_require__(/*! ./_object-dp */ 13).f;\nvar has = __webpack_require__(/*! ./_has */ 16);\nvar TAG = __webpack_require__(/*! ./_wks */ 9)('toStringTag');\n\nmodule.exports = function (it, tag, stat) {\n  if (it && !has(it = stat ? it : it.prototype, TAG)) def(it, TAG, { configurable: true, value: tag });\n};\n\n\n/***/ }),\n/* 55 */\n/*!**********************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_wks-ext.js ***!\n  \\**********************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports.f = __webpack_require__(/*! ./_wks */ 9);\n\n\n/***/ }),\n/* 56 */\n/*!*************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_wks-define.js ***!\n  \\*************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar global = __webpack_require__(/*! ./_global */ 12);\nvar core = __webpack_require__(/*! ./_core */ 6);\nvar LIBRARY = __webpack_require__(/*! ./_library */ 52);\nvar wksExt = __webpack_require__(/*! ./_wks-ext */ 55);\nvar defineProperty = __webpack_require__(/*! ./_object-dp */ 13).f;\nmodule.exports = function (name) {\n  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});\n  if (name.charAt(0) != '_' && !(name in $Symbol)) defineProperty($Symbol, name, { value: wksExt.f(name) });\n};\n\n\n/***/ }),\n/* 57 */\n/*!**************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_object-gopd.js ***!\n  \\**************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar pIE = __webpack_require__(/*! ./_object-pie */ 33);\nvar createDesc = __webpack_require__(/*! ./_property-desc */ 32);\nvar toIObject = __webpack_require__(/*! ./_to-iobject */ 11);\nvar toPrimitive = __webpack_require__(/*! ./_to-primitive */ 43);\nvar has = __webpack_require__(/*! ./_has */ 16);\nvar IE8_DOM_DEFINE = __webpack_require__(/*! ./_ie8-dom-define */ 61);\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nexports.f = __webpack_require__(/*! ./_descriptors */ 14) ? gOPD : function getOwnPropertyDescriptor(O, P) {\n  O = toIObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return gOPD(O, P);\n  } catch (e) { /* empty */ }\n  if (has(O, P)) return createDesc(!pIE.f.call(O, P), O[P]);\n};\n\n\n/***/ }),\n/* 58 */\n/*!***********************************!*\\\n  !*** ./src/plugins/hordeSpawn.js ***!\n  \\***********************************/\n/*! exports provided: HordeSpawn, HordeSpawnSystem */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"HordeSpawn\", function() { return HordeSpawn; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"HordeSpawnSystem\", function() { return HordeSpawnSystem; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys__ = __webpack_require__(/*! babel-runtime/core-js/object/keys */ 38);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(/*! babel-runtime/core-js/object/get-prototype-of */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck__ = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass__ = __webpack_require__(/*! babel-runtime/helpers/createClass */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(/*! babel-runtime/helpers/possibleConstructorReturn */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits__ = __webpack_require__(/*! babel-runtime/helpers/inherits */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__lib_core__ = __webpack_require__(/*! ../lib/core */ 0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__spawn__ = __webpack_require__(/*! ./spawn */ 27);\n\n\n\n\n\n\n\n\n\n\n// Commonly used temp variables, pre-declared early.\nvar entityId = void 0,\n    matches = void 0,\n    sprite = void 0;\n\nvar HordeSpawn = function (_Component) {\n  __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits___default()(HordeSpawn, _Component);\n\n  function HordeSpawn() {\n    __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck___default()(this, HordeSpawn);\n\n    return __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn___default()(this, (HordeSpawn.__proto__ || __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of___default()(HordeSpawn)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass___default()(HordeSpawn, null, [{\n    key: 'defaults',\n    value: function defaults() {\n      return { age: 0 };\n    }\n  }]);\n\n  return HordeSpawn;\n}(__WEBPACK_IMPORTED_MODULE_6__lib_core__[\"Component\"]);\n\nObject(__WEBPACK_IMPORTED_MODULE_6__lib_core__[\"registerComponent\"])('HordeSpawn', HordeSpawn);\n\nvar HordeSpawnSystem = function (_System) {\n  __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits___default()(HordeSpawnSystem, _System);\n\n  function HordeSpawnSystem() {\n    __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck___default()(this, HordeSpawnSystem);\n\n    return __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn___default()(this, (HordeSpawnSystem.__proto__ || __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of___default()(HordeSpawnSystem)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass___default()(HordeSpawnSystem, [{\n    key: 'defaultOptions',\n    value: function defaultOptions() {\n      return {\n        viewportSystemName: 'ViewportPixi',\n        minCount: 100,\n        offscreenTTL: 1.0,\n        spawnMargin: 100,\n        spawn: function spawn() {}\n      };\n    }\n  }, {\n    key: 'initialize',\n    value: function initialize() {\n      this.spawnCount = 0;\n      this.viewportSystem = this.world.getSystem(this.options.viewportSystemName);\n    }\n  }, {\n    key: 'matchComponent',\n    value: function matchComponent() {\n      return 'HordeSpawn';\n    }\n  }, {\n    key: 'update',\n    value: function update(timeDelta) {\n      matches = this.getMatchingComponents() || {};\n      this.spawnCount = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys___default()(matches).length;\n      if (this.spawnCount < this.options.minCount) {\n        this.spawnOffscreen();\n      }\n      for (entityId in matches) {\n        this.updateComponent(timeDelta, entityId, matches[entityId]);\n      }\n    }\n  }, {\n    key: 'updateComponent',\n    value: function updateComponent(timeDelta, entityId, hordespawn) {\n      sprite = this.world.get('Sprite', entityId);\n      if (sprite.visible) {\n        hordespawn.age = 0;\n      } else {\n        hordespawn.age += timeDelta;\n        if (hordespawn.age >= this.options.offscreenTTL) {\n          this.world.publish(__WEBPACK_IMPORTED_MODULE_7__spawn__[\"MSG_DESTROY\"], entityId);\n        }\n      }\n    }\n  }, {\n    key: 'spawnOffscreen',\n    value: function spawnOffscreen() {\n      var _viewportSystem = this.viewportSystem,\n          visibleLeft = _viewportSystem.visibleLeft,\n          visibleRight = _viewportSystem.visibleRight,\n          visibleTop = _viewportSystem.visibleTop,\n          visibleBottom = _viewportSystem.visibleBottom;\n\n      var margin = this.options.spawnMargin;\n      var w = visibleRight + margin - (visibleLeft - margin);\n      var h = visibleBottom + margin - (visibleTop - margin);\n      var r = Math.random();\n\n      var x = void 0,\n          y = void 0;\n\n      if (r < 0.5) {\n        y = visibleTop - margin + Math.random() * h;\n      } else {\n        x = visibleLeft - margin + Math.random() * w;\n      }\n\n      if (r < 0.25) {\n        x = visibleLeft - margin;\n      } else if (r < 0.5) {\n        x = visibleRight + margin;\n      } else if (r < 0.75) {\n        y = visibleTop - margin;\n      } else {\n        y = visibleBottom + margin;\n      }\n\n      this.options.spawn(x, y);\n    }\n  }]);\n\n  return HordeSpawnSystem;\n}(__WEBPACK_IMPORTED_MODULE_6__lib_core__[\"System\"]);\n\nObject(__WEBPACK_IMPORTED_MODULE_6__lib_core__[\"registerSystem\"])('HordeSpawn', HordeSpawnSystem);\n\n/***/ }),\n/* 59 */\n/*!*********************************!*\\\n  !*** ./src/plugins/repulsor.js ***!\n  \\*********************************/\n/*! exports provided: Repulsor, RepulsorSystem */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Repulsor\", function() { return Repulsor; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"RepulsorSystem\", function() { return RepulsorSystem; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(/*! babel-runtime/core-js/object/get-prototype-of */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__ = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__ = __webpack_require__(/*! babel-runtime/helpers/createClass */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(/*! babel-runtime/helpers/possibleConstructorReturn */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__ = __webpack_require__(/*! babel-runtime/helpers/inherits */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__lib_core__ = __webpack_require__(/*! ../lib/core */ 0);\n\n\n\n\n\n\n\nvar Repulsor = function (_Component) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(Repulsor, _Component);\n\n  function Repulsor() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, Repulsor);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (Repulsor.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(Repulsor)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(Repulsor, null, [{\n    key: 'defaults',\n    value: function defaults() {\n      return {\n        active: true,\n        range: 500,\n        force: 200\n      };\n    }\n  }]);\n\n  return Repulsor;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"Component\"]);\n\nObject(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerComponent\"])('Repulsor', Repulsor);\n\nvar components = void 0,\n    component = void 0,\n    entityId = void 0,\n    position = void 0,\n    repulsor = void 0,\n    repulsorPosition = void 0,\n    neighborSprite = void 0,\n    neighborPosition = void 0,\n    neighborMotion = void 0,\n    repelAngle = void 0,\n    repelForce = void 0,\n    dist = void 0;\n\nvar queryBounds = {};\n\nvar RepulsorSystem = function (_System) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(RepulsorSystem, _System);\n\n  function RepulsorSystem() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, RepulsorSystem);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (RepulsorSystem.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(RepulsorSystem)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(RepulsorSystem, [{\n    key: 'defaultOptions',\n    value: function defaultOptions() {\n      return {\n        positionSystemName: 'Position'\n      };\n    }\n  }, {\n    key: 'matchComponent',\n    value: function matchComponent() {\n      return 'Repulsor';\n    }\n  }, {\n    key: 'initialize',\n    value: function initialize() {\n      var _this3 = this;\n\n      this.positionSystem = this.world.getSystem(this.options.positionSystemName);\n      this.applyRepulsionBound = function (neighbor, component) {\n        return _this3.applyRepulsion(neighbor, component);\n      };\n    }\n  }, {\n    key: 'updateComponent',\n    value: function updateComponent(timeDelta, entityId, component) {\n      if (!component.active) {\n        return;\n      }\n\n      position = this.world.get('Position', entityId);\n\n      queryBounds.left = position.left - component.range;\n      queryBounds.right = position.right + component.range;\n      queryBounds.top = position.top - component.range;\n      queryBounds.bottom = position.bottom + component.range;\n\n      this.positionSystem.quadtree.iterate(queryBounds, this.applyRepulsionBound, entityId);\n    }\n  }, {\n    key: 'applyRepulsion',\n    value: function applyRepulsion(neighbor, repulsorId) {\n      if (entityId === neighbor.entityId) {\n        return;\n      }\n\n      neighborSprite = this.world.get('Sprite', neighbor.entityId);\n      if (neighborSprite.name !== 'mine') {\n        return;\n      }\n\n      repulsor = this.world.get('Repulsor', repulsorId);\n      repulsorPosition = this.world.get('Position', repulsorId);\n      neighborPosition = this.world.get('Position', neighbor.entityId);\n      neighborMotion = this.world.get('Motion', neighbor.entityId);\n\n      dist = (neighborPosition.x - repulsorPosition.x) * (neighborPosition.x - repulsorPosition.x) + (neighborPosition.y - repulsorPosition.y) * (neighborPosition.y - repulsorPosition.y);\n\n      if (dist > repulsor.range * repulsor.range) {\n        return;\n      }\n      // if (dist < repulsor.range) { return; }\n\n      repelAngle = Math.atan2(repulsorPosition.y - neighborPosition.y, repulsorPosition.x - neighborPosition.x);\n\n      repelForce = -repulsor.force;\n\n      neighborMotion.dx += repelForce * Math.cos(repelAngle);\n      neighborMotion.dy += repelForce * Math.sin(repelAngle);\n    }\n  }, {\n    key: 'draw',\n    value: function draw() /* timeDelta */{\n      var g = this.getDebugGraphics();\n      if (!g) {\n        return;\n      }\n\n      g.lineStyle(4, 0x882222);\n      components = this.getMatchingComponents();\n      for (entityId in components) {\n        component = components[entityId];\n        position = this.world.get('Position', entityId);\n        g.drawCircle(position.x, position.y, component.range);\n      }\n    }\n  }]);\n\n  return RepulsorSystem;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"System\"]);\n\nObject(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerSystem\"])('Repulsor', RepulsorSystem);\n\n/***/ }),\n/* 60 */\n/*!*******************************************************!*\\\n  !*** ./node_modules/babel-runtime/helpers/extends.js ***!\n  \\*******************************************************/\n/*! no static exports found */\n/*! exports used: default */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\n\nvar _assign = __webpack_require__(/*! ../core-js/object/assign */ 40);\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _assign2.default || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\n/***/ }),\n/* 61 */\n/*!*****************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_ie8-dom-define.js ***!\n  \\*****************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = !__webpack_require__(/*! ./_descriptors */ 14) && !__webpack_require__(/*! ./_fails */ 24)(function () {\n  return Object.defineProperty(__webpack_require__(/*! ./_dom-create */ 62)('div'), 'a', { get: function () { return 7; } }).a != 7;\n});\n\n\n/***/ }),\n/* 62 */\n/*!*************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_dom-create.js ***!\n  \\*************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar isObject = __webpack_require__(/*! ./_is-object */ 31);\nvar document = __webpack_require__(/*! ./_global */ 12).document;\n// typeof document.createElement is 'object' in old IE\nvar is = isObject(document) && isObject(document.createElement);\nmodule.exports = function (it) {\n  return is ? document.createElement(it) : {};\n};\n\n\n/***/ }),\n/* 63 */\n/*!***********************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_object-keys-internal.js ***!\n  \\***********************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar has = __webpack_require__(/*! ./_has */ 16);\nvar toIObject = __webpack_require__(/*! ./_to-iobject */ 11);\nvar arrayIndexOf = __webpack_require__(/*! ./_array-includes */ 82)(false);\nvar IE_PROTO = __webpack_require__(/*! ./_shared-key */ 47)('IE_PROTO');\n\nmodule.exports = function (object, names) {\n  var O = toIObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) if (key != IE_PROTO) has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n\n\n/***/ }),\n/* 64 */\n/*!**********************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_iobject.js ***!\n  \\**********************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = __webpack_require__(/*! ./_cof */ 44);\n// eslint-disable-next-line no-prototype-builtins\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n\n\n/***/ }),\n/* 65 */\n/*!************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_to-length.js ***!\n  \\************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 7.1.15 ToLength\nvar toInteger = __webpack_require__(/*! ./_to-integer */ 46);\nvar min = Math.min;\nmodule.exports = function (it) {\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n\n\n/***/ }),\n/* 66 */\n/*!*************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_object-gpo.js ***!\n  \\*************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\nvar has = __webpack_require__(/*! ./_has */ 16);\nvar toObject = __webpack_require__(/*! ./_to-object */ 34);\nvar IE_PROTO = __webpack_require__(/*! ./_shared-key */ 47)('IE_PROTO');\nvar ObjectProto = Object.prototype;\n\nmodule.exports = Object.getPrototypeOf || function (O) {\n  O = toObject(O);\n  if (has(O, IE_PROTO)) return O[IE_PROTO];\n  if (typeof O.constructor == 'function' && O instanceof O.constructor) {\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectProto : null;\n};\n\n\n/***/ }),\n/* 67 */\n/*!******************************************************!*\\\n  !*** ./node_modules/babel-runtime/helpers/typeof.js ***!\n  \\******************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\n\nvar _iterator = __webpack_require__(/*! ../core-js/symbol/iterator */ 89);\n\nvar _iterator2 = _interopRequireDefault(_iterator);\n\nvar _symbol = __webpack_require__(/*! ../core-js/symbol */ 99);\n\nvar _symbol2 = _interopRequireDefault(_symbol);\n\nvar _typeof = typeof _symbol2.default === \"function\" && typeof _iterator2.default === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = typeof _symbol2.default === \"function\" && _typeof(_iterator2.default) === \"symbol\" ? function (obj) {\n  return typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n} : function (obj) {\n  return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n};\n\n/***/ }),\n/* 68 */\n/*!*********************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/es6.string.iterator.js ***!\n  \\*********************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar $at = __webpack_require__(/*! ./_string-at */ 91)(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\n__webpack_require__(/*! ./_iter-define */ 69)(String, 'String', function (iterated) {\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var index = this._i;\n  var point;\n  if (index >= O.length) return { value: undefined, done: true };\n  point = $at(O, index);\n  this._i += point.length;\n  return { value: point, done: false };\n});\n\n\n/***/ }),\n/* 69 */\n/*!**************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_iter-define.js ***!\n  \\**************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar LIBRARY = __webpack_require__(/*! ./_library */ 52);\nvar $export = __webpack_require__(/*! ./_export */ 10);\nvar redefine = __webpack_require__(/*! ./_redefine */ 70);\nvar hide = __webpack_require__(/*! ./_hide */ 22);\nvar has = __webpack_require__(/*! ./_has */ 16);\nvar Iterators = __webpack_require__(/*! ./_iterators */ 36);\nvar $iterCreate = __webpack_require__(/*! ./_iter-create */ 92);\nvar setToStringTag = __webpack_require__(/*! ./_set-to-string-tag */ 54);\nvar getPrototypeOf = __webpack_require__(/*! ./_object-gpo */ 66);\nvar ITERATOR = __webpack_require__(/*! ./_wks */ 9)('iterator');\nvar BUGGY = !([].keys && 'next' in [].keys()); // Safari has buggy iterators w/o `next`\nvar FF_ITERATOR = '@@iterator';\nvar KEYS = 'keys';\nvar VALUES = 'values';\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED) {\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function (kind) {\n    if (!BUGGY && kind in proto) return proto[kind];\n    switch (kind) {\n      case KEYS: return function keys() { return new Constructor(this, kind); };\n      case VALUES: return function values() { return new Constructor(this, kind); };\n    } return function entries() { return new Constructor(this, kind); };\n  };\n  var TAG = NAME + ' Iterator';\n  var DEF_VALUES = DEFAULT == VALUES;\n  var VALUES_BUG = false;\n  var proto = Base.prototype;\n  var $native = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT];\n  var $default = $native || getMethod(DEFAULT);\n  var $entries = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined;\n  var $anyNative = NAME == 'Array' ? proto.entries || $native : $native;\n  var methods, key, IteratorPrototype;\n  // Fix native\n  if ($anyNative) {\n    IteratorPrototype = getPrototypeOf($anyNative.call(new Base()));\n    if (IteratorPrototype !== Object.prototype && IteratorPrototype.next) {\n      // Set @@toStringTag to native iterators\n      setToStringTag(IteratorPrototype, TAG, true);\n      // fix for some old engines\n      if (!LIBRARY && !has(IteratorPrototype, ITERATOR)) hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  }\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if (DEF_VALUES && $native && $native.name !== VALUES) {\n    VALUES_BUG = true;\n    $default = function values() { return $native.call(this); };\n  }\n  // Define iterator\n  if ((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])) {\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG] = returnThis;\n  if (DEFAULT) {\n    methods = {\n      values: DEF_VALUES ? $default : getMethod(VALUES),\n      keys: IS_SET ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if (FORCED) for (key in methods) {\n      if (!(key in proto)) redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n\n\n/***/ }),\n/* 70 */\n/*!***********************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_redefine.js ***!\n  \\***********************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(/*! ./_hide */ 22);\n\n\n/***/ }),\n/* 71 */\n/*!**************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_object-gopn.js ***!\n  \\**************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\nvar $keys = __webpack_require__(/*! ./_object-keys-internal */ 63);\nvar hiddenKeys = __webpack_require__(/*! ./_enum-bug-keys */ 49).concat('length', 'prototype');\n\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return $keys(O, hiddenKeys);\n};\n\n\n/***/ }),\n/* 72 */\n/*!***********************************!*\\\n  !*** ./src/plugins/expiration.js ***!\n  \\***********************************/\n/*! exports provided: Expiration, ExpirationSystem */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Expiration\", function() { return Expiration; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ExpirationSystem\", function() { return ExpirationSystem; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(/*! babel-runtime/core-js/object/get-prototype-of */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__ = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__ = __webpack_require__(/*! babel-runtime/helpers/createClass */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(/*! babel-runtime/helpers/possibleConstructorReturn */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__ = __webpack_require__(/*! babel-runtime/helpers/inherits */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__lib_core__ = __webpack_require__(/*! ../lib/core */ 0);\n\n\n\n\n\n\n\nvar Expiration = function (_Core$Component) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(Expiration, _Core$Component);\n\n  function Expiration() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, Expiration);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (Expiration.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(Expiration)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(Expiration, null, [{\n    key: 'defaults',\n    value: function defaults() {\n      return { ttl: 0, age: 0 };\n    }\n  }]);\n\n  return Expiration;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"Component\"]);\n__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerComponent\"]('Expiration', Expiration);\n\nvar ExpirationSystem = function (_Core$System) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(ExpirationSystem, _Core$System);\n\n  function ExpirationSystem() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, ExpirationSystem);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (ExpirationSystem.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(ExpirationSystem)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(ExpirationSystem, [{\n    key: 'matchComponent',\n    value: function matchComponent() {\n      return 'Expiration';\n    }\n  }, {\n    key: 'updateComponent',\n    value: function updateComponent(timeDelta, entityId, expiration) {\n      expiration.age += timeDelta;\n      if (expiration.age >= expiration.ttl) {\n        this.world.destroy(entityId);\n      }\n    }\n  }]);\n\n  return ExpirationSystem;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"System\"]);\n__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerSystem\"]('Expiration', ExpirationSystem);\n\n/***/ }),\n/* 73 */\n/*!********************************!*\\\n  !*** ./src/plugins/orbiter.js ***!\n  \\********************************/\n/*! exports provided: Orbiter, OrbiterSystem */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Orbiter\", function() { return Orbiter; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"OrbiterSystem\", function() { return OrbiterSystem; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(/*! babel-runtime/core-js/object/get-prototype-of */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__ = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__ = __webpack_require__(/*! babel-runtime/helpers/createClass */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(/*! babel-runtime/helpers/possibleConstructorReturn */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__ = __webpack_require__(/*! babel-runtime/helpers/inherits */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__lib_core__ = __webpack_require__(/*! ../lib/core */ 0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__position__ = __webpack_require__(/*! ./position */ 7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__lib_Vector2D__ = __webpack_require__(/*! ../lib/Vector2D */ 17);\n\n\n\n\n\n\n\n\n\n\n\nvar Orbiter = function (_Core$Component) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(Orbiter, _Core$Component);\n\n  function Orbiter() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, Orbiter);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (Orbiter.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(Orbiter)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(Orbiter, null, [{\n    key: 'defaults',\n    value: function defaults() {\n      return {\n        name: null,\n        entityId: null,\n        angle: 0.0,\n        rotate: true,\n        radPerSec: Math.PI / 4\n      };\n    }\n  }]);\n\n  return Orbiter;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"Component\"]);\n__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerComponent\"]('Orbiter', Orbiter);\n\nvar OrbiterSystem = function (_Core$System) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(OrbiterSystem, _Core$System);\n\n  function OrbiterSystem() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, OrbiterSystem);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (OrbiterSystem.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(OrbiterSystem)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(OrbiterSystem, [{\n    key: 'matchComponent',\n    value: function matchComponent() {\n      return 'Orbiter';\n    }\n  }, {\n    key: 'initialize',\n    value: function initialize() {\n      this.vOrbited = new __WEBPACK_IMPORTED_MODULE_7__lib_Vector2D__[\"a\" /* default */]();\n      this.vOrbiter = new __WEBPACK_IMPORTED_MODULE_7__lib_Vector2D__[\"a\" /* default */]();\n      this.vOld = new __WEBPACK_IMPORTED_MODULE_7__lib_Vector2D__[\"a\" /* default */]();\n    }\n  }, {\n    key: 'updateComponent',\n    value: function updateComponent(timeDelta, entityId, orbiter) {\n\n      // Look up the orbited entity ID, if only name given.\n      if (orbiter.name && !orbiter.entityId) {\n        orbiter.entityId = __WEBPACK_IMPORTED_MODULE_5__lib_core__[\"getComponent\"]('Name').findEntityByName(this.world, orbiter.name);\n      }\n\n      var pos = this.world.get('Position', entityId);\n      var oPos = this.world.get('Position', orbiter.entityId);\n\n      this.vOrbited.setValues(oPos.x, oPos.y);\n      this.vOrbiter.setValues(pos.x, pos.y);\n\n      var angleDelta = timeDelta * orbiter.radPerSec;\n      this.vOrbiter.rotateAround(this.vOrbited, angleDelta);\n\n      this.vOld.setValues(pos.x, pos.y);\n      pos.x = this.vOrbiter.x;\n      pos.y = this.vOrbiter.y;\n      if (orbiter.rotate) {\n        pos.rotation = this.vOld.angleTo(this.vOrbiter);\n      }\n    }\n  }]);\n\n  return OrbiterSystem;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"System\"]);\n__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerSystem\"]('Orbiter', OrbiterSystem);\n\n/***/ }),\n/* 74 */\n/*!************************************!*\\\n  !*** ./src/plugins/pathfinding.js ***!\n  \\************************************/\n/*! exports provided: Pathfinder, SpaceTree, PathfindingSystem */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Pathfinder\", function() { return Pathfinder; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SpaceTree\", function() { return SpaceTree; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PathfindingSystem\", function() { return PathfindingSystem; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(/*! babel-runtime/core-js/object/get-prototype-of */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__ = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__ = __webpack_require__(/*! babel-runtime/helpers/createClass */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(/*! babel-runtime/helpers/possibleConstructorReturn */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__ = __webpack_require__(/*! babel-runtime/helpers/inherits */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__lib_core__ = __webpack_require__(/*! ../lib/core */ 0);\n\n\n\n\n\n\n\nvar Pathfinder = function (_Core$Component) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(Pathfinder, _Core$Component);\n\n  function Pathfinder() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, Pathfinder);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (Pathfinder.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(Pathfinder)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(Pathfinder, null, [{\n    key: 'defaults',\n    value: function defaults() {\n      return {\n        width: 5000,\n        height: 5000\n      };\n    }\n  }]);\n\n  return Pathfinder;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"Component\"]);\n\n__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerComponent\"]('Pathfinder', Pathfinder);\n\nvar SpaceTree = function () {\n  function SpaceTree(quadtree, x, y, width, height, level) {\n    var _this2 = this;\n\n    var maxLevel = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 4;\n\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, SpaceTree);\n\n    var bounds = quadtree.bounds;\n\n    this.x = x || bounds.x;\n    this.y = y || bounds.y;\n    this.width = width || bounds.width;\n    this.height = height || bounds.height;\n    this.right = this.x + this.width;\n    this.bottom = this.y + this.height;\n    this.level = level || 0;\n    this.empty = true;\n    this.full = false;\n    this.children = [];\n\n    var ct = 0;\n\n    quadtree.iterate({\n      x: this.x, y: this.y, right: this.right, bottom: this.bottom\n    }, function (obj) {\n\n      var dx = Math.abs(obj.x - _this2.x) * 2;\n      var dy = Math.abs(obj.y - _this2.y) * 2;\n      var dwidth = obj.right - obj.x + _this2.width;\n      var dheight = obj.bottom - obj.y + _this2.height;\n\n      if (dx < dwidth && dy < dheight) {\n        ct++;\n        if (obj.x <= _this2.x && obj.y <= _this2.y && obj.right >= _this2.right && obj.bottom >= _this2.bottom) {\n          _this2.full = true;\n        }\n      }\n    });\n\n    if (ct === 0) {\n      this.empty = true;\n      return;\n    }\n\n    this.empty = false;\n    if (!this.full && this.level < maxLevel) {\n      this.split(quadtree);\n    }\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(SpaceTree, [{\n    key: 'split',\n    value: function split(quadtree) {\n      var splitWidth = this.width / 2;\n      var splitHeight = this.height / 2;\n\n      this.children[0] = new SpaceTree(quadtree, this.x, this.y, splitWidth, splitHeight, this.level + 1);\n\n      this.children[1] = new SpaceTree(quadtree, this.x + splitWidth, this.y, splitWidth, splitHeight, this.level + 1);\n\n      this.children[2] = new SpaceTree(quadtree, this.x, this.y + splitHeight, splitWidth, splitHeight, this.level + 1);\n\n      this.children[3] = new SpaceTree(quadtree, this.x + splitWidth, this.y + splitHeight, splitWidth, splitHeight, this.level + 1);\n    }\n  }]);\n\n  return SpaceTree;\n}();\n\nvar PathfindingSystem = function (_Core$System) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(PathfindingSystem, _Core$System);\n\n  function PathfindingSystem() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, PathfindingSystem);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (PathfindingSystem.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(PathfindingSystem)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(PathfindingSystem, [{\n    key: 'matchComponent',\n    value: function matchComponent() {\n      return 'Pathfinder';\n    }\n  }, {\n    key: 'initialize',\n    value: function initialize() {}\n  }, {\n    key: 'update',\n    value: function update() /*timeDelta*/{\n      /*\r\n      let collisionSystem = this.world.getSystem('Collision');\r\n      let quadtree = collisionSystem.quadtree;\r\n      */\n    }\n  }, {\n    key: 'draw',\n    value: function draw(timeDelta) {\n      if (!this.debug) {\n        return;\n      }\n\n      var vpSystem = this.world.getSystem('ViewportCanvas');\n\n      var ctx = vpSystem.ctx;\n      ctx.save();\n\n      vpSystem.centerAndZoom(timeDelta);\n      vpSystem.followEntity(timeDelta);\n\n      // draw\n\n      ctx.restore();\n    }\n  }]);\n\n  return PathfindingSystem;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"System\"]);\n\n__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerSystem\"]('Pathfinding', PathfindingSystem);\n\n/***/ }),\n/* 75 */\n/*!*********************************!*\\\n  !*** ./src/plugins/steering.js ***!\n  \\*********************************/\n/*! exports provided: Steering, SteeringSystem */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Steering\", function() { return Steering; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SteeringSystem\", function() { return SteeringSystem; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(/*! babel-runtime/core-js/object/get-prototype-of */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__ = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__ = __webpack_require__(/*! babel-runtime/helpers/createClass */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(/*! babel-runtime/helpers/possibleConstructorReturn */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__ = __webpack_require__(/*! babel-runtime/helpers/inherits */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__lib_core__ = __webpack_require__(/*! ../lib/core */ 0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__plugins_position__ = __webpack_require__(/*! ../plugins/position */ 7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__plugins_motion__ = __webpack_require__(/*! ../plugins/motion */ 8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__lib_Vector2D__ = __webpack_require__(/*! ../lib/Vector2D */ 17);\n\n\n\n\n\n\n\n\n\n\n\n\nvar PI2 = Math.PI * 2;\n\nvar Steering = function (_Core$Component) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(Steering, _Core$Component);\n\n  function Steering() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, Steering);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (Steering.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(Steering)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(Steering, null, [{\n    key: 'defaults',\n    value: function defaults() {\n      return {\n        sensorRange: 350,\n        obstacleRepel: [400, 2.1]\n      };\n    }\n  }]);\n\n  return Steering;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"Component\"]);\n\n__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerComponent\"]('Steering', Steering);\n\nvar SteeringSystem = function (_Core$System) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(SteeringSystem, _Core$System);\n\n  function SteeringSystem() {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, SteeringSystem);\n\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (SteeringSystem.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(SteeringSystem)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(SteeringSystem, [{\n    key: 'matchComponent',\n    value: function matchComponent() {\n      return 'Steering';\n    }\n  }, {\n    key: 'initialize',\n    value: function initialize() {\n\n      this.seekFactor = 1;\n\n      this.pushFactor = 7;\n\n      this.avoidFactor = 10;\n\n      this.avoidSeeAhead = 500;\n      this.avoidRayWidthFactor = 1.5;\n\n      this.vTarget = new __WEBPACK_IMPORTED_MODULE_8__lib_Vector2D__[\"a\" /* default */]();\n\n      this.vectors = {\n        avoid: new __WEBPACK_IMPORTED_MODULE_8__lib_Vector2D__[\"a\" /* default */](),\n        push: new __WEBPACK_IMPORTED_MODULE_8__lib_Vector2D__[\"a\" /* default */](),\n        seek: new __WEBPACK_IMPORTED_MODULE_8__lib_Vector2D__[\"a\" /* default */](),\n        flee: new __WEBPACK_IMPORTED_MODULE_8__lib_Vector2D__[\"a\" /* default */](),\n        wander: new __WEBPACK_IMPORTED_MODULE_8__lib_Vector2D__[\"a\" /* default */](),\n        evade: new __WEBPACK_IMPORTED_MODULE_8__lib_Vector2D__[\"a\" /* default */](),\n        pursue: new __WEBPACK_IMPORTED_MODULE_8__lib_Vector2D__[\"a\" /* default */]()\n      };\n    }\n  }, {\n    key: 'updateComponent',\n    value: function updateComponent(timeDelta, entityId, steering) {\n\n      this.vTarget.setValues(0, 0);\n\n      for (var key in this.vectors) {\n        this.vectors[key].setValues(0, 0);\n        this[key](this.vectors[key], timeDelta, entityId, steering);\n        this.vTarget.add(this.vectors[key]);\n      }\n\n      this.applySteering(timeDelta, entityId, steering);\n    }\n  }, {\n    key: 'avoid',\n    value: function avoid(vector, timeDelta, entityId, steering) {\n      var _this3 = this;\n\n      if (this.debug) {\n        steering.vectors = [];\n      }\n\n      var sprite = this.world.get('Sprite', entityId);\n      var position = this.world.get('Position', entityId);\n\n      var result = this.lookForObstacle(entityId, position, sprite, steering);\n      if (!result) {\n        return;\n      }\n\n      var range = steering.sensorRange;\n      this.world.getSystem('Collision').quadtree.iterate({\n        x: position.x - range / 2,\n        y: position.y - range / 2,\n        width: range,\n        height: range\n      }, function (item) {\n\n        if (entityId === item.entityId) {\n          return;\n        }\n\n        var targetPosition = _this3.world.get('Position', item.entityId);\n        if (!targetPosition) {\n          return;\n        }\n\n        var targetSprite = _this3.world.get('Sprite', item.entityId);\n\n        var A = 0;\n        var B = steering.obstacleRepel[0];\n        var n = 0;\n        var m = steering.obstacleRepel[1];\n\n        var dx = position.x - targetPosition.x;\n        var dy = position.y - targetPosition.y;\n        var edgeRange = sprite.size / 2 + targetSprite.size / 2;\n        var distance = Math.sqrt(dx * dx + dy * dy) - edgeRange;\n        if (distance <= 0) {\n          distance = 0.01;\n        }\n\n        if (distance > steering.sensorRange) {\n          return;\n        }\n\n        var U = -A / Math.pow(distance, n) + B / Math.pow(distance, m);\n\n        vector.x += dx * U;\n        vector.y += dy * U;\n\n        if (_this3.debug) {\n          steering.vectors.push([targetPosition.x, targetPosition.y, U]);\n        }\n      });\n    }\n  }, {\n    key: 'push',\n    value: function push() /*vector, timeDelta, entityId, steering*/{}\n  }, {\n    key: 'avoid_ray',\n    value: function avoid_ray(vector, timeDelta, entityId, steering) {\n\n      var sprite = this.world.get('Sprite', entityId);\n      var position = this.world.get('Position', entityId);\n\n      // Scan ahead for an obstacle, bail if none found.\n      var result = this.lookForObstacle(entityId, position, sprite, steering);\n      if (!result) {\n        return;\n      }\n\n      var obstacle = result[0];\n      var rayX = result[1];\n      var rayY = result[2];\n\n      // Opposite right triangle leg is distance from obstacle to avoid collision.\n      var oppositeLen = obstacle.sprite.size / 2 + sprite.size * this.avoidRayWidthFactor;\n\n      // Hypotenuse length is distance from obstacle.\n      var hypotenuseLen = Math.sqrt(Math.pow(obstacle.position.x - rayX, 2) + Math.pow(obstacle.position.y - rayY, 2));\n\n      // Adjacent length would be avoid tangent, but no need to calculate.\n\n      // Find angle from direct collision to avoidance\n      var theta = Math.asin(oppositeLen / hypotenuseLen);\n\n      // HACK: Too close, panic and steer hard away\n      if (isNaN(theta)) {\n        theta = Math.PI * 0.66;\n      }\n\n      // Find the absolute angle to the obstacle from entity.\n      var obstacleAngle = Math.atan2(obstacle.position.y - rayY, obstacle.position.x - rayX);\n\n      // Calculate nearest target angle for avoidance...\n      // Try turning clockwise from obstacle.\n      var avoidAngle = obstacleAngle + theta;\n      // Calculate the 'travel' needed from current rotation.\n      var travel = Math.min(PI2 - Math.abs(position.rotation - avoidAngle), Math.abs(position.rotation - avoidAngle));\n      if (travel > theta) {\n        // Clockwise travel exceeds theta, so counterclockwise is shorter.\n        avoidAngle = obstacleAngle - theta;\n      }\n\n      // Set up the avoidance vector.\n      vector.setValues(this.avoidFactor, 0);\n      vector.rotate(avoidAngle);\n    }\n  }, {\n    key: 'lookForObstacle',\n    value: function lookForObstacle(entityId, position, sprite, steering) {\n      var rayWidth = sprite.size * this.avoidRayWidthFactor;\n\n      var vRayUnit = new __WEBPACK_IMPORTED_MODULE_8__lib_Vector2D__[\"a\" /* default */]();\n      vRayUnit.setValues(rayWidth, 0);\n      vRayUnit.rotate(position.rotation);\n\n      if (this.debug) {\n        steering.hitCircles = [];\n      }\n\n      var obstacle = void 0,\n          rayX = void 0,\n          rayY = void 0;\n      var steps = this.avoidSeeAhead / rayWidth;\n      for (var step = 0; step < steps; step++) {\n        rayX = position.x + vRayUnit.x * step;\n        rayY = position.y + vRayUnit.y * step;\n        obstacle = this.searchCircleForObstacle(steering, entityId, rayX, rayY, rayWidth);\n        if (obstacle) {\n          return [obstacle, rayX, rayY];\n        }\n      }\n\n      return null;\n    }\n  }, {\n    key: 'searchCircleForObstacle',\n    value: function searchCircleForObstacle(steering, entityId, x, y, size) {\n\n      if (this.debug) {\n        steering.hitCircles.push([x, y, size]);\n      }\n\n      var hits = [];\n\n      this.world.getSystem('Collision').quadtree.iterate({\n        x: x - size / 2,\n        y: y - size / 2,\n        width: size,\n        height: size\n      }, function (item) {\n\n        if (entityId === item.entityId) {\n          return;\n        }\n        var dx = item.position.x - x;\n        var dy = item.position.y - y;\n        var range = dx * dx + dy * dy;\n        var radii = (size + item.sprite.size) / 2;\n        if (range < radii * radii) {\n          hits.push([range, item]);\n        }\n      });\n\n      hits.sort(function (a, b) {\n        return b[0] - a[0];\n      });\n      return hits.length ? hits[0][1] : null;\n    }\n  }, {\n    key: 'seek',\n    value: function seek(vector, timeDelta, entityId, steering) {\n\n      // Look up the entity ID to seek, if only name given.\n      if (steering.seekTargetName && !steering.seekTargetEntityId) {\n        steering.seekTargetEntityId = __WEBPACK_IMPORTED_MODULE_5__lib_core__[\"getComponent\"]('Name').findEntityByName(this.world, steering.seekTargetName);\n      }\n\n      if (!steering.seekTargetEntityId) {\n        return;\n      }\n\n      var position = this.world.get('Position', entityId);\n      if (!position) {\n        return;\n      }\n\n      // Accept either a raw x/y coord or entity ID as target\n      var targetPosition = steering.targetPosition;\n      if (!targetPosition) {\n        targetPosition = this.world.get('Position', steering.seekTargetEntityId);\n      }\n      if (!targetPosition) {\n        return;\n      }\n\n      vector.setValues(targetPosition.x - position.x, targetPosition.y - position.y);\n      vector.normalize();\n      vector.multiplyScalar(this.seekFactor);\n    }\n  }, {\n    key: 'flee',\n    value: function flee() /*vector, timeDelta, entityId, steering*/{}\n  }, {\n    key: 'wander',\n    value: function wander() /*vector, timeDelta, entityId, steering*/{}\n  }, {\n    key: 'evade',\n    value: function evade() /*vector, timeDelta, entityId, steering*/{}\n  }, {\n    key: 'pursue',\n    value: function pursue() /*vector, timeDelta, entityId, steering*/{}\n  }, {\n    key: 'applySteering',\n    value: function applySteering(timeDelta, entityId, steering) {\n\n      var motion = this.world.get('Motion', entityId);\n\n      var targetDr = 0;\n\n      if (!this.vTarget.isZero()) {\n        var position = this.world.get('Position', entityId);\n\n        // Get the target angle, ensuring a 0..2*Math.PI range.\n        var targetAngle = this.vTarget.angle();\n        if (targetAngle < 0) {\n          targetAngle += 2 * Math.PI;\n        }\n\n        if (this.debug) {\n          steering.targetAngle = targetAngle;\n        }\n\n        // Pick the direction from current to target angle\n        var direction = targetAngle < position.rotation ? -1 : 1;\n\n        // If the offset between the angles is more than half a circle, it's\n        // shorter to go the other way.\n        var offset = Math.abs(targetAngle - position.rotation);\n        if (offset > Math.PI) {\n          direction = 0 - direction;\n        }\n\n        // Work out the desired delta-rotation to steer toward target\n        targetDr = direction * Math.min(steering.radPerSec, offset / timeDelta);\n      }\n\n      // Calculate the delta-rotation impulse required to meet the goal,\n      // but constrain to the capability of the steering thrusters\n      var impulseDr = targetDr - motion.drotation;\n      if (Math.abs(impulseDr) > steering.radPerSec) {\n        if (impulseDr > 0) {\n          impulseDr = steering.radPerSec;\n        } else if (impulseDr < 0) {\n          impulseDr = 0 - steering.radPerSec;\n        }\n      }\n\n      motion.drotation += impulseDr;\n    }\n  }, {\n    key: 'draw',\n    value: function draw() /*timeDelta*/{\n      if (!this.debug) {\n        return;\n      }\n\n      /*\r\n      const vpSystem = this.world.getSystem('CanvasViewport');\r\n      const ctx = vpSystem.ctx;\r\n      ctx.save();\r\n        vpSystem.centerAndZoom(timeDelta);\r\n      vpSystem.followEntity(timeDelta);\r\n        const matches = this.getMatchingComponents();\r\n      for (const entityId in matches) {\r\n        ctx.save();\r\n          const steering = matches[entityId];\r\n        const position = this.world.get('Position', entityId);\r\n        const sprite = this.world.get('Sprite', entityId);\r\n          this.drawSteeringVsPosition(ctx, steering, position);\r\n          if (steering.hitCircles) {\r\n          for (const [x, y, size] of steering.hitCircles) {\r\n            ctx.strokeStyle = '#d00';\r\n            ctx.beginPath();\r\n            ctx.arc(x, y, size, 0, PI2, false);\r\n            ctx.stroke();\r\n          }\r\n        }\r\n          if (steering.sensorRange) {\r\n            ctx.strokeStyle = 'rgba(0, 64, 64, 0.75)';\r\n            ctx.beginPath();\r\n            ctx.arc(position.x, position.y, steering.sensorRange, 0, PI2, false);\r\n            ctx.stroke();\r\n        }\r\n          if (steering.vectors) {\r\n          for (const [x, y, U] of steering.vectors) {\r\n            ctx.strokeStyle = 'rgba(0, 64, 64, 0.75)';\r\n            ctx.beginPath();\r\n            ctx.moveTo(position.x, position.y);\r\n            ctx.lineWidth = Math.max(1, Math.min(U, sprite.width));\r\n            ctx.lineTo(x, y);\r\n            ctx.stroke();\r\n          }\r\n        }\r\n          if (steering.pushing) {\r\n          this.drawAngle(ctx, position, position.rotation, '#d0d');\r\n        }\r\n          ctx.restore();\r\n      }\r\n        ctx.restore();\r\n      */\n    }\n  }, {\n    key: 'drawSteeringVsPosition',\n    value: function drawSteeringVsPosition(ctx, steering, position) {\n      this.drawAngle(ctx, position, position.rotation, '#ddd');\n      if (steering.targetAngle) {\n        this.drawAngle(ctx, position, steering.targetAngle, '#dd0');\n      }\n    }\n  }, {\n    key: 'drawAngle',\n    value: function drawAngle(ctx, position, angle, color) {\n      var vec = new __WEBPACK_IMPORTED_MODULE_8__lib_Vector2D__[\"a\" /* default */]();\n      vec.setValues(this.avoidSeeAhead, 0);\n      vec.rotate(angle);\n      ctx.strokeStyle = color;\n      ctx.beginPath();\n      ctx.moveTo(position.x, position.y);\n      ctx.lineTo(position.x + vec.x, position.y + vec.y);\n      ctx.stroke();\n    }\n  }]);\n\n  return SteeringSystem;\n}(__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"System\"]);\n\n__WEBPACK_IMPORTED_MODULE_5__lib_core__[\"registerSystem\"]('Steering', SteeringSystem);\n\n/***/ }),\n/* 76 */\n/*!***************************************!*\\\n  !*** ./src/plugins/viewportCanvas.js ***!\n  \\***************************************/\n/*! exports provided: CanvasSprite, ViewportCanvas, registerSprite, getSprite */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CanvasSprite\", function() { return CanvasSprite; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ViewportCanvas\", function() { return ViewportCanvas; });\n/* harmony export (immutable) */ __webpack_exports__[\"registerSprite\"] = registerSprite;\n/* harmony export (immutable) */ __webpack_exports__[\"getSprite\"] = getSprite;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(/*! babel-runtime/helpers/extends */ 60);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign__ = __webpack_require__(/*! babel-runtime/core-js/object/assign */ 40);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(/*! babel-runtime/core-js/object/get-prototype-of */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck__ = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass__ = __webpack_require__(/*! babel-runtime/helpers/createClass */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(/*! babel-runtime/helpers/possibleConstructorReturn */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_get__ = __webpack_require__(/*! babel-runtime/helpers/get */ 25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_get___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_get__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_inherits__ = __webpack_require__(/*! babel-runtime/helpers/inherits */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__lib_core__ = __webpack_require__(/*! ../lib/core */ 0);\n\n\n\n\n\n\n\n\n\n\nvar CanvasSprite = function (_Core$Component) {\n  __WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_inherits___default()(CanvasSprite, _Core$Component);\n\n  function CanvasSprite() {\n    __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck___default()(this, CanvasSprite);\n\n    return __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn___default()(this, (CanvasSprite.__proto__ || __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of___default()(CanvasSprite)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass___default()(CanvasSprite, null, [{\n    key: 'defaults',\n    value: function defaults() {\n      return {\n        name: null,\n        color: '#fff',\n        size: 100,\n        width: null,\n        height: null\n      };\n    }\n  }, {\n    key: 'create',\n    value: function create(attrs) {\n      var c = __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_get___default()(CanvasSprite.__proto__ || __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of___default()(CanvasSprite), 'create', this).call(this, attrs);\n      if (!c.width) {\n        c.width = c.size;\n      }\n      if (!c.height) {\n        c.height = c.size;\n      }\n      return c;\n    }\n  }]);\n\n  return CanvasSprite;\n}(__WEBPACK_IMPORTED_MODULE_8__lib_core__[\"Component\"]);\n__WEBPACK_IMPORTED_MODULE_8__lib_core__[\"registerComponent\"]('Sprite', CanvasSprite);\n\n// See also: http://phrogz.net/JS/wheeldelta.html\nvar wheelDistance = function wheelDistance(evt) {\n  if (!evt) evt = event;\n  var w = evt.wheelDelta,\n      d = evt.detail;\n  if (d) {\n    if (w) return w / d / 40 * d > 0 ? 1 : -1; // Opera\n    else return -d / 3; // Firefox;         TODO: do not /3 for OS X\n  } else return w / 120; // IE/Safari/Chrome TODO: /3 for Chrome OS X\n};\n\nvar ViewportCanvas = function (_Core$System) {\n  __WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_inherits___default()(ViewportCanvas, _Core$System);\n\n  function ViewportCanvas() {\n    __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck___default()(this, ViewportCanvas);\n\n    return __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn___default()(this, (ViewportCanvas.__proto__ || __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of___default()(ViewportCanvas)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass___default()(ViewportCanvas, [{\n    key: 'defaultOptions',\n    value: function defaultOptions() {\n      return {\n        lineWidth: 1.5,\n        zoom: 1.0,\n        zoomMin: 0.1,\n        zoomMax: 10.0,\n        zoomWheelFactor: 0.025,\n        gridEnabled: true,\n        gridSize: 500,\n        gridColor: '#111',\n        followEnabled: true,\n        followName: null,\n        followEntityId: null\n      };\n    }\n  }, {\n    key: 'initialize',\n    value: function initialize() {\n      var _this3 = this;\n\n      this.container = document.querySelector(this.options.container);\n      this.canvas = document.createElement('canvas');\n      this.container.appendChild(this.canvas);\n\n      this.ctx = this.canvas.getContext('2d');\n\n      var events = {\n        'resize': function resize(ev) {\n          _this3.updateMetrics(ev);\n        },\n        'orientationchange': function orientationchange(ev) {\n          _this3.updateMetrics(ev);\n        },\n        'mousedown': function mousedown(ev) {\n          _this3.onMouseDown(ev);\n        },\n        'mousemove': function mousemove(ev) {\n          _this3.onMouseMove(ev);\n        },\n        'mouseup': function mouseup(ev) {\n          _this3.onMouseUp(ev);\n        }\n        //'wheel': (ev) => { this.onMouseWheel(ev); }\n      };\n\n      for (var name in events) {\n        this.canvas.addEventListener(name, events[name], false);\n      }\n\n      // See also: http://phrogz.net/JS/wheeldelta.html\n      var boundOnMouseWheel = function boundOnMouseWheel(ev) {\n        return _this3.onMouseWheel(ev);\n      };\n      if (window.addEventListener) {\n        window.addEventListener('mousewheel', boundOnMouseWheel, false); // Chrome/Safari/Opera\n        window.addEventListener('DOMMouseScroll', boundOnMouseWheel, false); // Firefox\n      } else if (window.attachEvent) {\n        window.attachEvent('onmousewheel', boundOnMouseWheel); // IE\n      }\n\n      this.followEnabled = this.options.followEnabled;\n      this.zoom = this.options.zoom;\n      this.followEntityId = this.options.followEntityId;\n      this.gridEnabled = this.options.gridEnabled;\n      this.lineWidth = this.options.lineWidth;\n\n      this.cursorRawX = 0;\n      this.cursorRawY = 0;\n\n      this.cursorChanged = false;\n      this.cursorPosition = { x: 0, y: 0 };\n\n      this.cameraX = 0;\n      this.cameraY = 0;\n\n      this.debugDummySprite = { size: 100 };\n    }\n  }, {\n    key: 'draw',\n    value: function draw(timeDelta) {\n      this.updateMetrics();\n      this.ctx.save();\n\n      this.clear();\n      this.centerAndZoom(timeDelta);\n      this.followEntity(timeDelta);\n\n      if (this.gridEnabled) {\n        this.drawBackdrop(timeDelta);\n      }\n\n      this.drawScene(timeDelta);\n\n      if (this.world.debug) {\n        this.drawDebugCursor();\n      }\n\n      this.ctx.restore();\n    }\n  }, {\n    key: 'onMouseWheel',\n    value: function onMouseWheel(ev) {\n      this.zoom += wheelDistance(ev) * this.options.zoomWheelFactor;\n      if (this.zoom < this.options.zoomMin) {\n        this.zoom = this.options.zoomMin;\n      }\n      if (this.zoom > this.options.zoomMax) {\n        this.zoom = this.options.zoomMax;\n      }\n    }\n\n    // TODO: Use a symbol for 'mouse{Down,Move,Up}' message?\n\n  }, {\n    key: 'onMouseDown',\n    value: function onMouseDown(ev) {\n      this.setCursor(ev.clientX, ev.clientY);\n      this.world.publish('mouseDown', this.cursorPosition);\n    }\n  }, {\n    key: 'onMouseMove',\n    value: function onMouseMove(ev) {\n      this.setCursor(ev.clientX, ev.clientY);\n    }\n  }, {\n    key: 'onMouseUp',\n    value: function onMouseUp(ev) {\n      this.setCursor(ev.clientX, ev.clientY);\n      this.world.publish('mouseUp', this.cursorPosition);\n    }\n  }, {\n    key: 'update',\n    value: function update() /* timeDelta */{\n      // Use the cursorChanged flag set by setCursor to limit mouseMove messages\n      // to one per game loop tick\n      if (this.cursorChanged) {\n        this.cursorChanged = false;\n        this.world.publish('mouseMove', this.cursorPosition);\n      }\n    }\n  }, {\n    key: 'setCursor',\n    value: function setCursor(x, y) {\n      var width = this.container.offsetWidth;\n      var height = this.container.offsetHeight;\n\n      this.cursorRawX = x;\n      this.cursorRawY = y;\n\n      var newX = (x - width / 2) / this.zoom + this.cameraX;\n      var newY = (y - height / 2) / this.zoom + this.cameraY;\n\n      if (newX !== this.cursorPosition.x || newY !== this.cursorPosition.y) {\n        this.cursorChanged = true;\n        this.cursorPosition.x = newX;\n        this.cursorPosition.y = newY;\n      }\n    }\n  }, {\n    key: 'updateMetrics',\n    value: function updateMetrics() {\n      var width = this.container.offsetWidth;\n      var height = this.container.offsetHeight;\n\n      this.canvas.width = width;\n      this.canvas.height = height;\n\n      this.visibleWidth = width / this.zoom;\n      this.visibleHeight = height / this.zoom;\n\n      this.visibleLeft = 0 - this.visibleWidth / 2 + this.cameraX;\n      this.visibleTop = 0 - this.visibleHeight / 2 + this.cameraY;\n      this.visibleRight = this.visibleLeft + this.visibleWidth;\n      this.visibleBottom = this.visibleTop + this.visibleHeight;\n    }\n  }, {\n    key: 'clear',\n    value: function clear() {\n      this.ctx.fillStyle = 'rgba(0, 0, 0, 1.0)';\n      this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n    }\n  }, {\n    key: 'centerAndZoom',\n    value: function centerAndZoom() {\n      this.ctx.translate(this.canvas.width / 2, this.canvas.height / 2);\n      this.ctx.scale(this.zoom, this.zoom);\n    }\n  }, {\n    key: 'followEntity',\n    value: function followEntity() {\n      if (!this.followEnabled) {\n        this.cameraX = this.cameraY = 0;\n        return;\n      }\n      if (this.options.followName && !this.followEntityId) {\n        // Look up named entity, if necessary.\n        this.followEntityId = __WEBPACK_IMPORTED_MODULE_8__lib_core__[\"getComponent\"]('Name').findEntityByName(this.world, this.options.followName);\n      }\n      if (this.followEntityId) {\n        // Adjust the viewport center offset to the entity position\n        var position = this.world.get('Position', this.followEntityId);\n        if (position) {\n          this.cameraX = position.x;\n          this.cameraY = position.y;\n          this.setCursor(this.cursorRawX, this.cursorRawY);\n          this.ctx.translate(0 - this.cameraX, 0 - this.cameraY);\n        }\n      }\n    }\n  }, {\n    key: 'drawDebugCursor',\n    value: function drawDebugCursor() {\n      var ctx = this.ctx;\n      ctx.save();\n      ctx.strokeStyle = '#f0f';\n      ctx.lineWidth = this.lineWidth / this.zoom;\n      ctx.translate(this.cursorPosition.x, this.cursorPosition.y);\n      ctx.beginPath();\n      ctx.moveTo(-20, 0);\n      ctx.lineTo(20, 0);\n      ctx.moveTo(0, -20);\n      ctx.lineTo(0, 20);\n      ctx.strokeRect(-10, -10, 20, 20);\n      ctx.stroke();\n      ctx.restore();\n    }\n  }, {\n    key: 'drawBackdrop',\n    value: function drawBackdrop() {\n      var gridSize = this.options.gridSize;\n      var gridOffsetX = this.visibleLeft % gridSize;\n      var gridOffsetY = this.visibleTop % gridSize;\n\n      var ctx = this.ctx;\n\n      ctx.save();\n      ctx.beginPath();\n\n      ctx.strokeStyle = this.options.gridColor;\n      ctx.lineWidth = this.lineWidth / this.zoom;\n\n      for (var x = this.visibleLeft - gridOffsetX; x < this.visibleRight; x += gridSize) {\n        ctx.moveTo(x, this.visibleTop);\n        ctx.lineTo(x, this.visibleBottom);\n      }\n\n      for (var y = this.visibleTop - gridOffsetY; y < this.visibleBottom; y += gridSize) {\n        ctx.moveTo(this.visibleLeft, y);\n        ctx.lineTo(this.visibleRight, y);\n      }\n\n      ctx.stroke();\n      ctx.restore();\n    }\n  }, {\n    key: 'drawScene',\n    value: function drawScene(timeDelta) {\n      var positions = this.world.get('Position');\n      for (var entityId in positions) {\n        this.drawSprite(timeDelta, entityId, positions[entityId]);\n      }\n    }\n  }, {\n    key: 'drawSprite',\n    value: function drawSprite(timeDelta, entityId, position) {\n\n      var sprite = this.world.get('Sprite', entityId);\n      if (!sprite) {\n        sprite = CanvasSprite.defaults();\n      }\n\n      var spriteFn = getSprite(sprite.name);\n      if (!spriteFn) {\n        spriteFn = getSprite('default');\n      }\n\n      var ctx = this.ctx;\n\n      ctx.save();\n\n      ctx.translate(position.x, position.y);\n\n      ctx.rotate(position.rotation + Math.PI / 2);\n      ctx.scale(sprite.size / 100, sprite.size / 100);\n\n      // HACK: Try to keep line width consistent regardless of zoom, to sort of\n      // simulate a vector display\n      ctx.lineWidth = this.lineWidth / this.zoom / (sprite.size / 100);\n\n      ctx.strokeStyle = sprite.color;\n      spriteFn(ctx, timeDelta, sprite, entityId);\n\n      ctx.restore();\n    }\n  }]);\n\n  return ViewportCanvas;\n}(__WEBPACK_IMPORTED_MODULE_8__lib_core__[\"System\"]);\n\n__WEBPACK_IMPORTED_MODULE_8__lib_core__[\"registerSystem\"]('ViewportCanvas', ViewportCanvas);\n\nvar spriteRegistry = {};\nfunction registerSprite(name, sprite) {\n  spriteRegistry[name] = sprite;\n}\nfunction getSprite(name) {\n  return spriteRegistry[name];\n}\n\nvar PI2 = Math.PI * 2;\n\nregisterSprite('default', function (ctx /*, timeDelta, sprite, entityId*/) {\n  ctx.beginPath();\n  ctx.arc(0, 0, 50, 0, PI2, true);\n  ctx.moveTo(0, 0);\n  ctx.lineTo(0, -50);\n  ctx.moveTo(0, 0);\n  ctx.stroke();\n});\n\nregisterSprite('sun', function (ctx /*, timeDelta, sprite, entityId*/) {\n  ctx.beginPath();\n  ctx.arc(0, 0, 50, 0, PI2, true);\n  ctx.stroke();\n});\n\nregisterSprite('enemyscout', function (ctx /*, timeDelta, sprite, entityId*/) {\n  ctx.beginPath();\n  ctx.moveTo(0, -50);\n  ctx.lineTo(-45, 50);\n  ctx.lineTo(-12.5, 12.5);\n  ctx.lineTo(0, 25);\n  ctx.lineTo(12.5, 12.5);\n  ctx.lineTo(45, 50);\n  ctx.lineTo(0, -50);\n  ctx.moveTo(0, -50);\n  ctx.stroke();\n});\n\nregisterSprite('hero', function (ctx /*, timeDelta, sprite, entityId*/) {\n  ctx.rotate(Math.PI);\n  ctx.beginPath();\n  ctx.moveTo(-12.5, -50);\n  ctx.lineTo(-25, -50);\n  ctx.lineTo(-50, 0);\n  ctx.arc(0, 0, 50, Math.PI, 0, true);\n  ctx.lineTo(25, -50);\n  ctx.lineTo(12.5, -50);\n  ctx.lineTo(25, 0);\n  ctx.arc(0, 0, 25, 0, Math.PI, true);\n  ctx.lineTo(-12.5, -50);\n  ctx.stroke();\n});\n\nregisterSprite('asteroid', function (ctx, timeDelta, sprite /*, entityId*/) {\n  var idx = void 0;\n\n  if (!sprite.points) {\n    var NUM_POINTS = 7 + Math.floor(8 * Math.random());\n    var MAX_RADIUS = 50;\n    var MIN_RADIUS = 35;\n    var ROTATION = PI2 / NUM_POINTS;\n\n    sprite.points = [];\n    for (idx = 0; idx < NUM_POINTS; idx++) {\n      var rot = idx * ROTATION;\n      var dist = Math.random() * (MAX_RADIUS - MIN_RADIUS) + MIN_RADIUS;\n      sprite.points.push([dist * Math.cos(rot), dist * Math.sin(rot)]);\n    }\n  }\n\n  ctx.beginPath();\n  ctx.moveTo(sprite.points[0][0], sprite.points[0][1]);\n  for (idx = 0; idx < sprite.points.length; idx++) {\n    ctx.lineTo(sprite.points[idx][0], sprite.points[idx][1]);\n  }\n  ctx.lineTo(sprite.points[0][0], sprite.points[0][1]);\n  ctx.stroke();\n});\n\nregisterSprite('explosion', function (ctx, timeDelta, sprite /*, entityId*/) {\n  var p = void 0,\n      idx = void 0;\n\n  if (!sprite.initialized) {\n\n    sprite.initialized = true;\n\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default()(sprite, __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({\n      ttl: 2.0,\n      radius: 100,\n      maxParticles: 25,\n      maxParticleSize: 4,\n      maxVelocity: 300,\n      color: '#f00',\n      age: 0,\n      stop: false\n    }, sprite));\n\n    sprite.particles = [];\n\n    for (idx = 0; idx < sprite.maxParticles; idx++) {\n      sprite.particles.push({ free: true });\n    }\n  }\n\n  for (idx = 0; idx < sprite.particles.length; idx++) {\n    p = sprite.particles[idx];\n\n    if (!sprite.stop && p.free) {\n\n      p.velocity = sprite.maxVelocity * Math.random();\n      p.angle = Math.PI * 2 * Math.random();\n      p.dx = 0 - p.velocity * Math.sin(p.angle);\n      p.dy = p.velocity * Math.cos(p.angle);\n      p.distance = p.x = p.y = 0;\n      p.maxDistance = sprite.radius * Math.random();\n      p.size = sprite.maxParticleSize;\n      p.free = false;\n    } else if (!p.free) {\n\n      p.x += p.dx * timeDelta;\n      p.y += p.dy * timeDelta;\n\n      p.distance += p.velocity * timeDelta;\n      if (p.distance >= p.maxDistance) {\n        p.distance = p.maxDistance;\n        p.free = true;\n      }\n    }\n  }\n\n  sprite.age += timeDelta;\n\n  if (sprite.age >= sprite.ttl) {\n    sprite.stop = true;\n  }\n\n  var alpha = Math.max(0, 1 - sprite.age / sprite.ttl);\n\n  ctx.save();\n  ctx.strokeStyle = sprite.color;\n  ctx.fillStyle = sprite.color;\n\n  for (idx = 0; idx < sprite.particles.length; idx++) {\n    p = sprite.particles[idx];\n    if (p.free) {\n      continue;\n    }\n\n    ctx.globalAlpha = (1 - p.distance / p.maxDistance) * alpha;\n\n    ctx.beginPath();\n    ctx.moveTo(0, 0);\n    ctx.lineWidth = p.size;\n    ctx.lineTo(p.x, p.y);\n    ctx.stroke();\n  }\n\n  ctx.restore();\n});\n\n/***/ }),\n/* 77 */\n/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\\\n  !*** multi ./src/lib/core.js ./src/plugins/bounce.js ./src/plugins/collision.js ./src/plugins/datGui.js ./src/plugins/drawStats.js ./src/plugins/expiration.js ./src/plugins/health.js ./src/plugins/hordeSpawn.js ./src/plugins/memoryStats.js ./src/plugins/motion.js ./src/plugins/name.js ./src/plugins/orbiter.js ./src/plugins/pathfinding.js ./src/plugins/playerInputSteering.js ./src/plugins/position.js ./src/plugins/repulsor.js ./src/plugins/seeker.js ./src/plugins/spawn.js ./src/plugins/steering.js ./src/plugins/thruster.js ./src/plugins/viewportCanvas.js ./src/plugins/viewportPixi.js ./src/plugins/viewportWebGL.js ***!\n  \\***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(/*! ./src/lib/core.js */0);\n__webpack_require__(/*! ./src/plugins/bounce.js */35);\n__webpack_require__(/*! ./src/plugins/collision.js */37);\n__webpack_require__(/*! ./src/plugins/datGui.js */18);\n__webpack_require__(/*! ./src/plugins/drawStats.js */19);\n__webpack_require__(/*! ./src/plugins/expiration.js */72);\n__webpack_require__(/*! ./src/plugins/health.js */26);\n__webpack_require__(/*! ./src/plugins/hordeSpawn.js */58);\n__webpack_require__(/*! ./src/plugins/memoryStats.js */20);\n__webpack_require__(/*! ./src/plugins/motion.js */8);\n__webpack_require__(/*! ./src/plugins/name.js */21);\n__webpack_require__(/*! ./src/plugins/orbiter.js */73);\n__webpack_require__(/*! ./src/plugins/pathfinding.js */74);\n__webpack_require__(/*! ./src/plugins/playerInputSteering.js */39);\n__webpack_require__(/*! ./src/plugins/position.js */7);\n__webpack_require__(/*! ./src/plugins/repulsor.js */59);\n__webpack_require__(/*! ./src/plugins/seeker.js */28);\n__webpack_require__(/*! ./src/plugins/spawn.js */27);\n__webpack_require__(/*! ./src/plugins/steering.js */75);\n__webpack_require__(/*! ./src/plugins/thruster.js */29);\n__webpack_require__(/*! ./src/plugins/viewportCanvas.js */76);\n__webpack_require__(/*! ./src/plugins/viewportPixi.js */128);\nmodule.exports = __webpack_require__(/*! ./src/plugins/viewportWebGL.js */30);\n\n\n/***/ }),\n/* 78 */\n/*!**********************************************************!*\\\n  !*** ./node_modules/core-js/library/fn/object/assign.js ***!\n  \\**********************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(/*! ../../modules/es6.object.assign */ 79);\nmodule.exports = __webpack_require__(/*! ../../modules/_core */ 6).Object.assign;\n\n\n/***/ }),\n/* 79 */\n/*!*******************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/es6.object.assign.js ***!\n  \\*******************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.3.1 Object.assign(target, source)\nvar $export = __webpack_require__(/*! ./_export */ 10);\n\n$export($export.S + $export.F, 'Object', { assign: __webpack_require__(/*! ./_object-assign */ 81) });\n\n\n/***/ }),\n/* 80 */\n/*!*************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_a-function.js ***!\n  \\*************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports) {\n\nmodule.exports = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n\n\n/***/ }),\n/* 81 */\n/*!****************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_object-assign.js ***!\n  \\****************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n// 19.1.2.1 Object.assign(target, source, ...)\nvar getKeys = __webpack_require__(/*! ./_object-keys */ 15);\nvar gOPS = __webpack_require__(/*! ./_object-gops */ 50);\nvar pIE = __webpack_require__(/*! ./_object-pie */ 33);\nvar toObject = __webpack_require__(/*! ./_to-object */ 34);\nvar IObject = __webpack_require__(/*! ./_iobject */ 64);\nvar $assign = Object.assign;\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = !$assign || __webpack_require__(/*! ./_fails */ 24)(function () {\n  var A = {};\n  var B = {};\n  // eslint-disable-next-line no-undef\n  var S = Symbol();\n  var K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function (k) { B[k] = k; });\n  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;\n}) ? function assign(target, source) { // eslint-disable-line no-unused-vars\n  var T = toObject(target);\n  var aLen = arguments.length;\n  var index = 1;\n  var getSymbols = gOPS.f;\n  var isEnum = pIE.f;\n  while (aLen > index) {\n    var S = IObject(arguments[index++]);\n    var keys = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S);\n    var length = keys.length;\n    var j = 0;\n    var key;\n    while (length > j) if (isEnum.call(S, key = keys[j++])) T[key] = S[key];\n  } return T;\n} : $assign;\n\n\n/***/ }),\n/* 82 */\n/*!*****************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_array-includes.js ***!\n  \\*****************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = __webpack_require__(/*! ./_to-iobject */ 11);\nvar toLength = __webpack_require__(/*! ./_to-length */ 65);\nvar toAbsoluteIndex = __webpack_require__(/*! ./_to-absolute-index */ 83);\nmodule.exports = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) if (IS_INCLUDES || index in O) {\n      if (O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\n\n/***/ }),\n/* 83 */\n/*!********************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_to-absolute-index.js ***!\n  \\********************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar toInteger = __webpack_require__(/*! ./_to-integer */ 46);\nvar max = Math.max;\nvar min = Math.min;\nmodule.exports = function (index, length) {\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n\n\n/***/ }),\n/* 84 */\n/*!**********************************************************************!*\\\n  !*** ./node_modules/babel-runtime/core-js/object/define-property.js ***!\n  \\**********************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(/*! core-js/library/fn/object/define-property */ 85), __esModule: true };\n\n/***/ }),\n/* 85 */\n/*!*******************************************************************!*\\\n  !*** ./node_modules/core-js/library/fn/object/define-property.js ***!\n  \\*******************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(/*! ../../modules/es6.object.define-property */ 86);\nvar $Object = __webpack_require__(/*! ../../modules/_core */ 6).Object;\nmodule.exports = function defineProperty(it, key, desc) {\n  return $Object.defineProperty(it, key, desc);\n};\n\n\n/***/ }),\n/* 86 */\n/*!****************************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/es6.object.define-property.js ***!\n  \\****************************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar $export = __webpack_require__(/*! ./_export */ 10);\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n$export($export.S + $export.F * !__webpack_require__(/*! ./_descriptors */ 14), 'Object', { defineProperty: __webpack_require__(/*! ./_object-dp */ 13).f });\n\n\n/***/ }),\n/* 87 */\n/*!********************************************************************!*\\\n  !*** ./node_modules/core-js/library/fn/object/get-prototype-of.js ***!\n  \\********************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(/*! ../../modules/es6.object.get-prototype-of */ 88);\nmodule.exports = __webpack_require__(/*! ../../modules/_core */ 6).Object.getPrototypeOf;\n\n\n/***/ }),\n/* 88 */\n/*!*****************************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/es6.object.get-prototype-of.js ***!\n  \\*****************************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.2.9 Object.getPrototypeOf(O)\nvar toObject = __webpack_require__(/*! ./_to-object */ 34);\nvar $getPrototypeOf = __webpack_require__(/*! ./_object-gpo */ 66);\n\n__webpack_require__(/*! ./_object-sap */ 51)('getPrototypeOf', function () {\n  return function getPrototypeOf(it) {\n    return $getPrototypeOf(toObject(it));\n  };\n});\n\n\n/***/ }),\n/* 89 */\n/*!***************************************************************!*\\\n  !*** ./node_modules/babel-runtime/core-js/symbol/iterator.js ***!\n  \\***************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(/*! core-js/library/fn/symbol/iterator */ 90), __esModule: true };\n\n/***/ }),\n/* 90 */\n/*!************************************************************!*\\\n  !*** ./node_modules/core-js/library/fn/symbol/iterator.js ***!\n  \\************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(/*! ../../modules/es6.string.iterator */ 68);\n__webpack_require__(/*! ../../modules/web.dom.iterable */ 95);\nmodule.exports = __webpack_require__(/*! ../../modules/_wks-ext */ 55).f('iterator');\n\n\n/***/ }),\n/* 91 */\n/*!************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_string-at.js ***!\n  \\************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar toInteger = __webpack_require__(/*! ./_to-integer */ 46);\nvar defined = __webpack_require__(/*! ./_defined */ 45);\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function (TO_STRING) {\n  return function (that, pos) {\n    var s = String(defined(that));\n    var i = toInteger(pos);\n    var l = s.length;\n    var a, b;\n    if (i < 0 || i >= l) return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};\n\n\n/***/ }),\n/* 92 */\n/*!**************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_iter-create.js ***!\n  \\**************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar create = __webpack_require__(/*! ./_object-create */ 53);\nvar descriptor = __webpack_require__(/*! ./_property-desc */ 32);\nvar setToStringTag = __webpack_require__(/*! ./_set-to-string-tag */ 54);\nvar IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\n__webpack_require__(/*! ./_hide */ 22)(IteratorPrototype, __webpack_require__(/*! ./_wks */ 9)('iterator'), function () { return this; });\n\nmodule.exports = function (Constructor, NAME, next) {\n  Constructor.prototype = create(IteratorPrototype, { next: descriptor(1, next) });\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n\n\n/***/ }),\n/* 93 */\n/*!*************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_object-dps.js ***!\n  \\*************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar dP = __webpack_require__(/*! ./_object-dp */ 13);\nvar anObject = __webpack_require__(/*! ./_an-object */ 23);\nvar getKeys = __webpack_require__(/*! ./_object-keys */ 15);\n\nmodule.exports = __webpack_require__(/*! ./_descriptors */ 14) ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = getKeys(Properties);\n  var length = keys.length;\n  var i = 0;\n  var P;\n  while (length > i) dP.f(O, P = keys[i++], Properties[P]);\n  return O;\n};\n\n\n/***/ }),\n/* 94 */\n/*!*******************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_html.js ***!\n  \\*******************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar document = __webpack_require__(/*! ./_global */ 12).document;\nmodule.exports = document && document.documentElement;\n\n\n/***/ }),\n/* 95 */\n/*!******************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/web.dom.iterable.js ***!\n  \\******************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(/*! ./es6.array.iterator */ 96);\nvar global = __webpack_require__(/*! ./_global */ 12);\nvar hide = __webpack_require__(/*! ./_hide */ 22);\nvar Iterators = __webpack_require__(/*! ./_iterators */ 36);\nvar TO_STRING_TAG = __webpack_require__(/*! ./_wks */ 9)('toStringTag');\n\nvar DOMIterables = ('CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,' +\n  'DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,' +\n  'MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,' +\n  'SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,' +\n  'TextTrackList,TouchList').split(',');\n\nfor (var i = 0; i < DOMIterables.length; i++) {\n  var NAME = DOMIterables[i];\n  var Collection = global[NAME];\n  var proto = Collection && Collection.prototype;\n  if (proto && !proto[TO_STRING_TAG]) hide(proto, TO_STRING_TAG, NAME);\n  Iterators[NAME] = Iterators.Array;\n}\n\n\n/***/ }),\n/* 96 */\n/*!********************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/es6.array.iterator.js ***!\n  \\********************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar addToUnscopables = __webpack_require__(/*! ./_add-to-unscopables */ 97);\nvar step = __webpack_require__(/*! ./_iter-step */ 98);\nvar Iterators = __webpack_require__(/*! ./_iterators */ 36);\nvar toIObject = __webpack_require__(/*! ./_to-iobject */ 11);\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = __webpack_require__(/*! ./_iter-define */ 69)(Array, 'Array', function (iterated, kind) {\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var kind = this._k;\n  var index = this._i++;\n  if (!O || index >= O.length) {\n    this._t = undefined;\n    return step(1);\n  }\n  if (kind == 'keys') return step(0, index);\n  if (kind == 'values') return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n\n\n/***/ }),\n/* 97 */\n/*!*********************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_add-to-unscopables.js ***!\n  \\*********************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports) {\n\nmodule.exports = function () { /* empty */ };\n\n\n/***/ }),\n/* 98 */\n/*!************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_iter-step.js ***!\n  \\************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports) {\n\nmodule.exports = function (done, value) {\n  return { value: value, done: !!done };\n};\n\n\n/***/ }),\n/* 99 */\n/*!******************************************************!*\\\n  !*** ./node_modules/babel-runtime/core-js/symbol.js ***!\n  \\******************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(/*! core-js/library/fn/symbol */ 100), __esModule: true };\n\n/***/ }),\n/* 100 */\n/*!*********************************************************!*\\\n  !*** ./node_modules/core-js/library/fn/symbol/index.js ***!\n  \\*********************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(/*! ../../modules/es6.symbol */ 101);\n__webpack_require__(/*! ../../modules/es6.object.to-string */ 107);\n__webpack_require__(/*! ../../modules/es7.symbol.async-iterator */ 108);\n__webpack_require__(/*! ../../modules/es7.symbol.observable */ 109);\nmodule.exports = __webpack_require__(/*! ../../modules/_core */ 6).Symbol;\n\n\n/***/ }),\n/* 101 */\n/*!************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/es6.symbol.js ***!\n  \\************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n// ECMAScript 6 symbols shim\nvar global = __webpack_require__(/*! ./_global */ 12);\nvar has = __webpack_require__(/*! ./_has */ 16);\nvar DESCRIPTORS = __webpack_require__(/*! ./_descriptors */ 14);\nvar $export = __webpack_require__(/*! ./_export */ 10);\nvar redefine = __webpack_require__(/*! ./_redefine */ 70);\nvar META = __webpack_require__(/*! ./_meta */ 102).KEY;\nvar $fails = __webpack_require__(/*! ./_fails */ 24);\nvar shared = __webpack_require__(/*! ./_shared */ 48);\nvar setToStringTag = __webpack_require__(/*! ./_set-to-string-tag */ 54);\nvar uid = __webpack_require__(/*! ./_uid */ 41);\nvar wks = __webpack_require__(/*! ./_wks */ 9);\nvar wksExt = __webpack_require__(/*! ./_wks-ext */ 55);\nvar wksDefine = __webpack_require__(/*! ./_wks-define */ 56);\nvar keyOf = __webpack_require__(/*! ./_keyof */ 103);\nvar enumKeys = __webpack_require__(/*! ./_enum-keys */ 104);\nvar isArray = __webpack_require__(/*! ./_is-array */ 105);\nvar anObject = __webpack_require__(/*! ./_an-object */ 23);\nvar toIObject = __webpack_require__(/*! ./_to-iobject */ 11);\nvar toPrimitive = __webpack_require__(/*! ./_to-primitive */ 43);\nvar createDesc = __webpack_require__(/*! ./_property-desc */ 32);\nvar _create = __webpack_require__(/*! ./_object-create */ 53);\nvar gOPNExt = __webpack_require__(/*! ./_object-gopn-ext */ 106);\nvar $GOPD = __webpack_require__(/*! ./_object-gopd */ 57);\nvar $DP = __webpack_require__(/*! ./_object-dp */ 13);\nvar $keys = __webpack_require__(/*! ./_object-keys */ 15);\nvar gOPD = $GOPD.f;\nvar dP = $DP.f;\nvar gOPN = gOPNExt.f;\nvar $Symbol = global.Symbol;\nvar $JSON = global.JSON;\nvar _stringify = $JSON && $JSON.stringify;\nvar PROTOTYPE = 'prototype';\nvar HIDDEN = wks('_hidden');\nvar TO_PRIMITIVE = wks('toPrimitive');\nvar isEnum = {}.propertyIsEnumerable;\nvar SymbolRegistry = shared('symbol-registry');\nvar AllSymbols = shared('symbols');\nvar OPSymbols = shared('op-symbols');\nvar ObjectProto = Object[PROTOTYPE];\nvar USE_NATIVE = typeof $Symbol == 'function';\nvar QObject = global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function () {\n  return _create(dP({}, 'a', {\n    get: function () { return dP(this, 'a', { value: 7 }).a; }\n  })).a != 7;\n}) ? function (it, key, D) {\n  var protoDesc = gOPD(ObjectProto, key);\n  if (protoDesc) delete ObjectProto[key];\n  dP(it, key, D);\n  if (protoDesc && it !== ObjectProto) dP(ObjectProto, key, protoDesc);\n} : dP;\n\nvar wrap = function (tag) {\n  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);\n  sym._k = tag;\n  return sym;\n};\n\nvar isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  return it instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(it, key, D) {\n  if (it === ObjectProto) $defineProperty(OPSymbols, key, D);\n  anObject(it);\n  key = toPrimitive(key, true);\n  anObject(D);\n  if (has(AllSymbols, key)) {\n    if (!D.enumerable) {\n      if (!has(it, HIDDEN)) dP(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if (has(it, HIDDEN) && it[HIDDEN][key]) it[HIDDEN][key] = false;\n      D = _create(D, { enumerable: createDesc(0, false) });\n    } return setSymbolDesc(it, key, D);\n  } return dP(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P) {\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P));\n  var i = 0;\n  var l = keys.length;\n  var key;\n  while (l > i) $defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P) {\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key) {\n  var E = isEnum.call(this, key = toPrimitive(key, true));\n  if (this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return false;\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key) {\n  it = toIObject(it);\n  key = toPrimitive(key, true);\n  if (it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return;\n  var D = gOPD(it, key);\n  if (D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key])) D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it) {\n  var names = gOPN(toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META) result.push(key);\n  } return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it) {\n  var IS_OP = it === ObjectProto;\n  var names = gOPN(IS_OP ? OPSymbols : toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true)) result.push(AllSymbols[key]);\n  } return result;\n};\n\n// 19.4.1.1 Symbol([description])\nif (!USE_NATIVE) {\n  $Symbol = function Symbol() {\n    if (this instanceof $Symbol) throw TypeError('Symbol is not a constructor!');\n    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);\n    var $set = function (value) {\n      if (this === ObjectProto) $set.call(OPSymbols, value);\n      if (has(this, HIDDEN) && has(this[HIDDEN], tag)) this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    };\n    if (DESCRIPTORS && setter) setSymbolDesc(ObjectProto, tag, { configurable: true, set: $set });\n    return wrap(tag);\n  };\n  redefine($Symbol[PROTOTYPE], 'toString', function toString() {\n    return this._k;\n  });\n\n  $GOPD.f = $getOwnPropertyDescriptor;\n  $DP.f = $defineProperty;\n  __webpack_require__(/*! ./_object-gopn */ 71).f = gOPNExt.f = $getOwnPropertyNames;\n  __webpack_require__(/*! ./_object-pie */ 33).f = $propertyIsEnumerable;\n  __webpack_require__(/*! ./_object-gops */ 50).f = $getOwnPropertySymbols;\n\n  if (DESCRIPTORS && !__webpack_require__(/*! ./_library */ 52)) {\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n\n  wksExt.f = function (name) {\n    return wrap(wks(name));\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Symbol: $Symbol });\n\nfor (var es6Symbols = (\n  // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'\n).split(','), j = 0; es6Symbols.length > j;)wks(es6Symbols[j++]);\n\nfor (var wellKnownSymbols = $keys(wks.store), k = 0; wellKnownSymbols.length > k;) wksDefine(wellKnownSymbols[k++]);\n\n$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function (key) {\n    return has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(key) {\n    if (isSymbol(key)) return keyOf(SymbolRegistry, key);\n    throw TypeError(key + ' is not a symbol!');\n  },\n  useSetter: function () { setter = true; },\n  useSimple: function () { setter = false; }\n});\n\n$export($export.S + $export.F * !USE_NATIVE, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function () {\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({ a: S }) != '{}' || _stringify(Object(S)) != '{}';\n})), 'JSON', {\n  stringify: function stringify(it) {\n    if (it === undefined || isSymbol(it)) return; // IE8 returns string on undefined\n    var args = [it];\n    var i = 1;\n    var replacer, $replacer;\n    while (arguments.length > i) args.push(arguments[i++]);\n    replacer = args[1];\n    if (typeof replacer == 'function') $replacer = replacer;\n    if ($replacer || !isArray(replacer)) replacer = function (key, value) {\n      if ($replacer) value = $replacer.call(this, key, value);\n      if (!isSymbol(value)) return value;\n    };\n    args[1] = replacer;\n    return _stringify.apply($JSON, args);\n  }\n});\n\n// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)\n$Symbol[PROTOTYPE][TO_PRIMITIVE] || __webpack_require__(/*! ./_hide */ 22)($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);\n\n\n/***/ }),\n/* 102 */\n/*!*******************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_meta.js ***!\n  \\*******************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar META = __webpack_require__(/*! ./_uid */ 41)('meta');\nvar isObject = __webpack_require__(/*! ./_is-object */ 31);\nvar has = __webpack_require__(/*! ./_has */ 16);\nvar setDesc = __webpack_require__(/*! ./_object-dp */ 13).f;\nvar id = 0;\nvar isExtensible = Object.isExtensible || function () {\n  return true;\n};\nvar FREEZE = !__webpack_require__(/*! ./_fails */ 24)(function () {\n  return isExtensible(Object.preventExtensions({}));\n});\nvar setMeta = function (it) {\n  setDesc(it, META, { value: {\n    i: 'O' + ++id, // object ID\n    w: {}          // weak collections IDs\n  } });\n};\nvar fastKey = function (it, create) {\n  // return primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F';\n    // not necessary to add metadata\n    if (!create) return 'E';\n    // add missing metadata\n    setMeta(it);\n  // return object ID\n  } return it[META].i;\n};\nvar getWeak = function (it, create) {\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true;\n    // not necessary to add metadata\n    if (!create) return false;\n    // add missing metadata\n    setMeta(it);\n  // return hash weak collections IDs\n  } return it[META].w;\n};\n// add metadata on freeze-family methods calling\nvar onFreeze = function (it) {\n  if (FREEZE && meta.NEED && isExtensible(it) && !has(it, META)) setMeta(it);\n  return it;\n};\nvar meta = module.exports = {\n  KEY: META,\n  NEED: false,\n  fastKey: fastKey,\n  getWeak: getWeak,\n  onFreeze: onFreeze\n};\n\n\n/***/ }),\n/* 103 */\n/*!********************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_keyof.js ***!\n  \\********************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar getKeys = __webpack_require__(/*! ./_object-keys */ 15);\nvar toIObject = __webpack_require__(/*! ./_to-iobject */ 11);\nmodule.exports = function (object, el) {\n  var O = toIObject(object);\n  var keys = getKeys(O);\n  var length = keys.length;\n  var index = 0;\n  var key;\n  while (length > index) if (O[key = keys[index++]] === el) return key;\n};\n\n\n/***/ }),\n/* 104 */\n/*!************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_enum-keys.js ***!\n  \\************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// all enumerable object keys, includes symbols\nvar getKeys = __webpack_require__(/*! ./_object-keys */ 15);\nvar gOPS = __webpack_require__(/*! ./_object-gops */ 50);\nvar pIE = __webpack_require__(/*! ./_object-pie */ 33);\nmodule.exports = function (it) {\n  var result = getKeys(it);\n  var getSymbols = gOPS.f;\n  if (getSymbols) {\n    var symbols = getSymbols(it);\n    var isEnum = pIE.f;\n    var i = 0;\n    var key;\n    while (symbols.length > i) if (isEnum.call(it, key = symbols[i++])) result.push(key);\n  } return result;\n};\n\n\n/***/ }),\n/* 105 */\n/*!***********************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_is-array.js ***!\n  \\***********************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 7.2.2 IsArray(argument)\nvar cof = __webpack_require__(/*! ./_cof */ 44);\nmodule.exports = Array.isArray || function isArray(arg) {\n  return cof(arg) == 'Array';\n};\n\n\n/***/ }),\n/* 106 */\n/*!******************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_object-gopn-ext.js ***!\n  \\******************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = __webpack_require__(/*! ./_to-iobject */ 11);\nvar gOPN = __webpack_require__(/*! ./_object-gopn */ 71).f;\nvar toString = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function (it) {\n  try {\n    return gOPN(it);\n  } catch (e) {\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.f = function getOwnPropertyNames(it) {\n  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));\n};\n\n\n/***/ }),\n/* 107 */\n/*!**********************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/es6.object.to-string.js ***!\n  \\**********************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports) {\n\n\n\n/***/ }),\n/* 108 */\n/*!***************************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/es7.symbol.async-iterator.js ***!\n  \\***************************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(/*! ./_wks-define */ 56)('asyncIterator');\n\n\n/***/ }),\n/* 109 */\n/*!***********************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/es7.symbol.observable.js ***!\n  \\***********************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(/*! ./_wks-define */ 56)('observable');\n\n\n/***/ }),\n/* 110 */\n/*!***********************************************************************!*\\\n  !*** ./node_modules/babel-runtime/core-js/object/set-prototype-of.js ***!\n  \\***********************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(/*! core-js/library/fn/object/set-prototype-of */ 111), __esModule: true };\n\n/***/ }),\n/* 111 */\n/*!********************************************************************!*\\\n  !*** ./node_modules/core-js/library/fn/object/set-prototype-of.js ***!\n  \\********************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(/*! ../../modules/es6.object.set-prototype-of */ 112);\nmodule.exports = __webpack_require__(/*! ../../modules/_core */ 6).Object.setPrototypeOf;\n\n\n/***/ }),\n/* 112 */\n/*!*****************************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/es6.object.set-prototype-of.js ***!\n  \\*****************************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.3.19 Object.setPrototypeOf(O, proto)\nvar $export = __webpack_require__(/*! ./_export */ 10);\n$export($export.S, 'Object', { setPrototypeOf: __webpack_require__(/*! ./_set-proto */ 113).set });\n\n\n/***/ }),\n/* 113 */\n/*!************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_set-proto.js ***!\n  \\************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar isObject = __webpack_require__(/*! ./_is-object */ 31);\nvar anObject = __webpack_require__(/*! ./_an-object */ 23);\nvar check = function (O, proto) {\n  anObject(O);\n  if (!isObject(proto) && proto !== null) throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function (test, buggy, set) {\n      try {\n        set = __webpack_require__(/*! ./_ctx */ 42)(Function.call, __webpack_require__(/*! ./_object-gopd */ 57).f(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch (e) { buggy = true; }\n      return function setPrototypeOf(O, proto) {\n        check(O, proto);\n        if (buggy) O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};\n\n\n/***/ }),\n/* 114 */\n/*!*************************************************************!*\\\n  !*** ./node_modules/babel-runtime/core-js/object/create.js ***!\n  \\*************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(/*! core-js/library/fn/object/create */ 115), __esModule: true };\n\n/***/ }),\n/* 115 */\n/*!**********************************************************!*\\\n  !*** ./node_modules/core-js/library/fn/object/create.js ***!\n  \\**********************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(/*! ../../modules/es6.object.create */ 116);\nvar $Object = __webpack_require__(/*! ../../modules/_core */ 6).Object;\nmodule.exports = function create(P, D) {\n  return $Object.create(P, D);\n};\n\n\n/***/ }),\n/* 116 */\n/*!*******************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/es6.object.create.js ***!\n  \\*******************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar $export = __webpack_require__(/*! ./_export */ 10);\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\n$export($export.S, 'Object', { create: __webpack_require__(/*! ./_object-create */ 53) });\n\n\n/***/ }),\n/* 117 */\n/*!**********************************************************************************!*\\\n  !*** ./node_modules/babel-runtime/core-js/object/get-own-property-descriptor.js ***!\n  \\**********************************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(/*! core-js/library/fn/object/get-own-property-descriptor */ 118), __esModule: true };\n\n/***/ }),\n/* 118 */\n/*!*******************************************************************************!*\\\n  !*** ./node_modules/core-js/library/fn/object/get-own-property-descriptor.js ***!\n  \\*******************************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(/*! ../../modules/es6.object.get-own-property-descriptor */ 119);\nvar $Object = __webpack_require__(/*! ../../modules/_core */ 6).Object;\nmodule.exports = function getOwnPropertyDescriptor(it, key) {\n  return $Object.getOwnPropertyDescriptor(it, key);\n};\n\n\n/***/ }),\n/* 119 */\n/*!****************************************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/es6.object.get-own-property-descriptor.js ***!\n  \\****************************************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\nvar toIObject = __webpack_require__(/*! ./_to-iobject */ 11);\nvar $getOwnPropertyDescriptor = __webpack_require__(/*! ./_object-gopd */ 57).f;\n\n__webpack_require__(/*! ./_object-sap */ 51)('getOwnPropertyDescriptor', function () {\n  return function getOwnPropertyDescriptor(it, key) {\n    return $getOwnPropertyDescriptor(toIObject(it), key);\n  };\n});\n\n\n/***/ }),\n/* 120 */\n/*!*****************************!*\\\n  !*** ./src/lib/QuadTree.js ***!\n  \\*****************************/\n/*! exports provided: default */\n/*! exports used: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = QuadTree;\n/**\r\n * @author       Timo Hausmann\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2014 Photon Storm Ltd.\r\n * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n */\n\n/**\r\n * A QuadTree implementation. The original code was a conversion of the Java code posted to GameDevTuts.\r\n * However I've tweaked it massively to add node indexing, removed lots of temp. var creation and significantly increased performance as a result.\r\n * Original version at https://github.com/timohausmann/quadtree-js/\r\n *\r\n * @class QuadTree\r\n * @constructor\r\n * @param {number} x - The top left coordinate of the quadtree.\r\n * @param {number} y - The top left coordinate of the quadtree.\r\n * @param {number} width - The width of the quadtree in pixels.\r\n * @param {number} height - The height of the quadtree in pixels.\r\n * @param {number} [maxObjects=10] - The maximum number of objects per node.\r\n * @param {number} [maxLevels=4] - The maximum number of levels to iterate to.\r\n * @param {number} [level=0] - Which level is this?\r\n */\nfunction QuadTree(left, top, width, height, maxObjects, maxLevels, level, root) {\n\n  /**\r\n   * @property {number} maxObjects - The maximum number of objects per node.\r\n   * @default\r\n   */\n  this.maxObjects = 10;\n\n  /**\r\n   * @property {number} maxLevels - The maximum number of levels to break down to.\r\n   * @default\r\n   */\n  this.maxLevels = 4;\n\n  /**\r\n   * @property {number} level - The current level.\r\n   */\n  this.level = 0;\n\n  /**\r\n   * @property {object} bounds - Object that contains the quadtree bounds.\r\n   */\n  this.bounds = {};\n\n  /**\r\n   * @property {array} objects - Array of quadtree children.\r\n   */\n  this.objects = [];\n\n  /**\r\n   * @property {array} nodes - Array of associated child nodes.\r\n   */\n  this.nodes = [];\n\n  /**\r\n   * @property {array} _empty - Internal empty array.\r\n   * @private\r\n   */\n  this._empty = [];\n\n  this.root = root || this;\n  this.entityMap = {};\n\n  this.reset(left, top, width, height, maxObjects, maxLevels, level);\n};\n\nQuadTree.prototype = {\n\n  /**\r\n   * Resets the QuadTree.\r\n   *\r\n   * @method QuadTree#reset\r\n   * @param {number} x - The top left coordinate of the quadtree.\r\n   * @param {number} y - The top left coordinate of the quadtree.\r\n   * @param {number} width - The width of the quadtree in pixels.\r\n   * @param {number} height - The height of the quadtree in pixels.\r\n   * @param {number} [maxObjects=10] - The maximum number of objects per node.\r\n   * @param {number} [maxLevels=4] - The maximum number of levels to iterate to.\r\n   * @param {number} [level=0] - Which level is this?\r\n   */\n  reset: function reset(left, top, width, height, maxObjects, maxLevels, level) {\n\n    this.maxObjects = maxObjects || 10;\n    this.maxLevels = maxLevels || 4;\n    this.level = level || 0;\n\n    this.bounds = {\n      width: width,\n      height: height,\n      subWidth: Math.floor(width / 2),\n      subHeight: Math.floor(height / 2),\n      left: Math.round(left),\n      top: Math.round(top),\n      midX: Math.round(left + width / 2),\n      midY: Math.round(top + height / 2),\n      right: Math.round(left + width),\n      bottom: Math.round(top + height)\n    };\n\n    this.objects.length = 0;\n    this.nodes.length = 0;\n  },\n\n  /**\r\n   * Split the node into 4 subnodes\r\n   *\r\n   * @method QuadTree#split\r\n   */\n  split: function split() {\n\n    //  top right node\n    this.nodes[0] = new QuadTree(this.bounds.left + this.bounds.subWidth, this.bounds.top, this.bounds.subWidth, this.bounds.subHeight, this.maxObjects, this.maxLevels, this.level + 1, this.root);\n\n    //  top left node\n    this.nodes[1] = new QuadTree(this.bounds.left, this.bounds.top, this.bounds.subWidth, this.bounds.subHeight, this.maxObjects, this.maxLevels, this.level + 1, this.root);\n\n    //  bottom left node\n    this.nodes[2] = new QuadTree(this.bounds.left, this.bounds.top + this.bounds.subHeight, this.bounds.subWidth, this.bounds.subHeight, this.maxObjects, this.maxLevels, this.level + 1, this.root);\n\n    //  bottom right node\n    this.nodes[3] = new QuadTree(this.bounds.left + this.bounds.subWidth, this.bounds.top + this.bounds.subHeight, this.bounds.subWidth, this.bounds.subHeight, this.maxObjects, this.maxLevels, this.level + 1, this.root);\n  },\n\n  /**\r\n   * Insert the object into the node. If the node exceeds the capacity, it will split and add all objects to their corresponding subnodes.\r\n   *\r\n   * @method QuadTree#insert\r\n   * @param {Phaser.Physics.Arcade.Body|object} body - The Body object to insert into the quadtree. Can be any object so long as it exposes x, y, right and bottom properties.\r\n   */\n  insert: function insert(body) {\n\n    var i = 0;\n    var index;\n\n    //  if we have subnodes ...\n    if (this.nodes[0] != null) {\n      index = this.getIndex(body);\n      if (index !== -1) {\n        this.nodes[index].insert(body);\n        return;\n      }\n    }\n\n    // Check if we already have this item in the quadtree structure.\n    var oldNode = this.root.entityMap[body.entityId];\n    if (oldNode === this) {\n      // If we have the item, and it's this current sub-tree, then just bail.\n      return;\n    }\n    if (oldNode) {\n      // If the item is known, but in another sub-tree, then delete it from there.\n      var objectIndex = oldNode.objects.indexOf(body);\n      if (objectIndex !== -1) {\n        oldNode.objects.splice(objectIndex, 1);\n      }\n    }\n\n    /*\r\n    // TODO: Need the opposite of split() to consolidate subtrees when they\r\n    // lose items.\r\n      this.root.entityMap[body.entityId] = this;\r\n    */\n\n    this.objects.push(body);\n\n    if (this.objects.length > this.maxObjects && this.level < this.maxLevels) {\n      //  Split if we don't already have subnodes\n      if (this.nodes[0] == null) {\n        this.split();\n      }\n      //  Add objects to subnodes\n      while (i < this.objects.length) {\n        index = this.getIndex(this.objects[i]);\n        if (index !== -1) {\n          //  this is expensive - see what we can do about it\n          this.nodes[index].insert(this.objects.splice(i, 1)[0]);\n        } else {\n          i++;\n        }\n      }\n    }\n  },\n\n  /**\r\n   * Determine which node the object belongs to.\r\n   *\r\n   * @method QuadTree#getIndex\r\n   * @param {Phaser.Rectangle|object} rect - The bounds in which to check.\r\n   * @return {number} index - Index of the subnode (0-3), or -1 if rect cannot completely fit within a subnode and is part of the parent node.\r\n   */\n  getIndex: function getIndex(rect) {\n    if (rect.left < this.bounds.midX && rect.right < this.bounds.midX) {\n      if (rect.top < this.bounds.midY && rect.bottom < this.bounds.midY) {\n        //  rect fits within the top-left quadrant of this quadtree\n        return 1;\n      } else if (rect.top > this.bounds.midY) {\n        //  rect fits within the bottom-left quadrant of this quadtree\n        return 2;\n      }\n    } else if (rect.left > this.bounds.midX) {\n      //  rect can completely fit within the right quadrants\n      if (rect.top < this.bounds.midY && rect.bottom < this.bounds.midY) {\n        //  rect fits within the top-right quadrant of this quadtree\n        return 0;\n      } else if (rect.top > this.bounds.midY) {\n        //  rect fits within the bottom-right quadrant of this quadtree\n        return 3;\n      }\n    }\n    // rect doesn't fit, i.e. it straddles the internal quadrants\n    return -1;\n  },\n\n  /**\r\n   * Iterate through all objects that could collide with the given Sprite or Rectangle.\r\n   *\r\n   * @method QuadTree#retrieve\r\n   * @param {Phaser.Sprite|Phaser.Rectangle} source - The source object to check the QuadTree against. Either a Sprite or Rectangle.\r\n   */\n  iterate: function iterate(source, iteratorFn, optionalParam) {\n    var index = this.getIndex(source);\n\n    for (var i = 0; i < this.objects.length; i++) {\n      iteratorFn(this.objects[i], optionalParam);\n    }\n\n    if (this.nodes[0]) {\n      //  If rect fits into a subnode ..\n      if (index !== -1) {\n        this.nodes[index].iterate(source, iteratorFn, optionalParam);\n      } else {\n        //  If rect does not fit into a subnode, check it against all subnodes (unrolled for speed)\n        this.nodes[0].iterate(source, iteratorFn, optionalParam);\n        this.nodes[1].iterate(source, iteratorFn, optionalParam);\n        this.nodes[2].iterate(source, iteratorFn, optionalParam);\n        this.nodes[3].iterate(source, iteratorFn, optionalParam);\n      }\n    }\n  },\n\n  /**\r\n   * Clear the quadtree.\r\n   * @method QuadTree#clear\r\n   */\n  clear: function clear() {\n    this.objects.length = 0;\n    var i = this.nodes.length;\n    while (i--) {\n      this.nodes[i].clear();\n      this.nodes.splice(i, 1);\n    }\n    this.nodes.length = 0;\n  }\n\n};\n\n/**\r\n * Javascript QuadTree\r\n * @version 1.0\r\n *\r\n * @version 1.3, March 11th 2014\r\n * @author Richard Davey\r\n * The original code was a conversion of the Java code posted to GameDevTuts. However I've tweaked\r\n * it massively to add node indexing, removed lots of temp. var creation and significantly\r\n * increased performance as a result.\r\n *\r\n * Original version at https://github.com/timohausmann/quadtree-js/\r\n */\n\n/**\r\n * @copyright © 2012 Timo Hausmann\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining\r\n * a copy of this software and associated documentation files (the\r\n * \"Software\"), to deal in the Software without restriction, including\r\n * without limitation the rights to use, copy, modify, merge, publish,\r\n * distribute, sublicense, and/or sell copies of the Software, and to\r\n * permit persons to whom the Software is furnished to do so, subject to\r\n * the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be\r\n * included in all copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\r\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\r\n * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\r\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n */\n\n/***/ }),\n/* 121 */\n/*!***************************************!*\\\n  !*** ./node_modules/dat-gui/index.js ***!\n  \\***************************************/\n/*! no static exports found */\n/*! exports used: default */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(/*! ./vendor/dat.gui */ 122)\nmodule.exports.color = __webpack_require__(/*! ./vendor/dat.color */ 123)\n\n/***/ }),\n/* 122 */\n/*!************************************************!*\\\n  !*** ./node_modules/dat-gui/vendor/dat.gui.js ***!\n  \\************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports) {\n\n/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\n/** @namespace */\nvar dat = module.exports = dat || {};\n\n/** @namespace */\ndat.gui = dat.gui || {};\n\n/** @namespace */\ndat.utils = dat.utils || {};\n\n/** @namespace */\ndat.controllers = dat.controllers || {};\n\n/** @namespace */\ndat.dom = dat.dom || {};\n\n/** @namespace */\ndat.color = dat.color || {};\n\ndat.utils.css = (function () {\n  return {\n    load: function (url, doc) {\n      doc = doc || document;\n      var link = doc.createElement('link');\n      link.type = 'text/css';\n      link.rel = 'stylesheet';\n      link.href = url;\n      doc.getElementsByTagName('head')[0].appendChild(link);\n    },\n    inject: function(css, doc) {\n      doc = doc || document;\n      var injected = document.createElement('style');\n      injected.type = 'text/css';\n      injected.innerHTML = css;\n      doc.getElementsByTagName('head')[0].appendChild(injected);\n    }\n  }\n})();\n\n\ndat.utils.common = (function () {\n  \n  var ARR_EACH = Array.prototype.forEach;\n  var ARR_SLICE = Array.prototype.slice;\n\n  /**\n   * Band-aid methods for things that should be a lot easier in JavaScript.\n   * Implementation and structure inspired by underscore.js\n   * http://documentcloud.github.com/underscore/\n   */\n\n  return { \n    \n    BREAK: {},\n  \n    extend: function(target) {\n      \n      this.each(ARR_SLICE.call(arguments, 1), function(obj) {\n        \n        for (var key in obj)\n          if (!this.isUndefined(obj[key])) \n            target[key] = obj[key];\n        \n      }, this);\n      \n      return target;\n      \n    },\n    \n    defaults: function(target) {\n      \n      this.each(ARR_SLICE.call(arguments, 1), function(obj) {\n        \n        for (var key in obj)\n          if (this.isUndefined(target[key])) \n            target[key] = obj[key];\n        \n      }, this);\n      \n      return target;\n    \n    },\n    \n    compose: function() {\n      var toCall = ARR_SLICE.call(arguments);\n            return function() {\n              var args = ARR_SLICE.call(arguments);\n              for (var i = toCall.length -1; i >= 0; i--) {\n                args = [toCall[i].apply(this, args)];\n              }\n              return args[0];\n            }\n    },\n    \n    each: function(obj, itr, scope) {\n\n      \n      if (ARR_EACH && obj.forEach === ARR_EACH) { \n        \n        obj.forEach(itr, scope);\n        \n      } else if (obj.length === obj.length + 0) { // Is number but not NaN\n        \n        for (var key = 0, l = obj.length; key < l; key++)\n          if (key in obj && itr.call(scope, obj[key], key) === this.BREAK) \n            return;\n            \n      } else {\n\n        for (var key in obj) \n          if (itr.call(scope, obj[key], key) === this.BREAK)\n            return;\n            \n      }\n            \n    },\n    \n    defer: function(fnc) {\n      setTimeout(fnc, 0);\n    },\n    \n    toArray: function(obj) {\n      if (obj.toArray) return obj.toArray();\n      return ARR_SLICE.call(obj);\n    },\n\n    isUndefined: function(obj) {\n      return obj === undefined;\n    },\n    \n    isNull: function(obj) {\n      return obj === null;\n    },\n    \n    isNaN: function(obj) {\n      return obj !== obj;\n    },\n    \n    isArray: Array.isArray || function(obj) {\n      return obj.constructor === Array;\n    },\n    \n    isObject: function(obj) {\n      return obj === Object(obj);\n    },\n    \n    isNumber: function(obj) {\n      return obj === obj+0;\n    },\n    \n    isString: function(obj) {\n      return obj === obj+'';\n    },\n    \n    isBoolean: function(obj) {\n      return obj === false || obj === true;\n    },\n    \n    isFunction: function(obj) {\n      return Object.prototype.toString.call(obj) === '[object Function]';\n    }\n  \n  };\n    \n})();\n\n\ndat.controllers.Controller = (function (common) {\n\n  /**\n   * @class An \"abstract\" class that represents a given property of an object.\n   *\n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   *\n   * @member dat.controllers\n   */\n  var Controller = function(object, property) {\n\n    this.initialValue = object[property];\n\n    /**\n     * Those who extend this class will put their DOM elements in here.\n     * @type {DOMElement}\n     */\n    this.domElement = document.createElement('div');\n\n    /**\n     * The object to manipulate\n     * @type {Object}\n     */\n    this.object = object;\n\n    /**\n     * The name of the property to manipulate\n     * @type {String}\n     */\n    this.property = property;\n\n    /**\n     * The function to be called on change.\n     * @type {Function}\n     * @ignore\n     */\n    this.__onChange = undefined;\n\n    /**\n     * The function to be called on finishing change.\n     * @type {Function}\n     * @ignore\n     */\n    this.__onFinishChange = undefined;\n\n  };\n\n  common.extend(\n\n      Controller.prototype,\n\n      /** @lends dat.controllers.Controller.prototype */\n      {\n\n        /**\n         * Specify that a function fire every time someone changes the value with\n         * this Controller.\n         *\n         * @param {Function} fnc This function will be called whenever the value\n         * is modified via this Controller.\n         * @returns {dat.controllers.Controller} this\n         */\n        onChange: function(fnc) {\n          this.__onChange = fnc;\n          return this;\n        },\n\n        /**\n         * Specify that a function fire every time someone \"finishes\" changing\n         * the value wih this Controller. Useful for values that change\n         * incrementally like numbers or strings.\n         *\n         * @param {Function} fnc This function will be called whenever\n         * someone \"finishes\" changing the value via this Controller.\n         * @returns {dat.controllers.Controller} this\n         */\n        onFinishChange: function(fnc) {\n          this.__onFinishChange = fnc;\n          return this;\n        },\n\n        /**\n         * Change the value of <code>object[property]</code>\n         *\n         * @param {Object} newValue The new value of <code>object[property]</code>\n         */\n        setValue: function(newValue) {\n          this.object[this.property] = newValue;\n          if (this.__onChange) {\n            this.__onChange.call(this, newValue);\n          }\n          this.updateDisplay();\n          return this;\n        },\n\n        /**\n         * Gets the value of <code>object[property]</code>\n         *\n         * @returns {Object} The current value of <code>object[property]</code>\n         */\n        getValue: function() {\n          return this.object[this.property];\n        },\n\n        /**\n         * Refreshes the visual display of a Controller in order to keep sync\n         * with the object's current value.\n         * @returns {dat.controllers.Controller} this\n         */\n        updateDisplay: function() {\n          return this;\n        },\n\n        /**\n         * @returns {Boolean} true if the value has deviated from initialValue\n         */\n        isModified: function() {\n          return this.initialValue !== this.getValue()\n        }\n\n      }\n\n  );\n\n  return Controller;\n\n\n})(dat.utils.common);\n\n\ndat.dom.dom = (function (common) {\n\n  var EVENT_MAP = {\n    'HTMLEvents': ['change'],\n    'MouseEvents': ['click','mousemove','mousedown','mouseup', 'mouseover'],\n    'KeyboardEvents': ['keydown']\n  };\n\n  var EVENT_MAP_INV = {};\n  common.each(EVENT_MAP, function(v, k) {\n    common.each(v, function(e) {\n      EVENT_MAP_INV[e] = k;\n    });\n  });\n\n  var CSS_VALUE_PIXELS = /(\\d+(\\.\\d+)?)px/;\n\n  function cssValueToPixels(val) {\n\n    if (val === '0' || common.isUndefined(val)) return 0;\n\n    var match = val.match(CSS_VALUE_PIXELS);\n\n    if (!common.isNull(match)) {\n      return parseFloat(match[1]);\n    }\n\n    // TODO ...ems? %?\n\n    return 0;\n\n  }\n\n  /**\n   * @namespace\n   * @member dat.dom\n   */\n  var dom = {\n\n    /**\n     * \n     * @param elem\n     * @param selectable\n     */\n    makeSelectable: function(elem, selectable) {\n\n      if (elem === undefined || elem.style === undefined) return;\n\n      elem.onselectstart = selectable ? function() {\n        return false;\n      } : function() {\n      };\n\n      elem.style.MozUserSelect = selectable ? 'auto' : 'none';\n      elem.style.KhtmlUserSelect = selectable ? 'auto' : 'none';\n      elem.unselectable = selectable ? 'on' : 'off';\n\n    },\n\n    /**\n     *\n     * @param elem\n     * @param horizontal\n     * @param vertical\n     */\n    makeFullscreen: function(elem, horizontal, vertical) {\n\n      if (common.isUndefined(horizontal)) horizontal = true;\n      if (common.isUndefined(vertical)) vertical = true;\n\n      elem.style.position = 'absolute';\n\n      if (horizontal) {\n        elem.style.left = 0;\n        elem.style.right = 0;\n      }\n      if (vertical) {\n        elem.style.top = 0;\n        elem.style.bottom = 0;\n      }\n\n    },\n\n    /**\n     *\n     * @param elem\n     * @param eventType\n     * @param params\n     */\n    fakeEvent: function(elem, eventType, params, aux) {\n      params = params || {};\n      var className = EVENT_MAP_INV[eventType];\n      if (!className) {\n        throw new Error('Event type ' + eventType + ' not supported.');\n      }\n      var evt = document.createEvent(className);\n      switch (className) {\n        case 'MouseEvents':\n          var clientX = params.x || params.clientX || 0;\n          var clientY = params.y || params.clientY || 0;\n          evt.initMouseEvent(eventType, params.bubbles || false,\n              params.cancelable || true, window, params.clickCount || 1,\n              0, //screen X\n              0, //screen Y\n              clientX, //client X\n              clientY, //client Y\n              false, false, false, false, 0, null);\n          break;\n        case 'KeyboardEvents':\n          var init = evt.initKeyboardEvent || evt.initKeyEvent; // webkit || moz\n          common.defaults(params, {\n            cancelable: true,\n            ctrlKey: false,\n            altKey: false,\n            shiftKey: false,\n            metaKey: false,\n            keyCode: undefined,\n            charCode: undefined\n          });\n          init(eventType, params.bubbles || false,\n              params.cancelable, window,\n              params.ctrlKey, params.altKey,\n              params.shiftKey, params.metaKey,\n              params.keyCode, params.charCode);\n          break;\n        default:\n          evt.initEvent(eventType, params.bubbles || false,\n              params.cancelable || true);\n          break;\n      }\n      common.defaults(evt, aux);\n      elem.dispatchEvent(evt);\n    },\n\n    /**\n     *\n     * @param elem\n     * @param event\n     * @param func\n     * @param bool\n     */\n    bind: function(elem, event, func, bool) {\n      bool = bool || false;\n      if (elem.addEventListener)\n        elem.addEventListener(event, func, bool);\n      else if (elem.attachEvent)\n        elem.attachEvent('on' + event, func);\n      return dom;\n    },\n\n    /**\n     *\n     * @param elem\n     * @param event\n     * @param func\n     * @param bool\n     */\n    unbind: function(elem, event, func, bool) {\n      bool = bool || false;\n      if (elem.removeEventListener)\n        elem.removeEventListener(event, func, bool);\n      else if (elem.detachEvent)\n        elem.detachEvent('on' + event, func);\n      return dom;\n    },\n\n    /**\n     *\n     * @param elem\n     * @param className\n     */\n    addClass: function(elem, className) {\n      if (elem.className === undefined) {\n        elem.className = className;\n      } else if (elem.className !== className) {\n        var classes = elem.className.split(/ +/);\n        if (classes.indexOf(className) == -1) {\n          classes.push(className);\n          elem.className = classes.join(' ').replace(/^\\s+/, '').replace(/\\s+$/, '');\n        }\n      }\n      return dom;\n    },\n\n    /**\n     *\n     * @param elem\n     * @param className\n     */\n    removeClass: function(elem, className) {\n      if (className) {\n        if (elem.className === undefined) {\n          // elem.className = className;\n        } else if (elem.className === className) {\n          elem.removeAttribute('class');\n        } else {\n          var classes = elem.className.split(/ +/);\n          var index = classes.indexOf(className);\n          if (index != -1) {\n            classes.splice(index, 1);\n            elem.className = classes.join(' ');\n          }\n        }\n      } else {\n        elem.className = undefined;\n      }\n      return dom;\n    },\n\n    hasClass: function(elem, className) {\n      return new RegExp('(?:^|\\\\s+)' + className + '(?:\\\\s+|$)').test(elem.className) || false;\n    },\n\n    /**\n     *\n     * @param elem\n     */\n    getWidth: function(elem) {\n\n      var style = getComputedStyle(elem);\n\n      return cssValueToPixels(style['border-left-width']) +\n          cssValueToPixels(style['border-right-width']) +\n          cssValueToPixels(style['padding-left']) +\n          cssValueToPixels(style['padding-right']) +\n          cssValueToPixels(style['width']);\n    },\n\n    /**\n     *\n     * @param elem\n     */\n    getHeight: function(elem) {\n\n      var style = getComputedStyle(elem);\n\n      return cssValueToPixels(style['border-top-width']) +\n          cssValueToPixels(style['border-bottom-width']) +\n          cssValueToPixels(style['padding-top']) +\n          cssValueToPixels(style['padding-bottom']) +\n          cssValueToPixels(style['height']);\n    },\n\n    /**\n     *\n     * @param elem\n     */\n    getOffset: function(elem) {\n      var offset = {left: 0, top:0};\n      if (elem.offsetParent) {\n        do {\n          offset.left += elem.offsetLeft;\n          offset.top += elem.offsetTop;\n        } while (elem = elem.offsetParent);\n      }\n      return offset;\n    },\n\n    // http://stackoverflow.com/posts/2684561/revisions\n    /**\n     * \n     * @param elem\n     */\n    isActive: function(elem) {\n      return elem === document.activeElement && ( elem.type || elem.href );\n    }\n\n  };\n\n  return dom;\n\n})(dat.utils.common);\n\n\ndat.controllers.OptionController = (function (Controller, dom, common) {\n\n  /**\n   * @class Provides a select input to alter the property of an object, using a\n   * list of accepted values.\n   *\n   * @extends dat.controllers.Controller\n   *\n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   * @param {Object|string[]} options A map of labels to acceptable values, or\n   * a list of acceptable string values.\n   *\n   * @member dat.controllers\n   */\n  var OptionController = function(object, property, options) {\n\n    OptionController.superclass.call(this, object, property);\n\n    var _this = this;\n\n    /**\n     * The drop down menu\n     * @ignore\n     */\n    this.__select = document.createElement('select');\n\n    if (common.isArray(options)) {\n      var map = {};\n      common.each(options, function(element) {\n        map[element] = element;\n      });\n      options = map;\n    }\n\n    common.each(options, function(value, key) {\n\n      var opt = document.createElement('option');\n      opt.innerHTML = key;\n      opt.setAttribute('value', value);\n      _this.__select.appendChild(opt);\n\n    });\n\n    // Acknowledge original value\n    this.updateDisplay();\n\n    dom.bind(this.__select, 'change', function() {\n      var desiredValue = this.options[this.selectedIndex].value;\n      _this.setValue(desiredValue);\n    });\n\n    this.domElement.appendChild(this.__select);\n\n  };\n\n  OptionController.superclass = Controller;\n\n  common.extend(\n\n      OptionController.prototype,\n      Controller.prototype,\n\n      {\n\n        setValue: function(v) {\n          var toReturn = OptionController.superclass.prototype.setValue.call(this, v);\n          if (this.__onFinishChange) {\n            this.__onFinishChange.call(this, this.getValue());\n          }\n          return toReturn;\n        },\n\n        updateDisplay: function() {\n          this.__select.value = this.getValue();\n          return OptionController.superclass.prototype.updateDisplay.call(this);\n        }\n\n      }\n\n  );\n\n  return OptionController;\n\n})(dat.controllers.Controller,\ndat.dom.dom,\ndat.utils.common);\n\n\ndat.controllers.NumberController = (function (Controller, common) {\n\n  /**\n   * @class Represents a given property of an object that is a number.\n   *\n   * @extends dat.controllers.Controller\n   *\n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   * @param {Object} [params] Optional parameters\n   * @param {Number} [params.min] Minimum allowed value\n   * @param {Number} [params.max] Maximum allowed value\n   * @param {Number} [params.step] Increment by which to change value\n   *\n   * @member dat.controllers\n   */\n  var NumberController = function(object, property, params) {\n\n    NumberController.superclass.call(this, object, property);\n\n    params = params || {};\n\n    this.__min = params.min;\n    this.__max = params.max;\n    this.__step = params.step;\n\n    if (common.isUndefined(this.__step)) {\n\n      if (this.initialValue == 0) {\n        this.__impliedStep = 1; // What are we, psychics?\n      } else {\n        // Hey Doug, check this out.\n        this.__impliedStep = Math.pow(10, Math.floor(Math.log(this.initialValue)/Math.LN10))/10;\n      }\n\n    } else {\n\n      this.__impliedStep = this.__step;\n\n    }\n\n    this.__precision = numDecimals(this.__impliedStep);\n\n\n  };\n\n  NumberController.superclass = Controller;\n\n  common.extend(\n\n      NumberController.prototype,\n      Controller.prototype,\n\n      /** @lends dat.controllers.NumberController.prototype */\n      {\n\n        setValue: function(v) {\n\n          if (this.__min !== undefined && v < this.__min) {\n            v = this.__min;\n          } else if (this.__max !== undefined && v > this.__max) {\n            v = this.__max;\n          }\n\n          if (this.__step !== undefined && v % this.__step != 0) {\n            v = Math.round(v / this.__step) * this.__step;\n          }\n\n          return NumberController.superclass.prototype.setValue.call(this, v);\n\n        },\n\n        /**\n         * Specify a minimum value for <code>object[property]</code>.\n         *\n         * @param {Number} minValue The minimum value for\n         * <code>object[property]</code>\n         * @returns {dat.controllers.NumberController} this\n         */\n        min: function(v) {\n          this.__min = v;\n          return this;\n        },\n\n        /**\n         * Specify a maximum value for <code>object[property]</code>.\n         *\n         * @param {Number} maxValue The maximum value for\n         * <code>object[property]</code>\n         * @returns {dat.controllers.NumberController} this\n         */\n        max: function(v) {\n          this.__max = v;\n          return this;\n        },\n\n        /**\n         * Specify a step value that dat.controllers.NumberController\n         * increments by.\n         *\n         * @param {Number} stepValue The step value for\n         * dat.controllers.NumberController\n         * @default if minimum and maximum specified increment is 1% of the\n         * difference otherwise stepValue is 1\n         * @returns {dat.controllers.NumberController} this\n         */\n        step: function(v) {\n          this.__step = v;\n          return this;\n        }\n\n      }\n\n  );\n\n  function numDecimals(x) {\n    x = x.toString();\n    if (x.indexOf('.') > -1) {\n      return x.length - x.indexOf('.') - 1;\n    } else {\n      return 0;\n    }\n  }\n\n  return NumberController;\n\n})(dat.controllers.Controller,\ndat.utils.common);\n\n\ndat.controllers.NumberControllerBox = (function (NumberController, dom, common) {\n\n  /**\n   * @class Represents a given property of an object that is a number and\n   * provides an input element with which to manipulate it.\n   *\n   * @extends dat.controllers.Controller\n   * @extends dat.controllers.NumberController\n   *\n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   * @param {Object} [params] Optional parameters\n   * @param {Number} [params.min] Minimum allowed value\n   * @param {Number} [params.max] Maximum allowed value\n   * @param {Number} [params.step] Increment by which to change value\n   *\n   * @member dat.controllers\n   */\n  var NumberControllerBox = function(object, property, params) {\n\n    this.__truncationSuspended = false;\n\n    NumberControllerBox.superclass.call(this, object, property, params);\n\n    var _this = this;\n\n    /**\n     * {Number} Previous mouse y position\n     * @ignore\n     */\n    var prev_y;\n\n    this.__input = document.createElement('input');\n    this.__input.setAttribute('type', 'text');\n\n    // Makes it so manually specified values are not truncated.\n\n    dom.bind(this.__input, 'change', onChange);\n    dom.bind(this.__input, 'blur', onBlur);\n    dom.bind(this.__input, 'mousedown', onMouseDown);\n    dom.bind(this.__input, 'keydown', function(e) {\n\n      // When pressing entire, you can be as precise as you want.\n      if (e.keyCode === 13) {\n        _this.__truncationSuspended = true;\n        this.blur();\n        _this.__truncationSuspended = false;\n      }\n\n    });\n\n    function onChange() {\n      var attempted = parseFloat(_this.__input.value);\n      if (!common.isNaN(attempted)) _this.setValue(attempted);\n    }\n\n    function onBlur() {\n      onChange();\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n\n    function onMouseDown(e) {\n      dom.bind(window, 'mousemove', onMouseDrag);\n      dom.bind(window, 'mouseup', onMouseUp);\n      prev_y = e.clientY;\n    }\n\n    function onMouseDrag(e) {\n\n      var diff = prev_y - e.clientY;\n      _this.setValue(_this.getValue() + diff * _this.__impliedStep);\n\n      prev_y = e.clientY;\n\n    }\n\n    function onMouseUp() {\n      dom.unbind(window, 'mousemove', onMouseDrag);\n      dom.unbind(window, 'mouseup', onMouseUp);\n    }\n\n    this.updateDisplay();\n\n    this.domElement.appendChild(this.__input);\n\n  };\n\n  NumberControllerBox.superclass = NumberController;\n\n  common.extend(\n\n      NumberControllerBox.prototype,\n      NumberController.prototype,\n\n      {\n\n        updateDisplay: function() {\n\n          this.__input.value = this.__truncationSuspended ? this.getValue() : roundToDecimal(this.getValue(), this.__precision);\n          return NumberControllerBox.superclass.prototype.updateDisplay.call(this);\n        }\n\n      }\n\n  );\n\n  function roundToDecimal(value, decimals) {\n    var tenTo = Math.pow(10, decimals);\n    return Math.round(value * tenTo) / tenTo;\n  }\n\n  return NumberControllerBox;\n\n})(dat.controllers.NumberController,\ndat.dom.dom,\ndat.utils.common);\n\n\ndat.controllers.NumberControllerSlider = (function (NumberController, dom, css, common, styleSheet) {\n\n  /**\n   * @class Represents a given property of an object that is a number, contains\n   * a minimum and maximum, and provides a slider element with which to\n   * manipulate it. It should be noted that the slider element is made up of\n   * <code>&lt;div&gt;</code> tags, <strong>not</strong> the html5\n   * <code>&lt;slider&gt;</code> element.\n   *\n   * @extends dat.controllers.Controller\n   * @extends dat.controllers.NumberController\n   * \n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   * @param {Number} minValue Minimum allowed value\n   * @param {Number} maxValue Maximum allowed value\n   * @param {Number} stepValue Increment by which to change value\n   *\n   * @member dat.controllers\n   */\n  var NumberControllerSlider = function(object, property, min, max, step) {\n\n    NumberControllerSlider.superclass.call(this, object, property, { min: min, max: max, step: step });\n\n    var _this = this;\n\n    this.__background = document.createElement('div');\n    this.__foreground = document.createElement('div');\n    \n\n\n    dom.bind(this.__background, 'mousedown', onMouseDown);\n    \n    dom.addClass(this.__background, 'slider');\n    dom.addClass(this.__foreground, 'slider-fg');\n\n    function onMouseDown(e) {\n\n      dom.bind(window, 'mousemove', onMouseDrag);\n      dom.bind(window, 'mouseup', onMouseUp);\n\n      onMouseDrag(e);\n    }\n\n    function onMouseDrag(e) {\n\n      e.preventDefault();\n\n      var offset = dom.getOffset(_this.__background);\n      var width = dom.getWidth(_this.__background);\n      \n      _this.setValue(\n        map(e.clientX, offset.left, offset.left + width, _this.__min, _this.__max)\n      );\n\n      return false;\n\n    }\n\n    function onMouseUp() {\n      dom.unbind(window, 'mousemove', onMouseDrag);\n      dom.unbind(window, 'mouseup', onMouseUp);\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n\n    this.updateDisplay();\n\n    this.__background.appendChild(this.__foreground);\n    this.domElement.appendChild(this.__background);\n\n  };\n\n  NumberControllerSlider.superclass = NumberController;\n\n  /**\n   * Injects default stylesheet for slider elements.\n   */\n  NumberControllerSlider.useDefaultStyles = function() {\n    css.inject(styleSheet);\n  };\n\n  common.extend(\n\n      NumberControllerSlider.prototype,\n      NumberController.prototype,\n\n      {\n\n        updateDisplay: function() {\n          var pct = (this.getValue() - this.__min)/(this.__max - this.__min);\n          this.__foreground.style.width = pct*100+'%';\n          return NumberControllerSlider.superclass.prototype.updateDisplay.call(this);\n        }\n\n      }\n\n\n\n  );\n\n  function map(v, i1, i2, o1, o2) {\n    return o1 + (o2 - o1) * ((v - i1) / (i2 - i1));\n  }\n\n  return NumberControllerSlider;\n  \n})(dat.controllers.NumberController,\ndat.dom.dom,\ndat.utils.css,\ndat.utils.common,\n\".slider {\\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\\n  height: 1em;\\n  border-radius: 1em;\\n  background-color: #eee;\\n  padding: 0 0.5em;\\n  overflow: hidden;\\n}\\n\\n.slider-fg {\\n  padding: 1px 0 2px 0;\\n  background-color: #aaa;\\n  height: 1em;\\n  margin-left: -0.5em;\\n  padding-right: 0.5em;\\n  border-radius: 1em 0 0 1em;\\n}\\n\\n.slider-fg:after {\\n  display: inline-block;\\n  border-radius: 1em;\\n  background-color: #fff;\\n  border:  1px solid #aaa;\\n  content: '';\\n  float: right;\\n  margin-right: -1em;\\n  margin-top: -1px;\\n  height: 0.9em;\\n  width: 0.9em;\\n}\");\n\n\ndat.controllers.FunctionController = (function (Controller, dom, common) {\n\n  /**\n   * @class Provides a GUI interface to fire a specified method, a property of an object.\n   *\n   * @extends dat.controllers.Controller\n   *\n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   *\n   * @member dat.controllers\n   */\n  var FunctionController = function(object, property, text) {\n\n    FunctionController.superclass.call(this, object, property);\n\n    var _this = this;\n\n    this.__button = document.createElement('div');\n    this.__button.innerHTML = text === undefined ? 'Fire' : text;\n    dom.bind(this.__button, 'click', function(e) {\n      e.preventDefault();\n      _this.fire();\n      return false;\n    });\n\n    dom.addClass(this.__button, 'button');\n\n    this.domElement.appendChild(this.__button);\n\n\n  };\n\n  FunctionController.superclass = Controller;\n\n  common.extend(\n\n      FunctionController.prototype,\n      Controller.prototype,\n      {\n        \n        fire: function() {\n          if (this.__onChange) {\n            this.__onChange.call(this);\n          }\n          if (this.__onFinishChange) {\n            this.__onFinishChange.call(this, this.getValue());\n          }\n          this.getValue().call(this.object);\n        }\n      }\n\n  );\n\n  return FunctionController;\n\n})(dat.controllers.Controller,\ndat.dom.dom,\ndat.utils.common);\n\n\ndat.controllers.BooleanController = (function (Controller, dom, common) {\n\n  /**\n   * @class Provides a checkbox input to alter the boolean property of an object.\n   * @extends dat.controllers.Controller\n   *\n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   *\n   * @member dat.controllers\n   */\n  var BooleanController = function(object, property) {\n\n    BooleanController.superclass.call(this, object, property);\n\n    var _this = this;\n    this.__prev = this.getValue();\n\n    this.__checkbox = document.createElement('input');\n    this.__checkbox.setAttribute('type', 'checkbox');\n\n\n    dom.bind(this.__checkbox, 'change', onChange, false);\n\n    this.domElement.appendChild(this.__checkbox);\n\n    // Match original value\n    this.updateDisplay();\n\n    function onChange() {\n      _this.setValue(!_this.__prev);\n    }\n\n  };\n\n  BooleanController.superclass = Controller;\n\n  common.extend(\n\n      BooleanController.prototype,\n      Controller.prototype,\n\n      {\n\n        setValue: function(v) {\n          var toReturn = BooleanController.superclass.prototype.setValue.call(this, v);\n          if (this.__onFinishChange) {\n            this.__onFinishChange.call(this, this.getValue());\n          }\n          this.__prev = this.getValue();\n          return toReturn;\n        },\n\n        updateDisplay: function() {\n          \n          if (this.getValue() === true) {\n            this.__checkbox.setAttribute('checked', 'checked');\n            this.__checkbox.checked = true;    \n          } else {\n              this.__checkbox.checked = false;\n          }\n\n          return BooleanController.superclass.prototype.updateDisplay.call(this);\n\n        }\n\n\n      }\n\n  );\n\n  return BooleanController;\n\n})(dat.controllers.Controller,\ndat.dom.dom,\ndat.utils.common);\n\n\ndat.color.toString = (function (common) {\n\n  return function(color) {\n\n    if (color.a == 1 || common.isUndefined(color.a)) {\n\n      var s = color.hex.toString(16);\n      while (s.length < 6) {\n        s = '0' + s;\n      }\n\n      return '#' + s;\n\n    } else {\n\n      return 'rgba(' + Math.round(color.r) + ',' + Math.round(color.g) + ',' + Math.round(color.b) + ',' + color.a + ')';\n\n    }\n\n  }\n\n})(dat.utils.common);\n\n\ndat.color.interpret = (function (toString, common) {\n\n  var result, toReturn;\n\n  var interpret = function() {\n\n    toReturn = false;\n\n    var original = arguments.length > 1 ? common.toArray(arguments) : arguments[0];\n\n    common.each(INTERPRETATIONS, function(family) {\n\n      if (family.litmus(original)) {\n\n        common.each(family.conversions, function(conversion, conversionName) {\n\n          result = conversion.read(original);\n\n          if (toReturn === false && result !== false) {\n            toReturn = result;\n            result.conversionName = conversionName;\n            result.conversion = conversion;\n            return common.BREAK;\n\n          }\n\n        });\n\n        return common.BREAK;\n\n      }\n\n    });\n\n    return toReturn;\n\n  };\n\n  var INTERPRETATIONS = [\n\n    // Strings\n    {\n\n      litmus: common.isString,\n\n      conversions: {\n\n        THREE_CHAR_HEX: {\n\n          read: function(original) {\n\n            var test = original.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);\n            if (test === null) return false;\n\n            return {\n              space: 'HEX',\n              hex: parseInt(\n                  '0x' +\n                      test[1].toString() + test[1].toString() +\n                      test[2].toString() + test[2].toString() +\n                      test[3].toString() + test[3].toString())\n            };\n\n          },\n\n          write: toString\n\n        },\n\n        SIX_CHAR_HEX: {\n\n          read: function(original) {\n\n            var test = original.match(/^#([A-F0-9]{6})$/i);\n            if (test === null) return false;\n\n            return {\n              space: 'HEX',\n              hex: parseInt('0x' + test[1].toString())\n            };\n\n          },\n\n          write: toString\n\n        },\n\n        CSS_RGB: {\n\n          read: function(original) {\n\n            var test = original.match(/^rgb\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/);\n            if (test === null) return false;\n\n            return {\n              space: 'RGB',\n              r: parseFloat(test[1]),\n              g: parseFloat(test[2]),\n              b: parseFloat(test[3])\n            };\n\n          },\n\n          write: toString\n\n        },\n\n        CSS_RGBA: {\n\n          read: function(original) {\n\n            var test = original.match(/^rgba\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\,\\s*(.+)\\s*\\)/);\n            if (test === null) return false;\n\n            return {\n              space: 'RGB',\n              r: parseFloat(test[1]),\n              g: parseFloat(test[2]),\n              b: parseFloat(test[3]),\n              a: parseFloat(test[4])\n            };\n\n          },\n\n          write: toString\n\n        }\n\n      }\n\n    },\n\n    // Numbers\n    {\n\n      litmus: common.isNumber,\n\n      conversions: {\n\n        HEX: {\n          read: function(original) {\n            return {\n              space: 'HEX',\n              hex: original,\n              conversionName: 'HEX'\n            }\n          },\n\n          write: function(color) {\n            return color.hex;\n          }\n        }\n\n      }\n\n    },\n\n    // Arrays\n    {\n\n      litmus: common.isArray,\n\n      conversions: {\n\n        RGB_ARRAY: {\n          read: function(original) {\n            if (original.length != 3) return false;\n            return {\n              space: 'RGB',\n              r: original[0],\n              g: original[1],\n              b: original[2]\n            };\n          },\n\n          write: function(color) {\n            return [color.r, color.g, color.b];\n          }\n\n        },\n\n        RGBA_ARRAY: {\n          read: function(original) {\n            if (original.length != 4) return false;\n            return {\n              space: 'RGB',\n              r: original[0],\n              g: original[1],\n              b: original[2],\n              a: original[3]\n            };\n          },\n\n          write: function(color) {\n            return [color.r, color.g, color.b, color.a];\n          }\n\n        }\n\n      }\n\n    },\n\n    // Objects\n    {\n\n      litmus: common.isObject,\n\n      conversions: {\n\n        RGBA_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.r) &&\n                common.isNumber(original.g) &&\n                common.isNumber(original.b) &&\n                common.isNumber(original.a)) {\n              return {\n                space: 'RGB',\n                r: original.r,\n                g: original.g,\n                b: original.b,\n                a: original.a\n              }\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              r: color.r,\n              g: color.g,\n              b: color.b,\n              a: color.a\n            }\n          }\n        },\n\n        RGB_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.r) &&\n                common.isNumber(original.g) &&\n                common.isNumber(original.b)) {\n              return {\n                space: 'RGB',\n                r: original.r,\n                g: original.g,\n                b: original.b\n              }\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              r: color.r,\n              g: color.g,\n              b: color.b\n            }\n          }\n        },\n\n        HSVA_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.h) &&\n                common.isNumber(original.s) &&\n                common.isNumber(original.v) &&\n                common.isNumber(original.a)) {\n              return {\n                space: 'HSV',\n                h: original.h,\n                s: original.s,\n                v: original.v,\n                a: original.a\n              }\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              h: color.h,\n              s: color.s,\n              v: color.v,\n              a: color.a\n            }\n          }\n        },\n\n        HSV_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.h) &&\n                common.isNumber(original.s) &&\n                common.isNumber(original.v)) {\n              return {\n                space: 'HSV',\n                h: original.h,\n                s: original.s,\n                v: original.v\n              }\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              h: color.h,\n              s: color.s,\n              v: color.v\n            }\n          }\n\n        }\n\n      }\n\n    }\n\n\n  ];\n\n  return interpret;\n\n\n})(dat.color.toString,\ndat.utils.common);\n\n\ndat.GUI = dat.gui.GUI = (function (css, saveDialogueContents, styleSheet, controllerFactory, Controller, BooleanController, FunctionController, NumberControllerBox, NumberControllerSlider, OptionController, ColorController, requestAnimationFrame, CenteredDiv, dom, common) {\n\n  css.inject(styleSheet);\n\n  /** Outer-most className for GUI's */\n  var CSS_NAMESPACE = 'dg';\n\n  var HIDE_KEY_CODE = 72;\n\n  /** The only value shared between the JS and SCSS. Use caution. */\n  var CLOSE_BUTTON_HEIGHT = 20;\n\n  var DEFAULT_DEFAULT_PRESET_NAME = 'Default';\n\n  var SUPPORTS_LOCAL_STORAGE = (function() {\n    try {\n      return 'localStorage' in window && window['localStorage'] !== null;\n    } catch (e) {\n      return false;\n    }\n  })();\n\n  var SAVE_DIALOGUE;\n\n  /** Have we yet to create an autoPlace GUI? */\n  var auto_place_virgin = true;\n\n  /** Fixed position div that auto place GUI's go inside */\n  var auto_place_container;\n\n  /** Are we hiding the GUI's ? */\n  var hide = false;\n\n  /** GUI's which should be hidden */\n  var hideable_guis = [];\n\n  /**\n   * A lightweight controller library for JavaScript. It allows you to easily\n   * manipulate variables and fire functions on the fly.\n   * @class\n   *\n   * @member dat.gui\n   *\n   * @param {Object} [params]\n   * @param {String} [params.name] The name of this GUI.\n   * @param {Object} [params.load] JSON object representing the saved state of\n   * this GUI.\n   * @param {Boolean} [params.auto=true]\n   * @param {dat.gui.GUI} [params.parent] The GUI I'm nested in.\n   * @param {Boolean} [params.closed] If true, starts closed\n   */\n  var GUI = function(params) {\n\n    var _this = this;\n\n    /**\n     * Outermost DOM Element\n     * @type DOMElement\n     */\n    this.domElement = document.createElement('div');\n    this.__ul = document.createElement('ul');\n    this.domElement.appendChild(this.__ul);\n\n    dom.addClass(this.domElement, CSS_NAMESPACE);\n\n    /**\n     * Nested GUI's by name\n     * @ignore\n     */\n    this.__folders = {};\n\n    this.__controllers = [];\n\n    /**\n     * List of objects I'm remembering for save, only used in top level GUI\n     * @ignore\n     */\n    this.__rememberedObjects = [];\n\n    /**\n     * Maps the index of remembered objects to a map of controllers, only used\n     * in top level GUI.\n     *\n     * @private\n     * @ignore\n     *\n     * @example\n     * [\n     *  {\n     *    propertyName: Controller,\n     *    anotherPropertyName: Controller\n     *  },\n     *  {\n     *    propertyName: Controller\n     *  }\n     * ]\n     */\n    this.__rememberedObjectIndecesToControllers = [];\n\n    this.__listening = [];\n\n    params = params || {};\n\n    // Default parameters\n    params = common.defaults(params, {\n      autoPlace: true,\n      width: GUI.DEFAULT_WIDTH\n    });\n\n    params = common.defaults(params, {\n      resizable: params.autoPlace,\n      hideable: params.autoPlace\n    });\n\n\n    if (!common.isUndefined(params.load)) {\n\n      // Explicit preset\n      if (params.preset) params.load.preset = params.preset;\n\n    } else {\n\n      params.load = { preset: DEFAULT_DEFAULT_PRESET_NAME };\n\n    }\n\n    if (common.isUndefined(params.parent) && params.hideable) {\n      hideable_guis.push(this);\n    }\n\n    // Only root level GUI's are resizable.\n    params.resizable = common.isUndefined(params.parent) && params.resizable;\n\n\n    if (params.autoPlace && common.isUndefined(params.scrollable)) {\n      params.scrollable = true;\n    }\n//    params.scrollable = common.isUndefined(params.parent) && params.scrollable === true;\n\n    // Not part of params because I don't want people passing this in via\n    // constructor. Should be a 'remembered' value.\n    var use_local_storage =\n        SUPPORTS_LOCAL_STORAGE &&\n            localStorage.getItem(getLocalStorageHash(this, 'isLocal')) === 'true';\n\n    Object.defineProperties(this,\n\n        /** @lends dat.gui.GUI.prototype */\n        {\n\n          /**\n           * The parent <code>GUI</code>\n           * @type dat.gui.GUI\n           */\n          parent: {\n            get: function() {\n              return params.parent;\n            }\n          },\n\n          scrollable: {\n            get: function() {\n              return params.scrollable;\n            }\n          },\n\n          /**\n           * Handles <code>GUI</code>'s element placement for you\n           * @type Boolean\n           */\n          autoPlace: {\n            get: function() {\n              return params.autoPlace;\n            }\n          },\n\n          /**\n           * The identifier for a set of saved values\n           * @type String\n           */\n          preset: {\n\n            get: function() {\n              if (_this.parent) {\n                return _this.getRoot().preset;\n              } else {\n                return params.load.preset;\n              }\n            },\n\n            set: function(v) {\n              if (_this.parent) {\n                _this.getRoot().preset = v;\n              } else {\n                params.load.preset = v;\n              }\n              setPresetSelectIndex(this);\n              _this.revert();\n            }\n\n          },\n\n          /**\n           * The width of <code>GUI</code> element\n           * @type Number\n           */\n          width: {\n            get: function() {\n              return params.width;\n            },\n            set: function(v) {\n              params.width = v;\n              setWidth(_this, v);\n            }\n          },\n\n          /**\n           * The name of <code>GUI</code>. Used for folders. i.e\n           * a folder's name\n           * @type String\n           */\n          name: {\n            get: function() {\n              return params.name;\n            },\n            set: function(v) {\n              // TODO Check for collisions among sibling folders\n              params.name = v;\n              if (title_row_name) {\n                title_row_name.innerHTML = params.name;\n              }\n            }\n          },\n\n          /**\n           * Whether the <code>GUI</code> is collapsed or not\n           * @type Boolean\n           */\n          closed: {\n            get: function() {\n              return params.closed;\n            },\n            set: function(v) {\n              params.closed = v;\n              if (params.closed) {\n                dom.addClass(_this.__ul, GUI.CLASS_CLOSED);\n              } else {\n                dom.removeClass(_this.__ul, GUI.CLASS_CLOSED);\n              }\n              // For browsers that aren't going to respect the CSS transition,\n              // Lets just check our height against the window height right off\n              // the bat.\n              this.onResize();\n\n              if (_this.__closeButton) {\n                _this.__closeButton.innerHTML = v ? GUI.TEXT_OPEN : GUI.TEXT_CLOSED;\n              }\n            }\n          },\n\n          /**\n           * Contains all presets\n           * @type Object\n           */\n          load: {\n            get: function() {\n              return params.load;\n            }\n          },\n\n          /**\n           * Determines whether or not to use <a href=\"https://developer.mozilla.org/en/DOM/Storage#localStorage\">localStorage</a> as the means for\n           * <code>remember</code>ing\n           * @type Boolean\n           */\n          useLocalStorage: {\n\n            get: function() {\n              return use_local_storage;\n            },\n            set: function(bool) {\n              if (SUPPORTS_LOCAL_STORAGE) {\n                use_local_storage = bool;\n                if (bool) {\n                  dom.bind(window, 'unload', saveToLocalStorage);\n                } else {\n                  dom.unbind(window, 'unload', saveToLocalStorage);\n                }\n                localStorage.setItem(getLocalStorageHash(_this, 'isLocal'), bool);\n              }\n            }\n\n          }\n\n        });\n\n    // Are we a root level GUI?\n    if (common.isUndefined(params.parent)) {\n\n      params.closed = false;\n\n      dom.addClass(this.domElement, GUI.CLASS_MAIN);\n      dom.makeSelectable(this.domElement, false);\n\n      // Are we supposed to be loading locally?\n      if (SUPPORTS_LOCAL_STORAGE) {\n\n        if (use_local_storage) {\n\n          _this.useLocalStorage = true;\n\n          var saved_gui = localStorage.getItem(getLocalStorageHash(this, 'gui'));\n\n          if (saved_gui) {\n            params.load = JSON.parse(saved_gui);\n          }\n\n        }\n\n      }\n\n      this.__closeButton = document.createElement('div');\n      this.__closeButton.innerHTML = GUI.TEXT_CLOSED;\n      dom.addClass(this.__closeButton, GUI.CLASS_CLOSE_BUTTON);\n      this.domElement.appendChild(this.__closeButton);\n\n      dom.bind(this.__closeButton, 'click', function() {\n\n        _this.closed = !_this.closed;\n\n\n      });\n\n\n      // Oh, you're a nested GUI!\n    } else {\n\n      if (params.closed === undefined) {\n        params.closed = true;\n      }\n\n      var title_row_name = document.createTextNode(params.name);\n      dom.addClass(title_row_name, 'controller-name');\n\n      var title_row = addRow(_this, title_row_name);\n\n      var on_click_title = function(e) {\n        e.preventDefault();\n        _this.closed = !_this.closed;\n        return false;\n      };\n\n      dom.addClass(this.__ul, GUI.CLASS_CLOSED);\n\n      dom.addClass(title_row, 'title');\n      dom.bind(title_row, 'click', on_click_title);\n\n      if (!params.closed) {\n        this.closed = false;\n      }\n\n    }\n\n    if (params.autoPlace) {\n\n      if (common.isUndefined(params.parent)) {\n\n        if (auto_place_virgin) {\n          auto_place_container = document.createElement('div');\n          dom.addClass(auto_place_container, CSS_NAMESPACE);\n          dom.addClass(auto_place_container, GUI.CLASS_AUTO_PLACE_CONTAINER);\n          document.body.appendChild(auto_place_container);\n          auto_place_virgin = false;\n        }\n\n        // Put it in the dom for you.\n        auto_place_container.appendChild(this.domElement);\n\n        // Apply the auto styles\n        dom.addClass(this.domElement, GUI.CLASS_AUTO_PLACE);\n\n      }\n\n\n      // Make it not elastic.\n      if (!this.parent) setWidth(_this, params.width);\n\n    }\n\n    dom.bind(window, 'resize', function() { _this.onResize() });\n    dom.bind(this.__ul, 'webkitTransitionEnd', function() { _this.onResize(); });\n    dom.bind(this.__ul, 'transitionend', function() { _this.onResize() });\n    dom.bind(this.__ul, 'oTransitionEnd', function() { _this.onResize() });\n    this.onResize();\n\n\n    if (params.resizable) {\n      addResizeHandle(this);\n    }\n\n    function saveToLocalStorage() {\n      localStorage.setItem(getLocalStorageHash(_this, 'gui'), JSON.stringify(_this.getSaveObject()));\n    }\n\n    var root = _this.getRoot();\n    function resetWidth() {\n        var root = _this.getRoot();\n        root.width += 1;\n        common.defer(function() {\n          root.width -= 1;\n        });\n      }\n\n      if (!params.parent) {\n        resetWidth();\n      }\n\n  };\n\n  GUI.toggleHide = function() {\n\n    hide = !hide;\n    common.each(hideable_guis, function(gui) {\n      gui.domElement.style.zIndex = hide ? -999 : 999;\n      gui.domElement.style.opacity = hide ? 0 : 1;\n    });\n  };\n\n  GUI.CLASS_AUTO_PLACE = 'a';\n  GUI.CLASS_AUTO_PLACE_CONTAINER = 'ac';\n  GUI.CLASS_MAIN = 'main';\n  GUI.CLASS_CONTROLLER_ROW = 'cr';\n  GUI.CLASS_TOO_TALL = 'taller-than-window';\n  GUI.CLASS_CLOSED = 'closed';\n  GUI.CLASS_CLOSE_BUTTON = 'close-button';\n  GUI.CLASS_DRAG = 'drag';\n\n  GUI.DEFAULT_WIDTH = 245;\n  GUI.TEXT_CLOSED = 'Close Controls';\n  GUI.TEXT_OPEN = 'Open Controls';\n\n  dom.bind(window, 'keydown', function(e) {\n\n    if (document.activeElement.type !== 'text' &&\n        (e.which === HIDE_KEY_CODE || e.keyCode == HIDE_KEY_CODE)) {\n      GUI.toggleHide();\n    }\n\n  }, false);\n\n  common.extend(\n\n      GUI.prototype,\n\n      /** @lends dat.gui.GUI */\n      {\n\n        /**\n         * @param object\n         * @param property\n         * @returns {dat.controllers.Controller} The new controller that was added.\n         * @instance\n         */\n        add: function(object, property) {\n\n          return add(\n              this,\n              object,\n              property,\n              {\n                factoryArgs: Array.prototype.slice.call(arguments, 2)\n              }\n          );\n\n        },\n\n        /**\n         * @param object\n         * @param property\n         * @returns {dat.controllers.ColorController} The new controller that was added.\n         * @instance\n         */\n        addColor: function(object, property) {\n\n          return add(\n              this,\n              object,\n              property,\n              {\n                color: true\n              }\n          );\n\n        },\n\n        /**\n         * @param controller\n         * @instance\n         */\n        remove: function(controller) {\n\n          // TODO listening?\n          this.__ul.removeChild(controller.__li);\n          this.__controllers.slice(this.__controllers.indexOf(controller), 1);\n          var _this = this;\n          common.defer(function() {\n            _this.onResize();\n          });\n\n        },\n\n        destroy: function() {\n\n          if (this.autoPlace) {\n            auto_place_container.removeChild(this.domElement);\n          }\n\n        },\n\n        /**\n         * @param name\n         * @returns {dat.gui.GUI} The new folder.\n         * @throws {Error} if this GUI already has a folder by the specified\n         * name\n         * @instance\n         */\n        addFolder: function(name) {\n\n          // We have to prevent collisions on names in order to have a key\n          // by which to remember saved values\n          if (this.__folders[name] !== undefined) {\n            throw new Error('You already have a folder in this GUI by the' +\n                ' name \"' + name + '\"');\n          }\n\n          var new_gui_params = { name: name, parent: this };\n\n          // We need to pass down the autoPlace trait so that we can\n          // attach event listeners to open/close folder actions to\n          // ensure that a scrollbar appears if the window is too short.\n          new_gui_params.autoPlace = this.autoPlace;\n\n          // Do we have saved appearance data for this folder?\n\n          if (this.load && // Anything loaded?\n              this.load.folders && // Was my parent a dead-end?\n              this.load.folders[name]) { // Did daddy remember me?\n\n            // Start me closed if I was closed\n            new_gui_params.closed = this.load.folders[name].closed;\n\n            // Pass down the loaded data\n            new_gui_params.load = this.load.folders[name];\n\n          }\n\n          var gui = new GUI(new_gui_params);\n          this.__folders[name] = gui;\n\n          var li = addRow(this, gui.domElement);\n          dom.addClass(li, 'folder');\n          return gui;\n\n        },\n\n        open: function() {\n          this.closed = false;\n        },\n\n        close: function() {\n          this.closed = true;\n        },\n\n        onResize: function() {\n\n          var root = this.getRoot();\n\n          if (root.scrollable) {\n\n            var top = dom.getOffset(root.__ul).top;\n            var h = 0;\n\n            common.each(root.__ul.childNodes, function(node) {\n              if (! (root.autoPlace && node === root.__save_row))\n                h += dom.getHeight(node);\n            });\n\n            if (window.innerHeight - top - CLOSE_BUTTON_HEIGHT < h) {\n              dom.addClass(root.domElement, GUI.CLASS_TOO_TALL);\n              root.__ul.style.height = window.innerHeight - top - CLOSE_BUTTON_HEIGHT + 'px';\n            } else {\n              dom.removeClass(root.domElement, GUI.CLASS_TOO_TALL);\n              root.__ul.style.height = 'auto';\n            }\n\n          }\n\n          if (root.__resize_handle) {\n            common.defer(function() {\n              root.__resize_handle.style.height = root.__ul.offsetHeight + 'px';\n            });\n          }\n\n          if (root.__closeButton) {\n            root.__closeButton.style.width = root.width + 'px';\n          }\n\n        },\n\n        /**\n         * Mark objects for saving. The order of these objects cannot change as\n         * the GUI grows. When remembering new objects, append them to the end\n         * of the list.\n         *\n         * @param {Object...} objects\n         * @throws {Error} if not called on a top level GUI.\n         * @instance\n         */\n        remember: function() {\n\n          if (common.isUndefined(SAVE_DIALOGUE)) {\n            SAVE_DIALOGUE = new CenteredDiv();\n            SAVE_DIALOGUE.domElement.innerHTML = saveDialogueContents;\n          }\n\n          if (this.parent) {\n            throw new Error(\"You can only call remember on a top level GUI.\");\n          }\n\n          var _this = this;\n\n          common.each(Array.prototype.slice.call(arguments), function(object) {\n            if (_this.__rememberedObjects.length == 0) {\n              addSaveMenu(_this);\n            }\n            if (_this.__rememberedObjects.indexOf(object) == -1) {\n              _this.__rememberedObjects.push(object);\n            }\n          });\n\n          if (this.autoPlace) {\n            // Set save row width\n            setWidth(this, this.width);\n          }\n\n        },\n\n        /**\n         * @returns {dat.gui.GUI} the topmost parent GUI of a nested GUI.\n         * @instance\n         */\n        getRoot: function() {\n          var gui = this;\n          while (gui.parent) {\n            gui = gui.parent;\n          }\n          return gui;\n        },\n\n        /**\n         * @returns {Object} a JSON object representing the current state of\n         * this GUI as well as its remembered properties.\n         * @instance\n         */\n        getSaveObject: function() {\n\n          var toReturn = this.load;\n\n          toReturn.closed = this.closed;\n\n          // Am I remembering any values?\n          if (this.__rememberedObjects.length > 0) {\n\n            toReturn.preset = this.preset;\n\n            if (!toReturn.remembered) {\n              toReturn.remembered = {};\n            }\n\n            toReturn.remembered[this.preset] = getCurrentPreset(this);\n\n          }\n\n          toReturn.folders = {};\n          common.each(this.__folders, function(element, key) {\n            toReturn.folders[key] = element.getSaveObject();\n          });\n\n          return toReturn;\n\n        },\n\n        save: function() {\n\n          if (!this.load.remembered) {\n            this.load.remembered = {};\n          }\n\n          this.load.remembered[this.preset] = getCurrentPreset(this);\n          markPresetModified(this, false);\n\n        },\n\n        saveAs: function(presetName) {\n\n          if (!this.load.remembered) {\n\n            // Retain default values upon first save\n            this.load.remembered = {};\n            this.load.remembered[DEFAULT_DEFAULT_PRESET_NAME] = getCurrentPreset(this, true);\n\n          }\n\n          this.load.remembered[presetName] = getCurrentPreset(this);\n          this.preset = presetName;\n          addPresetOption(this, presetName, true);\n\n        },\n\n        revert: function(gui) {\n\n          common.each(this.__controllers, function(controller) {\n            // Make revert work on Default.\n            if (!this.getRoot().load.remembered) {\n              controller.setValue(controller.initialValue);\n            } else {\n              recallSavedValue(gui || this.getRoot(), controller);\n            }\n          }, this);\n\n          common.each(this.__folders, function(folder) {\n            folder.revert(folder);\n          });\n\n          if (!gui) {\n            markPresetModified(this.getRoot(), false);\n          }\n\n\n        },\n\n        listen: function(controller) {\n\n          var init = this.__listening.length == 0;\n          this.__listening.push(controller);\n          if (init) updateDisplays(this.__listening);\n\n        }\n\n      }\n\n  );\n\n  function add(gui, object, property, params) {\n\n    if (object[property] === undefined) {\n      throw new Error(\"Object \" + object + \" has no property \\\"\" + property + \"\\\"\");\n    }\n\n    var controller;\n\n    if (params.color) {\n\n      controller = new ColorController(object, property);\n\n    } else {\n\n      var factoryArgs = [object,property].concat(params.factoryArgs);\n      controller = controllerFactory.apply(gui, factoryArgs);\n\n    }\n\n    if (params.before instanceof Controller) {\n      params.before = params.before.__li;\n    }\n\n    recallSavedValue(gui, controller);\n\n    dom.addClass(controller.domElement, 'c');\n\n    var name = document.createElement('span');\n    dom.addClass(name, 'property-name');\n    name.innerHTML = controller.property;\n\n    var container = document.createElement('div');\n    container.appendChild(name);\n    container.appendChild(controller.domElement);\n\n    var li = addRow(gui, container, params.before);\n\n    dom.addClass(li, GUI.CLASS_CONTROLLER_ROW);\n    dom.addClass(li, typeof controller.getValue());\n\n    augmentController(gui, li, controller);\n\n    gui.__controllers.push(controller);\n\n    return controller;\n\n  }\n\n  /**\n   * Add a row to the end of the GUI or before another row.\n   *\n   * @param gui\n   * @param [dom] If specified, inserts the dom content in the new row\n   * @param [liBefore] If specified, places the new row before another row\n   */\n  function addRow(gui, dom, liBefore) {\n    var li = document.createElement('li');\n    if (dom) li.appendChild(dom);\n    if (liBefore) {\n      gui.__ul.insertBefore(li, params.before);\n    } else {\n      gui.__ul.appendChild(li);\n    }\n    gui.onResize();\n    return li;\n  }\n\n  function augmentController(gui, li, controller) {\n\n    controller.__li = li;\n    controller.__gui = gui;\n\n    common.extend(controller, {\n\n      options: function(options) {\n\n        if (arguments.length > 1) {\n          controller.remove();\n\n          return add(\n              gui,\n              controller.object,\n              controller.property,\n              {\n                before: controller.__li.nextElementSibling,\n                factoryArgs: [common.toArray(arguments)]\n              }\n          );\n\n        }\n\n        if (common.isArray(options) || common.isObject(options)) {\n          controller.remove();\n\n          return add(\n              gui,\n              controller.object,\n              controller.property,\n              {\n                before: controller.__li.nextElementSibling,\n                factoryArgs: [options]\n              }\n          );\n\n        }\n\n      },\n\n      name: function(v) {\n        controller.__li.firstElementChild.firstElementChild.innerHTML = v;\n        return controller;\n      },\n\n      listen: function() {\n        controller.__gui.listen(controller);\n        return controller;\n      },\n\n      remove: function() {\n        controller.__gui.remove(controller);\n        return controller;\n      }\n\n    });\n\n    // All sliders should be accompanied by a box.\n    if (controller instanceof NumberControllerSlider) {\n\n      var box = new NumberControllerBox(controller.object, controller.property,\n          { min: controller.__min, max: controller.__max, step: controller.__step });\n\n      common.each(['updateDisplay', 'onChange', 'onFinishChange'], function(method) {\n        var pc = controller[method];\n        var pb = box[method];\n        controller[method] = box[method] = function() {\n          var args = Array.prototype.slice.call(arguments);\n          pc.apply(controller, args);\n          return pb.apply(box, args);\n        }\n      });\n\n      dom.addClass(li, 'has-slider');\n      controller.domElement.insertBefore(box.domElement, controller.domElement.firstElementChild);\n\n    }\n    else if (controller instanceof NumberControllerBox) {\n\n      var r = function(returned) {\n\n        // Have we defined both boundaries?\n        if (common.isNumber(controller.__min) && common.isNumber(controller.__max)) {\n\n          // Well, then lets just replace this with a slider.\n          controller.remove();\n          return add(\n              gui,\n              controller.object,\n              controller.property,\n              {\n                before: controller.__li.nextElementSibling,\n                factoryArgs: [controller.__min, controller.__max, controller.__step]\n              });\n\n        }\n\n        return returned;\n\n      };\n\n      controller.min = common.compose(r, controller.min);\n      controller.max = common.compose(r, controller.max);\n\n    }\n    else if (controller instanceof BooleanController) {\n\n      dom.bind(li, 'click', function() {\n        dom.fakeEvent(controller.__checkbox, 'click');\n      });\n\n      dom.bind(controller.__checkbox, 'click', function(e) {\n        e.stopPropagation(); // Prevents double-toggle\n      })\n\n    }\n    else if (controller instanceof FunctionController) {\n\n      dom.bind(li, 'click', function() {\n        dom.fakeEvent(controller.__button, 'click');\n      });\n\n      dom.bind(li, 'mouseover', function() {\n        dom.addClass(controller.__button, 'hover');\n      });\n\n      dom.bind(li, 'mouseout', function() {\n        dom.removeClass(controller.__button, 'hover');\n      });\n\n    }\n    else if (controller instanceof ColorController) {\n\n      dom.addClass(li, 'color');\n      controller.updateDisplay = common.compose(function(r) {\n        li.style.borderLeftColor = controller.__color.toString();\n        return r;\n      }, controller.updateDisplay);\n\n      controller.updateDisplay();\n\n    }\n\n    controller.setValue = common.compose(function(r) {\n      if (gui.getRoot().__preset_select && controller.isModified()) {\n        markPresetModified(gui.getRoot(), true);\n      }\n      return r;\n    }, controller.setValue);\n\n  }\n\n  function recallSavedValue(gui, controller) {\n\n    // Find the topmost GUI, that's where remembered objects live.\n    var root = gui.getRoot();\n\n    // Does the object we're controlling match anything we've been told to\n    // remember?\n    var matched_index = root.__rememberedObjects.indexOf(controller.object);\n\n    // Why yes, it does!\n    if (matched_index != -1) {\n\n      // Let me fetch a map of controllers for thcommon.isObject.\n      var controller_map =\n          root.__rememberedObjectIndecesToControllers[matched_index];\n\n      // Ohp, I believe this is the first controller we've created for this\n      // object. Lets make the map fresh.\n      if (controller_map === undefined) {\n        controller_map = {};\n        root.__rememberedObjectIndecesToControllers[matched_index] =\n            controller_map;\n      }\n\n      // Keep track of this controller\n      controller_map[controller.property] = controller;\n\n      // Okay, now have we saved any values for this controller?\n      if (root.load && root.load.remembered) {\n\n        var preset_map = root.load.remembered;\n\n        // Which preset are we trying to load?\n        var preset;\n\n        if (preset_map[gui.preset]) {\n\n          preset = preset_map[gui.preset];\n\n        } else if (preset_map[DEFAULT_DEFAULT_PRESET_NAME]) {\n\n          // Uhh, you can have the default instead?\n          preset = preset_map[DEFAULT_DEFAULT_PRESET_NAME];\n\n        } else {\n\n          // Nada.\n\n          return;\n\n        }\n\n\n        // Did the loaded object remember thcommon.isObject?\n        if (preset[matched_index] &&\n\n          // Did we remember this particular property?\n            preset[matched_index][controller.property] !== undefined) {\n\n          // We did remember something for this guy ...\n          var value = preset[matched_index][controller.property];\n\n          // And that's what it is.\n          controller.initialValue = value;\n          controller.setValue(value);\n\n        }\n\n      }\n\n    }\n\n  }\n\n  function getLocalStorageHash(gui, key) {\n    // TODO how does this deal with multiple GUI's?\n    return document.location.href + '.' + key;\n\n  }\n\n  function addSaveMenu(gui) {\n\n    var div = gui.__save_row = document.createElement('li');\n\n    dom.addClass(gui.domElement, 'has-save');\n\n    gui.__ul.insertBefore(div, gui.__ul.firstChild);\n\n    dom.addClass(div, 'save-row');\n\n    var gears = document.createElement('span');\n    gears.innerHTML = '&nbsp;';\n    dom.addClass(gears, 'button gears');\n\n    // TODO replace with FunctionController\n    var button = document.createElement('span');\n    button.innerHTML = 'Save';\n    dom.addClass(button, 'button');\n    dom.addClass(button, 'save');\n\n    var button2 = document.createElement('span');\n    button2.innerHTML = 'New';\n    dom.addClass(button2, 'button');\n    dom.addClass(button2, 'save-as');\n\n    var button3 = document.createElement('span');\n    button3.innerHTML = 'Revert';\n    dom.addClass(button3, 'button');\n    dom.addClass(button3, 'revert');\n\n    var select = gui.__preset_select = document.createElement('select');\n\n    if (gui.load && gui.load.remembered) {\n\n      common.each(gui.load.remembered, function(value, key) {\n        addPresetOption(gui, key, key == gui.preset);\n      });\n\n    } else {\n      addPresetOption(gui, DEFAULT_DEFAULT_PRESET_NAME, false);\n    }\n\n    dom.bind(select, 'change', function() {\n\n\n      for (var index = 0; index < gui.__preset_select.length; index++) {\n        gui.__preset_select[index].innerHTML = gui.__preset_select[index].value;\n      }\n\n      gui.preset = this.value;\n\n    });\n\n    div.appendChild(select);\n    div.appendChild(gears);\n    div.appendChild(button);\n    div.appendChild(button2);\n    div.appendChild(button3);\n\n    if (SUPPORTS_LOCAL_STORAGE) {\n\n      var saveLocally = document.getElementById('dg-save-locally');\n      var explain = document.getElementById('dg-local-explain');\n\n      saveLocally.style.display = 'block';\n\n      var localStorageCheckBox = document.getElementById('dg-local-storage');\n\n      if (localStorage.getItem(getLocalStorageHash(gui, 'isLocal')) === 'true') {\n        localStorageCheckBox.setAttribute('checked', 'checked');\n      }\n\n      function showHideExplain() {\n        explain.style.display = gui.useLocalStorage ? 'block' : 'none';\n      }\n\n      showHideExplain();\n\n      // TODO: Use a boolean controller, fool!\n      dom.bind(localStorageCheckBox, 'change', function() {\n        gui.useLocalStorage = !gui.useLocalStorage;\n        showHideExplain();\n      });\n\n    }\n\n    var newConstructorTextArea = document.getElementById('dg-new-constructor');\n\n    dom.bind(newConstructorTextArea, 'keydown', function(e) {\n      if (e.metaKey && (e.which === 67 || e.keyCode == 67)) {\n        SAVE_DIALOGUE.hide();\n      }\n    });\n\n    dom.bind(gears, 'click', function() {\n      newConstructorTextArea.innerHTML = JSON.stringify(gui.getSaveObject(), undefined, 2);\n      SAVE_DIALOGUE.show();\n      newConstructorTextArea.focus();\n      newConstructorTextArea.select();\n    });\n\n    dom.bind(button, 'click', function() {\n      gui.save();\n    });\n\n    dom.bind(button2, 'click', function() {\n      var presetName = prompt('Enter a new preset name.');\n      if (presetName) gui.saveAs(presetName);\n    });\n\n    dom.bind(button3, 'click', function() {\n      gui.revert();\n    });\n\n//    div.appendChild(button2);\n\n  }\n\n  function addResizeHandle(gui) {\n\n    gui.__resize_handle = document.createElement('div');\n\n    common.extend(gui.__resize_handle.style, {\n\n      width: '6px',\n      marginLeft: '-3px',\n      height: '200px',\n      cursor: 'ew-resize',\n      position: 'absolute'\n//      border: '1px solid blue'\n\n    });\n\n    var pmouseX;\n\n    dom.bind(gui.__resize_handle, 'mousedown', dragStart);\n    dom.bind(gui.__closeButton, 'mousedown', dragStart);\n\n    gui.domElement.insertBefore(gui.__resize_handle, gui.domElement.firstElementChild);\n\n    function dragStart(e) {\n\n      e.preventDefault();\n\n      pmouseX = e.clientX;\n\n      dom.addClass(gui.__closeButton, GUI.CLASS_DRAG);\n      dom.bind(window, 'mousemove', drag);\n      dom.bind(window, 'mouseup', dragStop);\n\n      return false;\n\n    }\n\n    function drag(e) {\n\n      e.preventDefault();\n\n      gui.width += pmouseX - e.clientX;\n      gui.onResize();\n      pmouseX = e.clientX;\n\n      return false;\n\n    }\n\n    function dragStop() {\n\n      dom.removeClass(gui.__closeButton, GUI.CLASS_DRAG);\n      dom.unbind(window, 'mousemove', drag);\n      dom.unbind(window, 'mouseup', dragStop);\n\n    }\n\n  }\n\n  function setWidth(gui, w) {\n    gui.domElement.style.width = w + 'px';\n    // Auto placed save-rows are position fixed, so we have to\n    // set the width manually if we want it to bleed to the edge\n    if (gui.__save_row && gui.autoPlace) {\n      gui.__save_row.style.width = w + 'px';\n    }if (gui.__closeButton) {\n      gui.__closeButton.style.width = w + 'px';\n    }\n  }\n\n  function getCurrentPreset(gui, useInitialValues) {\n\n    var toReturn = {};\n\n    // For each object I'm remembering\n    common.each(gui.__rememberedObjects, function(val, index) {\n\n      var saved_values = {};\n\n      // The controllers I've made for thcommon.isObject by property\n      var controller_map =\n          gui.__rememberedObjectIndecesToControllers[index];\n\n      // Remember each value for each property\n      common.each(controller_map, function(controller, property) {\n        saved_values[property] = useInitialValues ? controller.initialValue : controller.getValue();\n      });\n\n      // Save the values for thcommon.isObject\n      toReturn[index] = saved_values;\n\n    });\n\n    return toReturn;\n\n  }\n\n  function addPresetOption(gui, name, setSelected) {\n    var opt = document.createElement('option');\n    opt.innerHTML = name;\n    opt.value = name;\n    gui.__preset_select.appendChild(opt);\n    if (setSelected) {\n      gui.__preset_select.selectedIndex = gui.__preset_select.length - 1;\n    }\n  }\n\n  function setPresetSelectIndex(gui) {\n    for (var index = 0; index < gui.__preset_select.length; index++) {\n      if (gui.__preset_select[index].value == gui.preset) {\n        gui.__preset_select.selectedIndex = index;\n      }\n    }\n  }\n\n  function markPresetModified(gui, modified) {\n    var opt = gui.__preset_select[gui.__preset_select.selectedIndex];\n//    console.log('mark', modified, opt);\n    if (modified) {\n      opt.innerHTML = opt.value + \"*\";\n    } else {\n      opt.innerHTML = opt.value;\n    }\n  }\n\n  function updateDisplays(controllerArray) {\n\n\n    if (controllerArray.length != 0) {\n\n      requestAnimationFrame(function() {\n        updateDisplays(controllerArray);\n      });\n\n    }\n\n    common.each(controllerArray, function(c) {\n      c.updateDisplay();\n    });\n\n  }\n\n  return GUI;\n\n})(dat.utils.css,\n\"<div id=\\\"dg-save\\\" class=\\\"dg dialogue\\\">\\n\\n  Here's the new load parameter for your <code>GUI</code>'s constructor:\\n\\n  <textarea id=\\\"dg-new-constructor\\\"></textarea>\\n\\n  <div id=\\\"dg-save-locally\\\">\\n\\n    <input id=\\\"dg-local-storage\\\" type=\\\"checkbox\\\"/> Automatically save\\n    values to <code>localStorage</code> on exit.\\n\\n    <div id=\\\"dg-local-explain\\\">The values saved to <code>localStorage</code> will\\n      override those passed to <code>dat.GUI</code>'s constructor. This makes it\\n      easier to work incrementally, but <code>localStorage</code> is fragile,\\n      and your friends may not see the same values you do.\\n      \\n    </div>\\n    \\n  </div>\\n\\n</div>\",\n\".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear;border:0;position:absolute;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-x:hidden}.dg.a.has-save ul{margin-top:27px}.dg.a.has-save ul.closed{margin-top:0}.dg.a .save-row{position:fixed;top:0;z-index:1002}.dg li{-webkit-transition:height 0.1s ease-out;-o-transition:height 0.1s ease-out;-moz-transition:height 0.1s ease-out;transition:height 0.1s ease-out}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;overflow:hidden;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li > *{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:9px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2fa1d6}.dg .cr.number input[type=text]{color:#2fa1d6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2fa1d6}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\\n\",\ndat.controllers.factory = (function (OptionController, NumberControllerBox, NumberControllerSlider, StringController, FunctionController, BooleanController, common) {\n\n      return function(object, property) {\n\n        var initialValue = object[property];\n\n        // Providing options?\n        if (common.isArray(arguments[2]) || common.isObject(arguments[2])) {\n          return new OptionController(object, property, arguments[2]);\n        }\n\n        // Providing a map?\n\n        if (common.isNumber(initialValue)) {\n\n          if (common.isNumber(arguments[2]) && common.isNumber(arguments[3])) {\n\n            // Has min and max.\n            return new NumberControllerSlider(object, property, arguments[2], arguments[3]);\n\n          } else {\n\n            return new NumberControllerBox(object, property, { min: arguments[2], max: arguments[3] });\n\n          }\n\n        }\n\n        if (common.isString(initialValue)) {\n          return new StringController(object, property);\n        }\n\n        if (common.isFunction(initialValue)) {\n          return new FunctionController(object, property, '');\n        }\n\n        if (common.isBoolean(initialValue)) {\n          return new BooleanController(object, property);\n        }\n\n      }\n\n    })(dat.controllers.OptionController,\ndat.controllers.NumberControllerBox,\ndat.controllers.NumberControllerSlider,\ndat.controllers.StringController = (function (Controller, dom, common) {\n\n  /**\n   * @class Provides a text input to alter the string property of an object.\n   *\n   * @extends dat.controllers.Controller\n   *\n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   *\n   * @member dat.controllers\n   */\n  var StringController = function(object, property) {\n\n    StringController.superclass.call(this, object, property);\n\n    var _this = this;\n\n    this.__input = document.createElement('input');\n    this.__input.setAttribute('type', 'text');\n\n    dom.bind(this.__input, 'keyup', onChange);\n    dom.bind(this.__input, 'change', onChange);\n    dom.bind(this.__input, 'blur', onBlur);\n    dom.bind(this.__input, 'keydown', function(e) {\n      if (e.keyCode === 13) {\n        this.blur();\n      }\n    });\n    \n\n    function onChange() {\n      _this.setValue(_this.__input.value);\n    }\n\n    function onBlur() {\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n\n    this.updateDisplay();\n\n    this.domElement.appendChild(this.__input);\n\n  };\n\n  StringController.superclass = Controller;\n\n  common.extend(\n\n      StringController.prototype,\n      Controller.prototype,\n\n      {\n\n        updateDisplay: function() {\n          // Stops the caret from moving on account of:\n          // keyup -> setValue -> updateDisplay\n          if (!dom.isActive(this.__input)) {\n            this.__input.value = this.getValue();\n          }\n          return StringController.superclass.prototype.updateDisplay.call(this);\n        }\n\n      }\n\n  );\n\n  return StringController;\n\n})(dat.controllers.Controller,\ndat.dom.dom,\ndat.utils.common),\ndat.controllers.FunctionController,\ndat.controllers.BooleanController,\ndat.utils.common),\ndat.controllers.Controller,\ndat.controllers.BooleanController,\ndat.controllers.FunctionController,\ndat.controllers.NumberControllerBox,\ndat.controllers.NumberControllerSlider,\ndat.controllers.OptionController,\ndat.controllers.ColorController = (function (Controller, dom, Color, interpret, common) {\n\n  var ColorController = function(object, property) {\n\n    ColorController.superclass.call(this, object, property);\n\n    this.__color = new Color(this.getValue());\n    this.__temp = new Color(0);\n\n    var _this = this;\n\n    this.domElement = document.createElement('div');\n\n    dom.makeSelectable(this.domElement, false);\n\n    this.__selector = document.createElement('div');\n    this.__selector.className = 'selector';\n\n    this.__saturation_field = document.createElement('div');\n    this.__saturation_field.className = 'saturation-field';\n\n    this.__field_knob = document.createElement('div');\n    this.__field_knob.className = 'field-knob';\n    this.__field_knob_border = '2px solid ';\n\n    this.__hue_knob = document.createElement('div');\n    this.__hue_knob.className = 'hue-knob';\n\n    this.__hue_field = document.createElement('div');\n    this.__hue_field.className = 'hue-field';\n\n    this.__input = document.createElement('input');\n    this.__input.type = 'text';\n    this.__input_textShadow = '0 1px 1px ';\n\n    dom.bind(this.__input, 'keydown', function(e) {\n      if (e.keyCode === 13) { // on enter\n        onBlur.call(this);\n      }\n    });\n\n    dom.bind(this.__input, 'blur', onBlur);\n\n    dom.bind(this.__selector, 'mousedown', function(e) {\n\n      dom\n        .addClass(this, 'drag')\n        .bind(window, 'mouseup', function(e) {\n          dom.removeClass(_this.__selector, 'drag');\n        });\n\n    });\n\n    var value_field = document.createElement('div');\n\n    common.extend(this.__selector.style, {\n      width: '122px',\n      height: '102px',\n      padding: '3px',\n      backgroundColor: '#222',\n      boxShadow: '0px 1px 3px rgba(0,0,0,0.3)'\n    });\n\n    common.extend(this.__field_knob.style, {\n      position: 'absolute',\n      width: '12px',\n      height: '12px',\n      border: this.__field_knob_border + (this.__color.v < .5 ? '#fff' : '#000'),\n      boxShadow: '0px 1px 3px rgba(0,0,0,0.5)',\n      borderRadius: '12px',\n      zIndex: 1\n    });\n    \n    common.extend(this.__hue_knob.style, {\n      position: 'absolute',\n      width: '15px',\n      height: '2px',\n      borderRight: '4px solid #fff',\n      zIndex: 1\n    });\n\n    common.extend(this.__saturation_field.style, {\n      width: '100px',\n      height: '100px',\n      border: '1px solid #555',\n      marginRight: '3px',\n      display: 'inline-block',\n      cursor: 'pointer'\n    });\n\n    common.extend(value_field.style, {\n      width: '100%',\n      height: '100%',\n      background: 'none'\n    });\n    \n    linearGradient(value_field, 'top', 'rgba(0,0,0,0)', '#000');\n\n    common.extend(this.__hue_field.style, {\n      width: '15px',\n      height: '100px',\n      display: 'inline-block',\n      border: '1px solid #555',\n      cursor: 'ns-resize'\n    });\n\n    hueGradient(this.__hue_field);\n\n    common.extend(this.__input.style, {\n      outline: 'none',\n//      width: '120px',\n      textAlign: 'center',\n//      padding: '4px',\n//      marginBottom: '6px',\n      color: '#fff',\n      border: 0,\n      fontWeight: 'bold',\n      textShadow: this.__input_textShadow + 'rgba(0,0,0,0.7)'\n    });\n\n    dom.bind(this.__saturation_field, 'mousedown', fieldDown);\n    dom.bind(this.__field_knob, 'mousedown', fieldDown);\n\n    dom.bind(this.__hue_field, 'mousedown', function(e) {\n      setH(e);\n      dom.bind(window, 'mousemove', setH);\n      dom.bind(window, 'mouseup', unbindH);\n    });\n\n    function fieldDown(e) {\n      setSV(e);\n      // document.body.style.cursor = 'none';\n      dom.bind(window, 'mousemove', setSV);\n      dom.bind(window, 'mouseup', unbindSV);\n    }\n\n    function unbindSV() {\n      dom.unbind(window, 'mousemove', setSV);\n      dom.unbind(window, 'mouseup', unbindSV);\n      // document.body.style.cursor = 'default';\n    }\n\n    function onBlur() {\n      var i = interpret(this.value);\n      if (i !== false) {\n        _this.__color.__state = i;\n        _this.setValue(_this.__color.toOriginal());\n      } else {\n        this.value = _this.__color.toString();\n      }\n    }\n\n    function unbindH() {\n      dom.unbind(window, 'mousemove', setH);\n      dom.unbind(window, 'mouseup', unbindH);\n    }\n\n    this.__saturation_field.appendChild(value_field);\n    this.__selector.appendChild(this.__field_knob);\n    this.__selector.appendChild(this.__saturation_field);\n    this.__selector.appendChild(this.__hue_field);\n    this.__hue_field.appendChild(this.__hue_knob);\n\n    this.domElement.appendChild(this.__input);\n    this.domElement.appendChild(this.__selector);\n\n    this.updateDisplay();\n\n    function setSV(e) {\n\n      e.preventDefault();\n\n      var w = dom.getWidth(_this.__saturation_field);\n      var o = dom.getOffset(_this.__saturation_field);\n      var s = (e.clientX - o.left + document.body.scrollLeft) / w;\n      var v = 1 - (e.clientY - o.top + document.body.scrollTop) / w;\n\n      if (v > 1) v = 1;\n      else if (v < 0) v = 0;\n\n      if (s > 1) s = 1;\n      else if (s < 0) s = 0;\n\n      _this.__color.v = v;\n      _this.__color.s = s;\n\n      _this.setValue(_this.__color.toOriginal());\n\n\n      return false;\n\n    }\n\n    function setH(e) {\n\n      e.preventDefault();\n\n      var s = dom.getHeight(_this.__hue_field);\n      var o = dom.getOffset(_this.__hue_field);\n      var h = 1 - (e.clientY - o.top + document.body.scrollTop) / s;\n\n      if (h > 1) h = 1;\n      else if (h < 0) h = 0;\n\n      _this.__color.h = h * 360;\n\n      _this.setValue(_this.__color.toOriginal());\n\n      return false;\n\n    }\n\n  };\n\n  ColorController.superclass = Controller;\n\n  common.extend(\n\n      ColorController.prototype,\n      Controller.prototype,\n\n      {\n\n        updateDisplay: function() {\n\n          var i = interpret(this.getValue());\n\n          if (i !== false) {\n\n            var mismatch = false;\n\n            // Check for mismatch on the interpreted value.\n\n            common.each(Color.COMPONENTS, function(component) {\n              if (!common.isUndefined(i[component]) &&\n                  !common.isUndefined(this.__color.__state[component]) &&\n                  i[component] !== this.__color.__state[component]) {\n                mismatch = true;\n                return {}; // break\n              }\n            }, this);\n\n            // If nothing diverges, we keep our previous values\n            // for statefulness, otherwise we recalculate fresh\n            if (mismatch) {\n              common.extend(this.__color.__state, i);\n            }\n\n          }\n\n          common.extend(this.__temp.__state, this.__color.__state);\n\n          this.__temp.a = 1;\n\n          var flip = (this.__color.v < .5 || this.__color.s > .5) ? 255 : 0;\n          var _flip = 255 - flip;\n\n          common.extend(this.__field_knob.style, {\n            marginLeft: 100 * this.__color.s - 7 + 'px',\n            marginTop: 100 * (1 - this.__color.v) - 7 + 'px',\n            backgroundColor: this.__temp.toString(),\n            border: this.__field_knob_border + 'rgb(' + flip + ',' + flip + ',' + flip +')'\n          });\n\n          this.__hue_knob.style.marginTop = (1 - this.__color.h / 360) * 100 + 'px'\n\n          this.__temp.s = 1;\n          this.__temp.v = 1;\n\n          linearGradient(this.__saturation_field, 'left', '#fff', this.__temp.toString());\n\n          common.extend(this.__input.style, {\n            backgroundColor: this.__input.value = this.__color.toString(),\n            color: 'rgb(' + flip + ',' + flip + ',' + flip +')',\n            textShadow: this.__input_textShadow + 'rgba(' + _flip + ',' + _flip + ',' + _flip +',.7)'\n          });\n\n        }\n\n      }\n\n  );\n  \n  var vendors = ['-moz-','-o-','-webkit-','-ms-',''];\n  \n  function linearGradient(elem, x, a, b) {\n    elem.style.background = '';\n    common.each(vendors, function(vendor) {\n      elem.style.cssText += 'background: ' + vendor + 'linear-gradient('+x+', '+a+' 0%, ' + b + ' 100%); ';\n    });\n  }\n  \n  function hueGradient(elem) {\n    elem.style.background = '';\n    elem.style.cssText += 'background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);'\n    elem.style.cssText += 'background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);'\n    elem.style.cssText += 'background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);'\n    elem.style.cssText += 'background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);'\n    elem.style.cssText += 'background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);'\n  }\n\n\n  return ColorController;\n\n})(dat.controllers.Controller,\ndat.dom.dom,\ndat.color.Color = (function (interpret, math, toString, common) {\n\n  var Color = function() {\n\n    this.__state = interpret.apply(this, arguments);\n\n    if (this.__state === false) {\n      throw 'Failed to interpret color arguments';\n    }\n\n    this.__state.a = this.__state.a || 1;\n\n\n  };\n\n  Color.COMPONENTS = ['r','g','b','h','s','v','hex','a'];\n\n  common.extend(Color.prototype, {\n\n    toString: function() {\n      return toString(this);\n    },\n\n    toOriginal: function() {\n      return this.__state.conversion.write(this);\n    }\n\n  });\n\n  defineRGBComponent(Color.prototype, 'r', 2);\n  defineRGBComponent(Color.prototype, 'g', 1);\n  defineRGBComponent(Color.prototype, 'b', 0);\n\n  defineHSVComponent(Color.prototype, 'h');\n  defineHSVComponent(Color.prototype, 's');\n  defineHSVComponent(Color.prototype, 'v');\n\n  Object.defineProperty(Color.prototype, 'a', {\n\n    get: function() {\n      return this.__state.a;\n    },\n\n    set: function(v) {\n      this.__state.a = v;\n    }\n\n  });\n\n  Object.defineProperty(Color.prototype, 'hex', {\n\n    get: function() {\n\n      if (!this.__state.space !== 'HEX') {\n        this.__state.hex = math.rgb_to_hex(this.r, this.g, this.b);\n      }\n\n      return this.__state.hex;\n\n    },\n\n    set: function(v) {\n\n      this.__state.space = 'HEX';\n      this.__state.hex = v;\n\n    }\n\n  });\n\n  function defineRGBComponent(target, component, componentHexIndex) {\n\n    Object.defineProperty(target, component, {\n\n      get: function() {\n\n        if (this.__state.space === 'RGB') {\n          return this.__state[component];\n        }\n\n        recalculateRGB(this, component, componentHexIndex);\n\n        return this.__state[component];\n\n      },\n\n      set: function(v) {\n\n        if (this.__state.space !== 'RGB') {\n          recalculateRGB(this, component, componentHexIndex);\n          this.__state.space = 'RGB';\n        }\n\n        this.__state[component] = v;\n\n      }\n\n    });\n\n  }\n\n  function defineHSVComponent(target, component) {\n\n    Object.defineProperty(target, component, {\n\n      get: function() {\n\n        if (this.__state.space === 'HSV')\n          return this.__state[component];\n\n        recalculateHSV(this);\n\n        return this.__state[component];\n\n      },\n\n      set: function(v) {\n\n        if (this.__state.space !== 'HSV') {\n          recalculateHSV(this);\n          this.__state.space = 'HSV';\n        }\n\n        this.__state[component] = v;\n\n      }\n\n    });\n\n  }\n\n  function recalculateRGB(color, component, componentHexIndex) {\n\n    if (color.__state.space === 'HEX') {\n\n      color.__state[component] = math.component_from_hex(color.__state.hex, componentHexIndex);\n\n    } else if (color.__state.space === 'HSV') {\n\n      common.extend(color.__state, math.hsv_to_rgb(color.__state.h, color.__state.s, color.__state.v));\n\n    } else {\n\n      throw 'Corrupted color state';\n\n    }\n\n  }\n\n  function recalculateHSV(color) {\n\n    var result = math.rgb_to_hsv(color.r, color.g, color.b);\n\n    common.extend(color.__state,\n        {\n          s: result.s,\n          v: result.v\n        }\n    );\n\n    if (!common.isNaN(result.h)) {\n      color.__state.h = result.h;\n    } else if (common.isUndefined(color.__state.h)) {\n      color.__state.h = 0;\n    }\n\n  }\n\n  return Color;\n\n})(dat.color.interpret,\ndat.color.math = (function () {\n\n  var tmpComponent;\n\n  return {\n\n    hsv_to_rgb: function(h, s, v) {\n\n      var hi = Math.floor(h / 60) % 6;\n\n      var f = h / 60 - Math.floor(h / 60);\n      var p = v * (1.0 - s);\n      var q = v * (1.0 - (f * s));\n      var t = v * (1.0 - ((1.0 - f) * s));\n      var c = [\n        [v, t, p],\n        [q, v, p],\n        [p, v, t],\n        [p, q, v],\n        [t, p, v],\n        [v, p, q]\n      ][hi];\n\n      return {\n        r: c[0] * 255,\n        g: c[1] * 255,\n        b: c[2] * 255\n      };\n\n    },\n\n    rgb_to_hsv: function(r, g, b) {\n\n      var min = Math.min(r, g, b),\n          max = Math.max(r, g, b),\n          delta = max - min,\n          h, s;\n\n      if (max != 0) {\n        s = delta / max;\n      } else {\n        return {\n          h: NaN,\n          s: 0,\n          v: 0\n        };\n      }\n\n      if (r == max) {\n        h = (g - b) / delta;\n      } else if (g == max) {\n        h = 2 + (b - r) / delta;\n      } else {\n        h = 4 + (r - g) / delta;\n      }\n      h /= 6;\n      if (h < 0) {\n        h += 1;\n      }\n\n      return {\n        h: h * 360,\n        s: s,\n        v: max / 255\n      };\n    },\n\n    rgb_to_hex: function(r, g, b) {\n      var hex = this.hex_with_component(0, 2, r);\n      hex = this.hex_with_component(hex, 1, g);\n      hex = this.hex_with_component(hex, 0, b);\n      return hex;\n    },\n\n    component_from_hex: function(hex, componentIndex) {\n      return (hex >> (componentIndex * 8)) & 0xFF;\n    },\n\n    hex_with_component: function(hex, componentIndex, value) {\n      return value << (tmpComponent = componentIndex * 8) | (hex & ~ (0xFF << tmpComponent));\n    }\n\n  }\n\n})(),\ndat.color.toString,\ndat.utils.common),\ndat.color.interpret,\ndat.utils.common),\ndat.utils.requestAnimationFrame = (function () {\n\n  /**\n   * requirejs version of Paul Irish's RequestAnimationFrame\n   * http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n   */\n\n  return window.webkitRequestAnimationFrame ||\n      window.mozRequestAnimationFrame ||\n      window.oRequestAnimationFrame ||\n      window.msRequestAnimationFrame ||\n      function(callback, element) {\n\n        window.setTimeout(callback, 1000 / 60);\n\n      };\n})(),\ndat.dom.CenteredDiv = (function (dom, common) {\n\n\n  var CenteredDiv = function() {\n\n    this.backgroundElement = document.createElement('div');\n    common.extend(this.backgroundElement.style, {\n      backgroundColor: 'rgba(0,0,0,0.8)',\n      top: 0,\n      left: 0,\n      display: 'none',\n      zIndex: '1000',\n      opacity: 0,\n      WebkitTransition: 'opacity 0.2s linear'\n    });\n\n    dom.makeFullscreen(this.backgroundElement);\n    this.backgroundElement.style.position = 'fixed';\n\n    this.domElement = document.createElement('div');\n    common.extend(this.domElement.style, {\n      position: 'fixed',\n      display: 'none',\n      zIndex: '1001',\n      opacity: 0,\n      WebkitTransition: '-webkit-transform 0.2s ease-out, opacity 0.2s linear'\n    });\n\n\n    document.body.appendChild(this.backgroundElement);\n    document.body.appendChild(this.domElement);\n\n    var _this = this;\n    dom.bind(this.backgroundElement, 'click', function() {\n      _this.hide();\n    });\n\n\n  };\n\n  CenteredDiv.prototype.show = function() {\n\n    var _this = this;\n    \n\n\n    this.backgroundElement.style.display = 'block';\n\n    this.domElement.style.display = 'block';\n    this.domElement.style.opacity = 0;\n//    this.domElement.style.top = '52%';\n    this.domElement.style.webkitTransform = 'scale(1.1)';\n\n    this.layout();\n\n    common.defer(function() {\n      _this.backgroundElement.style.opacity = 1;\n      _this.domElement.style.opacity = 1;\n      _this.domElement.style.webkitTransform = 'scale(1)';\n    });\n\n  };\n\n  CenteredDiv.prototype.hide = function() {\n\n    var _this = this;\n\n    var hide = function() {\n\n      _this.domElement.style.display = 'none';\n      _this.backgroundElement.style.display = 'none';\n\n      dom.unbind(_this.domElement, 'webkitTransitionEnd', hide);\n      dom.unbind(_this.domElement, 'transitionend', hide);\n      dom.unbind(_this.domElement, 'oTransitionEnd', hide);\n\n    };\n\n    dom.bind(this.domElement, 'webkitTransitionEnd', hide);\n    dom.bind(this.domElement, 'transitionend', hide);\n    dom.bind(this.domElement, 'oTransitionEnd', hide);\n\n    this.backgroundElement.style.opacity = 0;\n//    this.domElement.style.top = '48%';\n    this.domElement.style.opacity = 0;\n    this.domElement.style.webkitTransform = 'scale(1.1)';\n\n  };\n\n  CenteredDiv.prototype.layout = function() {\n    this.domElement.style.left = window.innerWidth/2 - dom.getWidth(this.domElement) / 2 + 'px';\n    this.domElement.style.top = window.innerHeight/2 - dom.getHeight(this.domElement) / 2 + 'px';\n  };\n  \n  function lockScroll(e) {\n    console.log(e);\n  }\n\n  return CenteredDiv;\n\n})(dat.dom.dom,\ndat.utils.common),\ndat.dom.dom,\ndat.utils.common);\n\n/***/ }),\n/* 123 */\n/*!**************************************************!*\\\n  !*** ./node_modules/dat-gui/vendor/dat.color.js ***!\n  \\**************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports) {\n\n/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\n/** @namespace */\nvar dat = module.exports = dat || {};\n\n/** @namespace */\ndat.color = dat.color || {};\n\n/** @namespace */\ndat.utils = dat.utils || {};\n\ndat.utils.common = (function () {\n  \n  var ARR_EACH = Array.prototype.forEach;\n  var ARR_SLICE = Array.prototype.slice;\n\n  /**\n   * Band-aid methods for things that should be a lot easier in JavaScript.\n   * Implementation and structure inspired by underscore.js\n   * http://documentcloud.github.com/underscore/\n   */\n\n  return { \n    \n    BREAK: {},\n  \n    extend: function(target) {\n      \n      this.each(ARR_SLICE.call(arguments, 1), function(obj) {\n        \n        for (var key in obj)\n          if (!this.isUndefined(obj[key])) \n            target[key] = obj[key];\n        \n      }, this);\n      \n      return target;\n      \n    },\n    \n    defaults: function(target) {\n      \n      this.each(ARR_SLICE.call(arguments, 1), function(obj) {\n        \n        for (var key in obj)\n          if (this.isUndefined(target[key])) \n            target[key] = obj[key];\n        \n      }, this);\n      \n      return target;\n    \n    },\n    \n    compose: function() {\n      var toCall = ARR_SLICE.call(arguments);\n            return function() {\n              var args = ARR_SLICE.call(arguments);\n              for (var i = toCall.length -1; i >= 0; i--) {\n                args = [toCall[i].apply(this, args)];\n              }\n              return args[0];\n            }\n    },\n    \n    each: function(obj, itr, scope) {\n\n      \n      if (ARR_EACH && obj.forEach === ARR_EACH) { \n        \n        obj.forEach(itr, scope);\n        \n      } else if (obj.length === obj.length + 0) { // Is number but not NaN\n        \n        for (var key = 0, l = obj.length; key < l; key++)\n          if (key in obj && itr.call(scope, obj[key], key) === this.BREAK) \n            return;\n            \n      } else {\n\n        for (var key in obj) \n          if (itr.call(scope, obj[key], key) === this.BREAK)\n            return;\n            \n      }\n            \n    },\n    \n    defer: function(fnc) {\n      setTimeout(fnc, 0);\n    },\n    \n    toArray: function(obj) {\n      if (obj.toArray) return obj.toArray();\n      return ARR_SLICE.call(obj);\n    },\n\n    isUndefined: function(obj) {\n      return obj === undefined;\n    },\n    \n    isNull: function(obj) {\n      return obj === null;\n    },\n    \n    isNaN: function(obj) {\n      return obj !== obj;\n    },\n    \n    isArray: Array.isArray || function(obj) {\n      return obj.constructor === Array;\n    },\n    \n    isObject: function(obj) {\n      return obj === Object(obj);\n    },\n    \n    isNumber: function(obj) {\n      return obj === obj+0;\n    },\n    \n    isString: function(obj) {\n      return obj === obj+'';\n    },\n    \n    isBoolean: function(obj) {\n      return obj === false || obj === true;\n    },\n    \n    isFunction: function(obj) {\n      return Object.prototype.toString.call(obj) === '[object Function]';\n    }\n  \n  };\n    \n})();\n\n\ndat.color.toString = (function (common) {\n\n  return function(color) {\n\n    if (color.a == 1 || common.isUndefined(color.a)) {\n\n      var s = color.hex.toString(16);\n      while (s.length < 6) {\n        s = '0' + s;\n      }\n\n      return '#' + s;\n\n    } else {\n\n      return 'rgba(' + Math.round(color.r) + ',' + Math.round(color.g) + ',' + Math.round(color.b) + ',' + color.a + ')';\n\n    }\n\n  }\n\n})(dat.utils.common);\n\n\ndat.Color = dat.color.Color = (function (interpret, math, toString, common) {\n\n  var Color = function() {\n\n    this.__state = interpret.apply(this, arguments);\n\n    if (this.__state === false) {\n      throw 'Failed to interpret color arguments';\n    }\n\n    this.__state.a = this.__state.a || 1;\n\n\n  };\n\n  Color.COMPONENTS = ['r','g','b','h','s','v','hex','a'];\n\n  common.extend(Color.prototype, {\n\n    toString: function() {\n      return toString(this);\n    },\n\n    toOriginal: function() {\n      return this.__state.conversion.write(this);\n    }\n\n  });\n\n  defineRGBComponent(Color.prototype, 'r', 2);\n  defineRGBComponent(Color.prototype, 'g', 1);\n  defineRGBComponent(Color.prototype, 'b', 0);\n\n  defineHSVComponent(Color.prototype, 'h');\n  defineHSVComponent(Color.prototype, 's');\n  defineHSVComponent(Color.prototype, 'v');\n\n  Object.defineProperty(Color.prototype, 'a', {\n\n    get: function() {\n      return this.__state.a;\n    },\n\n    set: function(v) {\n      this.__state.a = v;\n    }\n\n  });\n\n  Object.defineProperty(Color.prototype, 'hex', {\n\n    get: function() {\n\n      if (!this.__state.space !== 'HEX') {\n        this.__state.hex = math.rgb_to_hex(this.r, this.g, this.b);\n      }\n\n      return this.__state.hex;\n\n    },\n\n    set: function(v) {\n\n      this.__state.space = 'HEX';\n      this.__state.hex = v;\n\n    }\n\n  });\n\n  function defineRGBComponent(target, component, componentHexIndex) {\n\n    Object.defineProperty(target, component, {\n\n      get: function() {\n\n        if (this.__state.space === 'RGB') {\n          return this.__state[component];\n        }\n\n        recalculateRGB(this, component, componentHexIndex);\n\n        return this.__state[component];\n\n      },\n\n      set: function(v) {\n\n        if (this.__state.space !== 'RGB') {\n          recalculateRGB(this, component, componentHexIndex);\n          this.__state.space = 'RGB';\n        }\n\n        this.__state[component] = v;\n\n      }\n\n    });\n\n  }\n\n  function defineHSVComponent(target, component) {\n\n    Object.defineProperty(target, component, {\n\n      get: function() {\n\n        if (this.__state.space === 'HSV')\n          return this.__state[component];\n\n        recalculateHSV(this);\n\n        return this.__state[component];\n\n      },\n\n      set: function(v) {\n\n        if (this.__state.space !== 'HSV') {\n          recalculateHSV(this);\n          this.__state.space = 'HSV';\n        }\n\n        this.__state[component] = v;\n\n      }\n\n    });\n\n  }\n\n  function recalculateRGB(color, component, componentHexIndex) {\n\n    if (color.__state.space === 'HEX') {\n\n      color.__state[component] = math.component_from_hex(color.__state.hex, componentHexIndex);\n\n    } else if (color.__state.space === 'HSV') {\n\n      common.extend(color.__state, math.hsv_to_rgb(color.__state.h, color.__state.s, color.__state.v));\n\n    } else {\n\n      throw 'Corrupted color state';\n\n    }\n\n  }\n\n  function recalculateHSV(color) {\n\n    var result = math.rgb_to_hsv(color.r, color.g, color.b);\n\n    common.extend(color.__state,\n        {\n          s: result.s,\n          v: result.v\n        }\n    );\n\n    if (!common.isNaN(result.h)) {\n      color.__state.h = result.h;\n    } else if (common.isUndefined(color.__state.h)) {\n      color.__state.h = 0;\n    }\n\n  }\n\n  return Color;\n\n})(dat.color.interpret = (function (toString, common) {\n\n  var result, toReturn;\n\n  var interpret = function() {\n\n    toReturn = false;\n\n    var original = arguments.length > 1 ? common.toArray(arguments) : arguments[0];\n\n    common.each(INTERPRETATIONS, function(family) {\n\n      if (family.litmus(original)) {\n\n        common.each(family.conversions, function(conversion, conversionName) {\n\n          result = conversion.read(original);\n\n          if (toReturn === false && result !== false) {\n            toReturn = result;\n            result.conversionName = conversionName;\n            result.conversion = conversion;\n            return common.BREAK;\n\n          }\n\n        });\n\n        return common.BREAK;\n\n      }\n\n    });\n\n    return toReturn;\n\n  };\n\n  var INTERPRETATIONS = [\n\n    // Strings\n    {\n\n      litmus: common.isString,\n\n      conversions: {\n\n        THREE_CHAR_HEX: {\n\n          read: function(original) {\n\n            var test = original.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);\n            if (test === null) return false;\n\n            return {\n              space: 'HEX',\n              hex: parseInt(\n                  '0x' +\n                      test[1].toString() + test[1].toString() +\n                      test[2].toString() + test[2].toString() +\n                      test[3].toString() + test[3].toString())\n            };\n\n          },\n\n          write: toString\n\n        },\n\n        SIX_CHAR_HEX: {\n\n          read: function(original) {\n\n            var test = original.match(/^#([A-F0-9]{6})$/i);\n            if (test === null) return false;\n\n            return {\n              space: 'HEX',\n              hex: parseInt('0x' + test[1].toString())\n            };\n\n          },\n\n          write: toString\n\n        },\n\n        CSS_RGB: {\n\n          read: function(original) {\n\n            var test = original.match(/^rgb\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/);\n            if (test === null) return false;\n\n            return {\n              space: 'RGB',\n              r: parseFloat(test[1]),\n              g: parseFloat(test[2]),\n              b: parseFloat(test[3])\n            };\n\n          },\n\n          write: toString\n\n        },\n\n        CSS_RGBA: {\n\n          read: function(original) {\n\n            var test = original.match(/^rgba\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\,\\s*(.+)\\s*\\)/);\n            if (test === null) return false;\n\n            return {\n              space: 'RGB',\n              r: parseFloat(test[1]),\n              g: parseFloat(test[2]),\n              b: parseFloat(test[3]),\n              a: parseFloat(test[4])\n            };\n\n          },\n\n          write: toString\n\n        }\n\n      }\n\n    },\n\n    // Numbers\n    {\n\n      litmus: common.isNumber,\n\n      conversions: {\n\n        HEX: {\n          read: function(original) {\n            return {\n              space: 'HEX',\n              hex: original,\n              conversionName: 'HEX'\n            }\n          },\n\n          write: function(color) {\n            return color.hex;\n          }\n        }\n\n      }\n\n    },\n\n    // Arrays\n    {\n\n      litmus: common.isArray,\n\n      conversions: {\n\n        RGB_ARRAY: {\n          read: function(original) {\n            if (original.length != 3) return false;\n            return {\n              space: 'RGB',\n              r: original[0],\n              g: original[1],\n              b: original[2]\n            };\n          },\n\n          write: function(color) {\n            return [color.r, color.g, color.b];\n          }\n\n        },\n\n        RGBA_ARRAY: {\n          read: function(original) {\n            if (original.length != 4) return false;\n            return {\n              space: 'RGB',\n              r: original[0],\n              g: original[1],\n              b: original[2],\n              a: original[3]\n            };\n          },\n\n          write: function(color) {\n            return [color.r, color.g, color.b, color.a];\n          }\n\n        }\n\n      }\n\n    },\n\n    // Objects\n    {\n\n      litmus: common.isObject,\n\n      conversions: {\n\n        RGBA_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.r) &&\n                common.isNumber(original.g) &&\n                common.isNumber(original.b) &&\n                common.isNumber(original.a)) {\n              return {\n                space: 'RGB',\n                r: original.r,\n                g: original.g,\n                b: original.b,\n                a: original.a\n              }\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              r: color.r,\n              g: color.g,\n              b: color.b,\n              a: color.a\n            }\n          }\n        },\n\n        RGB_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.r) &&\n                common.isNumber(original.g) &&\n                common.isNumber(original.b)) {\n              return {\n                space: 'RGB',\n                r: original.r,\n                g: original.g,\n                b: original.b\n              }\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              r: color.r,\n              g: color.g,\n              b: color.b\n            }\n          }\n        },\n\n        HSVA_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.h) &&\n                common.isNumber(original.s) &&\n                common.isNumber(original.v) &&\n                common.isNumber(original.a)) {\n              return {\n                space: 'HSV',\n                h: original.h,\n                s: original.s,\n                v: original.v,\n                a: original.a\n              }\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              h: color.h,\n              s: color.s,\n              v: color.v,\n              a: color.a\n            }\n          }\n        },\n\n        HSV_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.h) &&\n                common.isNumber(original.s) &&\n                common.isNumber(original.v)) {\n              return {\n                space: 'HSV',\n                h: original.h,\n                s: original.s,\n                v: original.v\n              }\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              h: color.h,\n              s: color.s,\n              v: color.v\n            }\n          }\n\n        }\n\n      }\n\n    }\n\n\n  ];\n\n  return interpret;\n\n\n})(dat.color.toString,\ndat.utils.common),\ndat.color.math = (function () {\n\n  var tmpComponent;\n\n  return {\n\n    hsv_to_rgb: function(h, s, v) {\n\n      var hi = Math.floor(h / 60) % 6;\n\n      var f = h / 60 - Math.floor(h / 60);\n      var p = v * (1.0 - s);\n      var q = v * (1.0 - (f * s));\n      var t = v * (1.0 - ((1.0 - f) * s));\n      var c = [\n        [v, t, p],\n        [q, v, p],\n        [p, v, t],\n        [p, q, v],\n        [t, p, v],\n        [v, p, q]\n      ][hi];\n\n      return {\n        r: c[0] * 255,\n        g: c[1] * 255,\n        b: c[2] * 255\n      };\n\n    },\n\n    rgb_to_hsv: function(r, g, b) {\n\n      var min = Math.min(r, g, b),\n          max = Math.max(r, g, b),\n          delta = max - min,\n          h, s;\n\n      if (max != 0) {\n        s = delta / max;\n      } else {\n        return {\n          h: NaN,\n          s: 0,\n          v: 0\n        };\n      }\n\n      if (r == max) {\n        h = (g - b) / delta;\n      } else if (g == max) {\n        h = 2 + (b - r) / delta;\n      } else {\n        h = 4 + (r - g) / delta;\n      }\n      h /= 6;\n      if (h < 0) {\n        h += 1;\n      }\n\n      return {\n        h: h * 360,\n        s: s,\n        v: max / 255\n      };\n    },\n\n    rgb_to_hex: function(r, g, b) {\n      var hex = this.hex_with_component(0, 2, r);\n      hex = this.hex_with_component(hex, 1, g);\n      hex = this.hex_with_component(hex, 0, b);\n      return hex;\n    },\n\n    component_from_hex: function(hex, componentIndex) {\n      return (hex >> (componentIndex * 8)) & 0xFF;\n    },\n\n    hex_with_component: function(hex, componentIndex, value) {\n      return value << (tmpComponent = componentIndex * 8) | (hex & ~ (0xFF << tmpComponent));\n    }\n\n  }\n\n})(),\ndat.color.toString,\ndat.utils.common);\n\n/***/ }),\n/* 124 */\n/*!**************************************************!*\\\n  !*** ./node_modules/stats-js/build/stats.min.js ***!\n  \\**************************************************/\n/*! no static exports found */\n/*! exports used: default */\n/***/ (function(module, exports) {\n\n// stats.js - http://github.com/mrdoob/stats.js\nvar Stats=function(){var l=Date.now(),m=l,g=0,n=Infinity,o=0,h=0,p=Infinity,q=0,r=0,s=0,f=document.createElement(\"div\");f.id=\"stats\";f.addEventListener(\"mousedown\",function(b){b.preventDefault();t(++s%2)},!1);f.style.cssText=\"width:80px;opacity:0.9;cursor:pointer\";var a=document.createElement(\"div\");a.id=\"fps\";a.style.cssText=\"padding:0 0 3px 3px;text-align:left;background-color:#002\";f.appendChild(a);var i=document.createElement(\"div\");i.id=\"fpsText\";i.style.cssText=\"color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px\";\ni.innerHTML=\"FPS\";a.appendChild(i);var c=document.createElement(\"div\");c.id=\"fpsGraph\";c.style.cssText=\"position:relative;width:74px;height:30px;background-color:#0ff\";for(a.appendChild(c);74>c.children.length;){var j=document.createElement(\"span\");j.style.cssText=\"width:1px;height:30px;float:left;background-color:#113\";c.appendChild(j)}var d=document.createElement(\"div\");d.id=\"ms\";d.style.cssText=\"padding:0 0 3px 3px;text-align:left;background-color:#020;display:none\";f.appendChild(d);var k=document.createElement(\"div\");\nk.id=\"msText\";k.style.cssText=\"color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px\";k.innerHTML=\"MS\";d.appendChild(k);var e=document.createElement(\"div\");e.id=\"msGraph\";e.style.cssText=\"position:relative;width:74px;height:30px;background-color:#0f0\";for(d.appendChild(e);74>e.children.length;)j=document.createElement(\"span\"),j.style.cssText=\"width:1px;height:30px;float:left;background-color:#131\",e.appendChild(j);var t=function(b){s=b;switch(s){case 0:a.style.display=\n\"block\";d.style.display=\"none\";break;case 1:a.style.display=\"none\",d.style.display=\"block\"}};return{REVISION:12,domElement:f,setMode:t,begin:function(){l=Date.now()},end:function(){var b=Date.now();g=b-l;n=Math.min(n,g);o=Math.max(o,g);k.textContent=g+\" MS (\"+n+\"-\"+o+\")\";var a=Math.min(30,30-30*(g/200));e.appendChild(e.firstChild).style.height=a+\"px\";r++;b>m+1E3&&(h=Math.round(1E3*r/(b-m)),p=Math.min(p,h),q=Math.max(q,h),i.textContent=h+\" FPS (\"+p+\"-\"+q+\")\",a=Math.min(30,30-30*(h/100)),c.appendChild(c.firstChild).style.height=\na+\"px\",m=b,r=0);return b},update:function(){l=this.end()}}};\"object\"===typeof module&&(module.exports=Stats);\n\n\n/***/ }),\n/* 125 */\n/*!********************************************************!*\\\n  !*** ./node_modules/core-js/library/fn/object/keys.js ***!\n  \\********************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(/*! ../../modules/es6.object.keys */ 126);\nmodule.exports = __webpack_require__(/*! ../../modules/_core */ 6).Object.keys;\n\n\n/***/ }),\n/* 126 */\n/*!*****************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/es6.object.keys.js ***!\n  \\*****************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.2.14 Object.keys(O)\nvar toObject = __webpack_require__(/*! ./_to-object */ 34);\nvar $keys = __webpack_require__(/*! ./_object-keys */ 15);\n\n__webpack_require__(/*! ./_object-sap */ 51)('keys', function () {\n  return function keys(it) {\n    return $keys(toObject(it));\n  };\n});\n\n\n/***/ }),\n/* 127 */\n/*!***************************************************!*\\\n  !*** ./node_modules/memory-stats/memory-stats.js ***!\n  \\***************************************************/\n/*! no static exports found */\n/*! exports used: default */\n/***/ (function(module, exports) {\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author jetienne / http://jetienne.com/\n * @author paulirish / http://paulirish.com/\n */\nfunction MemoryStats(){\n\n\tvar msMin\t= 100;\n\tvar msMax\t= 0;\n\n\tvar container\t= document.createElement( 'div' );\n\tcontainer.id\t= 'stats';\n\tcontainer.style.cssText = 'width:80px;opacity:0.9;cursor:pointer';\n\n\tvar msDiv\t= document.createElement( 'div' );\n\tmsDiv.id\t= 'ms';\n\tmsDiv.style.cssText = 'padding:0 0 3px 3px;text-align:left;background-color:#020;';\n\tcontainer.appendChild( msDiv );\n\n\tvar msText\t= document.createElement( 'div' );\n\tmsText.id\t= 'msText';\n\tmsText.style.cssText = 'color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px';\n\tmsText.innerHTML= 'Memory';\n\tmsDiv.appendChild( msText );\n\n\tvar msGraph\t= document.createElement( 'div' );\n\tmsGraph.id\t= 'msGraph';\n\tmsGraph.style.cssText = 'position:relative;width:74px;height:30px;background-color:#0f0';\n\tmsDiv.appendChild( msGraph );\n\n\twhile ( msGraph.children.length < 74 ) {\n\n\t\tvar bar = document.createElement( 'span' );\n\t\tbar.style.cssText = 'width:1px;height:30px;float:left;background-color:#131';\n\t\tmsGraph.appendChild( bar );\n\n\t}\n\n\tvar updateGraph = function ( dom, height, color ) {\n\n\t\tvar child = dom.appendChild( dom.firstChild );\n\t\tchild.style.height = height + 'px';\n\t\tif( color ) child.style.backgroundColor = color;\n\n\t}\n\n\t// polyfill usedJSHeapSize\n\tif (window.performance && !performance.memory){\n\t\tperformance.memory = { usedJSHeapSize : 0 };\n\t}\n\n\t// support of the API?\n\tif( performance.memory.totalJSHeapSize === 0 ){\n\t\tconsole.warn('totalJSHeapSize === 0... performance.memory is only available in Chrome .')\n\t}\n\n\t// TODO, add a sanity check to see if values are bucketed.\n\t// If so, reminde user to adopt the --enable-precise-memory-info flag.\n\t// open -a \"/Applications/Google Chrome.app\" --args --enable-precise-memory-info\n\n\tvar lastTime\t= Date.now();\n\tvar lastUsedHeap= performance.memory.usedJSHeapSize;\n\treturn {\n\t\tdomElement: container,\n\n\t\tupdate: function () {\n\n\t\t\t// refresh only 30time per second\n\t\t\tif( Date.now() - lastTime < 1000/30 )\treturn;\n\t\t\tlastTime\t= Date.now()\n\n\t\t\tvar delta\t= performance.memory.usedJSHeapSize - lastUsedHeap;\n\t\t\tlastUsedHeap\t= performance.memory.usedJSHeapSize;\n\t\t\tvar color\t= delta < 0 ? '#830' : '#131';\n\n\t\t\tvar ms\t= performance.memory.usedJSHeapSize;\n\t\t\tmsMin\t= Math.min( msMin, ms );\n\t\t\tmsMax\t= Math.max( msMax, ms );\n\t\t\tmsText.textContent = \"Mem: \" + bytesToSize(ms, 2);\n\n\t\t\tvar normValue\t= ms / (30*1024*1024);\n\t\t\tvar height\t= (1-(normValue% 1)) * 30;\n\t\t\tupdateGraph( msGraph, height, color);\n\n\t\t\tfunction bytesToSize( bytes, nFractDigit ){\n\t\t\t\tvar sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\n\t\t\t\tif (bytes == 0) return 'n/a';\n\t\t\t\tnFractDigit\t= nFractDigit !== undefined ? nFractDigit : 0;\n\t\t\t\tvar precision\t= Math.pow(10, nFractDigit);\n\t\t\t\tvar i \t\t= Math.floor(Math.log(bytes) / Math.log(1024));\n\t\t\t\treturn Math.round(bytes*precision / Math.pow(1024, i))/precision + ' ' + sizes[i];\n\t\t\t};\n\t\t}\n\n\t}\n\n};\n\nmodule.exports = MemoryStats;\n\n\n/***/ }),\n/* 128 */\n/*!*************************************!*\\\n  !*** ./src/plugins/viewportPixi.js ***!\n  \\*************************************/\n/*! exports provided: ViewportPixi, CanvasSprite, registerSprite, getSprite */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ViewportPixi\", function() { return ViewportPixi; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CanvasSprite\", function() { return CanvasSprite; });\n/* harmony export (immutable) */ __webpack_exports__[\"registerSprite\"] = registerSprite;\n/* harmony export (immutable) */ __webpack_exports__[\"getSprite\"] = getSprite;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign__ = __webpack_require__(/*! babel-runtime/core-js/object/assign */ 40);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_get__ = __webpack_require__(/*! babel-runtime/helpers/get */ 25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_get___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_get__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_keys__ = __webpack_require__(/*! babel-runtime/core-js/object/keys */ 38);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_keys___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_keys__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(/*! babel-runtime/core-js/object/get-prototype-of */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_classCallCheck__ = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_createClass__ = __webpack_require__(/*! babel-runtime/helpers/createClass */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(/*! babel-runtime/helpers/possibleConstructorReturn */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_inherits__ = __webpack_require__(/*! babel-runtime/helpers/inherits */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__lib_core__ = __webpack_require__(/*! ../lib/core */ 0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__lib_utils__ = __webpack_require__(/*! ../lib/utils */ 129);\n\n\n\n\n\n\n\n\n/* global PIXI */\n\n\n\n// import filters from 'pixi-filters';\n// import extraFilters from 'pixi-extra-filters';\n\nvar PI2 = Math.PI * 2;\n\nvar idx = void 0,\n    p = void 0,\n    entityId = void 0,\n    position = void 0,\n    sprite = void 0;\n\n// See also: http://phrogz.net/JS/wheeldelta.html\nvar wheelDistance = function wheelDistance(evt) {\n  if (!evt) evt = event;\n  var w = evt.wheelDelta,\n      d = evt.detail;\n  if (d) {\n    if (w) return w / d / 40 * d > 0 ? 1 : -1; // Opera\n    else return -d / 3; // Firefox;         TODO: do not /3 for OS X\n  } else return w / 120; // IE/Safari/Chrome TODO: /3 for Chrome OS X\n};\n\nvar ViewportPixi = function (_Core$System) {\n  __WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_inherits___default()(ViewportPixi, _Core$System);\n\n  function ViewportPixi() {\n    __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_classCallCheck___default()(this, ViewportPixi);\n\n    return __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_possibleConstructorReturn___default()(this, (ViewportPixi.__proto__ || __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_object_get_prototype_of___default()(ViewportPixi)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_createClass___default()(ViewportPixi, [{\n    key: 'defaultOptions',\n    value: function defaultOptions() {\n      return {\n        lineWidth: 5,\n        zoom: 1.0,\n        zoomMin: 0.1,\n        zoomMax: 10.0,\n        zoomWheelFactor: 0.05,\n        gridEnabled: true,\n        gridSize: 250,\n        gridColor: 0x222222,\n        followEnabled: true,\n        followName: null,\n        followEntityId: null\n      };\n    }\n  }, {\n    key: 'initialize',\n    value: function initialize() {\n      var _this2 = this;\n\n      this.container = document.querySelector(this.options.container);\n      this.renderer = PIXI.autoDetectRenderer(this.container.offsetWidth, this.container.offsetHeight, { antialias: true });\n      this.renderer.autoResize = true;\n      this.canvas = this.renderer.view;\n      this.container.appendChild(this.canvas);\n      this.stage = new PIXI.Container();\n\n      this.stage.filters = [\n        // new PIXI.filters.VoidFilter(),\n        // new PIXI.filters.BlurFilter(1, 1, 5)\n      ];\n\n      this.healthBarGraphics = new PIXI.Graphics();\n      this.stage.addChild(this.healthBarGraphics);\n\n      this.backdrop = new PIXI.Graphics();\n      this.stage.addChild(this.backdrop);\n\n      this.graphics = {};\n\n      var events = {\n        'resize': function resize(ev) {\n          _this2.updateMetrics(ev);\n        },\n        'orientationchange': function orientationchange(ev) {\n          _this2.updateMetrics(ev);\n        },\n        'mousedown': function mousedown(ev) {\n          _this2.onMouseDown(ev);\n        },\n        'mousemove': function mousemove(ev) {\n          _this2.onMouseMove(ev);\n        },\n        'mouseup': function mouseup(ev) {\n          _this2.onMouseUp(ev);\n        }\n      };\n\n      for (var name in events) {\n        this.canvas.addEventListener(name, events[name], false);\n      }\n\n      // See also: http://phrogz.net/JS/wheeldelta.html\n      var boundOnMouseWheel = function boundOnMouseWheel(ev) {\n        return _this2.onMouseWheel(ev);\n      };\n      if (window.addEventListener) {\n        window.addEventListener('mousewheel', boundOnMouseWheel, false); // Chrome/Safari/Opera\n        window.addEventListener('DOMMouseScroll', boundOnMouseWheel, false); // Firefox\n      } else if (window.attachEvent) {\n        window.attachEvent('onmousewheel', boundOnMouseWheel); // IE\n      }\n\n      this.followEnabled = this.options.followEnabled;\n      this.zoom = this.options.zoom;\n      this.followEntityId = this.options.followEntityId;\n      this.gridEnabled = this.options.gridEnabled;\n      this.lineWidth = this.options.lineWidth;\n\n      this.cursorRawX = 0;\n      this.cursorRawY = 0;\n\n      this.cursorChanged = false;\n      this.cursorPosition = { x: 0, y: 0 };\n\n      this.cameraX = 0;\n      this.cameraY = 0;\n\n      this.debugDummySprite = { size: 100 };\n\n      this.updateMetrics();\n    }\n  }, {\n    key: 'onMouseWheel',\n    value: function onMouseWheel(ev) {\n      this.zoom += wheelDistance(ev) * this.options.zoomWheelFactor;\n      if (this.zoom < this.options.zoomMin) {\n        this.zoom = this.options.zoomMin;\n      }\n      if (this.zoom > this.options.zoomMax) {\n        this.zoom = this.options.zoomMax;\n      }\n    }\n\n    // TODO: Use a symbol for 'mouse{Down,Move,Up}' message?\n\n  }, {\n    key: 'onMouseDown',\n    value: function onMouseDown(ev) {\n      this.setCursor(ev.clientX, ev.clientY);\n      this.world.publish('mouseDown', this.cursorPosition);\n    }\n  }, {\n    key: 'onMouseMove',\n    value: function onMouseMove(ev) {\n      this.setCursor(ev.clientX, ev.clientY);\n      this.world.publish('mouseMove', this.cursorPosition);\n    }\n  }, {\n    key: 'onMouseUp',\n    value: function onMouseUp(ev) {\n      this.setCursor(ev.clientX, ev.clientY);\n      this.world.publish('mouseUp', this.cursorPosition);\n    }\n  }, {\n    key: 'setCursor',\n    value: function setCursor(x, y) {\n      var width = this.container.offsetWidth;\n      var height = this.container.offsetHeight;\n\n      this.cursorRawX = x;\n      this.cursorRawY = y;\n\n      var newX = (x - width / 2) / this.zoom + this.cameraX;\n      var newY = (y - height / 2) / this.zoom + this.cameraY;\n\n      this.cursorChanged = false;\n      if (newX !== this.cursorPosition.x || newY !== this.cursorPosition.y) {\n        this.cursorChanged = true;\n        this.cursorPosition.x = newX;\n        this.cursorPosition.y = newY;\n      }\n\n      return this.cursorPosition;\n    }\n  }, {\n    key: 'updateMetrics',\n    value: function updateMetrics() {\n      var width = this.container.offsetWidth;\n      var height = this.container.offsetHeight;\n\n      this.visibleWidth = width / this.zoom;\n      this.visibleHeight = height / this.zoom;\n\n      this.visibleLeft = 0 - this.visibleWidth / 2 + this.cameraX;\n      this.visibleTop = 0 - this.visibleHeight / 2 + this.cameraY;\n      this.visibleRight = this.visibleLeft + this.visibleWidth;\n      this.visibleBottom = this.visibleTop + this.visibleHeight;\n    }\n  }, {\n    key: 'update',\n    value: function update() /*timeDelta*/{\n      var _this3 = this;\n\n      this.updateMetrics();\n\n      this.setCursor(this.cursorRawX, this.cursorRawY);\n      // FIXME: Should be able to skip doing this unless\n      // this.cursorChanged === true, but for some reason that's not working\n      this.world.publish('mouseMove', this.cursorPosition);\n\n      var sprites = this.world.get('Sprite') || {};\n\n      for (entityId in sprites) {\n        position = this.world.get('Position', entityId);\n        sprite = sprites[entityId];\n        sprite.visible = position.right > this.visibleLeft && position.left < this.visibleRight && position.bottom > this.visibleTop && position.top < this.visibleBottom;\n      }\n\n      var toRemove = __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_keys___default()(this.graphics).filter(function (key) {\n        return !(key in sprites);\n      });\n      toRemove.forEach(function (entityId) {\n        _this3.stage.removeChild(_this3.graphics[entityId]);\n        delete _this3.graphics[entityId];\n      });\n\n      var toAdd = __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_keys___default()(sprites).filter(function (key) {\n        return !(key in _this3.graphics);\n      });\n      toAdd.forEach(function (entityId) {\n        _this3.stage.addChild(_this3.graphics[entityId] = new PIXI.Graphics());\n      });\n    }\n  }, {\n    key: 'draw',\n    value: function draw(timeDelta) {\n      this.followEntity();\n      this.drawBackdrop(timeDelta);\n\n      for (var _entityId in this.graphics) {\n        this.drawSprite(this.graphics[_entityId], _entityId, timeDelta);\n      }\n\n      this.stage.setTransform(this.container.offsetWidth / 2 - this.cameraX * this.zoom, this.container.offsetHeight / 2 - this.cameraY * this.zoom, this.zoom, this.zoom);\n\n      this.renderer.resize(this.container.offsetWidth, this.container.offsetHeight);\n\n      this.renderer.render(this.stage);\n    }\n  }, {\n    key: 'drawSprite',\n    value: function drawSprite(ctx, entityId, timeDelta) {\n      var sprite = this.world.get('Sprite', entityId);\n      if (!sprite) {\n        return;\n      }\n\n      var position = this.world.get('Position', entityId);\n\n      var spriteFn = getSprite(sprite.name);\n      if (!spriteFn) {\n        spriteFn = getSprite('default');\n      }\n\n      ctx.position.x = Math.floor(position.x);\n      ctx.position.y = Math.floor(position.y);\n      ctx.rotation = position.rotation + Math.PI / 2;\n      ctx.scale.x = ctx.scale.y = sprite.size / 100;\n      ctx.lineStyle(this.lineWidth / (sprite.size / 100), sprite.color);\n      spriteFn(ctx, sprite, entityId, timeDelta, this.world);\n\n      /*\n      const health = this.world.get('Health', entityId);\n      if (health) {\n      const perc = (health.current / health.max);\n      ctx.lineStyle(1.0, 0x333333);\n      ctx.moveTo(-50, -57);\n      ctx.drawRect(-50, -57, 100, 5);\n      ctx.moveTo(-50, -57);\n      ctx.beginFill(0x00ff00, 1.0);\n      ctx.drawRect(-50, -57, 100 * perc, 5);\n      ctx.endFill();\n      }\n      */\n\n      sprite.drawn = true;\n      return ctx;\n    }\n  }, {\n    key: 'followEntity',\n    value: function followEntity() {\n      if (!this.followEnabled) {\n        this.cameraX = this.cameraY = 0;\n        return;\n      }\n      if (this.options.followName && !this.followEntityId) {\n        // Look up named entity, if necessary.\n        this.followEntityId = __WEBPACK_IMPORTED_MODULE_8__lib_core__[\"getComponent\"]('Name').findEntityByName(this.world, this.options.followName);\n      }\n      if (this.followEntityId) {\n        // Adjust the viewport center offset to the entity position\n        var _position = this.world.get('Position', this.followEntityId);\n        if (_position) {\n          this.cameraX = _position.x;\n          this.cameraY = _position.y;\n          this.setCursor(this.cursorRawX, this.cursorRawY);\n        }\n      }\n    }\n  }, {\n    key: 'drawBackdrop',\n    value: function drawBackdrop() /* timeDelta */{\n      var ctx = this.backdrop;\n\n      if (!this.gridEnabled) {\n        ctx.visible = false;\n        return;\n      }\n\n      var gridSize = this.options.gridSize;\n      var gridOffsetX = this.visibleLeft % gridSize;\n      var gridOffsetY = this.visibleTop % gridSize;\n\n      ctx.visible = true;\n      ctx.clear();\n      ctx.lineStyle(5, this.options.gridColor);\n      ctx.position.x = this.visibleLeft;\n      ctx.position.y = this.visibleTop;\n\n      for (var x = -gridOffsetX; x < this.visibleWidth; x += gridSize) {\n        ctx.moveTo(x, 0);\n        ctx.lineTo(x, this.visibleHeight + gridSize);\n      }\n\n      for (var y = -gridOffsetY; y < this.visibleHeight; y += gridSize) {\n        ctx.moveTo(0, y);\n        ctx.lineTo(this.visibleWidth + gridSize, y);\n      }\n    }\n  }]);\n\n  return ViewportPixi;\n}(__WEBPACK_IMPORTED_MODULE_8__lib_core__[\"System\"]);\n\n__WEBPACK_IMPORTED_MODULE_8__lib_core__[\"registerSystem\"]('ViewportPixi', ViewportPixi);\n\nvar CanvasSprite = function (_Core$Component) {\n  __WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_inherits___default()(CanvasSprite, _Core$Component);\n\n  function CanvasSprite() {\n    __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_classCallCheck___default()(this, CanvasSprite);\n\n    return __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_possibleConstructorReturn___default()(this, (CanvasSprite.__proto__ || __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_object_get_prototype_of___default()(CanvasSprite)).apply(this, arguments));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_createClass___default()(CanvasSprite, null, [{\n    key: 'defaults',\n    value: function defaults() {\n      return {\n        name: null,\n        color: 0xffffff,\n        size: 100,\n        width: null,\n        height: null,\n        drawn: false,\n        visible: false\n      };\n    }\n  }, {\n    key: 'create',\n    value: function create(attrs) {\n      var c = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_get___default()(CanvasSprite.__proto__ || __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_object_get_prototype_of___default()(CanvasSprite), 'create', this).call(this, attrs);\n      if (!c.width) {\n        c.width = c.size;\n      }\n      if (!c.height) {\n        c.height = c.size;\n      }\n      return c;\n    }\n  }]);\n\n  return CanvasSprite;\n}(__WEBPACK_IMPORTED_MODULE_8__lib_core__[\"Component\"]);\n\n__WEBPACK_IMPORTED_MODULE_8__lib_core__[\"registerComponent\"]('Sprite', CanvasSprite);\n\nvar spriteRegistry = {};\nfunction registerSprite(name, sprite) {\n  spriteRegistry[name] = sprite;\n}\nfunction getSprite(name) {\n  return spriteRegistry[name];\n}\n\nvar defaultShape = [-50, 0, 50, 0, 0, 0, 0, -50, 0, 50, 0, 0];\nfor (var _idx = 0; _idx < 8; _idx++) {\n  var rot = _idx * (PI2 / 8);\n  defaultShape.push(50 * Math.cos(rot));\n  defaultShape.push(50 * Math.sin(rot));\n}\ndefaultShape.push(50);\ndefaultShape.push(0);\n\nregisterSprite('default', function (g, sprite /*, entityId*/) {\n  if (sprite.drawn) {\n    return;\n  }\n  g.drawPolygon(defaultShape);\n});\n\nregisterSprite('sun', function (ctx, sprite /*, entityId*/) {\n  if (sprite.drawn) {\n    return;\n  }\n\n  ctx.arc(0, 0, 50, 0, PI2, true);\n});\n\nregisterSprite('enemyscout', function (ctx, sprite /*, entityId*/) {\n  if (sprite.drawn) {\n    return;\n  }\n\n  ctx.moveTo(0, -50);\n  ctx.lineTo(-45, 50);\n  ctx.lineTo(-12.5, 12.5);\n  ctx.lineTo(0, 25);\n  ctx.lineTo(12.5, 12.5);\n  ctx.lineTo(45, 50);\n  ctx.lineTo(0, -50);\n  ctx.moveTo(0, -50);\n});\n\nregisterSprite('enemywing', function (g, sprite /*, entityId*/) {\n  if (sprite.drawn) {\n    return;\n  }\n\n  g.lineColor = 0x228822;\n\n  g.moveTo(-50, 0);\n  g.lineTo(-37.5, -37.5);\n  g.lineTo(0, 50);\n  g.lineTo(37.5, -37.5);\n  g.lineTo(50, 0);\n  g.lineTo(37.5, 50);\n  g.lineTo(25, 50);\n  g.lineTo(0, 0);\n  g.lineTo(-25, 50);\n  g.lineTo(-37.5, 50);\n  g.lineTo(-50, 0);\n});\n\nvar repulsorShape = [-50, 0, -37.5, -50, -25, -50, -6.25, 25, 6.25, 25, 25, -50, 37.5, -50, 50, 0, 37.5, 50, 25, 50, 6.25, -25, -6.25, -25, -25, 50, -37.5, 50, -50, 0];\nvar repulsorSides = 8;\nvar repulsorPoints = [];\nfor (var _idx2 = 0; _idx2 < repulsorSides; _idx2++) {\n  var _rot = _idx2 * (PI2 / repulsorSides);\n  repulsorPoints.push(Math.cos(_rot));\n  repulsorPoints.push(Math.sin(_rot));\n}\nrepulsorPoints.push(repulsorPoints[0]);\nrepulsorPoints.push(repulsorPoints[1]);\n\nregisterSprite('repulsor', function (g, sprite, entityId, timeDelta, world) {\n  if (!sprite.drawn) {\n    var t = 0; // Math.floor(Math.random() * 15) * 100;\n    sprite.rings = [{ t: t, startR: 0, endR: 500, startO: 1.0, endO: 0.0, endT: 1500 }, { t: t + 250, startR: 0, endR: 500, startO: 1.0, endO: 0.0, endT: 1500 }, { t: t + 500, startR: 0, endR: 500, startO: 1.0, endO: 0.0, endT: 1500 }];\n  }\n\n  var repulsor = world.get('Repulsor', entityId);\n  if (repulsor) {\n    sprite.rings.forEach(function (ring) {\n      return ring.endR = repulsor.range;\n    });\n  }\n\n  g.clear();\n  g.lineStyle(5 / (sprite.size / 100), 0x228822);\n  g.drawPolygon(repulsorShape);\n\n  var dt = Math.floor(timeDelta * 1000);\n  sprite.rings.forEach(function (ring) {\n    ring.t += dt;\n    if (ring.t >= ring.endT) {\n      ring.t = 0;\n    }\n\n    if (!sprite.visible) {\n      return;\n    }\n\n    var r = Object(__WEBPACK_IMPORTED_MODULE_9__lib_utils__[\"a\" /* lerp */])(ring.startR, ring.endR, ring.t / ring.endT);\n    var a = Object(__WEBPACK_IMPORTED_MODULE_9__lib_utils__[\"a\" /* lerp */])(ring.startO, ring.endO, ring.t / ring.endT);\n\n    g.lineStyle(5 / (sprite.size / 100), 0x228822, a);\n    g.moveTo(-r, 0);\n    g.drawPolygon(repulsorPoints.map(function (p) {\n      return r * p;\n    }));\n  });\n});\n\nvar heroShape = [-50, 0, -37.5, -37.5, 0, -50, 37.5, -37.5, 50, 0, 37.5, 50, 25, 50, 12.5, 12.5, 5, 25, -5, 25, -12.5, 12.5, -25, 50, -37.5, 50, -50, 0];\n\nregisterSprite('hero', function (g, sprite /*, entityId*/) {\n  if (sprite.drawn) {\n    return;\n  }\n  g.drawPolygon(heroShape);\n});\n\nregisterSprite('asteroid', function (g, sprite /*, entityId*/) {\n  if (sprite.drawn) {\n    return;\n  }\n\n  var NUM_POINTS = 10 + Math.floor(8 * Math.random());\n  var MAX_RADIUS = 50;\n  var MIN_RADIUS = 35;\n  var ROTATION = PI2 / NUM_POINTS;\n\n  var idx = void 0;\n  var points = [];\n\n  for (idx = 0; idx < NUM_POINTS; idx++) {\n    var _rot2 = idx * ROTATION;\n    var dist = Math.random() * (MAX_RADIUS - MIN_RADIUS) + MIN_RADIUS;\n    points.push(dist * Math.cos(_rot2));\n    points.push(dist * Math.sin(_rot2));\n  }\n  points.push(points[0]);\n  points.push(points[1]);\n\n  g.drawPolygon(points);\n});\n\nregisterSprite('mine', function (g, sprite /*, entityId, timeDelta, world*/) {\n  if (!sprite.drawn) {\n    var NUM_POINTS = 10 + Math.floor(10 * Math.random());\n    if (NUM_POINTS % 2 !== 0) {\n      NUM_POINTS++;\n    }\n    var ROTATION = PI2 / NUM_POINTS;\n    var MAX_RADIUS = 60;\n    var MIN_RADIUS = 10;\n\n    var even = false;\n\n    sprite.legs = [];\n    for (var _idx3 = 0; _idx3 < NUM_POINTS; _idx3++) {\n      var dist = even ? 10 : Math.random() * (MAX_RADIUS - MIN_RADIUS) + MIN_RADIUS;\n      var _rot3 = _idx3 * ROTATION;\n      sprite.legs.push(dist * Math.cos(_rot3));\n      sprite.legs.push(dist * Math.sin(_rot3));\n      even = !even;\n    }\n    sprite.legs.push(sprite.legs[0]);\n    sprite.legs.push(sprite.legs[1]);\n  }\n\n  if (sprite.drawn && Math.random() > 0.15) {\n    return;\n  }\n\n  g.clear();\n  g.lineStyle(5 / (sprite.size / 100), 0xFF2222);\n  g.drawPolygon(sprite.legs.map(function (p) {\n    return p * (0.9 + 0.5 * Math.random());\n  }));\n});\n\nregisterSprite('explosion', function (g, sprite, entityId, timeDelta) {\n\n  if (!sprite.drawn) {\n    __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(sprite, {\n      ttl: 2.0,\n      radius: 100,\n      maxParticles: 25,\n      maxParticleSize: 4,\n      maxVelocity: 300,\n      age: 0,\n      alpha: 0,\n      stop: false,\n      particles: []\n    }, sprite);\n    for (idx = 0; idx < sprite.maxParticles; idx++) {\n      sprite.particles.push({ free: true });\n    }\n  }\n\n  for (idx = 0; idx < sprite.particles.length; idx++) {\n    p = sprite.particles[idx];\n\n    if (!sprite.stop && p.free) {\n\n      p.velocity = sprite.maxVelocity * Math.random();\n      p.angle = Math.PI * 2 * Math.random();\n      p.dx = 0 - p.velocity * Math.sin(p.angle);\n      p.dy = p.velocity * Math.cos(p.angle);\n      p.distance = p.x = p.y = 0;\n      p.maxDistance = sprite.radius * Math.random();\n      p.size = sprite.maxParticleSize;\n      p.free = false;\n    } else if (!p.free) {\n\n      p.x += p.dx * timeDelta;\n      p.y += p.dy * timeDelta;\n\n      p.distance += p.velocity * timeDelta;\n      if (p.distance >= p.maxDistance) {\n        p.distance = p.maxDistance;\n        p.free = true;\n      }\n    }\n  }\n\n  sprite.age += timeDelta;\n\n  if (sprite.age >= sprite.ttl) {\n    sprite.stop = true;\n  }\n\n  sprite.alpha = Math.max(0, 1 - sprite.age / sprite.ttl);\n\n  g.clear();\n\n  for (idx = 0; idx < sprite.particles.length; idx++) {\n    p = sprite.particles[idx];\n    if (p.free) {\n      continue;\n    }\n\n    g.lineStyle(5 / (sprite.size / 100), sprite.color, (1 - p.distance / p.maxDistance) * sprite.alpha);\n    g.moveTo(0, 0);\n    g.lineTo(p.x, p.y);\n  }\n});\n\n/***/ }),\n/* 129 */\n/*!**************************!*\\\n  !*** ./src/lib/utils.js ***!\n  \\**************************/\n/*! exports provided: lerp */\n/*! exports used: lerp */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = lerp;\n// Linear interpolation from v0 to v1 over t[0..1]\nfunction lerp(v0, v1, t) {\n  return (1 - t) * v0 + t * v1;\n}\n\n/***/ }),\n/* 130 */\n/*!*****************************************************************!*\\\n  !*** ./node_modules/babel-runtime/helpers/toConsumableArray.js ***!\n  \\*****************************************************************/\n/*! no static exports found */\n/*! exports used: default */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\n\nvar _from = __webpack_require__(/*! ../core-js/array/from */ 131);\n\nvar _from2 = _interopRequireDefault(_from);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return (0, _from2.default)(arr);\n  }\n};\n\n/***/ }),\n/* 131 */\n/*!**********************************************************!*\\\n  !*** ./node_modules/babel-runtime/core-js/array/from.js ***!\n  \\**********************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(/*! core-js/library/fn/array/from */ 132), __esModule: true };\n\n/***/ }),\n/* 132 */\n/*!*******************************************************!*\\\n  !*** ./node_modules/core-js/library/fn/array/from.js ***!\n  \\*******************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(/*! ../../modules/es6.string.iterator */ 68);\n__webpack_require__(/*! ../../modules/es6.array.from */ 133);\nmodule.exports = __webpack_require__(/*! ../../modules/_core */ 6).Array.from;\n\n\n/***/ }),\n/* 133 */\n/*!****************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/es6.array.from.js ***!\n  \\****************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar ctx = __webpack_require__(/*! ./_ctx */ 42);\nvar $export = __webpack_require__(/*! ./_export */ 10);\nvar toObject = __webpack_require__(/*! ./_to-object */ 34);\nvar call = __webpack_require__(/*! ./_iter-call */ 134);\nvar isArrayIter = __webpack_require__(/*! ./_is-array-iter */ 135);\nvar toLength = __webpack_require__(/*! ./_to-length */ 65);\nvar createProperty = __webpack_require__(/*! ./_create-property */ 136);\nvar getIterFn = __webpack_require__(/*! ./core.get-iterator-method */ 137);\n\n$export($export.S + $export.F * !__webpack_require__(/*! ./_iter-detect */ 139)(function (iter) { Array.from(iter); }), 'Array', {\n  // 22.1.2.1 Array.from(arrayLike, mapfn = undefined, thisArg = undefined)\n  from: function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {\n    var O = toObject(arrayLike);\n    var C = typeof this == 'function' ? this : Array;\n    var aLen = arguments.length;\n    var mapfn = aLen > 1 ? arguments[1] : undefined;\n    var mapping = mapfn !== undefined;\n    var index = 0;\n    var iterFn = getIterFn(O);\n    var length, result, step, iterator;\n    if (mapping) mapfn = ctx(mapfn, aLen > 2 ? arguments[2] : undefined, 2);\n    // if object isn't iterable or it's array with default iterator - use simple case\n    if (iterFn != undefined && !(C == Array && isArrayIter(iterFn))) {\n      for (iterator = iterFn.call(O), result = new C(); !(step = iterator.next()).done; index++) {\n        createProperty(result, index, mapping ? call(iterator, mapfn, [step.value, index], true) : step.value);\n      }\n    } else {\n      length = toLength(O.length);\n      for (result = new C(length); length > index; index++) {\n        createProperty(result, index, mapping ? mapfn(O[index], index) : O[index]);\n      }\n    }\n    result.length = index;\n    return result;\n  }\n});\n\n\n/***/ }),\n/* 134 */\n/*!************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_iter-call.js ***!\n  \\************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// call something on iterator step with safe closing on error\nvar anObject = __webpack_require__(/*! ./_an-object */ 23);\nmodule.exports = function (iterator, fn, value, entries) {\n  try {\n    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch (e) {\n    var ret = iterator['return'];\n    if (ret !== undefined) anObject(ret.call(iterator));\n    throw e;\n  }\n};\n\n\n/***/ }),\n/* 135 */\n/*!****************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_is-array-iter.js ***!\n  \\****************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// check on default Array iterator\nvar Iterators = __webpack_require__(/*! ./_iterators */ 36);\nvar ITERATOR = __webpack_require__(/*! ./_wks */ 9)('iterator');\nvar ArrayProto = Array.prototype;\n\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n};\n\n\n/***/ }),\n/* 136 */\n/*!******************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_create-property.js ***!\n  \\******************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar $defineProperty = __webpack_require__(/*! ./_object-dp */ 13);\nvar createDesc = __webpack_require__(/*! ./_property-desc */ 32);\n\nmodule.exports = function (object, index, value) {\n  if (index in object) $defineProperty.f(object, index, createDesc(0, value));\n  else object[index] = value;\n};\n\n\n/***/ }),\n/* 137 */\n/*!**************************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/core.get-iterator-method.js ***!\n  \\**************************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar classof = __webpack_require__(/*! ./_classof */ 138);\nvar ITERATOR = __webpack_require__(/*! ./_wks */ 9)('iterator');\nvar Iterators = __webpack_require__(/*! ./_iterators */ 36);\nmodule.exports = __webpack_require__(/*! ./_core */ 6).getIteratorMethod = function (it) {\n  if (it != undefined) return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n\n\n/***/ }),\n/* 138 */\n/*!**********************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_classof.js ***!\n  \\**********************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = __webpack_require__(/*! ./_cof */ 44);\nvar TAG = __webpack_require__(/*! ./_wks */ 9)('toStringTag');\n// ES3 wrong here\nvar ARG = cof(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (e) { /* empty */ }\n};\n\nmodule.exports = function (it) {\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};\n\n\n/***/ }),\n/* 139 */\n/*!**************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_iter-detect.js ***!\n  \\**************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar ITERATOR = __webpack_require__(/*! ./_wks */ 9)('iterator');\nvar SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR]();\n  riter['return'] = function () { SAFE_CLOSING = true; };\n  // eslint-disable-next-line no-throw-literal\n  Array.from(riter, function () { throw 2; });\n} catch (e) { /* empty */ }\n\nmodule.exports = function (exec, skipClosing) {\n  if (!skipClosing && !SAFE_CLOSING) return false;\n  var safe = false;\n  try {\n    var arr = [7];\n    var iter = arr[ITERATOR]();\n    iter.next = function () { return { done: safe = true }; };\n    arr[ITERATOR] = function () { return iter; };\n    exec(arr);\n  } catch (e) { /* empty */ }\n  return safe;\n};\n\n\n/***/ }),\n/* 140 */\n/*!*************************************************************!*\\\n  !*** ./node_modules/babel-runtime/core-js/object/values.js ***!\n  \\*************************************************************/\n/*! no static exports found */\n/*! exports used: default */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(/*! core-js/library/fn/object/values */ 141), __esModule: true };\n\n/***/ }),\n/* 141 */\n/*!**********************************************************!*\\\n  !*** ./node_modules/core-js/library/fn/object/values.js ***!\n  \\**********************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(/*! ../../modules/es7.object.values */ 142);\nmodule.exports = __webpack_require__(/*! ../../modules/_core */ 6).Object.values;\n\n\n/***/ }),\n/* 142 */\n/*!*******************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/es7.object.values.js ***!\n  \\*******************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n// https://github.com/tc39/proposal-object-values-entries\nvar $export = __webpack_require__(/*! ./_export */ 10);\nvar $values = __webpack_require__(/*! ./_object-to-array */ 143)(false);\n\n$export($export.S, 'Object', {\n  values: function values(it) {\n    return $values(it);\n  }\n});\n\n\n/***/ }),\n/* 143 */\n/*!******************************************************************!*\\\n  !*** ./node_modules/core-js/library/modules/_object-to-array.js ***!\n  \\******************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar getKeys = __webpack_require__(/*! ./_object-keys */ 15);\nvar toIObject = __webpack_require__(/*! ./_to-iobject */ 11);\nvar isEnum = __webpack_require__(/*! ./_object-pie */ 33).f;\nmodule.exports = function (isEntries) {\n  return function (it) {\n    var O = toIObject(it);\n    var keys = getKeys(O);\n    var length = keys.length;\n    var i = 0;\n    var result = [];\n    var key;\n    while (length > i) if (isEnum.call(O, key = keys[i++])) {\n      result.push(isEntries ? [key, O[key]] : O[key]);\n    } return result;\n  };\n};\n\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// core.js"," \t// install a JSONP callback for chunk loading\n \tvar parentJsonpFunction = window[\"webpackJsonp\"];\n \twindow[\"webpackJsonp\"] = function webpackJsonpCallback(chunkIds, moreModules, executeModules) {\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [], result;\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(chunkIds, moreModules, executeModules);\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n \t\tif(executeModules) {\n \t\t\tfor(i=0; i < executeModules.length; i++) {\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = executeModules[i]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t};\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// objects to store loaded and loading chunks\n \tvar installedChunks = {\n \t\t7: 0\n \t};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData === 0) {\n \t\t\treturn new Promise(function(resolve) { resolve(); });\n \t\t}\n\n \t\t// a Promise means \"currently loading\".\n \t\tif(installedChunkData) {\n \t\t\treturn installedChunkData[2];\n \t\t}\n\n \t\t// setup Promise in chunk cache\n \t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t});\n \t\tinstalledChunkData[2] = promise;\n\n \t\t// start chunk loading\n \t\tvar head = document.getElementsByTagName('head')[0];\n \t\tvar script = document.createElement('script');\n \t\tscript.type = 'text/javascript';\n \t\tscript.charset = 'utf-8';\n \t\tscript.async = true;\n \t\tscript.timeout = 120000;\n\n \t\tif (__webpack_require__.nc) {\n \t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t}\n \t\tscript.src = __webpack_require__.p + \"\" + chunkId + \".bundle.js\";\n \t\tvar timeout = setTimeout(onScriptComplete, 120000);\n \t\tscript.onerror = script.onload = onScriptComplete;\n \t\tfunction onScriptComplete() {\n \t\t\t// avoid mem leaks in IE.\n \t\t\tscript.onerror = script.onload = null;\n \t\t\tclearTimeout(timeout);\n \t\t\tvar chunk = installedChunks[chunkId];\n \t\t\tif(chunk !== 0) {\n \t\t\t\tif(chunk) {\n \t\t\t\t\tchunk[1](new Error('Loading chunk ' + chunkId + ' failed.'));\n \t\t\t\t}\n \t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t}\n \t\t};\n \t\thead.appendChild(script);\n\n \t\treturn promise;\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 77);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 3ee30861ab6592d357f1","const TARGET_FPS = 60;\nconst TARGET_DURATION = 1000 / TARGET_FPS;\n\nconst requestAnimationFrame =\n  window.requestAnimationFrame ||\n  window.webkitRequestAnimationFrame ||\n  window.mozRequestAnimationFrame ||\n  window.oRequestAnimationFrame ||\n  window.msRequestAnimationFrame ||\n  function (fn) { setTimeout(fn, (1000/60)); };\n\n// Commonly used temp variables, pre-declared early.\nlet entityId, system, systemName, systemAttrs, systemCls, componentName,\n    timeNow, timeDelta, componentAttrs, matches, idx, item, handler;\n\nexport const Messages = {\n  ENTITY_INSERT: 'entity_insert',\n  ENTITY_DESTROY: 'entity_destroy'\n};\n\nexport class World {\n  constructor(options) {\n    options = options || {};\n\n    this.isRunning = false;\n    this.isPaused = false;\n    this.debug = false;\n\n    this.systems = {};\n    if (options.systems) {\n      this.addSystems(options.systems);\n    }\n\n    this.store = {};\n\n    this.subscribers = {};\n\n    this.tickDuration = TARGET_DURATION;\n    this.maxTickDelta = TARGET_DURATION * 5;\n    this.tickAccumulator = 0;\n\n    this.lastTickTime = 0;\n    this.lastDrawTime = 0;\n\n    this.boundTickLoop = () => this.tickLoop();\n    this.boundDrawLoop = (timestamp) => this.drawLoop(timestamp);\n\n    this.reset();\n  }\n\n  start() {\n    if (this.isRunning) { return; }\n    this.isRunning = true;\n\n    for (const systemName in this.systems) {\n      this.systems[systemName].initialize();\n    }\n\n    // Game logic separated from display rendering\n    // See also: http://www.chandlerprall.com/2012/06/requestanimationframe-is-not-your-logics-friend/\n    this.lastTickTime = Date.now();\n    this.lastDrawTime = 0;\n\n    setTimeout(this.boundTickLoop, this.tickDuration);\n    requestAnimationFrame(this.boundDrawLoop);\n\n    return this;\n  }\n\n  stop() {\n    this.isRunning = false;\n    return this;\n  }\n\n  pause() {\n    this.isPaused = true;\n    return this;\n  }\n\n  resume() {\n    this.isPaused = false;\n    return this;\n  }\n\n  reset() {\n    this.store = {};\n    this.lastEntityId = 0;\n  }\n\n  // TODO: Use a better pubsub library here. But, pubsub-js seemed to perform\n  // badly in a game loop.\n\n  subscribe(msg, handler) {\n    if (!this.subscribers[msg]) {\n      this.subscribers[msg] = [];\n    }\n    this.subscribers[msg].push(handler);\n    return this;\n  }\n\n  unsubscribe(/* msg, handler */) {\n    // TODO\n    return this;\n  }\n\n  publish(msg, data) {\n    if (!this.subscribers[msg]) { return; }\n    for (idx = 0, handler; handler = this.subscribers[msg][idx]; idx++) {\n      handler(msg, data);\n    }\n    return this;\n  }\n\n  addSystems(systemsData) {\n    for (systemName in systemsData) {\n      systemAttrs = systemsData[systemName];\n      systemCls = getSystem(systemName);\n      system = new systemCls(systemAttrs);\n      system.setWorld(this);\n      this.systems[systemName] = system;\n    }\n  }\n\n  getSystem(systemName) {\n    return this.systems[systemName];\n  }\n\n  tick(timeDeltaMS) {\n    timeDelta = timeDeltaMS / 1000;\n    for (systemName in this.systems) {\n      this.systems[systemName].updateStart(timeDelta);\n    }\n    for (systemName in this.systems) {\n      this.systems[systemName].update(timeDelta);\n    }\n    for (systemName in this.systems) {\n      this.systems[systemName].updateEnd(timeDelta);\n    }\n  }\n\n  tickLoop() {\n    timeNow = Date.now();\n    timeDelta = Math.min(timeNow - this.lastTickTime, this.maxTickDelta);\n    this.lastTickTime = timeNow;\n\n    if (!this.isPaused) {\n      // Fixed-step game logic loop\n      // see: http://gafferongames.com/game-physics/fix-your-timestep/\n      this.tickAccumulator += timeDelta;\n      while (this.tickAccumulator > this.tickDuration) {\n        this.tick(this.tickDuration);\n        this.tickAccumulator -= this.tickDuration;\n      }\n    }\n\n    if (this.isRunning) {\n      setTimeout(this.boundTickLoop, this.tickDuration);\n    }\n  }\n\n  draw(timeDeltaMS) {\n    timeDelta = timeDeltaMS / 1000;\n    for (systemName in this.systems) {\n      this.systems[systemName].drawStart(timeDelta);\n    }\n    for (systemName in this.systems) {\n      this.systems[systemName].draw(timeDelta);\n    }\n    for (systemName in this.systems) {\n      this.systems[systemName].drawEnd(timeDelta);\n    }\n  }\n\n  drawLoop(timestamp) {\n    if (!this.lastDrawTime) { this.lastDrawTime = timestamp; }\n    timeDelta = timestamp - this.lastDrawTime;\n    this.lastDrawTime = timestamp;\n\n    if (!this.isPaused) {\n      this.draw(timeDelta);\n    }\n\n    if (this.isRunning) {\n      requestAnimationFrame(this.boundDrawLoop);\n    }\n  }\n\n  generateEntityId() {\n    return ++(this.lastEntityId);\n  }\n\n  insert(...items) {\n    const out = [];\n    for (idx = 0; item = items[idx]; idx++) {\n      entityId = this.generateEntityId();\n      for (componentName in item) {\n        componentAttrs = item[componentName];\n        this.addComponent(entityId, componentName, componentAttrs);\n      }\n      if (this.world) this.world.publish(Messages.ENTITY_INSERT, entityId);\n      out.push(entityId);\n    }\n    return out.length > 1 ? out : out[0];\n  }\n\n  destroy(entityId) {\n    if (this.world) this.world.publish(Messages.ENTITY_DESTROY, entityId);\n    for (componentName in this.store) {\n      this.removeComponent(entityId, componentName);\n    }\n  }\n\n  addComponent(entityId, componentName, componentAttrs) {\n    const componentManager = getComponent(componentName);\n    const component = componentManager.create(componentAttrs);\n    if (!this.store[componentName]) {\n      this.store[componentName] = {};\n    }\n    this.store[componentName][entityId] = component;\n  }\n\n  removeComponent(entityId, componentName) {\n    if (entityId in this.store[componentName]) {\n      delete this.store[componentName][entityId];\n    }\n  }\n\n  hasComponent(entityId, componentName) {\n    return (componentName in this.store) &&\n           (entityId in this.store[componentName]);\n  }\n\n  get(componentName, entityId) {\n    if (!this.store[componentName]) {\n      return null;\n    } else if (!entityId) {\n      return this.store[componentName];\n    } else {\n      return this.store[componentName][entityId];\n    }\n  }\n\n\n}\n\nexport class Component {\n\n  static defaults() {\n    return {};\n  }\n\n  static create(attrs) {\n    return {...this.defaults(), ...(attrs || {})};\n  }\n\n}\n\nexport class System {\n\n  constructor(options) {\n    this.options = {...this.defaultOptions(), ...(options || {})};\n    this.debug = this.options.debug || false;\n  }\n\n  defaultOptions() {\n    return {};\n  }\n\n  setWorld(world) {\n    this.world = world;\n  }\n\n  matchComponent() { return ''; }\n\n  initialize() { }\n\n  getMatchingComponents() {\n    return this.world.get(this.matchComponent());\n  }\n\n  updateStart(/* timeDelta */) { }\n\n  update(timeDelta) {\n    matches = this.getMatchingComponents();\n    for (entityId in matches) {\n      this.updateComponent(timeDelta, entityId, matches[entityId]);\n    }\n  }\n\n  updateComponent(/* timeDelta, entityId, component */) { }\n\n  updateEnd(/* timeDelta */) { }\n\n  drawStart(/* timeDelta */) { }\n\n  draw(/* timeDelta */) { }\n\n  getDebugGraphics() {\n    // TODO make this work again someday\n    return;\n  }\n\n  drawEnd(/* timeDelta */) { }\n\n}\n\nconst componentRegistry = {};\n\nexport function registerComponent(componentName, componentManager) {\n  componentRegistry[componentName] = componentManager;\n}\n\nexport function getComponent(componentName) {\n  return componentRegistry[componentName];\n}\n\nconst systemRegistry = {};\n\nexport function registerSystem(systemName, system) {\n  systemRegistry[systemName] = system;\n}\n\nexport function getSystem(systemName) {\n  return systemRegistry[systemName];\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/core.js","\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/classCallCheck.js\n// module id = 1\n// module chunks = 7","\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"../core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/createClass.js\n// module id = 2\n// module chunks = 7","module.exports = { \"default\": require(\"core-js/library/fn/object/get-prototype-of\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/object/get-prototype-of.js\n// module id = 3\n// module chunks = 7","\"use strict\";\n\nexports.__esModule = true;\n\nvar _typeof2 = require(\"../helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && ((typeof call === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(call)) === \"object\" || typeof call === \"function\") ? call : self;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/possibleConstructorReturn.js\n// module id = 4\n// module chunks = 7","\"use strict\";\n\nexports.__esModule = true;\n\nvar _setPrototypeOf = require(\"../core-js/object/set-prototype-of\");\n\nvar _setPrototypeOf2 = _interopRequireDefault(_setPrototypeOf);\n\nvar _create = require(\"../core-js/object/create\");\n\nvar _create2 = _interopRequireDefault(_create);\n\nvar _typeof2 = require(\"../helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(superClass)));\n  }\n\n  subClass.prototype = (0, _create2.default)(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf2.default ? (0, _setPrototypeOf2.default)(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/inherits.js\n// module id = 5\n// module chunks = 7","var core = module.exports = { version: '2.5.0' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_core.js\n// module id = 6\n// module chunks = 7","import { Component, System, registerComponent, registerSystem } from '../lib/core';\r\nimport QuadTree from '../lib/QuadTree';\r\n\r\nexport class Position extends Component {\r\n  static defaults() {\r\n    return { x: 0, y: 0, rotation: 0 };\r\n  }\r\n}\r\n\r\nregisterComponent('Position', Position);\r\n\r\nlet entityId, sprite, position, positions;\r\n\r\nexport class PositionSystem extends System {\r\n\r\n  defaultOptions() {\r\n    return {\r\n      quadtreeMaxAge: 2,\r\n      quadtreeObjectsPerNode: 5,\r\n      quadtreeMaxLevels: 5\r\n    };\r\n  }\r\n\r\n  matchComponent() { return 'Position'; }\r\n\r\n  initialize() {\r\n    this.bounds = {\r\n      left: 0, top: 0, right: 0, bottom: 0,\r\n      width: 0, height: 0\r\n    };\r\n    this.quadtree = new QuadTree(\r\n      -1000, -1000, 2000, 2000,\r\n      this.options.quadtreeObjectsPerNode,\r\n      this.options.quadtreeMaxLevels\r\n    );\r\n  }\r\n\r\n  update(timeDelta) {\r\n    this.updateBounds();\r\n    this.resetQuadtree(timeDelta);\r\n    super.update(timeDelta);\r\n  }\r\n\r\n  resetQuadtree() {\r\n    this.quadtree.reset(\r\n      this.bounds.left,\r\n      this.bounds.top,\r\n      this.bounds.width,\r\n      this.bounds.height,\r\n      this.options.quadtreeObjectsPerNode,\r\n      this.options.quadtreeMaxLevels\r\n    );\r\n  }\r\n\r\n  updateBounds() {\r\n    this.bounds.left = this.bounds.top = this.bounds.right = this.bounds.bottom = null;\r\n    positions = this.getMatchingComponents();\r\n    for (entityId in positions) {\r\n      position = positions[entityId];\r\n      if (this.bounds.left === null || position.left < this.bounds.left) { this.bounds.left = position.left; }\r\n      if (this.bounds.top === null || position.top < this.bounds.top) { this.bounds.top = position.top; }\r\n      if (this.bounds.right === null || position.right > this.bounds.right) { this.bounds.right = position.right; }\r\n      if (this.bounds.bottom === null || position.bottom > this.bounds.bottom) { this.bounds.bottom = position.bottom; }\r\n    }\r\n    this.bounds.width = this.bounds.right - this.bounds.left;\r\n    this.bounds.height = this.bounds.bottom - this.bounds.top;\r\n  }\r\n\r\n  updateComponent(timeDelta, entityId, position) {\r\n    sprite = this.world.get('Sprite', entityId);\r\n    if (!sprite) { return; }\r\n\r\n    const halfWidth = sprite.width / 2;\r\n    const halfHeight = sprite.height / 2;\r\n\r\n    position.entityId = entityId;\r\n    position.width = sprite.width;\r\n    position.height = sprite.height;\r\n    position.left = position.x - halfWidth;\r\n    position.top = position.y - halfHeight;\r\n    position.right = position.x + halfWidth;\r\n    position.bottom = position.y + halfHeight;\r\n\r\n    this.quadtree.insert(position);\r\n  }\r\n\r\n  draw(/* timeDelta */) {\r\n    const g = this.getDebugGraphics();\r\n    if (!g) { return; }\r\n\r\n    g.lineStyle(4, 0x882222);\r\n    positions = this.getMatchingComponents();\r\n    for (entityId in positions) {\r\n      position = positions[entityId];\r\n      sprite = this.world.get('Sprite', entityId);\r\n      g.drawCircle(position.x, position.y, sprite.width / 2);\r\n      g.moveTo(position.x - 20, position.y);\r\n      g.lineTo(position.x + 20, position.y);\r\n      g.moveTo(position.x, position.y - 20);\r\n      g.lineTo(position.x, position.y + 20);\r\n    }\r\n\r\n    g.lineStyle(4, 0x228822);\r\n    this.drawDebugQuadtreeNode(g, this.quadtree);\r\n\r\n    g.lineStyle(4, 0xffff33);\r\n    g.moveTo(-20, 0);\r\n    g.lineTo(20, 0);\r\n    g.moveTo(0, -20);\r\n    g.lineTo(0, 20);\r\n    g.moveTo(0, 0);\r\n    g.drawRect(\r\n      this.bounds.left,\r\n      this.bounds.top,\r\n      this.bounds.width,\r\n      this.bounds.height\r\n    );\r\n  }\r\n\r\n  drawDebugQuadtreeNode(g, root) {\r\n    if (!root) { return; }\r\n\r\n    g.lineStyle(4, 0x883388);\r\n    g.drawRect(root.bounds.left, root.bounds.top,\r\n               root.bounds.width, root.bounds.height);\r\n\r\n    g.lineStyle(4, 0x112222);\r\n    root.objects.forEach(body =>\r\n      g.drawRect(body.left, body.top, body.width, body.height));\r\n\r\n    this.drawDebugQuadtreeNode(g, root.nodes[0]);\r\n    this.drawDebugQuadtreeNode(g, root.nodes[1]);\r\n    this.drawDebugQuadtreeNode(g, root.nodes[2]);\r\n    this.drawDebugQuadtreeNode(g, root.nodes[3]);\r\n  }\r\n}\r\n\r\nregisterSystem('Position', PositionSystem);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/position.js","import * as Core from '../lib/core';\r\n\r\nimport './position';\r\n\r\nconst PI2 = Math.PI * 2;\r\n\r\nexport class Motion extends Core.Component {\r\n  static defaults() {\r\n    return { dx: 0, dy: 0, drotation: 0 };\r\n  }\r\n}\r\nCore.registerComponent('Motion', Motion);\r\n\r\nexport class MotionSystem extends Core.System {\r\n  matchComponent() {\r\n    return 'Motion';\r\n  }\r\n  updateComponent(timeDelta, entityId, motion) {\r\n    const pos = this.world.get('Position', entityId);\r\n    pos.x += motion.dx * timeDelta;\r\n    pos.y += motion.dy * timeDelta;\r\n\r\n    // Update the rotation, ensuring a 0..2*Math.PI range.\r\n    pos.rotation = (pos.rotation + (motion.drotation * timeDelta)) % PI2;\r\n    if (pos.rotation < 0) {\r\n      pos.rotation += PI2;\r\n    }\r\n  }\r\n}\r\nCore.registerSystem('Motion', MotionSystem);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/motion.js","var store = require('./_shared')('wks');\nvar uid = require('./_uid');\nvar Symbol = require('./_global').Symbol;\nvar USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function (name) {\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_wks.js\n// module id = 9\n// module chunks = 7","var global = require('./_global');\nvar core = require('./_core');\nvar ctx = require('./_ctx');\nvar hide = require('./_hide');\nvar PROTOTYPE = 'prototype';\n\nvar $export = function (type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var IS_WRAP = type & $export.W;\n  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});\n  var expProto = exports[PROTOTYPE];\n  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE];\n  var key, own, out;\n  if (IS_GLOBAL) source = name;\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if (own && key in exports) continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function (C) {\n      var F = function (a, b, c) {\n        if (this instanceof C) {\n          switch (arguments.length) {\n            case 0: return new C();\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if (IS_PROTO) {\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if (type & $export.R && expProto && !expProto[key]) hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library`\nmodule.exports = $export;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_export.js\n// module id = 10\n// module chunks = 7","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject');\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return IObject(defined(it));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-iobject.js\n// module id = 11\n// module chunks = 7","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_global.js\n// module id = 12\n// module chunks = 7","var anObject = require('./_an-object');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar toPrimitive = require('./_to-primitive');\nvar dP = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return dP(O, P, Attributes);\n  } catch (e) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-dp.js\n// module id = 13\n// module chunks = 7","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_descriptors.js\n// module id = 14\n// module chunks = 7","// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys = require('./_object-keys-internal');\nvar enumBugKeys = require('./_enum-bug-keys');\n\nmodule.exports = Object.keys || function keys(O) {\n  return $keys(O, enumBugKeys);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-keys.js\n// module id = 15\n// module chunks = 7","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_has.js\n// module id = 16\n// module chunks = 7","/*\r\n  Originally by Vitalii [Nayjest] Stepanenko <gmail@vitaliy.in>\r\n  Tweaky & fixes by Les Orchard <me@lmorchard.com>\r\n*/\r\n\r\nexport default function Vector2D(x, y) {\r\n  this.x = x || 0;\r\n  this.y = y || 0;\r\n}\r\n\r\nVector2D.cloneFrom = function(object) {\r\n  return new Vector2D(object.x, object.y);\r\n};\r\n\r\nVector2D.fromArray = function(array) {\r\n  return new Vector2D(array[0], array[1]);\r\n};\r\n\r\nVector2D.zero = new Vector2D(0, 0);\r\n\r\nVector2D.prototype.add = function(vector) {\r\n  this.x += vector.x;\r\n  this.y += vector.y;\r\n  return this;\r\n};\r\n\r\nVector2D.prototype.addScalar = function(val) {\r\n  this.x += val;\r\n  this.y += val;\r\n  return this;\r\n};\r\n\r\nVector2D.prototype.eq = function(vector) {\r\n  return vector.x === this.x && vector.y === this.y;\r\n};\r\n\r\nVector2D.prototype.subtract = function(vector) {\r\n  this.x -= vector.x;\r\n  this.y -= vector.y;\r\n  return this;\r\n};\r\n\r\nVector2D.prototype.clone = function() {\r\n  return new Vector2D(this.x, this.y);\r\n};\r\n\r\nVector2D.prototype.set = function(vector) {\r\n  this.x = vector.x;\r\n  this.y = vector.y;\r\n  return this;\r\n};\r\n\r\nVector2D.prototype.setValues = function(_at_x, _at_y) {\r\n  this.x = _at_x;\r\n  this.y = _at_y;\r\n  return this;\r\n};\r\n\r\nVector2D.prototype.dist = function(vector) {\r\n  return Math.sqrt((vector.x - this.x) * (vector.x - this.x) + (vector.y - this.y) * (vector.y - this.y));\r\n};\r\n\r\nVector2D.prototype.normalise = function() {\r\n  return this.normalize();\r\n};\r\n\r\nVector2D.prototype.normalize = function() {\r\n  if (!this.isZero()) {\r\n    const m = this.magnitude();\r\n    this.x /= m;\r\n    this.y /= m;\r\n  }\r\n  return this;\r\n};\r\n\r\nVector2D.prototype.isZero = function() {\r\n  return this.x === 0 && this.y === 0;\r\n};\r\n\r\nVector2D.prototype.reverse = function() {\r\n  this.x = -this.x;\r\n  this.y = -this.y;\r\n  return this;\r\n};\r\n\r\nVector2D.prototype.magnitude = function() {\r\n  return Math.sqrt(this.x * this.x + this.y * this.y);\r\n};\r\n\r\nVector2D.prototype.toArray = function() {\r\n  return [this.x, this.y];\r\n};\r\n\r\nVector2D.prototype.angle = function() {\r\n  return Math.atan2(this.y, this.x);\r\n};\r\n\r\nVector2D.prototype.rotate = function(angle) {\r\n  const cos = Math.cos(angle);\r\n  const sin = Math.sin(angle);\r\n  return this.setValues(this.x * cos - this.y * sin, this.x * sin + this.y * cos);\r\n};\r\n\r\nVector2D.prototype.angleTo = function(vector) {\r\n  return Math.atan2(vector.y - this.y, vector.x - this.x);\r\n};\r\n\r\nVector2D.prototype.rotateAround = function(point, angle) {\r\n  return this.subtract(point).rotate(angle).add(point);\r\n};\r\n\r\nVector2D.prototype.multiplyScalar = function(val) {\r\n  this.x *= val;\r\n  this.y *= val;\r\n  return this;\r\n};\r\n\r\nVector2D.prototype.multiply = function(vector) {\r\n  this.x *= vector.x;\r\n  this.y *= vector.y;\r\n  return this;\r\n};\r\n\r\nVector2D.prototype.divide = function(vector) {\r\n  this.x /= vector.x;\r\n  this.y /= vector.y;\r\n  return this;\r\n};\r\n\r\nVector2D.prototype.divideScalar = function(val) {\r\n  this.x /= val;\r\n  this.y /= val;\r\n  return this;\r\n};\r\n\r\nVector2D.prototype.round = function() {\r\n  this.x = Math.round(this.x);\r\n  this.y = Math.round(this.y);\r\n  return this;\r\n};\r\n\r\nVector2D.prototype.dot = function(vector) {\r\n  return (this.x * vector.x) + (this.y * vector.y);\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/Vector2D.js","import * as Core from '../lib/core';\r\n\r\nimport dat from 'dat-gui';\r\n\r\nexport class DatGui extends Core.System {\r\n\r\n  initialize() {\r\n    this.gui = new dat.GUI();\r\n  }\r\n\r\n}\r\nCore.registerSystem('DatGui', DatGui);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/datGui.js","import * as Core from '../lib/core';\r\n\r\nimport Stats from 'stats-js';\r\n\r\nexport class DrawStats extends Core.System {\r\n\r\n  initialize() {\r\n\r\n    this.drawStats = new Stats();\r\n    this.drawStats.setMode(0);\r\n    this.drawStats.domElement.style.position = 'absolute';\r\n    this.drawStats.domElement.style.left = '0px';\r\n    this.drawStats.domElement.style.top = '0px';\r\n    document.body.appendChild(this.drawStats.domElement);\r\n\r\n    this.tickStats = new Stats();\r\n    this.tickStats.setMode(0);\r\n    this.tickStats.domElement.style.position = 'absolute';\r\n    this.tickStats.domElement.style.left = '0px';\r\n    this.tickStats.domElement.style.top = '55px';\r\n    document.body.appendChild(this.tickStats.domElement);\r\n\r\n  }\r\n\r\n  updateStart() { this.tickStats.begin(); }\r\n\r\n  updateEnd() { this.tickStats.end(); }\r\n\r\n  drawStart() { this.drawStats.begin(); }\r\n\r\n  drawEnd() { this.drawStats.end(); }\r\n\r\n}\r\nCore.registerSystem('DrawStats', DrawStats);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/drawStats.js","import * as Core from '../lib/core';\r\n\r\nimport MemoryStats from 'memory-stats';\r\n\r\nexport class MemoryStatsSystem extends Core.System {\r\n\r\n  initialize() {\r\n    this.stats = new MemoryStats();\r\n    this.stats.domElement.style.position = 'fixed';\r\n    this.stats.domElement.style.left = '85px';\r\n    this.stats.domElement.style.top = '0px';\r\n    document.body.appendChild(this.stats.domElement);\r\n  }\r\n\r\n  draw() { this.stats.update(); }\r\n\r\n}\r\nCore.registerSystem('MemoryStats', MemoryStatsSystem);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/memoryStats.js","import * as Core from '../lib/core';\r\n\r\nexport class Name extends Core.Component {\r\n  static defaults() {\r\n    return { name: 'unnamed' };\r\n  }\r\n  static findEntityByName(world, name) {\r\n    const names = world.get('Name');\r\n    for (const nid in names) {\r\n      const nameComponent = names[nid];\r\n      if (nameComponent.name === name) {\r\n        return nid;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nCore.registerComponent('Name', Name);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/name.js","var dP = require('./_object-dp');\nvar createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function (object, key, value) {\n  return dP.f(object, key, createDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_hide.js\n// module id = 22\n// module chunks = 7","var isObject = require('./_is-object');\nmodule.exports = function (it) {\n  if (!isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_an-object.js\n// module id = 23\n// module chunks = 7","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_fails.js\n// module id = 24\n// module chunks = 7","\"use strict\";\n\nexports.__esModule = true;\n\nvar _getPrototypeOf = require(\"../core-js/object/get-prototype-of\");\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _getOwnPropertyDescriptor = require(\"../core-js/object/get-own-property-descriptor\");\n\nvar _getOwnPropertyDescriptor2 = _interopRequireDefault(_getOwnPropertyDescriptor);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function get(object, property, receiver) {\n  if (object === null) object = Function.prototype;\n  var desc = (0, _getOwnPropertyDescriptor2.default)(object, property);\n\n  if (desc === undefined) {\n    var parent = (0, _getPrototypeOf2.default)(object);\n\n    if (parent === null) {\n      return undefined;\n    } else {\n      return get(parent, property, receiver);\n    }\n  } else if (\"value\" in desc) {\n    return desc.value;\n  } else {\n    var getter = desc.get;\n\n    if (getter === undefined) {\n      return undefined;\n    }\n\n    return getter.call(receiver);\n  }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/get.js\n// module id = 25\n// module chunks = 7","import { Component, System, registerComponent, registerSystem } from '../lib/core';\r\nimport { MSG_DESTROY } from './spawn';\r\n\r\nexport const MSG_DAMAGE = 'healthDamage';\r\nexport const MSG_HEAL = 'healthHeal';\r\n\r\nlet health;\r\n\r\nexport class Health extends Component {\r\n  static defaults() {\r\n    return {\r\n      max: 1000,\r\n      current: null,\r\n      show_bar: true\r\n    };\r\n  }\r\n  static create(attrs) {\r\n    const c = super.create(attrs);\r\n    c.current = c.max;\r\n    return c;\r\n  }\r\n}\r\n\r\nregisterComponent('Health', Health);\r\n\r\nexport class HealthSystem extends System {\r\n\r\n  initialize() {\r\n    this.world\r\n      .subscribe(MSG_DAMAGE, (msg, data) => {\r\n        health = this.world.get('Health', data.to);\r\n        if (health) { health.current -= data.amount; }\r\n      })\r\n      .subscribe(MSG_HEAL, (msg, data) => {\r\n        health = this.world.get('Health', data.to);\r\n        if (health) { health.current += data.amount; }\r\n      });\r\n  }\r\n\r\n  matchComponent() { return 'Health'; }\r\n\r\n  updateComponent(timeDelta, entityId, health) {\r\n    if (health.current === null) {\r\n      health.current = health.max;\r\n    }\r\n    if (health.current < 0) {\r\n      this.world.publish(MSG_DESTROY, entityId);\r\n    }\r\n  }\r\n\r\n}\r\n\r\nregisterSystem('Health', HealthSystem);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/health.js","import { Component, System, registerComponent, registerSystem } from '../lib/core';\r\n\r\nexport const MSG_SPAWN = 'spawnSpawn';\r\nexport const MSG_DESTROY = 'spawnDestroy';\r\nexport const MSG_DESPAWN = 'spawnDespawn';\r\nexport const MSG_CAPTURE_CAMERA = 'spawnCaptureCamera';\r\n\r\nlet spawn;\r\n\r\nexport class Spawn extends Component {\r\n  static defaults() {\r\n    return {\r\n      ttl: null,\r\n      age: 0,\r\n      destroy: false,\r\n      tombstone: null\r\n    };\r\n  }\r\n}\r\n\r\nregisterComponent('Spawn', Spawn);\r\n\r\nexport class SpawnSystem extends System {\r\n  defaultOptions() {\r\n    return {\r\n\r\n    };\r\n  }\r\n\r\n  initialize() {\r\n    this.world.subscribe(MSG_DESTROY, (msg, entityId) => {\r\n      spawn = this.world.get('Spawn', entityId);\r\n      if (spawn) { spawn.destroy = true; }\r\n    });\r\n  }\r\n\r\n  matchComponent() { return 'Spawn'; }\r\n\r\n  updateComponent(timeDelta, entityId, spawn) {\r\n    if (!spawn.spawned) {\r\n      spawn.spawned = true;\r\n      this.world.publish(MSG_SPAWN, entityId);\r\n      if (spawn.captureCamera) {\r\n        this.world.publish(MSG_CAPTURE_CAMERA, entityId);\r\n      }\r\n    }\r\n    if (spawn.ttl !== null) {\r\n      spawn.age += timeDelta;\r\n      if (spawn.age >= spawn.ttl) {\r\n        spawn.destroy = true;\r\n      }\r\n    }\r\n    if (spawn.destroy) {\r\n      if (spawn.tombstone !== null) {\r\n        this.world.insert((typeof spawn.tombstone === 'function') ?\r\n          spawn.tombstone(spawn, entityId) : spawn.tombstone);\r\n      }\r\n      this.world.publish(MSG_DESPAWN, entityId);\r\n      this.world.destroy(entityId);\r\n    }\r\n  }\r\n}\r\n\r\nregisterSystem('Spawn', SpawnSystem);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/spawn.js","import * as Core from '../lib/core';\r\n\r\nimport '../plugins/position';\r\nimport '../plugins/motion';\r\n\r\nimport Vector2D from '../lib/Vector2D';\r\n\r\nexport class Seeker extends Core.Component {\r\n  static defaults() {\r\n    return {\r\n      active: true,\r\n      targetName: null,\r\n      targetEntityId: null,\r\n      targetPosition: null,\r\n      acquisitionDelay: 0,\r\n      radPerSec: Math.PI\r\n    };\r\n  }\r\n}\r\n\r\nCore.registerComponent('Seeker', Seeker);\r\n\r\nexport class SeekerSystem extends Core.System {\r\n\r\n  matchComponent() { return 'Seeker'; }\r\n\r\n  initialize() {\r\n    this.vSeeker = new Vector2D();\r\n    this.vTarget = new Vector2D();\r\n  }\r\n\r\n  updateComponent(timeDelta, entityId, seeker) {\r\n\r\n    if (!seeker.active) { return; }\r\n\r\n    // Look up the orbited entity ID, if only name given.\r\n    if (seeker.targetName && !seeker.targetEntityId) {\r\n      seeker.targetEntityId = Core.getComponent('Name')\r\n        .findEntityByName(this.world, seeker.targetName);\r\n    }\r\n\r\n    // Process a delay before the seeker 'acquires' the target and\r\n    // starts steering. Makes missiles look interesting.\r\n    if (seeker.acquisitionDelay > 0) {\r\n      seeker.acquisitionDelay -= timeDelta;\r\n      return;\r\n    }\r\n\r\n    const position = this.world.get('Position', entityId);\r\n    const motion = this.world.get('Motion', entityId);\r\n    if (!position || !motion) { return; }\r\n\r\n    // Accept either a raw x/y coord or entity ID as target\r\n    let targetPosition = seeker.targetPosition;\r\n    if (!targetPosition) {\r\n      targetPosition = this.world.get('Position', seeker.targetEntityId);\r\n    }\r\n    if (!targetPosition) { return; }\r\n\r\n    // Set up the vectors for angle math...\r\n    this.vSeeker.setValues(position.x, position.y);\r\n    this.vTarget.setValues(targetPosition.x, targetPosition.y);\r\n\r\n    // Get the target angle, ensuring a 0..2*Math.PI range.\r\n    let targetAngle = this.vSeeker.angleTo(this.vTarget);\r\n    if (targetAngle < 0) {\r\n      targetAngle += (2 * Math.PI);\r\n    }\r\n\r\n    // Pick the direction from current to target angle\r\n    let direction = (targetAngle < position.rotation) ? -1 : 1;\r\n\r\n    // If the offset between the angles is more than half a circle, go\r\n    // the other way because it'll be shorter.\r\n    const offset = Math.abs(targetAngle - position.rotation);\r\n    if (offset > Math.PI) {\r\n      direction = 0 - direction;\r\n    }\r\n\r\n    // Work out the desired delta-rotation to steer toward target\r\n    const targetDr = direction * Math.min(seeker.radPerSec, offset / timeDelta);\r\n\r\n    // Calculate the delta-rotation impulse required to meet the goal,\r\n    // but constrain to the capability of the steering thrusters\r\n    let impulseDr = (targetDr - motion.drotation);\r\n    if (Math.abs(impulseDr) > seeker.radPerSec) {\r\n      if (impulseDr > 0) {\r\n        impulseDr = seeker.radPerSec;\r\n      } else if (impulseDr < 0) {\r\n        impulseDr = 0 - seeker.radPerSec;\r\n      }\r\n    }\r\n    motion.drotation += impulseDr;\r\n\r\n  }\r\n\r\n}\r\n\r\nCore.registerSystem('Seeker', SeekerSystem);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/seeker.js","import * as Core from '../lib/core';\r\n\r\nimport './position';\r\nimport './motion';\r\n\r\nimport Vector2D from '../lib/Vector2D';\r\n\r\nexport class Thruster extends Core.Component {\r\n  static defaults() {\r\n    return {\r\n      active: true,\r\n      stop: false,\r\n      useBrakes: true,\r\n      deltaV: 0,\r\n      maxV: 0\r\n    };\r\n  }\r\n}\r\nCore.registerComponent('Thruster', Thruster);\r\n\r\nexport class ThrusterSystem extends Core.System {\r\n\r\n  matchComponent() { return 'Thruster'; }\r\n\r\n  initialize() {\r\n    this.vInertia = new Vector2D();\r\n    this.vThrust = new Vector2D();\r\n    this.vBrakes = new Vector2D();\r\n  }\r\n\r\n  updateComponent(timeDelta, entityId, thruster) {\r\n\r\n    if (!thruster.active) { return; }\r\n\r\n    const pos = this.world.get('Position', entityId);\r\n    const motion = this.world.get('Motion', entityId);\r\n    if (!pos || !motion) { return; }\r\n\r\n    // Inertia is current motion\r\n    this.vInertia.setValues(motion.dx, motion.dy);\r\n\r\n    // delta-v available for the current tick\r\n    const tickDeltaV = timeDelta * thruster.deltaV;\r\n\r\n    if (!thruster.stop) {\r\n      // Create thrust vector per rotation and add to inertia.\r\n      this.vThrust.setValues(tickDeltaV, 0);\r\n      this.vThrust.rotate(pos.rotation);\r\n      this.vInertia.add(this.vThrust);\r\n    }\r\n\r\n    if (thruster.useBrakes) {\r\n      // Try to enforce the max_v limit with braking thrust.\r\n      const maxV = thruster.stop ? 0 : thruster.maxV;\r\n      const currV = this.vInertia.magnitude();\r\n      const overV = currV - maxV;\r\n      if (overV > 0) {\r\n        // Braking delta-v is max thruster output or remaining overage,\r\n        // whichever is smallest. Braking vector opposes inertia.\r\n        const brakingDv = Math.min(tickDeltaV, overV);\r\n        this.vBrakes.setValues(this.vInertia.x, this.vInertia.y);\r\n        this.vBrakes.normalize();\r\n        this.vBrakes.multiplyScalar(0-brakingDv);\r\n        this.vInertia.add(this.vBrakes);\r\n      }\r\n      if (thruster.stop && currV === 0) {\r\n        thruster.active = false;\r\n      }\r\n    }\r\n\r\n    // Update inertia. Note that we've been careful only to make changes\r\n    // to inertia within the delta-v of the thruster. Other influences\r\n    // on inertia should be preserved.\r\n    motion.dx = this.vInertia.x;\r\n    motion.dy = this.vInertia.y;\r\n  }\r\n\r\n}\r\nCore.registerSystem('Thruster', ThrusterSystem);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/thruster.js","import * as Core from '../lib/core';\n\nconst PI2 = Math.PI * 2;\n\n// https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/Constants\nconst TYPE_SIZES = {\n  0x1406: 1, // FLOAT\n  0x8B50: 2, // FLOAT_VEC2\n  0x8B51: 3, // FLOAT_VEC3\n  0x8B52: 4  // FLOAT_VEC4\n};\n\nlet entityId, position, sprites, sprite, sceneSprite;\n\n// See also: http://phrogz.net/JS/wheeldelta.html\nconst wheelDistance = function(evt){\n  if (!evt) evt = event;\n  const w=evt.wheelDelta, d=evt.detail;\n  if (d){\n    if (w) return w/d/40*d>0?1:-1; // Opera\n    else return -d/3;              // Firefox;         TODO: do not /3 for OS X\n  } else return w/120;             // IE/Safari/Chrome TODO: /3 for Chrome OS X\n};\n\nexport class ViewportWebGL extends Core.System {\n\n  defaultOptions() {\n    return {\n      lineWidth: 2,\n      zoom: 1.0,\n      zoomMin: 0.1,\n      zoomMax: 10.0,\n      zoomWheelFactor: 0.05,\n      gridEnabled: true,\n      gridSize: 250,\n      gridColor: 0x222222,\n      followEnabled: true,\n      followName: null,\n      followEntityId: null\n    };\n  }\n\n  initialize() {\n    this.container = document.querySelector(this.options.container);\n    this.canvas = document.createElement('canvas');\n    this.container.appendChild(this.canvas);\n\n    this.initWebGL(this.canvas);\n\n    this.scene = {};\n\n    const events = {\n      'resize': (ev) => { this.updateMetrics(ev); },\n      'orientationchange': (ev) => { this.updateMetrics(ev); },\n      'mousedown': (ev) => { this.onMouseDown(ev); },\n      'mousemove': (ev) => { this.onMouseMove(ev); },\n      'mouseup': (ev) => { this.onMouseUp(ev); }\n    };\n\n    for (const name in events) {\n      this.canvas.addEventListener(name, events[name], false);\n    }\n\n    // See also: http://phrogz.net/JS/wheeldelta.html\n    const boundOnMouseWheel = (ev) => this.onMouseWheel(ev);\n    if (window.addEventListener){\n      window.addEventListener('mousewheel', boundOnMouseWheel, false); // Chrome/Safari/Opera\n      window.addEventListener('DOMMouseScroll', boundOnMouseWheel, false); // Firefox\n    } else if (window.attachEvent){\n      window.attachEvent('onmousewheel', boundOnMouseWheel); // IE\n    }\n\n    this.followEnabled = this.options.followEnabled;\n    this.zoom = this.options.zoom;\n    this.followEntityId = this.options.followEntityId;\n    this.gridEnabled = this.options.gridEnabled;\n    this.lineWidth = this.options.lineWidth;\n\n    this.cursorRawX = 0;\n    this.cursorRawY = 0;\n\n    this.cursorChanged = false;\n    this.cursorPosition = { x: 0, y: 0 };\n\n    this.cameraX = 0;\n    this.cameraY = 0;\n\n    this.debugDummySprite = { size: 100 };\n\n    this.updateMetrics();\n  }\n\n  onMouseWheel(ev) {\n    this.zoom += wheelDistance(ev) * this.options.zoomWheelFactor;\n    if (this.zoom < this.options.zoomMin) {\n      this.zoom = this.options.zoomMin;\n    }\n    if (this.zoom > this.options.zoomMax) {\n      this.zoom = this.options.zoomMax;\n    }\n  }\n\n  // TODO: Use a symbol for 'mouse{Down,Move,Up}' message?\n\n  onMouseDown(ev) {\n    this.setCursor(ev.clientX, ev.clientY);\n    this.world.publish('mouseDown', this.cursorPosition);\n  }\n\n  onMouseMove(ev) {\n    this.setCursor(ev.clientX, ev.clientY);\n    this.world.publish('mouseMove', this.cursorPosition);\n  }\n\n  onMouseUp(ev) {\n    this.setCursor(ev.clientX, ev.clientY, true);\n    this.world.publish('mouseUp', this.cursorPosition);\n  }\n\n  setCursor(x, y) {\n    const width = this.container.offsetWidth;\n    const height = this.container.offsetHeight;\n\n    this.cursorRawX = x;\n    this.cursorRawY = y;\n\n    const newX = ((x - (width / 2)) / this.zoom) + this.cameraX;\n    const newY = ((y - (height / 2)) / this.zoom) + this.cameraY;\n\n    this.cursorChanged = false;\n    if (newX !== this.cursorPosition.x || newY !== this.cursorPosition.y) {\n      this.cursorChanged = true;\n      this.cursorPosition.x = newX;\n      this.cursorPosition.y = newY;\n    }\n\n    return this.cursorPosition;\n  }\n\n  updateMetrics() {\n    const width = this.container.offsetWidth;\n    const height = this.container.offsetHeight;\n\n    this.visibleWidth = width / this.zoom;\n    this.visibleHeight = height / this.zoom;\n\n    this.visibleLeft = (0 - this.visibleWidth / 2) + this.cameraX;\n    this.visibleTop = (0 - this.visibleHeight / 2) + this.cameraY;\n    this.visibleRight = this.visibleLeft + this.visibleWidth;\n    this.visibleBottom = this.visibleTop + this.visibleHeight;\n  }\n\n  update(timeDelta) {\n    this.updateMetrics();\n\n    this.setCursor(this.cursorRawX, this.cursorRawY);\n    // FIXME: Should be able to skip doing this unless\n    // this.cursorChanged === true, but for some reason that's not working\n    this.world.publish('mouseMove', this.cursorPosition);\n\n    sprites = this.world.get('Sprite') || {};\n\n    // Delete any stage items not found in sprites\n    for (entityId in this.scene) {\n      if (!(entityId in sprites)) {\n        delete this.scene[entityId];\n      }\n    }\n\n    // Create items for any sprites not found in stage\n    for (entityId in sprites) {\n      sprite = sprites[entityId];\n      position = this.world.get('Position', entityId);\n\n      if (!(entityId in this.scene)) {\n        this.scene[entityId] = {\n          position: [0.0, 0.0],\n          shape: getSprite(sprite.name)(sprite, entityId, timeDelta)\n        };\n      }\n      sceneSprite = this.scene[entityId];\n\n      sprite.visible = (\n        (position.right > this.visibleLeft) &&\n        (position.left < this.visibleRight) &&\n        (position.bottom > this.visibleTop) &&\n        (position.top < this.visibleBottom)\n      );\n\n      sceneSprite.visible = sprite.visible;\n      sceneSprite.position[0] = position.x;\n      sceneSprite.position[1] = position.y;\n      sceneSprite.rotation = position.rotation;\n      sceneSprite.scale = sprite.size;\n      sceneSprite.color = [\n        // TODO: this math is terrible\n        (sprite.color / 256 / 256) % 256 / 256,\n        (sprite.color / 256) % 256 / 256,\n        sprite.color % 256 / 256,\n        1.0\n      ];\n    }\n  }\n\n  draw() {\n    this.followEntity();\n\n    this.canvas.width = this.container.offsetWidth;\n    this.canvas.height = this.container.offsetHeight;\n\n    // gl.uniform1f(uniforms.uTime, currDrawTime);\n    this.setUniforms({\n      uLineWidth: [0.001 * this.lineWidth],\n      uCameraZoom: [this.zoom],\n      uCameraOrigin: [this.cameraX, this.cameraY],\n      uViewportSize: [this.canvas.clientWidth, this.canvas.clientHeight]\n    });\n\n    // this.drawBackdrop(timeDelta);\n\n    // Re-allocate larger buffer if current is too small for the scene.\n    const bufferSize = this.calculateBufferSizeForScene();\n    if (bufferSize > this.buffer.length) {\n      this.buffer = new Float32Array(Math.max(bufferSize * 1.5, this.buffer.length * 2));\n    }\n\n    const vertexCount = this.fillBufferFromScene();\n    this.gl.bufferData(this.gl.ARRAY_BUFFER, this.buffer, this.gl.STATIC_DRAW);\n    this.gl.viewport(0, 0, this.gl.canvas.width, this.gl.canvas.height);\n    this.gl.clearColor(0, 0, 0, 0.5);\n    this.gl.clear(this.gl.COLOR_BUFFER_BIT | this.gl.DEPTH_BUFFER_BIT);\n    this.gl.drawArrays(this.gl.TRIANGLE_STRIP, 0, vertexCount);\n  }\n\n  followEntity() {\n    if (!this.followEnabled) {\n      this.cameraX = this.cameraY = 0;\n      return;\n    }\n    if (this.options.followName && !this.followEntityId) {\n      // Look up named entity, if necessary.\n      this.followEntityId = Core.getComponent('Name')\n        .findEntityByName(this.world, this.options.followName);\n    }\n    if (this.followEntityId) {\n      // Adjust the viewport center offset to the entity position\n      const position = this.world.get('Position', this.followEntityId);\n      if (position) {\n        this.cameraX = position.x;\n        this.cameraY = position.y;\n        this.setCursor(this.cursorRawX, this.cursorRawY);\n      }\n    }\n  }\n\n  /*\n  drawBackdrop() {\n    const ctx = this.backdrop;\n\n    if (!this.gridEnabled) {\n      ctx.visible = false;\n      return;\n    }\n\n    const gridSize = this.options.gridSize;\n    const gridOffsetX = this.visibleLeft % gridSize;\n    const gridOffsetY = this.visibleTop % gridSize;\n\n    ctx.visible = true;\n    ctx.clear();\n    ctx.lineStyle(5, this.options.gridColor);\n    ctx.position.x = this.visibleLeft;\n    ctx.position.y = this.visibleTop;\n\n    for (let x = -gridOffsetX; x < this.visibleWidth; x += gridSize) {\n      ctx.moveTo(x, 0);\n      ctx.lineTo(x, this.visibleHeight + gridSize);\n    }\n\n    for (let y = -gridOffsetY; y < this.visibleHeight; y += gridSize) {\n      ctx.moveTo(0, y);\n      ctx.lineTo(this.visibleWidth + gridSize, y);\n    }\n  }\n  */\n\n  initWebGL(canvas) {\n    const gl = this.gl = canvas.getContext('webgl', {\n      antialias: true,\n      preserveDrawingBuffer: true,\n      premultipliedAlpha: true\n    });\n\n    const program = this.createProgram(\n      this.createShader(gl.VERTEX_SHADER, SHADER_VERTEX),\n      this.createShader(gl.FRAGMENT_SHADER, SHADER_FRAGMENT)\n    );\n    gl.useProgram(program);\n\n    // Set up for data buffer\n    gl.bindBuffer(gl.ARRAY_BUFFER, gl.createBuffer());\n\n    // First pass through attributes to count total vertex size and index by name\n    const numAttribs = gl.getProgramParameter(program, gl.ACTIVE_ATTRIBUTES);\n    const attribs = {};\n    let vertexSize = 0;\n    for (let i = 0; i < numAttribs; i++) {\n      const info = gl.getActiveAttrib(program, i);\n      const size = TYPE_SIZES[info.type];\n      vertexSize += size;\n      attribs[info.name] = i;\n    }\n\n    // Second pass through attributes to set up attribute pointers into the buffer\n    let pos = 0;\n    for (let i = 0; i < numAttribs; i++) {\n      const info = gl.getActiveAttrib(program, i);\n      const size = TYPE_SIZES[info.type];\n      gl.vertexAttribPointer(i, size, gl.FLOAT, false, vertexSize * 4, pos * 4);\n      gl.enableVertexAttribArray(i);\n      pos += size;\n    }\n\n    // Index uniform locations by name\n    const uniforms = {};\n    const numUniforms = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\n    for (let i = 0; i < numUniforms; i++) {\n      const info = gl.getActiveUniform(program, i);\n      uniforms[info.name] = gl.getUniformLocation(program, info.name);\n    }\n\n    const buffer = new Float32Array(200000);\n\n    Object.assign(this, { gl, uniforms, attribs, vertexSize, buffer });\n  }\n\n  createShader(type, source) {\n    const shader = this.gl.createShader(type);\n    this.gl.shaderSource(shader, source);\n    this.gl.compileShader(shader);\n    const success = this.gl.getShaderParameter(shader, this.gl.COMPILE_STATUS);\n    if (success) { return shader; }\n\n    // console.log('shader', type, 'failed to compile', this.gl.getShaderInfoLog(shader));\n    this.gl.deleteShader(shader);\n  }\n\n  createProgram(vertexShader, fragmentShader) {\n    const program = this.gl.createProgram();\n    this.gl.attachShader(program, vertexShader);\n    this.gl.attachShader(program, fragmentShader);\n    this.gl.linkProgram(program);\n    const success = this.gl.getProgramParameter(program, this.gl.LINK_STATUS);\n    if (success) { return program; }\n\n    // console.log(this.gl.getProgramInfoLog(program));\n    this.gl.deleteProgram(program);\n  }\n\n  calculateBufferSizeForScene() {\n    return Object.values(this.scene).reduce((acc, item) =>\n      acc + (item.shape.length - 0.5) * this.vertexSize * 4, 0);\n  }\n\n  fillBufferFromScene() {\n    let vertexCount = 0;\n    let bufferPos = 0;\n    let visible, shape, position, scale, rotation,\n        deltaPosition, deltaScale, deltaRotation, color;\n\n    const sceneKeys = Object.keys(this.scene);\n    sceneKeys.sort();\n    const sceneItems = sceneKeys.map(key => this.scene[key]);\n\n    const bufferVertex = (shapeIdx, lineIdx) => {\n      vertexCount++;\n      this.buffer[bufferPos++] = lineIdx;\n      this.buffer[bufferPos++] = shape[shapeIdx - 1][0];\n      this.buffer[bufferPos++] = shape[shapeIdx - 1][1];\n      this.buffer[bufferPos++] = shape[shapeIdx][0];\n      this.buffer[bufferPos++] = shape[shapeIdx][1];\n      this.buffer[bufferPos++] = position[0];\n      this.buffer[bufferPos++] = position[1];\n      this.buffer[bufferPos++] = scale;\n      this.buffer[bufferPos++] = rotation;\n      this.buffer[bufferPos++] = deltaPosition[0];\n      this.buffer[bufferPos++] = deltaPosition[1];\n      this.buffer[bufferPos++] = deltaScale;\n      this.buffer[bufferPos++] = deltaRotation;\n      this.buffer[bufferPos++] = color[0];\n      this.buffer[bufferPos++] = color[1];\n      this.buffer[bufferPos++] = color[2];\n      this.buffer[bufferPos++] = color[3];\n    };\n\n    for (let spriteIdx = 0; spriteIdx < sceneItems.length; spriteIdx++) {\n      ({\n        visible, shape, position=[0.0, 0.0], scale=0, rotation=0,\n        deltaPosition=[0.0, 0.0], deltaScale=0.0, deltaRotation=0.0,\n        color=[1, 1, 1, 1]\n      } = sceneItems[spriteIdx]);\n      if (!visible) { continue; }\n      bufferVertex(1, 0);\n      for (let shapeIdx = 1; shapeIdx < shape.length; shapeIdx += 1) {\n        bufferVertex(shapeIdx, 0);\n        bufferVertex(shapeIdx, 1);\n        bufferVertex(shapeIdx, 2);\n        bufferVertex(shapeIdx, 3);\n      }\n      bufferVertex(shape.length - 1, 3);\n    }\n\n    return vertexCount;\n  }\n\n  setUniforms(data) {\n    Object.keys(data).forEach(key =>\n      this.gl[`uniform${data[key].length}f`]\n        .call(this.gl, this.uniforms[key], ...data[key]));\n  }\n}\n\nCore.registerSystem('ViewportWebGL', ViewportWebGL);\n\nconst SHADER_VERTEX = `\n// see also: http://m1el.github.io/woscope-how/\nprecision mediump float;\n#define EPS 1E-6\n#define PI 3.141592653589793\n#define PI_2 6.283185307179586\n#define PI_H 1.5707963267948966\n#define PI_Q 0.7853981633974483\n\nuniform float uTime;\nuniform float uLineWidth;\nuniform float uCameraZoom;\nuniform float uCameraRotation;\nuniform vec2 uCameraOrigin;\nuniform vec2 uViewportSize;\n\nattribute float aIdx;\nattribute vec4 aLine;\nattribute vec4 aTransform;\nattribute vec4 aDeltaTransform;\nattribute vec4 aColor;\n\nvarying vec4 uvl;\nvarying vec4 vColor;\nvarying float vLen;\n\nvoid main () {\n  float c, s;\n\n  mat3 mViewportToClipSpace = mat3(\n    2.0 / uViewportSize.x, 0, 0,\n    0, -2.0 / uViewportSize.y, 0,\n    0, 0, 0\n  );\n\n  c = cos(uCameraRotation);\n  s = sin(uCameraRotation);\n  mat3 mCameraRotation = mat3(\n    c, -s, 0.0,\n    s, c, 0.0,\n    0.0, 0.0, 1.0\n  );\n\n  mat3 mCameraOrigin = mat3(\n    1.0, 0.0, 0.0,\n    0.0, 1.0, 0.0,\n    -uCameraOrigin.x, -uCameraOrigin.y, 1.0\n  );\n\n  mat3 mCameraZoom = mat3(\n    uCameraZoom, 0.0, 0.0,\n    0.0, uCameraZoom, 0.0,\n    0.0, 0.0, 1.0\n  );\n\n  c = cos(-aTransform.w + PI_H + (aDeltaTransform.w * uTime));\n  s = sin(-aTransform.w + PI_H + (aDeltaTransform.w * uTime));\n  mat3 mRotation = mat3(\n    c, -s, 0.0,\n    s, c, 0.0,\n    0.0, 0.0, 1.0\n  );\n\n  mat3 mPosition = mat3(\n    1.0, 0.0, 0.0,\n    0.0, 1.0, 0.0,\n    aTransform.x + (aDeltaTransform.x * uTime), aTransform.y + (aDeltaTransform.y * uTime), 1.0\n  );\n\n  mat3 mScale = mat3(\n    aTransform.z + (aDeltaTransform.z * uTime), 0.0, 0.0,\n    0.0, aTransform.z + (aDeltaTransform.z * uTime), 0.0,\n    0.0, 0.0, 1.0\n  );\n\n  // TODO: Move some of these matrices into JS?\n  mat3 mAll = mViewportToClipSpace\n    * mCameraZoom * mCameraRotation * mCameraOrigin\n    * mPosition * mScale * mRotation;\n\n  vec2 tStart = (mAll * vec3(aLine.xy, 1)).xy;\n  vec2 tEnd = (mAll * vec3(aLine.zw, 1)).xy;\n\n  float tang;\n  vec2 current;\n  float idx = aIdx;\n  if (idx >= 2.0) {\n    current = tEnd;\n    tang = 1.0;\n  } else {\n    current = tStart;\n    tang = -1.0;\n  }\n\n  float side = (mod(idx, 2.0)-0.5)*2.0;\n  vec2 dir = tEnd-tStart;\n\n  vColor = aColor;\n\n  uvl.xy = vec2(tang, side);\n  uvl.w = floor(aIdx / 4.0 + 0.5);\n  uvl.z = length(dir);\n  if (uvl.z > EPS) {\n    dir = dir / uvl.z;\n  } else {\n    // If the segment is too short draw a square;\n    dir = vec2(1.0, 0.0);\n  }\n  vec2 norm = vec2(-dir.y, dir.x);\n  gl_Position = vec4((current+(tang*dir+norm*side)*uLineWidth),0.0,1.0);\n}\n`;\n\nconst SHADER_FRAGMENT = `\nprecision mediump float;\nvarying vec4 vColor;\n\nvoid main (void)\n{\n    gl_FragColor = vColor;\n}\n`;\n\nexport class WebGLSprite extends Core.Component {\n  static defaults() {\n    return {\n      name: null,\n      color: 0xffffff,\n      size: 100,\n      width: null,\n      height: null,\n      drawn: false,\n      visible: false\n    };\n  }\n  static create(attrs) {\n    const c = super.create(attrs);\n    if (!c.width) { c.width = c.size; }\n    if (!c.height) { c.height = c.size; }\n    return c;\n  }\n}\n\nCore.registerComponent('Sprite', WebGLSprite);\n\nconst spriteRegistry = {};\nexport function registerSprite(name, sprite) {\n  spriteRegistry[name] = sprite;\n}\nexport function getSprite(name) {\n  return name in spriteRegistry ? spriteRegistry[name] : spriteRegistry.default;\n}\n\nconst defaultShape = [ [-0.5, 0], [0.5, 0], [0, 0], [0, -0.5], [0, 0.5], [0, 0] ];\nfor (let idx = 0; idx < 8; idx++) {\n  const rot = idx * (PI2 / 8);\n  defaultShape.push([ 0.5 * Math.cos(rot), 0.5 * Math.sin(rot) ]);\n}\ndefaultShape.push([ 0.5, 0 ]);\n\nregisterSprite('default', (/*sprite, entityId*/) => {\n  return defaultShape;\n});\n\nconst heroShape = [\n  [ 0.0,     0.5],\n  [ 0.125,   0.4167],\n  [ 0.25,    0.0],\n  [ 0.375,  -0.1667],\n  [ 0.25,   -0.5],\n  [ 0.125,  -0.5],\n  [ 0.0625, -0.25],\n  [-0.0625, -0.25],\n  [-0.125,  -0.5],\n  [-0.25,   -0.5],\n  [-0.375,  -0.1667],\n  [-0.25,    0.0],\n  [-0.125,   0.4167],\n  [ 0.0,     0.5],\n];\nregisterSprite('hero', () => {\n  return heroShape;\n});\n\nconst repulsorShape = [\n [-0.50,    0.0],\n [-0.375,  -0.50],\n [-0.25,   -0.50],\n [-0.0625,  0.25],\n [ 0.0625,  0.25],\n [ 0.25,   -0.50],\n [ 0.375,  -0.50],\n [ 0.50,    0.0],\n [ 0.375,   0.50],\n [ 0.25,    0.50],\n [ 0.0625, -0.25],\n [-0.0625, -0.25],\n [-0.25,    0.50],\n [-0.375,   0.50],\n [-0.50,    0.0]\n];\n\nregisterSprite('repulsor', (/*sprite, entityId, timeDelta, world*/) => {\n  return repulsorShape;\n});\n\nregisterSprite('asteroid', (sprite) => {\n  let idx;\n\n  if (!sprite.points) {\n    const NUM_POINTS = 7 + Math.floor(8 * Math.random());\n    const MAX_RADIUS = 0.50;\n    const MIN_RADIUS = 0.35;\n    const ROTATION = PI2 / NUM_POINTS;\n\n    sprite.points = [];\n    for (idx = 0; idx < NUM_POINTS; idx++) {\n      const rot = idx * ROTATION;\n      const dist = (Math.random() * (MAX_RADIUS - MIN_RADIUS)) + MIN_RADIUS;\n      sprite.points.push([dist * Math.cos(rot), dist * Math.sin(rot)]);\n    }\n\n    sprite.points.push(sprite.points[0]);\n  }\n\n  return sprite.points;\n});\n\nregisterSprite('mine', (sprite/*, entityId, timeDelta, world*/) => {\n  if (!sprite.drawn) {\n    let NUM_POINTS = 10 + Math.floor(10 * Math.random());\n    if (NUM_POINTS % 2 !== 0) { NUM_POINTS++; }\n    const ROTATION = PI2 / NUM_POINTS;\n    const MAX_RADIUS = 0.6;\n    const MIN_RADIUS = 0.1;\n\n    let even = false;\n\n    sprite.legs = [];\n    for (let idx = 0; idx < NUM_POINTS; idx++) {\n      const dist = even ? 0.1 : (Math.random() * (MAX_RADIUS - MIN_RADIUS)) + MIN_RADIUS;\n      const rot = idx * ROTATION;\n      sprite.legs.push([ dist * Math.cos(rot), dist * Math.sin(rot) ]);\n      even = !even;\n    }\n    sprite.legs.push([ sprite.legs[0][0], sprite.legs[0][1] ]);\n    sprite.shape = sprite.legs;\n    sprite.drawn = true;\n  }\n\n  return sprite.shape;\n\n  /*\n  if (sprite.drawn && Math.random() < 0.15) {\n    sprite.shape = sprite.legs.map(p => [\n      p[0] * (0.9 + 0.5 * Math.random()),\n      p[1] * (0.9 + 0.5 * Math.random())\n    ]);\n  }\n  return sprite.shape;\n  */\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/viewportWebGL.js","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_is-object.js\n// module id = 31\n// module chunks = 7","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_property-desc.js\n// module id = 32\n// module chunks = 7","exports.f = {}.propertyIsEnumerable;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-pie.js\n// module id = 33\n// module chunks = 7","// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return Object(defined(it));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-object.js\n// module id = 34\n// module chunks = 7","import * as Core from '../lib/core';\r\n\r\nimport './position';\r\nimport './motion';\r\nimport { MSG_DAMAGE } from './health';\r\n\r\nimport Vector2D from '../lib/Vector2D';\r\n\r\nexport class BounceComponent extends Core.Component {\r\n  static defaults() {\r\n    return {\r\n      mass: 1000.0\r\n    };\r\n  }\r\n}\r\n\r\nCore.registerComponent('Bounce', BounceComponent);\r\n\r\nexport class BounceSystem extends Core.System {\r\n\r\n  matchComponent() { return 'Bounce'; }\r\n\r\n  initialize() {\r\n    this.dn = new Vector2D();\r\n    this.dt = new Vector2D();\r\n    this.mt = new Vector2D();\r\n    this.v1 = new Vector2D();\r\n    this.v2 = new Vector2D();\r\n    this.v1n = new Vector2D();\r\n    this.v1t = new Vector2D();\r\n    this.v2n = new Vector2D();\r\n    this.v2t = new Vector2D();\r\n  }\r\n\r\n  update(timeDelta) {\r\n    const entities = this.world;\r\n    const matches = this.getMatchingComponents();\r\n\r\n    const pairs = {};\r\n    for (const aEntityId in matches) {\r\n\r\n      // const bounce = matches[aEntityId];\r\n      const aCollidable = entities.get('Collidable', aEntityId);\r\n\r\n      for (const bEntityId in aCollidable.inCollisionWith) {\r\n        const pair = [aEntityId, bEntityId];\r\n        pair.sort();\r\n        pairs[pair.join(':')] = pair;\r\n      }\r\n\r\n      // TODO: Process world boundary edge bounce?\r\n\r\n    }\r\n\r\n    for (const key in pairs) {\r\n      const aEntityId = pairs[key][0];\r\n      const aBouncer = entities.get('Bounce', aEntityId);\r\n      if (!aBouncer) { continue; }\r\n\r\n      const bEntityId = pairs[key][1];\r\n      const bBouncer = entities.get('Bounce', bEntityId);\r\n      if (!bBouncer) { continue; }\r\n\r\n      this.resolveElasticCollision(timeDelta, aEntityId, aBouncer, bEntityId, bBouncer);\r\n    }\r\n\r\n  }\r\n\r\n  // See also:\r\n  // http://en.m.wikipedia.org/wiki/Elastic_collision\r\n  // http://en.m.wikipedia.org/wiki/Dot_product\r\n  // https://github.com/Edifear/volleyball/blob/master/collision.html\r\n  // https://github.com/DominikWidomski/Processing/blob/master/sketch_canvas_red_particles/particles.pde#L47\r\n  resolveElasticCollision(timeDelta, aEntityId, aBouncer, bEntityId, bBouncer) {\r\n\r\n    const entities = this.world;\r\n\r\n    const aPosition = entities.get('Position', aEntityId);\r\n    const aSprite = entities.get('Sprite', aEntityId);\r\n    const aMotion = entities.get('Motion', aEntityId);\r\n\r\n    const bPosition = entities.get('Position', bEntityId);\r\n    const bSprite = entities.get('Sprite', bEntityId);\r\n    const bMotion = entities.get('Motion', bEntityId);\r\n\r\n    // First, back both entities off to try to prevent sticking\r\n    /*\r\n    aPosition.x -= aMotion.dx * timeDelta;\r\n    aPosition.y -= aMotion.dy * timeDelta;\r\n    bPosition.x -= bMotion.dx * timeDelta;\r\n    bPosition.y -= bMotion.dy * timeDelta;\r\n    const radii, dx, dy;\r\n    while (true) {\r\n      aPosition.x -= aMotion.dx * timeDelta;\r\n      aPosition.y -= aMotion.dy * timeDelta;\r\n      bPosition.x -= bMotion.dx * timeDelta;\r\n      bPosition.y -= bMotion.dy * timeDelta;\r\n\r\n      radii = (aSprite.size + bSprite.size) / 2;\r\n      dx = aPosition.x - bPosition.x;\r\n      dy = aPosition.y - bPosition.y;\r\n      if (dx*dx + dy*dy > radii*radii) { break; }\r\n    }\r\n    */\r\n\r\n    // Vector between entities\r\n    this.dn.setValues(aPosition.x - bPosition.x, aPosition.y - bPosition.y);\r\n\r\n    // Distance between entities\r\n    const delta = this.dn.magnitude();\r\n\r\n    // Normal vector of the collision plane\r\n    this.dn.normalize();\r\n\r\n    // Tangential vector of the collision plane\r\n    this.dt.setValues(this.dn.y, -this.dn.x);\r\n\r\n    // HACK: avoid divide by zero\r\n    if (delta === 0) { bPosition.x += 0.01; }\r\n\r\n    // Get total mass for entities\r\n    const m1 = aBouncer.mass;\r\n    const m2 = bBouncer.mass;\r\n    const M = m1 + m2;\r\n\r\n    // Minimum translation vector to push entities apart\r\n    this.mt.setValues(\r\n      this.dn.x * (aSprite.width + bSprite.width - delta) * 1.1,\r\n      this.dn.y * (aSprite.height + bSprite.height - delta) * 1.1\r\n    );\r\n\r\n    // Velocity vectors of entities before collision\r\n    this.v1.setValues((aMotion) ? aMotion.dx : 0, (aMotion) ? aMotion.dy : 0);\r\n    this.v2.setValues((bMotion) ? bMotion.dx : 0, (bMotion) ? bMotion.dy : 0);\r\n\r\n    // split the velocity vector of the first entity into a normal\r\n    // and a tangential component in respect of the collision plane\r\n    this.v1n.setValues(\r\n      this.dn.x * this.v1.dot(this.dn),\r\n      this.dn.y * this.v1.dot(this.dn)\r\n    );\r\n    this.v1t.setValues(\r\n      this.dt.x * this.v1.dot(this.dt),\r\n      this.dt.y * this.v1.dot(this.dt)\r\n    );\r\n\r\n    // split the velocity vector of the second entity into a normal\r\n    // and a tangential component in respect of the collision plane\r\n    this.v2n.setValues(\r\n      this.dn.x * this.v2.dot(this.dn),\r\n      this.dn.y * this.v2.dot(this.dn)\r\n    );\r\n    this.v2t.setValues(\r\n      this.dt.x * this.v2.dot(this.dt),\r\n      this.dt.y * this.v2.dot(this.dt)\r\n    );\r\n\r\n    // calculate new velocity vectors of the entities, the tangential\r\n    // component stays the same, the normal component changes analog to\r\n    // the 1-Dimensional case\r\n\r\n    if (aMotion) {\r\n      const aFactor = (m1 - m2) / M * this.v1n.magnitude() +\r\n                    2 * m2 / M * this.v2n.magnitude();\r\n      aMotion.dx = this.v1t.x + this.dn.x * aFactor;\r\n      aMotion.dy = this.v1t.y + this.dn.y * aFactor;\r\n      this.processDamage(aEntityId, bEntityId, aMotion, aBouncer, m1);\r\n    }\r\n\r\n    if (bMotion) {\r\n      const bFactor = (m2 - m1) / M * this.v2n.magnitude() +\r\n                    2 * m1 / M * this.v1n.magnitude();\r\n      bMotion.dx = this.v2t.x - this.dn.x * bFactor;\r\n      bMotion.dy = this.v2t.y - this.dn.y * bFactor;\r\n      this.processDamage(bEntityId, aEntityId, bMotion, bBouncer, m1);\r\n    }\r\n\r\n  }\r\n\r\n  processDamage(eid, c_eid, v_motion, bouncer, m1) {\r\n    if (!bouncer.damage) { return; }\r\n\r\n    // Convert a fraction of the rebound velocity into damage by mass\r\n    const dmg = Math.sqrt(v_motion.dx * v_motion.dx + v_motion.dy * v_motion.dy) *\r\n                bouncer.damage * m1;\r\n\r\n    this.world.publish(MSG_DAMAGE, {\r\n      to: eid,\r\n      from: c_eid,\r\n      amount: dmg / 2\r\n    });\r\n\r\n    this.world.publish(MSG_DAMAGE, {\r\n      to: c_eid,\r\n      from: eid,\r\n      amount: dmg / 2\r\n    });\r\n  }\r\n\r\n}\r\n\r\nCore.registerSystem('Bounce', BounceSystem);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/bounce.js","module.exports = {};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iterators.js\n// module id = 36\n// module chunks = 7","import * as Core from '../lib/core';\r\n\r\nexport class Collidable extends Core.Component {\r\n  static defaults() {\r\n    return {\r\n      inCollision: false,\r\n      inCollisionWith: {}\r\n    };\r\n  }\r\n}\r\n\r\nCore.registerComponent('Collidable', Collidable);\r\n\r\nlet match, matches, entityId, entityId2, position, aCollidable, bCollidable, dx, dy, radii;\r\n\r\nexport class CollisionSystem extends Core.System {\r\n\r\n  defaultOptions() {\r\n    return {\r\n      positionSystemName: 'Position'\r\n    };\r\n  }\r\n\r\n  matchComponent() { return 'Collidable'; }\r\n\r\n  initialize() {\r\n    this.positionSystem = this.world.getSystem(this.options.positionSystemName);\r\n    this.width = this.options.width;\r\n    this.height = this.options.height;\r\n    this.retrieveBounds = {};\r\n    this.checkCollisionBound = (neighbor, component) =>\r\n      this.checkCollision(neighbor, component);\r\n  }\r\n\r\n  update(/* timeDelta */) {\r\n    matches = this.getMatchingComponents();\r\n    for (entityId in matches) {\r\n      match = matches[entityId];\r\n      match.inCollision = false;\r\n      for (entityId2 in match.inCollisionWith) {\r\n        delete match.inCollisionWith[entityId2];\r\n      }\r\n    }\r\n    for (entityId in matches) {\r\n      position = this.world.get('Position', entityId);\r\n      if (position) {\r\n        this.positionSystem.quadtree.iterate(position, this.checkCollisionBound, position);\r\n      }\r\n    }\r\n  }\r\n\r\n  checkCollision(bPosition, aPosition) {\r\n    if (aPosition.entityId === bPosition.entityId) { return; }\r\n\r\n    aCollidable = this.world.get('Collidable', aPosition.entityId);\r\n    bCollidable = this.world.get('Collidable', bPosition.entityId);\r\n\r\n    if (!aCollidable || !bCollidable) { return; }\r\n\r\n    dx = aPosition.x - bPosition.x;\r\n    dy = aPosition.y - bPosition.y;\r\n\r\n    // TODO: Pluggable shape intersection detection here?\r\n\r\n    // Check collision circle via distance\r\n    radii = (aPosition.width + bPosition.width) / 2;\r\n    if (dx*dx + dy*dy > radii*radii) { return; }\r\n\r\n    aCollidable.inCollision = true;\r\n    aCollidable.inCollisionWith[bPosition.entityId] = 1;\r\n\r\n    bCollidable.inCollision = true;\r\n    bCollidable.inCollisionWith[aPosition.entityId] = 1;\r\n  }\r\n\r\n  draw(/* timeDelta */) {\r\n    const g = this.getDebugGraphics();\r\n    if (!g) { return; }\r\n\r\n    g.lineStyle(4, 0x999999);\r\n    const collidables = this.world.get('Collidable');\r\n    for (const entityId in collidables) {\r\n      const collidable = collidables[entityId];\r\n      const position = this.world.get('Position', entityId);\r\n\r\n      if (collidable.inCollision) {\r\n        g.drawCircle(position.x, position.y, 40);\r\n      }\r\n    }\r\n\r\n  }\r\n}\r\n\r\nCore.registerSystem('Collision', CollisionSystem);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/collision.js","module.exports = { \"default\": require(\"core-js/library/fn/object/keys\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/object/keys.js\n// module id = 38\n// module chunks = 7","import { Component, System, registerComponent, registerSystem } from '../lib/core';\n\nexport class PlayerInputSteering extends Component {\n  static defaults() {\n    return {\n      active: true,\n      radPerSec: Math.PI * 2\n    };\n  }\n}\n\nregisterComponent('PlayerInputSteering', PlayerInputSteering);\n\nconst PI2 = Math.PI * 2;\n\nexport class PlayerInputSteeringSystem extends System {\n\n  defaultOptions() {\n    return {\n      gamepadDeadzone: 0.2\n    };\n  }\n\n  matchComponent() { return 'PlayerInputSteering'; }\n\n  initialize() {\n    this.gamepad = { active: false };\n    this.pointer = { active: false, x: 0, y: 0 };\n    this.keys = { active: false };\n    this.touch = { active: false, x: 0, y: 0 };\n\n    this.world\n      .subscribe('mouseDown', (msg, cursorPosition) =>\n        this.setPointer(true, cursorPosition))\n      .subscribe('mouseUp', (msg, cursorPosition) =>\n        this.setPointer(false, cursorPosition))\n      .subscribe('mouseMove', (msg, cursorPosition) =>\n        this.setPointer(this.pointer.active, cursorPosition));\n\n    const windowEvents = {\n      keydown: this.handleKeyDown,\n      keyup: this.handleKeyUp\n    };\n    Object.keys(windowEvents)\n      .forEach(k => window.addEventListener(k, windowEvents[k].bind(this)));\n  }\n\n  setPointer(active, position) {\n    this.pointer.active = active;\n    this.pointer.x = position.x;\n    this.pointer.y = position.y;\n  }\n\n  update(timeDelta) {\n    this.updateGamepads(timeDelta);\n    this.updateKeyboard(timeDelta);\n    super.update(timeDelta);\n  }\n\n  updateComponent(timeDelta, entityId, steering) {\n    const thruster = this.world.get('Thruster', entityId);\n    const motion = this.world.get('Motion', entityId);\n\n    thruster.active = true;\n    thruster.stop = false;\n\n    if (this.keys.active) {\n      return this.updateComponentFromKeyboard(timeDelta, entityId, steering);\n    }\n\n    if (this.pointer.active) {\n      return this.updateComponentFromPointer(timeDelta, entityId, steering);\n    }\n\n    if (this.gamepad.active) {\n      return this.updateComponentFromGamepad(timeDelta, entityId, steering);\n    }\n\n    thruster.stop = true;\n    motion.drotation = 0;\n  }\n\n  updateComponentFromPointer(timeDelta, entityId, steering) {\n    const position = this.world.get('Position', entityId);\n    this.updateMotionFromTargetAngle(timeDelta, entityId, steering,\n      Math.atan2(this.pointer.y - position.y, this.pointer.x - position.x));\n  }\n\n  updateComponentFromGamepad(timeDelta, entityId, steering) {\n    this.updateMotionFromTargetAngle(timeDelta, entityId, steering,\n      Math.atan2(this.gamepad.axis1, this.gamepad.axis0));\n  }\n\n  updateComponentFromKeyboard(timeDelta, entityId, steering) {\n    const thruster = this.world.get('Thruster', entityId);\n    const motion = this.world.get('Motion', entityId);\n\n    const dleft  = (this.keys[65] || this.keys[37] || this.gamepad.button13);\n    const dright = (this.keys[68] || this.keys[39] || this.gamepad.button14);\n    const dup    = (this.keys[87] || this.keys[38] || this.gamepad.button11);\n    // const ddown  = (this.keys[83] || this.keys[40] || this.gamepad.button12);\n\n    if (dup) {\n      thruster.active = true;\n    } else {\n      thruster.stop = true;\n    }\n\n    const direction = dleft ? -1 : (dright ? 1 : 0);\n    const targetDr = direction * steering.radPerSec;\n    motion.drotation = targetDr;\n  }\n\n  updateGamepads() {\n    const gamepads = navigator.getGamepads ? navigator.getGamepads() : [];\n\n    // TODO: specify which gamepad, i.e. for multiplayer\n    for (let i = 0; i < gamepads.length; i++) {\n      const gp = gamepads[i];\n      if (!gp || !gp.connected) continue;\n      gp.buttons.forEach((val, idx) => this.gamepad[`button${idx}`] = val.pressed);\n      gp.axes.forEach((val, idx) => this.gamepad[`axis${idx}`] = val);\n      break; // stop after the first gamepad\n    }\n\n    Object.keys(this.gamepad).forEach(k => {\n      if (!this.gamepad[k]) { delete this.gamepad[k]; }\n    });\n\n    const axisX = this.gamepad.axis0;\n    const axisY = this.gamepad.axis1;\n    this.gamepad.active =\n      (Math.abs(axisX) > 0 || Math.abs(axisY) > 0) &&\n      (Math.sqrt(axisX * axisX + axisY * axisY) > this.options.gamepadDeadzone);\n  }\n\n  updateKeyboard() {\n    const dleft  = (this.keys[65] || this.keys[37] || this.gamepad.button13);\n    const dright = (this.keys[68] || this.keys[39] || this.gamepad.button14);\n    const dup    = (this.keys[87] || this.keys[38] || this.gamepad.button11);\n    const ddown  = (this.keys[83] || this.keys[40] || this.gamepad.button12);\n\n    this.keys.active = (dleft || dright || dup || ddown);\n  }\n\n  handleKeyDown(ev) {\n    this.keys[ev.keyCode] = true;\n    ev.preventDefault();\n  }\n\n  handleKeyUp(ev) {\n    delete this.keys[ev.keyCode];\n    ev.preventDefault();\n  }\n\n  updateMotionFromTargetAngle(timeDelta, entityId, steering, targetAngleRaw) {\n    const position = this.world.get('Position', entityId);\n    const motion = this.world.get('Motion', entityId);\n\n    const targetAngle = (targetAngleRaw < 0) ?\n      targetAngleRaw + PI2 : targetAngleRaw;\n\n    // Pick the direction from current to target angle\n    let direction = (targetAngle < position.rotation) ? -1 : 1;\n\n    // If the offset between the angles is more than half a circle, go\n    // the other way because it'll be shorter.\n    const offset = Math.abs(targetAngle - position.rotation);\n    if (offset > Math.PI) {\n      direction = 0 - direction;\n    }\n\n    // Work out the desired delta-rotation to steer toward target\n    const targetDr = direction * Math.min(steering.radPerSec, offset / timeDelta);\n\n    // Calculate the delta-rotation impulse required to meet the goal,\n    // but constrain to the capability of the steering thrusters\n    let impulseDr = (targetDr - motion.drotation);\n    if (Math.abs(impulseDr) > steering.radPerSec) {\n      if (impulseDr > 0) {\n        impulseDr = steering.radPerSec;\n      } else if (impulseDr < 0) {\n        impulseDr = 0 - steering.radPerSec;\n      }\n    }\n\n    motion.drotation += impulseDr;\n  }\n\n}\n\nregisterSystem('PlayerInputSteering', PlayerInputSteeringSystem);\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/playerInputSteering.js","module.exports = { \"default\": require(\"core-js/library/fn/object/assign\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/object/assign.js\n// module id = 40\n// module chunks = 7","var id = 0;\nvar px = Math.random();\nmodule.exports = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_uid.js\n// module id = 41\n// module chunks = 7","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_ctx.js\n// module id = 42\n// module chunks = 7","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-primitive.js\n// module id = 43\n// module chunks = 7","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_cof.js\n// module id = 44\n// module chunks = 7","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_defined.js\n// module id = 45\n// module chunks = 7","// 7.1.4 ToInteger\nvar ceil = Math.ceil;\nvar floor = Math.floor;\nmodule.exports = function (it) {\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-integer.js\n// module id = 46\n// module chunks = 7","var shared = require('./_shared')('keys');\nvar uid = require('./_uid');\nmodule.exports = function (key) {\n  return shared[key] || (shared[key] = uid(key));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_shared-key.js\n// module id = 47\n// module chunks = 7","var global = require('./_global');\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || (global[SHARED] = {});\nmodule.exports = function (key) {\n  return store[key] || (store[key] = {});\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_shared.js\n// module id = 48\n// module chunks = 7","// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_enum-bug-keys.js\n// module id = 49\n// module chunks = 7","exports.f = Object.getOwnPropertySymbols;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-gops.js\n// module id = 50\n// module chunks = 7","// most Object methods by ES6 should accept primitives\nvar $export = require('./_export');\nvar core = require('./_core');\nvar fails = require('./_fails');\nmodule.exports = function (KEY, exec) {\n  var fn = (core.Object || {})[KEY] || Object[KEY];\n  var exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function () { fn(1); }), 'Object', exp);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-sap.js\n// module id = 51\n// module chunks = 7","module.exports = true;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_library.js\n// module id = 52\n// module chunks = 7","// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\nvar anObject = require('./_an-object');\nvar dPs = require('./_object-dps');\nvar enumBugKeys = require('./_enum-bug-keys');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar Empty = function () { /* empty */ };\nvar PROTOTYPE = 'prototype';\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar createDict = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = require('./_dom-create')('iframe');\n  var i = enumBugKeys.length;\n  var lt = '<';\n  var gt = '>';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  require('./_html').appendChild(iframe);\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n  // createDict = iframe.contentWindow.Object;\n  // html.removeChild(iframe);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n  iframeDocument.close();\n  createDict = iframeDocument.F;\n  while (i--) delete createDict[PROTOTYPE][enumBugKeys[i]];\n  return createDict();\n};\n\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty();\n    Empty[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = createDict();\n  return Properties === undefined ? result : dPs(result, Properties);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-create.js\n// module id = 53\n// module chunks = 7","var def = require('./_object-dp').f;\nvar has = require('./_has');\nvar TAG = require('./_wks')('toStringTag');\n\nmodule.exports = function (it, tag, stat) {\n  if (it && !has(it = stat ? it : it.prototype, TAG)) def(it, TAG, { configurable: true, value: tag });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_set-to-string-tag.js\n// module id = 54\n// module chunks = 7","exports.f = require('./_wks');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_wks-ext.js\n// module id = 55\n// module chunks = 7","var global = require('./_global');\nvar core = require('./_core');\nvar LIBRARY = require('./_library');\nvar wksExt = require('./_wks-ext');\nvar defineProperty = require('./_object-dp').f;\nmodule.exports = function (name) {\n  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});\n  if (name.charAt(0) != '_' && !(name in $Symbol)) defineProperty($Symbol, name, { value: wksExt.f(name) });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_wks-define.js\n// module id = 56\n// module chunks = 7","var pIE = require('./_object-pie');\nvar createDesc = require('./_property-desc');\nvar toIObject = require('./_to-iobject');\nvar toPrimitive = require('./_to-primitive');\nvar has = require('./_has');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nexports.f = require('./_descriptors') ? gOPD : function getOwnPropertyDescriptor(O, P) {\n  O = toIObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return gOPD(O, P);\n  } catch (e) { /* empty */ }\n  if (has(O, P)) return createDesc(!pIE.f.call(O, P), O[P]);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-gopd.js\n// module id = 57\n// module chunks = 7","import { Component, System, registerComponent, registerSystem } from '../lib/core';\n\nimport { MSG_DESTROY } from './spawn';\n\n// Commonly used temp variables, pre-declared early.\nlet entityId, matches, sprite;\n\nexport class HordeSpawn extends Component {\n  static defaults() {\n    return { age: 0 };\n  }\n}\n\nregisterComponent('HordeSpawn', HordeSpawn);\n\nexport class HordeSpawnSystem extends System {\n\n  defaultOptions() {\n    return {\n      viewportSystemName: 'ViewportPixi',\n      minCount: 100,\n      offscreenTTL: 1.0,\n      spawnMargin: 100,\n      spawn: () => {}\n    };\n  }\n\n  initialize() {\n    this.spawnCount = 0;\n    this.viewportSystem = this.world.getSystem(this.options.viewportSystemName);\n  }\n\n  matchComponent() { return 'HordeSpawn'; }\n\n  update(timeDelta) {\n    matches = this.getMatchingComponents() || {};\n    this.spawnCount = Object.keys(matches).length;\n    if (this.spawnCount < this.options.minCount) {\n      this.spawnOffscreen();\n    }\n    for (entityId in matches) {\n      this.updateComponent(timeDelta, entityId, matches[entityId]);\n    }\n  }\n\n  updateComponent(timeDelta, entityId, hordespawn) {\n    sprite = this.world.get('Sprite', entityId);\n    if (sprite.visible) {\n      hordespawn.age = 0;\n    } else {\n      hordespawn.age += timeDelta;\n      if (hordespawn.age >= this.options.offscreenTTL) {\n        this.world.publish(MSG_DESTROY, entityId);\n      }\n    }\n  }\n\n  spawnOffscreen() {\n    const {visibleLeft, visibleRight, visibleTop, visibleBottom} = this.viewportSystem;\n    const margin = this.options.spawnMargin;\n    const w = (visibleRight + margin) - (visibleLeft - margin);\n    const h = (visibleBottom + margin) - (visibleTop - margin);\n    const r = Math.random();\n\n    let x, y;\n\n    if (r < 0.5) {\n      y = (visibleTop - margin) + (Math.random() * h);\n    } else {\n      x = (visibleLeft - margin) + (Math.random() * w);\n    }\n\n    if (r < 0.25) {\n      x = visibleLeft - margin;\n    } else if (r < 0.5) {\n      x = visibleRight + margin;\n    } else if (r < 0.75) {\n      y = visibleTop - margin;\n    } else {\n      y = visibleBottom + margin;\n    }\n\n    this.options.spawn(x, y);\n  }\n\n}\n\nregisterSystem('HordeSpawn', HordeSpawnSystem);\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/hordeSpawn.js","import { Component, System, registerComponent, registerSystem } from '../lib/core';\r\n\r\nexport class Repulsor extends Component {\r\n    static defaults() {\r\n      return {\r\n        active: true,\r\n        range: 500,\r\n        force: 200\r\n      };\r\n    }\r\n}\r\n\r\nregisterComponent('Repulsor', Repulsor);\r\n\r\nlet components, component, entityId, position, repulsor, repulsorPosition,\r\n    neighborSprite, neighborPosition, neighborMotion, repelAngle, repelForce,\r\n    dist;\r\n\r\nconst queryBounds = {};\r\n\r\nexport class RepulsorSystem extends System {\r\n\r\n  defaultOptions() {\r\n    return {\r\n      positionSystemName: 'Position'\r\n    };\r\n  }\r\n\r\n  matchComponent() { return 'Repulsor'; }\r\n\r\n  initialize() {\r\n    this.positionSystem = this.world.getSystem(this.options.positionSystemName);\r\n    this.applyRepulsionBound = (neighbor, component) =>\r\n      this.applyRepulsion(neighbor, component);\r\n  }\r\n\r\n  updateComponent(timeDelta, entityId, component) {\r\n    if (!component.active) { return; }\r\n\r\n    position = this.world.get('Position', entityId);\r\n\r\n    queryBounds.left = position.left - component.range;\r\n    queryBounds.right = position.right + component.range;\r\n    queryBounds.top = position.top - component.range;\r\n    queryBounds.bottom = position.bottom + component.range;\r\n\r\n    this.positionSystem.quadtree.iterate(queryBounds, this.applyRepulsionBound, entityId);\r\n  }\r\n\r\n  applyRepulsion(neighbor, repulsorId) {\r\n    if (entityId === neighbor.entityId) { return; }\r\n\r\n    neighborSprite = this.world.get('Sprite', neighbor.entityId);\r\n    if (neighborSprite.name !== 'mine') { return; }\r\n\r\n    repulsor = this.world.get('Repulsor', repulsorId);\r\n    repulsorPosition = this.world.get('Position', repulsorId);\r\n    neighborPosition = this.world.get('Position', neighbor.entityId);\r\n    neighborMotion = this.world.get('Motion', neighbor.entityId);\r\n\r\n    dist =\r\n      (neighborPosition.x - repulsorPosition.x) *\r\n      (neighborPosition.x - repulsorPosition.x)\r\n      +\r\n      (neighborPosition.y - repulsorPosition.y) *\r\n      (neighborPosition.y - repulsorPosition.y)\r\n    ;\r\n\r\n    if (dist > (repulsor.range * repulsor.range)) { return; }\r\n    // if (dist < repulsor.range) { return; }\r\n\r\n    repelAngle = Math.atan2(\r\n      repulsorPosition.y - neighborPosition.y,\r\n      repulsorPosition.x - neighborPosition.x\r\n    );\r\n\r\n    repelForce = -repulsor.force;\r\n\r\n    neighborMotion.dx += repelForce * Math.cos(repelAngle);\r\n    neighborMotion.dy += repelForce * Math.sin(repelAngle);\r\n  }\r\n\r\n  draw(/* timeDelta */) {\r\n    const g = this.getDebugGraphics();\r\n    if (!g) { return; }\r\n\r\n    g.lineStyle(4, 0x882222);\r\n    components = this.getMatchingComponents();\r\n    for (entityId in components) {\r\n      component = components[entityId];\r\n      position = this.world.get('Position', entityId);\r\n      g.drawCircle(position.x, position.y, component.range);\r\n    }\r\n  }\r\n\r\n}\r\n\r\nregisterSystem('Repulsor', RepulsorSystem);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/repulsor.js","\"use strict\";\n\nexports.__esModule = true;\n\nvar _assign = require(\"../core-js/object/assign\");\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _assign2.default || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/extends.js\n// module id = 60\n// module chunks = 7","module.exports = !require('./_descriptors') && !require('./_fails')(function () {\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', { get: function () { return 7; } }).a != 7;\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_ie8-dom-define.js\n// module id = 61\n// module chunks = 7","var isObject = require('./_is-object');\nvar document = require('./_global').document;\n// typeof document.createElement is 'object' in old IE\nvar is = isObject(document) && isObject(document.createElement);\nmodule.exports = function (it) {\n  return is ? document.createElement(it) : {};\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_dom-create.js\n// module id = 62\n// module chunks = 7","var has = require('./_has');\nvar toIObject = require('./_to-iobject');\nvar arrayIndexOf = require('./_array-includes')(false);\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\n\nmodule.exports = function (object, names) {\n  var O = toIObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) if (key != IE_PROTO) has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-keys-internal.js\n// module id = 63\n// module chunks = 7","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\n// eslint-disable-next-line no-prototype-builtins\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iobject.js\n// module id = 64\n// module chunks = 7","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer');\nvar min = Math.min;\nmodule.exports = function (it) {\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-length.js\n// module id = 65\n// module chunks = 7","// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\nvar has = require('./_has');\nvar toObject = require('./_to-object');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar ObjectProto = Object.prototype;\n\nmodule.exports = Object.getPrototypeOf || function (O) {\n  O = toObject(O);\n  if (has(O, IE_PROTO)) return O[IE_PROTO];\n  if (typeof O.constructor == 'function' && O instanceof O.constructor) {\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectProto : null;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-gpo.js\n// module id = 66\n// module chunks = 7","\"use strict\";\n\nexports.__esModule = true;\n\nvar _iterator = require(\"../core-js/symbol/iterator\");\n\nvar _iterator2 = _interopRequireDefault(_iterator);\n\nvar _symbol = require(\"../core-js/symbol\");\n\nvar _symbol2 = _interopRequireDefault(_symbol);\n\nvar _typeof = typeof _symbol2.default === \"function\" && typeof _iterator2.default === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = typeof _symbol2.default === \"function\" && _typeof(_iterator2.default) === \"symbol\" ? function (obj) {\n  return typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n} : function (obj) {\n  return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/typeof.js\n// module id = 67\n// module chunks = 7","'use strict';\nvar $at = require('./_string-at')(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\nrequire('./_iter-define')(String, 'String', function (iterated) {\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var index = this._i;\n  var point;\n  if (index >= O.length) return { value: undefined, done: true };\n  point = $at(O, index);\n  this._i += point.length;\n  return { value: point, done: false };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.string.iterator.js\n// module id = 68\n// module chunks = 7","'use strict';\nvar LIBRARY = require('./_library');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar hide = require('./_hide');\nvar has = require('./_has');\nvar Iterators = require('./_iterators');\nvar $iterCreate = require('./_iter-create');\nvar setToStringTag = require('./_set-to-string-tag');\nvar getPrototypeOf = require('./_object-gpo');\nvar ITERATOR = require('./_wks')('iterator');\nvar BUGGY = !([].keys && 'next' in [].keys()); // Safari has buggy iterators w/o `next`\nvar FF_ITERATOR = '@@iterator';\nvar KEYS = 'keys';\nvar VALUES = 'values';\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED) {\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function (kind) {\n    if (!BUGGY && kind in proto) return proto[kind];\n    switch (kind) {\n      case KEYS: return function keys() { return new Constructor(this, kind); };\n      case VALUES: return function values() { return new Constructor(this, kind); };\n    } return function entries() { return new Constructor(this, kind); };\n  };\n  var TAG = NAME + ' Iterator';\n  var DEF_VALUES = DEFAULT == VALUES;\n  var VALUES_BUG = false;\n  var proto = Base.prototype;\n  var $native = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT];\n  var $default = $native || getMethod(DEFAULT);\n  var $entries = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined;\n  var $anyNative = NAME == 'Array' ? proto.entries || $native : $native;\n  var methods, key, IteratorPrototype;\n  // Fix native\n  if ($anyNative) {\n    IteratorPrototype = getPrototypeOf($anyNative.call(new Base()));\n    if (IteratorPrototype !== Object.prototype && IteratorPrototype.next) {\n      // Set @@toStringTag to native iterators\n      setToStringTag(IteratorPrototype, TAG, true);\n      // fix for some old engines\n      if (!LIBRARY && !has(IteratorPrototype, ITERATOR)) hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  }\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if (DEF_VALUES && $native && $native.name !== VALUES) {\n    VALUES_BUG = true;\n    $default = function values() { return $native.call(this); };\n  }\n  // Define iterator\n  if ((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])) {\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG] = returnThis;\n  if (DEFAULT) {\n    methods = {\n      values: DEF_VALUES ? $default : getMethod(VALUES),\n      keys: IS_SET ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if (FORCED) for (key in methods) {\n      if (!(key in proto)) redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iter-define.js\n// module id = 69\n// module chunks = 7","module.exports = require('./_hide');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_redefine.js\n// module id = 70\n// module chunks = 7","// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\nvar $keys = require('./_object-keys-internal');\nvar hiddenKeys = require('./_enum-bug-keys').concat('length', 'prototype');\n\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return $keys(O, hiddenKeys);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-gopn.js\n// module id = 71\n// module chunks = 7","import * as Core from '../lib/core';\r\n\r\nexport class Expiration extends Core.Component {\r\n  static defaults() {\r\n    return { ttl: 0, age: 0 };\r\n  }\r\n}\r\nCore.registerComponent('Expiration', Expiration);\r\n\r\nexport class ExpirationSystem extends Core.System {\r\n  matchComponent() {\r\n    return 'Expiration';\r\n  }\r\n  updateComponent(timeDelta, entityId, expiration) {\r\n    expiration.age += timeDelta;\r\n    if (expiration.age >= expiration.ttl) {\r\n      this.world.destroy(entityId);\r\n    }\r\n  }\r\n}\r\nCore.registerSystem('Expiration', ExpirationSystem);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/expiration.js","import * as Core from '../lib/core';\r\n\r\nimport './position';\r\n\r\nimport Vector2D from '../lib/Vector2D';\r\n\r\nexport class Orbiter extends Core.Component {\r\n  static defaults() {\r\n    return {\r\n      name: null,\r\n      entityId: null,\r\n      angle: 0.0,\r\n      rotate: true,\r\n      radPerSec: Math.PI / 4\r\n    };\r\n  }\r\n}\r\nCore.registerComponent('Orbiter', Orbiter);\r\n\r\nexport class OrbiterSystem extends Core.System {\r\n\r\n  matchComponent() { return 'Orbiter'; }\r\n\r\n  initialize() {\r\n    this.vOrbited = new Vector2D();\r\n    this.vOrbiter = new Vector2D();\r\n    this.vOld = new Vector2D();\r\n  }\r\n\r\n  updateComponent(timeDelta, entityId, orbiter) {\r\n\r\n    // Look up the orbited entity ID, if only name given.\r\n    if (orbiter.name && !orbiter.entityId) {\r\n      orbiter.entityId = Core.getComponent('Name')\r\n        .findEntityByName(this.world, orbiter.name);\r\n    }\r\n\r\n    const pos = this.world.get('Position', entityId);\r\n    const oPos = this.world.get('Position', orbiter.entityId);\r\n\r\n    this.vOrbited.setValues(oPos.x, oPos.y);\r\n    this.vOrbiter.setValues(pos.x, pos.y);\r\n\r\n    const angleDelta = timeDelta * orbiter.radPerSec;\r\n    this.vOrbiter.rotateAround(this.vOrbited, angleDelta);\r\n\r\n    this.vOld.setValues(pos.x, pos.y);\r\n    pos.x = this.vOrbiter.x;\r\n    pos.y = this.vOrbiter.y;\r\n    if (orbiter.rotate) {\r\n      pos.rotation = this.vOld.angleTo(this.vOrbiter);\r\n    }\r\n\r\n  }\r\n}\r\nCore.registerSystem('Orbiter', OrbiterSystem);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/orbiter.js","import * as Core from '../lib/core';\r\n\r\nexport class Pathfinder extends Core.Component {\r\n  static defaults() {\r\n    return {\r\n      width: 5000,\r\n      height: 5000\r\n    };\r\n  }\r\n}\r\n\r\nCore.registerComponent('Pathfinder', Pathfinder);\r\n\r\nexport class SpaceTree {\r\n\r\n  constructor(quadtree, x, y, width, height, level, maxLevel=4) {\r\n    const bounds = quadtree.bounds;\r\n\r\n    this.x = x || bounds.x;\r\n    this.y = y || bounds.y;\r\n    this.width = width || bounds.width;\r\n    this.height = height || bounds.height;\r\n    this.right = this.x + this.width;\r\n    this.bottom = this.y + this.height;\r\n    this.level = level || 0;\r\n    this.empty = true;\r\n    this.full = false;\r\n    this.children = [];\r\n\r\n    let ct = 0;\r\n\r\n    quadtree.iterate({\r\n      x: this.x, y: this.y, right: this.right, bottom: this.bottom\r\n    }, (obj) => {\r\n\r\n      const dx = Math.abs(obj.x - this.x) * 2;\r\n      const dy = Math.abs(obj.y - this.y) * 2;\r\n      const dwidth = (obj.right - obj.x) + this.width;\r\n      const dheight = (obj.bottom - obj.y) + this.height;\r\n\r\n      if (dx < dwidth && dy < dheight) {\r\n        ct++;\r\n        if (obj.x <= this.x && obj.y <= this.y &&\r\n            obj.right >= this.right && obj.bottom >= this.bottom) {\r\n          this.full = true;\r\n        }\r\n      }\r\n    });\r\n\r\n    if (ct === 0) {\r\n      this.empty = true;\r\n      return;\r\n    }\r\n\r\n    this.empty = false;\r\n    if (!this.full && this.level < maxLevel) {\r\n      this.split(quadtree);\r\n    }\r\n\r\n  }\r\n\r\n  split(quadtree) {\r\n    const splitWidth = this.width / 2;\r\n    const splitHeight = this.height / 2;\r\n\r\n    this.children[0] = new SpaceTree(quadtree,\r\n        this.x, this.y,\r\n        splitWidth, splitHeight, this.level + 1);\r\n\r\n    this.children[1] = new SpaceTree(quadtree,\r\n        this.x + splitWidth, this.y,\r\n        splitWidth, splitHeight, this.level + 1);\r\n\r\n    this.children[2] = new SpaceTree(quadtree,\r\n        this.x, this.y + splitHeight,\r\n        splitWidth, splitHeight, this.level + 1);\r\n\r\n    this.children[3] = new SpaceTree(quadtree,\r\n        this.x + splitWidth, this.y + splitHeight,\r\n        splitWidth, splitHeight, this.level + 1);\r\n  }\r\n\r\n}\r\n\r\nexport class PathfindingSystem extends Core.System {\r\n\r\n  matchComponent() { return 'Pathfinder'; }\r\n\r\n  initialize() {\r\n  }\r\n\r\n  update(/*timeDelta*/) {\r\n    /*\r\n    let collisionSystem = this.world.getSystem('Collision');\r\n    let quadtree = collisionSystem.quadtree;\r\n    */\r\n  }\r\n\r\n  draw(timeDelta) {\r\n    if (!this.debug) { return; }\r\n\r\n    const vpSystem = this.world.getSystem('ViewportCanvas');\r\n\r\n    const ctx = vpSystem.ctx;\r\n    ctx.save();\r\n\r\n    vpSystem.centerAndZoom(timeDelta);\r\n    vpSystem.followEntity(timeDelta);\r\n\r\n    // draw\r\n\r\n    ctx.restore();\r\n  }\r\n\r\n}\r\n\r\nCore.registerSystem('Pathfinding', PathfindingSystem);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/pathfinding.js","import * as Core from '../lib/core';\r\n\r\nimport '../plugins/position';\r\nimport '../plugins/motion';\r\n\r\nimport Vector2D from '../lib/Vector2D';\r\n\r\nconst PI2 = Math.PI * 2;\r\n\r\nexport class Steering extends Core.Component {\r\n  static defaults() {\r\n    return {\r\n      sensorRange: 350,\r\n      obstacleRepel: [400, 2.1]\r\n    };\r\n  }\r\n}\r\n\r\nCore.registerComponent('Steering', Steering);\r\n\r\nexport class SteeringSystem extends Core.System {\r\n\r\n  matchComponent() { return 'Steering'; }\r\n\r\n  initialize() {\r\n\r\n    this.seekFactor = 1;\r\n\r\n    this.pushFactor = 7;\r\n\r\n    this.avoidFactor = 10;\r\n\r\n    this.avoidSeeAhead = 500;\r\n    this.avoidRayWidthFactor = 1.5;\r\n\r\n    this.vTarget = new Vector2D();\r\n\r\n    this.vectors = {\r\n      avoid: new Vector2D(),\r\n      push: new Vector2D(),\r\n      seek: new Vector2D(),\r\n      flee: new Vector2D(),\r\n      wander: new Vector2D(),\r\n      evade: new Vector2D(),\r\n      pursue: new Vector2D()\r\n    };\r\n\r\n  }\r\n\r\n  updateComponent(timeDelta, entityId, steering) {\r\n\r\n    this.vTarget.setValues(0, 0);\r\n\r\n    for (const key in this.vectors) {\r\n      this.vectors[key].setValues(0, 0);\r\n      this[key](this.vectors[key], timeDelta, entityId, steering);\r\n      this.vTarget.add(this.vectors[key]);\r\n    }\r\n\r\n    this.applySteering(timeDelta, entityId, steering);\r\n\r\n  }\r\n\r\n  avoid(vector, timeDelta, entityId, steering) {\r\n\r\n    if (this.debug) { steering.vectors = []; }\r\n\r\n    const sprite = this.world.get('Sprite', entityId);\r\n    const position = this.world.get('Position', entityId);\r\n\r\n    const result = this.lookForObstacle(entityId, position, sprite, steering);\r\n    if (!result) { return; }\r\n\r\n    const range = steering.sensorRange;\r\n    this.world.getSystem('Collision').quadtree.iterate({\r\n      x: position.x - (range / 2),\r\n      y: position.y - (range / 2),\r\n      width: range,\r\n      height: range\r\n    }, (item) => {\r\n\r\n      if (entityId === item.entityId) { return; }\r\n\r\n      const targetPosition = this.world.get('Position', item.entityId);\r\n      if (!targetPosition) { return; }\r\n\r\n      const targetSprite = this.world.get('Sprite', item.entityId);\r\n\r\n      const A = 0;\r\n      const B = steering.obstacleRepel[0];\r\n      const n = 0;\r\n      const m = steering.obstacleRepel[1];\r\n\r\n      const dx = position.x - targetPosition.x;\r\n      const dy = position.y - targetPosition.y;\r\n      const edgeRange = sprite.size / 2 + targetSprite.size / 2;\r\n      let distance = Math.sqrt(dx*dx + dy*dy) - edgeRange;\r\n      if (distance <= 0) { distance = 0.01; }\r\n\r\n      if (distance > steering.sensorRange) { return; }\r\n\r\n      const U = (-A / Math.pow(distance, n)) +\r\n              ( B / Math.pow(distance, m));\r\n\r\n      vector.x += dx * U;\r\n      vector.y += dy * U;\r\n\r\n      if (this.debug) {\r\n        steering.vectors.push([targetPosition.x, targetPosition.y, U]);\r\n      }\r\n\r\n    });\r\n\r\n  }\r\n\r\n  push(/*vector, timeDelta, entityId, steering*/) {\r\n\r\n  }\r\n\r\n  avoid_ray(vector, timeDelta, entityId, steering) {\r\n\r\n    const sprite = this.world.get('Sprite', entityId);\r\n    const position = this.world.get('Position', entityId);\r\n\r\n    // Scan ahead for an obstacle, bail if none found.\r\n    const result = this.lookForObstacle(entityId, position, sprite, steering);\r\n    if (!result) { return; }\r\n\r\n    const obstacle = result[0];\r\n    const rayX = result[1];\r\n    const rayY = result[2];\r\n\r\n    // Opposite right triangle leg is distance from obstacle to avoid collision.\r\n    const oppositeLen = obstacle.sprite.size / 2 +\r\n      sprite.size * this.avoidRayWidthFactor;\r\n\r\n    // Hypotenuse length is distance from obstacle.\r\n    const hypotenuseLen = Math.sqrt(\r\n      Math.pow(obstacle.position.x - rayX, 2) +\r\n      Math.pow(obstacle.position.y - rayY, 2)\r\n    );\r\n\r\n    // Adjacent length would be avoid tangent, but no need to calculate.\r\n\r\n    // Find angle from direct collision to avoidance\r\n    let theta = Math.asin(oppositeLen / hypotenuseLen);\r\n\r\n    // HACK: Too close, panic and steer hard away\r\n    if (isNaN(theta)) { theta = Math.PI * 0.66; }\r\n\r\n    // Find the absolute angle to the obstacle from entity.\r\n    const obstacleAngle = Math.atan2(\r\n      obstacle.position.y - rayY,\r\n      obstacle.position.x - rayX\r\n    );\r\n\r\n    // Calculate nearest target angle for avoidance...\r\n    // Try turning clockwise from obstacle.\r\n    let avoidAngle = (obstacleAngle + theta);\r\n    // Calculate the 'travel' needed from current rotation.\r\n    const travel = Math.min(PI2 - Math.abs(position.rotation - avoidAngle),\r\n                          Math.abs(position.rotation - avoidAngle));\r\n    if (travel > theta) {\r\n      // Clockwise travel exceeds theta, so counterclockwise is shorter.\r\n      avoidAngle = obstacleAngle - theta;\r\n    }\r\n\r\n    // Set up the avoidance vector.\r\n    vector.setValues(this.avoidFactor, 0);\r\n    vector.rotate(avoidAngle);\r\n\r\n  }\r\n\r\n  lookForObstacle(entityId, position, sprite, steering) {\r\n    const rayWidth = sprite.size * this.avoidRayWidthFactor;\r\n\r\n    const vRayUnit = new Vector2D();\r\n    vRayUnit.setValues(rayWidth, 0);\r\n    vRayUnit.rotate(position.rotation);\r\n\r\n    if (this.debug) { steering.hitCircles = []; }\r\n\r\n    let obstacle, rayX, rayY;\r\n    const steps = this.avoidSeeAhead / rayWidth;\r\n    for (let step = 0; step < steps; step++) {\r\n      rayX = position.x + vRayUnit.x * step;\r\n      rayY = position.y + vRayUnit.y * step;\r\n      obstacle = this.searchCircleForObstacle(\r\n        steering, entityId,\r\n        rayX, rayY, rayWidth\r\n      );\r\n      if (obstacle) {\r\n        return [obstacle, rayX, rayY];\r\n      }\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  searchCircleForObstacle(steering, entityId, x, y, size) {\r\n\r\n    if (this.debug) {\r\n      steering.hitCircles.push([x, y, size]);\r\n    }\r\n\r\n    const hits = [];\r\n\r\n    this.world.getSystem('Collision').quadtree.iterate({\r\n      x: x - (size / 2),\r\n      y: y - (size / 2),\r\n      width: size,\r\n      height: size\r\n    }, (item) => {\r\n\r\n      if (entityId === item.entityId) { return; }\r\n      const dx = item.position.x - x;\r\n      const dy = item.position.y - y;\r\n      const range = dx*dx + dy*dy;\r\n      const radii = (size + item.sprite.size) / 2;\r\n      if (range < radii*radii) {\r\n        hits.push([range, item]);\r\n      }\r\n\r\n    });\r\n\r\n    hits.sort(function (a, b) { return b[0] - a[0]; });\r\n    return hits.length ? hits[0][1] : null;\r\n  }\r\n\r\n  seek(vector, timeDelta, entityId, steering) {\r\n\r\n    // Look up the entity ID to seek, if only name given.\r\n    if (steering.seekTargetName && !steering.seekTargetEntityId) {\r\n      steering.seekTargetEntityId = Core.getComponent('Name')\r\n        .findEntityByName(this.world, steering.seekTargetName);\r\n    }\r\n\r\n    if (!steering.seekTargetEntityId) { return; }\r\n\r\n    const position = this.world.get('Position', entityId);\r\n    if (!position) { return; }\r\n\r\n    // Accept either a raw x/y coord or entity ID as target\r\n    let targetPosition = steering.targetPosition;\r\n    if (!targetPosition) {\r\n      targetPosition = this.world.get('Position', steering.seekTargetEntityId);\r\n    }\r\n    if (!targetPosition) { return; }\r\n\r\n    vector.setValues(targetPosition.x - position.x, targetPosition.y - position.y);\r\n    vector.normalize();\r\n    vector.multiplyScalar(this.seekFactor);\r\n\r\n  }\r\n\r\n  flee(/*vector, timeDelta, entityId, steering*/) {\r\n  }\r\n\r\n  wander(/*vector, timeDelta, entityId, steering*/) {\r\n  }\r\n\r\n  evade(/*vector, timeDelta, entityId, steering*/) {\r\n  }\r\n\r\n  pursue(/*vector, timeDelta, entityId, steering*/) {\r\n  }\r\n\r\n  applySteering(timeDelta, entityId, steering) {\r\n\r\n    const motion = this.world.get('Motion', entityId);\r\n\r\n    let targetDr = 0;\r\n\r\n    if (!this.vTarget.isZero()) {\r\n      const position = this.world.get('Position', entityId);\r\n\r\n      // Get the target angle, ensuring a 0..2*Math.PI range.\r\n      let targetAngle = this.vTarget.angle();\r\n      if (targetAngle < 0) { targetAngle += (2 * Math.PI); }\r\n\r\n      if (this.debug) { steering.targetAngle = targetAngle; }\r\n\r\n      // Pick the direction from current to target angle\r\n      let direction = (targetAngle < position.rotation) ? -1 : 1;\r\n\r\n      // If the offset between the angles is more than half a circle, it's\r\n      // shorter to go the other way.\r\n      const offset = Math.abs(targetAngle - position.rotation);\r\n      if (offset > Math.PI) { direction = 0 - direction; }\r\n\r\n      // Work out the desired delta-rotation to steer toward target\r\n      targetDr = direction * Math.min(steering.radPerSec, offset / timeDelta);\r\n    }\r\n\r\n    // Calculate the delta-rotation impulse required to meet the goal,\r\n    // but constrain to the capability of the steering thrusters\r\n    let impulseDr = (targetDr - motion.drotation);\r\n    if (Math.abs(impulseDr) > steering.radPerSec) {\r\n      if (impulseDr > 0) {\r\n        impulseDr = steering.radPerSec;\r\n      } else if (impulseDr < 0) {\r\n        impulseDr = 0 - steering.radPerSec;\r\n      }\r\n    }\r\n\r\n    motion.drotation += impulseDr;\r\n\r\n  }\r\n\r\n  draw(/*timeDelta*/) {\r\n    if (!this.debug) { return; }\r\n\r\n    /*\r\n    const vpSystem = this.world.getSystem('CanvasViewport');\r\n    const ctx = vpSystem.ctx;\r\n    ctx.save();\r\n\r\n    vpSystem.centerAndZoom(timeDelta);\r\n    vpSystem.followEntity(timeDelta);\r\n\r\n    const matches = this.getMatchingComponents();\r\n    for (const entityId in matches) {\r\n      ctx.save();\r\n\r\n      const steering = matches[entityId];\r\n      const position = this.world.get('Position', entityId);\r\n      const sprite = this.world.get('Sprite', entityId);\r\n\r\n      this.drawSteeringVsPosition(ctx, steering, position);\r\n\r\n      if (steering.hitCircles) {\r\n        for (const [x, y, size] of steering.hitCircles) {\r\n          ctx.strokeStyle = '#d00';\r\n          ctx.beginPath();\r\n          ctx.arc(x, y, size, 0, PI2, false);\r\n          ctx.stroke();\r\n        }\r\n      }\r\n\r\n      if (steering.sensorRange) {\r\n          ctx.strokeStyle = 'rgba(0, 64, 64, 0.75)';\r\n          ctx.beginPath();\r\n          ctx.arc(position.x, position.y, steering.sensorRange, 0, PI2, false);\r\n          ctx.stroke();\r\n      }\r\n\r\n      if (steering.vectors) {\r\n        for (const [x, y, U] of steering.vectors) {\r\n          ctx.strokeStyle = 'rgba(0, 64, 64, 0.75)';\r\n          ctx.beginPath();\r\n          ctx.moveTo(position.x, position.y);\r\n          ctx.lineWidth = Math.max(1, Math.min(U, sprite.width));\r\n          ctx.lineTo(x, y);\r\n          ctx.stroke();\r\n        }\r\n      }\r\n\r\n      if (steering.pushing) {\r\n        this.drawAngle(ctx, position, position.rotation, '#d0d');\r\n      }\r\n\r\n      ctx.restore();\r\n    }\r\n\r\n    ctx.restore();\r\n    */\r\n  }\r\n\r\n  drawSteeringVsPosition(ctx, steering, position) {\r\n    this.drawAngle(ctx, position, position.rotation, '#ddd');\r\n    if (steering.targetAngle) {\r\n      this.drawAngle(ctx, position, steering.targetAngle, '#dd0');\r\n    }\r\n  }\r\n\r\n  drawAngle(ctx, position, angle, color) {\r\n    const vec = new Vector2D();\r\n    vec.setValues(this.avoidSeeAhead, 0);\r\n    vec.rotate(angle);\r\n    ctx.strokeStyle = color;\r\n    ctx.beginPath();\r\n    ctx.moveTo(position.x, position.y);\r\n    ctx.lineTo(position.x + vec.x, position.y + vec.y);\r\n    ctx.stroke();\r\n  }\r\n\r\n}\r\n\r\nCore.registerSystem('Steering', SteeringSystem);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/steering.js","import * as Core from '../lib/core';\r\n\r\nexport class CanvasSprite extends Core.Component {\r\n  static defaults() {\r\n    return {\r\n      name: null,\r\n      color: '#fff',\r\n      size: 100,\r\n      width: null,\r\n      height: null\r\n    };\r\n  }\r\n  static create(attrs) {\r\n    const c = super.create(attrs);\r\n    if (!c.width) { c.width = c.size; }\r\n    if (!c.height) { c.height = c.size; }\r\n    return c;\r\n  }\r\n}\r\nCore.registerComponent('Sprite', CanvasSprite);\r\n\r\n// See also: http://phrogz.net/JS/wheeldelta.html\r\nconst wheelDistance = function(evt){\r\n  if (!evt) evt = event;\r\n  const w=evt.wheelDelta, d=evt.detail;\r\n  if (d){\r\n    if (w) return w/d/40*d>0?1:-1; // Opera\r\n    else return -d/3;              // Firefox;         TODO: do not /3 for OS X\r\n  } else return w/120;             // IE/Safari/Chrome TODO: /3 for Chrome OS X\r\n};\r\n\r\nexport class ViewportCanvas extends Core.System {\r\n\r\n  defaultOptions() {\r\n    return {\r\n      lineWidth: 1.5,\r\n      zoom: 1.0,\r\n      zoomMin: 0.1,\r\n      zoomMax: 10.0,\r\n      zoomWheelFactor: 0.025,\r\n      gridEnabled: true,\r\n      gridSize: 500,\r\n      gridColor: '#111',\r\n      followEnabled: true,\r\n      followName: null,\r\n      followEntityId: null\r\n    };\r\n  }\r\n\r\n  initialize() {\r\n    this.container = document.querySelector(this.options.container);\r\n    this.canvas = document.createElement('canvas');\r\n    this.container.appendChild(this.canvas);\r\n\r\n    this.ctx = this.canvas.getContext('2d');\r\n\r\n    const events = {\r\n      'resize': (ev) => { this.updateMetrics(ev); },\r\n      'orientationchange': (ev) => { this.updateMetrics(ev); },\r\n      'mousedown': (ev) => { this.onMouseDown(ev); },\r\n      'mousemove': (ev) => { this.onMouseMove(ev); },\r\n      'mouseup': (ev) => { this.onMouseUp(ev); },\r\n      //'wheel': (ev) => { this.onMouseWheel(ev); }\r\n    };\r\n\r\n    for (const name in events) {\r\n      this.canvas.addEventListener(name, events[name], false);\r\n    }\r\n\r\n    // See also: http://phrogz.net/JS/wheeldelta.html\r\n    const boundOnMouseWheel = (ev) => this.onMouseWheel(ev);\r\n    if (window.addEventListener){\r\n      window.addEventListener('mousewheel', boundOnMouseWheel, false); // Chrome/Safari/Opera\r\n      window.addEventListener('DOMMouseScroll', boundOnMouseWheel, false); // Firefox\r\n    } else if (window.attachEvent){\r\n      window.attachEvent('onmousewheel', boundOnMouseWheel); // IE\r\n    }\r\n\r\n    this.followEnabled = this.options.followEnabled;\r\n    this.zoom = this.options.zoom;\r\n    this.followEntityId = this.options.followEntityId;\r\n    this.gridEnabled = this.options.gridEnabled;\r\n    this.lineWidth = this.options.lineWidth;\r\n\r\n    this.cursorRawX = 0;\r\n    this.cursorRawY = 0;\r\n\r\n    this.cursorChanged = false;\r\n    this.cursorPosition = { x: 0, y: 0 };\r\n\r\n    this.cameraX = 0;\r\n    this.cameraY = 0;\r\n\r\n    this.debugDummySprite = { size: 100 };\r\n  }\r\n\r\n  draw(timeDelta) {\r\n    this.updateMetrics();\r\n    this.ctx.save();\r\n\r\n    this.clear();\r\n    this.centerAndZoom(timeDelta);\r\n    this.followEntity(timeDelta);\r\n\r\n    if (this.gridEnabled) { this.drawBackdrop(timeDelta); }\r\n\r\n    this.drawScene(timeDelta);\r\n\r\n    if (this.world.debug) { this.drawDebugCursor(); }\r\n\r\n    this.ctx.restore();\r\n  }\r\n\r\n  onMouseWheel(ev) {\r\n    this.zoom += wheelDistance(ev) * this.options.zoomWheelFactor;\r\n    if (this.zoom < this.options.zoomMin) {\r\n      this.zoom = this.options.zoomMin;\r\n    }\r\n    if (this.zoom > this.options.zoomMax) {\r\n      this.zoom = this.options.zoomMax;\r\n    }\r\n  }\r\n\r\n  // TODO: Use a symbol for 'mouse{Down,Move,Up}' message?\r\n\r\n  onMouseDown(ev) {\r\n    this.setCursor(ev.clientX, ev.clientY);\r\n    this.world.publish('mouseDown', this.cursorPosition);\r\n  }\r\n\r\n  onMouseMove(ev) {\r\n    this.setCursor(ev.clientX, ev.clientY);\r\n  }\r\n\r\n  onMouseUp(ev) {\r\n    this.setCursor(ev.clientX, ev.clientY);\r\n    this.world.publish('mouseUp', this.cursorPosition);\r\n  }\r\n\r\n  update(/* timeDelta */) {\r\n    // Use the cursorChanged flag set by setCursor to limit mouseMove messages\r\n    // to one per game loop tick\r\n    if (this.cursorChanged) {\r\n      this.cursorChanged = false;\r\n      this.world.publish('mouseMove', this.cursorPosition);\r\n    }\r\n  }\r\n\r\n  setCursor(x, y) {\r\n    const width = this.container.offsetWidth;\r\n    const height = this.container.offsetHeight;\r\n\r\n    this.cursorRawX = x;\r\n    this.cursorRawY = y;\r\n\r\n    const newX = ((x - (width / 2)) / this.zoom) + this.cameraX;\r\n    const newY = ((y - (height / 2)) / this.zoom) + this.cameraY;\r\n\r\n    if (newX !== this.cursorPosition.x || newY !== this.cursorPosition.y) {\r\n      this.cursorChanged = true;\r\n      this.cursorPosition.x = newX;\r\n      this.cursorPosition.y = newY;\r\n    }\r\n  }\r\n\r\n  updateMetrics() {\r\n    const width = this.container.offsetWidth;\r\n    const height = this.container.offsetHeight;\r\n\r\n    this.canvas.width = width;\r\n    this.canvas.height = height;\r\n\r\n    this.visibleWidth = width / this.zoom;\r\n    this.visibleHeight = height / this.zoom;\r\n\r\n    this.visibleLeft = (0 - this.visibleWidth / 2) + this.cameraX;\r\n    this.visibleTop = (0 - this.visibleHeight / 2) + this.cameraY;\r\n    this.visibleRight = this.visibleLeft + this.visibleWidth;\r\n    this.visibleBottom = this.visibleTop + this.visibleHeight;\r\n  }\r\n\r\n  clear() {\r\n    this.ctx.fillStyle = 'rgba(0, 0, 0, 1.0)';\r\n    this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\r\n  }\r\n\r\n  centerAndZoom() {\r\n    this.ctx.translate(this.canvas.width / 2, this.canvas.height / 2);\r\n    this.ctx.scale(this.zoom, this.zoom);\r\n  }\r\n\r\n  followEntity() {\r\n    if (!this.followEnabled) {\r\n      this.cameraX = this.cameraY = 0;\r\n      return;\r\n    }\r\n    if (this.options.followName && !this.followEntityId) {\r\n      // Look up named entity, if necessary.\r\n      this.followEntityId = Core.getComponent('Name')\r\n        .findEntityByName(this.world, this.options.followName);\r\n    }\r\n    if (this.followEntityId) {\r\n      // Adjust the viewport center offset to the entity position\r\n      const position = this.world.get('Position', this.followEntityId);\r\n      if (position) {\r\n        this.cameraX = position.x;\r\n        this.cameraY = position.y;\r\n        this.setCursor(this.cursorRawX, this.cursorRawY);\r\n        this.ctx.translate(0 - this.cameraX, 0 - this.cameraY);\r\n      }\r\n    }\r\n  }\r\n\r\n  drawDebugCursor() {\r\n    const ctx = this.ctx;\r\n    ctx.save();\r\n    ctx.strokeStyle = '#f0f';\r\n    ctx.lineWidth = this.lineWidth / this.zoom;\r\n    ctx.translate(this.cursorPosition.x, this.cursorPosition.y);\r\n    ctx.beginPath();\r\n    ctx.moveTo(-20, 0);\r\n    ctx.lineTo(20, 0);\r\n    ctx.moveTo(0, -20);\r\n    ctx.lineTo(0, 20);\r\n    ctx.strokeRect(-10, -10, 20, 20);\r\n    ctx.stroke();\r\n    ctx.restore();\r\n  }\r\n\r\n  drawBackdrop() {\r\n    const gridSize = this.options.gridSize;\r\n    const gridOffsetX = this.visibleLeft % gridSize;\r\n    const gridOffsetY = this.visibleTop % gridSize;\r\n\r\n    const ctx = this.ctx;\r\n\r\n    ctx.save();\r\n    ctx.beginPath();\r\n\r\n    ctx.strokeStyle = this.options.gridColor;\r\n    ctx.lineWidth = this.lineWidth / this.zoom;\r\n\r\n    for (let x = (this.visibleLeft - gridOffsetX); x < this.visibleRight; x += gridSize) {\r\n      ctx.moveTo(x, this.visibleTop);\r\n      ctx.lineTo(x, this.visibleBottom);\r\n    }\r\n\r\n    for (let y = (this.visibleTop - gridOffsetY); y < this.visibleBottom; y += gridSize) {\r\n      ctx.moveTo(this.visibleLeft, y);\r\n      ctx.lineTo(this.visibleRight, y);\r\n    }\r\n\r\n    ctx.stroke();\r\n    ctx.restore();\r\n  }\r\n\r\n  drawScene(timeDelta) {\r\n    const positions = this.world.get('Position');\r\n    for (const entityId in positions) {\r\n      this.drawSprite(timeDelta, entityId, positions[entityId]);\r\n    }\r\n  }\r\n\r\n  drawSprite(timeDelta, entityId, position) {\r\n\r\n    let sprite = this.world.get('Sprite', entityId);\r\n    if (!sprite) { sprite = CanvasSprite.defaults(); }\r\n\r\n    let spriteFn = getSprite(sprite.name);\r\n    if (!spriteFn) { spriteFn = getSprite('default'); }\r\n\r\n    const ctx = this.ctx;\r\n\r\n    ctx.save();\r\n\r\n    ctx.translate(position.x, position.y);\r\n\r\n    ctx.rotate(position.rotation + Math.PI/2);\r\n    ctx.scale(sprite.size / 100, sprite.size / 100);\r\n\r\n    // HACK: Try to keep line width consistent regardless of zoom, to sort of\r\n    // simulate a vector display\r\n    ctx.lineWidth = this.lineWidth / this.zoom / (sprite.size / 100);\r\n\r\n    ctx.strokeStyle = sprite.color;\r\n    spriteFn(ctx, timeDelta, sprite, entityId);\r\n\r\n    ctx.restore();\r\n\r\n  }\r\n\r\n}\r\n\r\nCore.registerSystem('ViewportCanvas', ViewportCanvas);\r\n\r\nconst spriteRegistry = {};\r\nexport function registerSprite(name, sprite) {\r\n  spriteRegistry[name] = sprite;\r\n}\r\nexport function getSprite(name) {\r\n  return spriteRegistry[name];\r\n}\r\n\r\nconst PI2 = Math.PI * 2;\r\n\r\nregisterSprite('default', (ctx/*, timeDelta, sprite, entityId*/) => {\r\n  ctx.beginPath();\r\n  ctx.arc(0, 0, 50, 0, PI2, true);\r\n  ctx.moveTo(0, 0);\r\n  ctx.lineTo(0, -50);\r\n  ctx.moveTo(0, 0);\r\n  ctx.stroke();\r\n});\r\n\r\nregisterSprite('sun', (ctx/*, timeDelta, sprite, entityId*/) => {\r\n  ctx.beginPath();\r\n  ctx.arc(0, 0, 50, 0, PI2, true);\r\n  ctx.stroke();\r\n});\r\n\r\nregisterSprite('enemyscout', (ctx/*, timeDelta, sprite, entityId*/) => {\r\n  ctx.beginPath();\r\n  ctx.moveTo(0, -50);\r\n  ctx.lineTo(-45, 50);\r\n  ctx.lineTo(-12.5, 12.5);\r\n  ctx.lineTo(0, 25);\r\n  ctx.lineTo(12.5, 12.5);\r\n  ctx.lineTo(45, 50);\r\n  ctx.lineTo(0, -50);\r\n  ctx.moveTo(0, -50);\r\n  ctx.stroke();\r\n});\r\n\r\nregisterSprite('hero', (ctx/*, timeDelta, sprite, entityId*/) => {\r\n  ctx.rotate(Math.PI);\r\n  ctx.beginPath();\r\n  ctx.moveTo(-12.5, -50);\r\n  ctx.lineTo(-25, -50);\r\n  ctx.lineTo(-50, 0);\r\n  ctx.arc(0, 0, 50, Math.PI, 0, true);\r\n  ctx.lineTo(25, -50);\r\n  ctx.lineTo(12.5, -50);\r\n  ctx.lineTo(25, 0);\r\n  ctx.arc(0, 0, 25, 0, Math.PI, true);\r\n  ctx.lineTo(-12.5, -50);\r\n  ctx.stroke();\r\n});\r\n\r\nregisterSprite('asteroid', (ctx, timeDelta, sprite/*, entityId*/) => {\r\n  let idx;\r\n\r\n  if (!sprite.points) {\r\n    const NUM_POINTS = 7 + Math.floor(8 * Math.random());\r\n    const MAX_RADIUS = 50;\r\n    const MIN_RADIUS = 35;\r\n    const ROTATION = PI2 / NUM_POINTS;\r\n\r\n    sprite.points = [];\r\n    for (idx = 0; idx < NUM_POINTS; idx++) {\r\n      const rot = idx * ROTATION;\r\n      const dist = (Math.random() * (MAX_RADIUS - MIN_RADIUS)) + MIN_RADIUS;\r\n      sprite.points.push([dist * Math.cos(rot), dist * Math.sin(rot)]);\r\n    }\r\n  }\r\n\r\n  ctx.beginPath();\r\n  ctx.moveTo(sprite.points[0][0], sprite.points[0][1]);\r\n  for (idx = 0; idx < sprite.points.length; idx++) {\r\n    ctx.lineTo(sprite.points[idx][0], sprite.points[idx][1]);\r\n  }\r\n  ctx.lineTo(sprite.points[0][0], sprite.points[0][1]);\r\n  ctx.stroke();\r\n\r\n});\r\n\r\nregisterSprite('explosion', (ctx, timeDelta, sprite/*, entityId*/) => {\r\n  let p, idx;\r\n\r\n  if (!sprite.initialized) {\r\n\r\n    sprite.initialized = true;\r\n\r\n    Object.assign(sprite, {\r\n      ttl: 2.0,\r\n      radius: 100,\r\n      maxParticles: 25,\r\n      maxParticleSize: 4,\r\n      maxVelocity: 300,\r\n      color: '#f00',\r\n      age: 0,\r\n      stop: false,\r\n      ...sprite\r\n    });\r\n\r\n    sprite.particles = [];\r\n\r\n    for (idx = 0; idx < sprite.maxParticles; idx++) {\r\n      sprite.particles.push({ free: true });\r\n    }\r\n\r\n  }\r\n\r\n  for (idx = 0; idx < sprite.particles.length; idx++) {\r\n    p = sprite.particles[idx];\r\n\r\n    if (!sprite.stop && p.free) {\r\n\r\n      p.velocity = sprite.maxVelocity * Math.random();\r\n      p.angle = (Math.PI * 2) * Math.random();\r\n      p.dx = 0 - (p.velocity * Math.sin(p.angle));\r\n      p.dy = p.velocity * Math.cos(p.angle);\r\n      p.distance = p.x = p.y = 0;\r\n      p.maxDistance = sprite.radius * Math.random();\r\n      p.size = sprite.maxParticleSize;\r\n      p.free = false;\r\n\r\n    } else if (!p.free) {\r\n\r\n      p.x += p.dx * timeDelta;\r\n      p.y += p.dy * timeDelta;\r\n\r\n      p.distance += p.velocity * timeDelta;\r\n      if (p.distance >= p.maxDistance) {\r\n        p.distance = p.maxDistance;\r\n        p.free = true;\r\n      }\r\n\r\n    }\r\n\r\n  }\r\n\r\n  sprite.age += timeDelta;\r\n\r\n  if (sprite.age >= sprite.ttl) {\r\n    sprite.stop = true;\r\n  }\r\n\r\n  const alpha = Math.max(0, 1 - (sprite.age / sprite.ttl));\r\n\r\n  ctx.save();\r\n  ctx.strokeStyle = sprite.color;\r\n  ctx.fillStyle = sprite.color;\r\n\r\n  for (idx = 0; idx < sprite.particles.length; idx++) {\r\n    p = sprite.particles[idx];\r\n    if (p.free) { continue; }\r\n\r\n    ctx.globalAlpha = (1 - (p.distance / p.maxDistance)) * alpha;\r\n\r\n    ctx.beginPath();\r\n    ctx.moveTo(0, 0);\r\n    ctx.lineWidth = p.size;\r\n    ctx.lineTo(p.x, p.y);\r\n    ctx.stroke();\r\n  }\r\n\r\n  ctx.restore();\r\n\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/viewportCanvas.js","require('../../modules/es6.object.assign');\nmodule.exports = require('../../modules/_core').Object.assign;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/object/assign.js\n// module id = 78\n// module chunks = 7","// 19.1.3.1 Object.assign(target, source)\nvar $export = require('./_export');\n\n$export($export.S + $export.F, 'Object', { assign: require('./_object-assign') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.object.assign.js\n// module id = 79\n// module chunks = 7","module.exports = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_a-function.js\n// module id = 80\n// module chunks = 7","'use strict';\n// 19.1.2.1 Object.assign(target, source, ...)\nvar getKeys = require('./_object-keys');\nvar gOPS = require('./_object-gops');\nvar pIE = require('./_object-pie');\nvar toObject = require('./_to-object');\nvar IObject = require('./_iobject');\nvar $assign = Object.assign;\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = !$assign || require('./_fails')(function () {\n  var A = {};\n  var B = {};\n  // eslint-disable-next-line no-undef\n  var S = Symbol();\n  var K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function (k) { B[k] = k; });\n  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;\n}) ? function assign(target, source) { // eslint-disable-line no-unused-vars\n  var T = toObject(target);\n  var aLen = arguments.length;\n  var index = 1;\n  var getSymbols = gOPS.f;\n  var isEnum = pIE.f;\n  while (aLen > index) {\n    var S = IObject(arguments[index++]);\n    var keys = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S);\n    var length = keys.length;\n    var j = 0;\n    var key;\n    while (length > j) if (isEnum.call(S, key = keys[j++])) T[key] = S[key];\n  } return T;\n} : $assign;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-assign.js\n// module id = 81\n// module chunks = 7","// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject');\nvar toLength = require('./_to-length');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nmodule.exports = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) if (IS_INCLUDES || index in O) {\n      if (O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_array-includes.js\n// module id = 82\n// module chunks = 7","var toInteger = require('./_to-integer');\nvar max = Math.max;\nvar min = Math.min;\nmodule.exports = function (index, length) {\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-absolute-index.js\n// module id = 83\n// module chunks = 7","module.exports = { \"default\": require(\"core-js/library/fn/object/define-property\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/object/define-property.js\n// module id = 84\n// module chunks = 7","require('../../modules/es6.object.define-property');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperty(it, key, desc) {\n  return $Object.defineProperty(it, key, desc);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/object/define-property.js\n// module id = 85\n// module chunks = 7","var $export = require('./_export');\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', { defineProperty: require('./_object-dp').f });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.object.define-property.js\n// module id = 86\n// module chunks = 7","require('../../modules/es6.object.get-prototype-of');\nmodule.exports = require('../../modules/_core').Object.getPrototypeOf;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/object/get-prototype-of.js\n// module id = 87\n// module chunks = 7","// 19.1.2.9 Object.getPrototypeOf(O)\nvar toObject = require('./_to-object');\nvar $getPrototypeOf = require('./_object-gpo');\n\nrequire('./_object-sap')('getPrototypeOf', function () {\n  return function getPrototypeOf(it) {\n    return $getPrototypeOf(toObject(it));\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.object.get-prototype-of.js\n// module id = 88\n// module chunks = 7","module.exports = { \"default\": require(\"core-js/library/fn/symbol/iterator\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/symbol/iterator.js\n// module id = 89\n// module chunks = 7","require('../../modules/es6.string.iterator');\nrequire('../../modules/web.dom.iterable');\nmodule.exports = require('../../modules/_wks-ext').f('iterator');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/symbol/iterator.js\n// module id = 90\n// module chunks = 7","var toInteger = require('./_to-integer');\nvar defined = require('./_defined');\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function (TO_STRING) {\n  return function (that, pos) {\n    var s = String(defined(that));\n    var i = toInteger(pos);\n    var l = s.length;\n    var a, b;\n    if (i < 0 || i >= l) return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_string-at.js\n// module id = 91\n// module chunks = 7","'use strict';\nvar create = require('./_object-create');\nvar descriptor = require('./_property-desc');\nvar setToStringTag = require('./_set-to-string-tag');\nvar IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nrequire('./_hide')(IteratorPrototype, require('./_wks')('iterator'), function () { return this; });\n\nmodule.exports = function (Constructor, NAME, next) {\n  Constructor.prototype = create(IteratorPrototype, { next: descriptor(1, next) });\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iter-create.js\n// module id = 92\n// module chunks = 7","var dP = require('./_object-dp');\nvar anObject = require('./_an-object');\nvar getKeys = require('./_object-keys');\n\nmodule.exports = require('./_descriptors') ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = getKeys(Properties);\n  var length = keys.length;\n  var i = 0;\n  var P;\n  while (length > i) dP.f(O, P = keys[i++], Properties[P]);\n  return O;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-dps.js\n// module id = 93\n// module chunks = 7","var document = require('./_global').document;\nmodule.exports = document && document.documentElement;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_html.js\n// module id = 94\n// module chunks = 7","require('./es6.array.iterator');\nvar global = require('./_global');\nvar hide = require('./_hide');\nvar Iterators = require('./_iterators');\nvar TO_STRING_TAG = require('./_wks')('toStringTag');\n\nvar DOMIterables = ('CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,' +\n  'DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,' +\n  'MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,' +\n  'SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,' +\n  'TextTrackList,TouchList').split(',');\n\nfor (var i = 0; i < DOMIterables.length; i++) {\n  var NAME = DOMIterables[i];\n  var Collection = global[NAME];\n  var proto = Collection && Collection.prototype;\n  if (proto && !proto[TO_STRING_TAG]) hide(proto, TO_STRING_TAG, NAME);\n  Iterators[NAME] = Iterators.Array;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/web.dom.iterable.js\n// module id = 95\n// module chunks = 7","'use strict';\nvar addToUnscopables = require('./_add-to-unscopables');\nvar step = require('./_iter-step');\nvar Iterators = require('./_iterators');\nvar toIObject = require('./_to-iobject');\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = require('./_iter-define')(Array, 'Array', function (iterated, kind) {\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var kind = this._k;\n  var index = this._i++;\n  if (!O || index >= O.length) {\n    this._t = undefined;\n    return step(1);\n  }\n  if (kind == 'keys') return step(0, index);\n  if (kind == 'values') return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.array.iterator.js\n// module id = 96\n// module chunks = 7","module.exports = function () { /* empty */ };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_add-to-unscopables.js\n// module id = 97\n// module chunks = 7","module.exports = function (done, value) {\n  return { value: value, done: !!done };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iter-step.js\n// module id = 98\n// module chunks = 7","module.exports = { \"default\": require(\"core-js/library/fn/symbol\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/symbol.js\n// module id = 99\n// module chunks = 7","require('../../modules/es6.symbol');\nrequire('../../modules/es6.object.to-string');\nrequire('../../modules/es7.symbol.async-iterator');\nrequire('../../modules/es7.symbol.observable');\nmodule.exports = require('../../modules/_core').Symbol;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/symbol/index.js\n// module id = 100\n// module chunks = 7","'use strict';\n// ECMAScript 6 symbols shim\nvar global = require('./_global');\nvar has = require('./_has');\nvar DESCRIPTORS = require('./_descriptors');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar META = require('./_meta').KEY;\nvar $fails = require('./_fails');\nvar shared = require('./_shared');\nvar setToStringTag = require('./_set-to-string-tag');\nvar uid = require('./_uid');\nvar wks = require('./_wks');\nvar wksExt = require('./_wks-ext');\nvar wksDefine = require('./_wks-define');\nvar keyOf = require('./_keyof');\nvar enumKeys = require('./_enum-keys');\nvar isArray = require('./_is-array');\nvar anObject = require('./_an-object');\nvar toIObject = require('./_to-iobject');\nvar toPrimitive = require('./_to-primitive');\nvar createDesc = require('./_property-desc');\nvar _create = require('./_object-create');\nvar gOPNExt = require('./_object-gopn-ext');\nvar $GOPD = require('./_object-gopd');\nvar $DP = require('./_object-dp');\nvar $keys = require('./_object-keys');\nvar gOPD = $GOPD.f;\nvar dP = $DP.f;\nvar gOPN = gOPNExt.f;\nvar $Symbol = global.Symbol;\nvar $JSON = global.JSON;\nvar _stringify = $JSON && $JSON.stringify;\nvar PROTOTYPE = 'prototype';\nvar HIDDEN = wks('_hidden');\nvar TO_PRIMITIVE = wks('toPrimitive');\nvar isEnum = {}.propertyIsEnumerable;\nvar SymbolRegistry = shared('symbol-registry');\nvar AllSymbols = shared('symbols');\nvar OPSymbols = shared('op-symbols');\nvar ObjectProto = Object[PROTOTYPE];\nvar USE_NATIVE = typeof $Symbol == 'function';\nvar QObject = global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function () {\n  return _create(dP({}, 'a', {\n    get: function () { return dP(this, 'a', { value: 7 }).a; }\n  })).a != 7;\n}) ? function (it, key, D) {\n  var protoDesc = gOPD(ObjectProto, key);\n  if (protoDesc) delete ObjectProto[key];\n  dP(it, key, D);\n  if (protoDesc && it !== ObjectProto) dP(ObjectProto, key, protoDesc);\n} : dP;\n\nvar wrap = function (tag) {\n  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);\n  sym._k = tag;\n  return sym;\n};\n\nvar isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  return it instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(it, key, D) {\n  if (it === ObjectProto) $defineProperty(OPSymbols, key, D);\n  anObject(it);\n  key = toPrimitive(key, true);\n  anObject(D);\n  if (has(AllSymbols, key)) {\n    if (!D.enumerable) {\n      if (!has(it, HIDDEN)) dP(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if (has(it, HIDDEN) && it[HIDDEN][key]) it[HIDDEN][key] = false;\n      D = _create(D, { enumerable: createDesc(0, false) });\n    } return setSymbolDesc(it, key, D);\n  } return dP(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P) {\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P));\n  var i = 0;\n  var l = keys.length;\n  var key;\n  while (l > i) $defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P) {\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key) {\n  var E = isEnum.call(this, key = toPrimitive(key, true));\n  if (this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return false;\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key) {\n  it = toIObject(it);\n  key = toPrimitive(key, true);\n  if (it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return;\n  var D = gOPD(it, key);\n  if (D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key])) D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it) {\n  var names = gOPN(toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META) result.push(key);\n  } return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it) {\n  var IS_OP = it === ObjectProto;\n  var names = gOPN(IS_OP ? OPSymbols : toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true)) result.push(AllSymbols[key]);\n  } return result;\n};\n\n// 19.4.1.1 Symbol([description])\nif (!USE_NATIVE) {\n  $Symbol = function Symbol() {\n    if (this instanceof $Symbol) throw TypeError('Symbol is not a constructor!');\n    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);\n    var $set = function (value) {\n      if (this === ObjectProto) $set.call(OPSymbols, value);\n      if (has(this, HIDDEN) && has(this[HIDDEN], tag)) this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    };\n    if (DESCRIPTORS && setter) setSymbolDesc(ObjectProto, tag, { configurable: true, set: $set });\n    return wrap(tag);\n  };\n  redefine($Symbol[PROTOTYPE], 'toString', function toString() {\n    return this._k;\n  });\n\n  $GOPD.f = $getOwnPropertyDescriptor;\n  $DP.f = $defineProperty;\n  require('./_object-gopn').f = gOPNExt.f = $getOwnPropertyNames;\n  require('./_object-pie').f = $propertyIsEnumerable;\n  require('./_object-gops').f = $getOwnPropertySymbols;\n\n  if (DESCRIPTORS && !require('./_library')) {\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n\n  wksExt.f = function (name) {\n    return wrap(wks(name));\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Symbol: $Symbol });\n\nfor (var es6Symbols = (\n  // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'\n).split(','), j = 0; es6Symbols.length > j;)wks(es6Symbols[j++]);\n\nfor (var wellKnownSymbols = $keys(wks.store), k = 0; wellKnownSymbols.length > k;) wksDefine(wellKnownSymbols[k++]);\n\n$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function (key) {\n    return has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(key) {\n    if (isSymbol(key)) return keyOf(SymbolRegistry, key);\n    throw TypeError(key + ' is not a symbol!');\n  },\n  useSetter: function () { setter = true; },\n  useSimple: function () { setter = false; }\n});\n\n$export($export.S + $export.F * !USE_NATIVE, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function () {\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({ a: S }) != '{}' || _stringify(Object(S)) != '{}';\n})), 'JSON', {\n  stringify: function stringify(it) {\n    if (it === undefined || isSymbol(it)) return; // IE8 returns string on undefined\n    var args = [it];\n    var i = 1;\n    var replacer, $replacer;\n    while (arguments.length > i) args.push(arguments[i++]);\n    replacer = args[1];\n    if (typeof replacer == 'function') $replacer = replacer;\n    if ($replacer || !isArray(replacer)) replacer = function (key, value) {\n      if ($replacer) value = $replacer.call(this, key, value);\n      if (!isSymbol(value)) return value;\n    };\n    args[1] = replacer;\n    return _stringify.apply($JSON, args);\n  }\n});\n\n// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)\n$Symbol[PROTOTYPE][TO_PRIMITIVE] || require('./_hide')($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.symbol.js\n// module id = 101\n// module chunks = 7","var META = require('./_uid')('meta');\nvar isObject = require('./_is-object');\nvar has = require('./_has');\nvar setDesc = require('./_object-dp').f;\nvar id = 0;\nvar isExtensible = Object.isExtensible || function () {\n  return true;\n};\nvar FREEZE = !require('./_fails')(function () {\n  return isExtensible(Object.preventExtensions({}));\n});\nvar setMeta = function (it) {\n  setDesc(it, META, { value: {\n    i: 'O' + ++id, // object ID\n    w: {}          // weak collections IDs\n  } });\n};\nvar fastKey = function (it, create) {\n  // return primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F';\n    // not necessary to add metadata\n    if (!create) return 'E';\n    // add missing metadata\n    setMeta(it);\n  // return object ID\n  } return it[META].i;\n};\nvar getWeak = function (it, create) {\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true;\n    // not necessary to add metadata\n    if (!create) return false;\n    // add missing metadata\n    setMeta(it);\n  // return hash weak collections IDs\n  } return it[META].w;\n};\n// add metadata on freeze-family methods calling\nvar onFreeze = function (it) {\n  if (FREEZE && meta.NEED && isExtensible(it) && !has(it, META)) setMeta(it);\n  return it;\n};\nvar meta = module.exports = {\n  KEY: META,\n  NEED: false,\n  fastKey: fastKey,\n  getWeak: getWeak,\n  onFreeze: onFreeze\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_meta.js\n// module id = 102\n// module chunks = 7","var getKeys = require('./_object-keys');\nvar toIObject = require('./_to-iobject');\nmodule.exports = function (object, el) {\n  var O = toIObject(object);\n  var keys = getKeys(O);\n  var length = keys.length;\n  var index = 0;\n  var key;\n  while (length > index) if (O[key = keys[index++]] === el) return key;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_keyof.js\n// module id = 103\n// module chunks = 7","// all enumerable object keys, includes symbols\nvar getKeys = require('./_object-keys');\nvar gOPS = require('./_object-gops');\nvar pIE = require('./_object-pie');\nmodule.exports = function (it) {\n  var result = getKeys(it);\n  var getSymbols = gOPS.f;\n  if (getSymbols) {\n    var symbols = getSymbols(it);\n    var isEnum = pIE.f;\n    var i = 0;\n    var key;\n    while (symbols.length > i) if (isEnum.call(it, key = symbols[i++])) result.push(key);\n  } return result;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_enum-keys.js\n// module id = 104\n// module chunks = 7","// 7.2.2 IsArray(argument)\nvar cof = require('./_cof');\nmodule.exports = Array.isArray || function isArray(arg) {\n  return cof(arg) == 'Array';\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_is-array.js\n// module id = 105\n// module chunks = 7","// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = require('./_to-iobject');\nvar gOPN = require('./_object-gopn').f;\nvar toString = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function (it) {\n  try {\n    return gOPN(it);\n  } catch (e) {\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.f = function getOwnPropertyNames(it) {\n  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-gopn-ext.js\n// module id = 106\n// module chunks = 7","require('./_wks-define')('asyncIterator');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es7.symbol.async-iterator.js\n// module id = 108\n// module chunks = 7","require('./_wks-define')('observable');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es7.symbol.observable.js\n// module id = 109\n// module chunks = 7","module.exports = { \"default\": require(\"core-js/library/fn/object/set-prototype-of\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/object/set-prototype-of.js\n// module id = 110\n// module chunks = 7","require('../../modules/es6.object.set-prototype-of');\nmodule.exports = require('../../modules/_core').Object.setPrototypeOf;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/object/set-prototype-of.js\n// module id = 111\n// module chunks = 7","// 19.1.3.19 Object.setPrototypeOf(O, proto)\nvar $export = require('./_export');\n$export($export.S, 'Object', { setPrototypeOf: require('./_set-proto').set });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.object.set-prototype-of.js\n// module id = 112\n// module chunks = 7","// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar isObject = require('./_is-object');\nvar anObject = require('./_an-object');\nvar check = function (O, proto) {\n  anObject(O);\n  if (!isObject(proto) && proto !== null) throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function (test, buggy, set) {\n      try {\n        set = require('./_ctx')(Function.call, require('./_object-gopd').f(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch (e) { buggy = true; }\n      return function setPrototypeOf(O, proto) {\n        check(O, proto);\n        if (buggy) O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_set-proto.js\n// module id = 113\n// module chunks = 7","module.exports = { \"default\": require(\"core-js/library/fn/object/create\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/object/create.js\n// module id = 114\n// module chunks = 7","require('../../modules/es6.object.create');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function create(P, D) {\n  return $Object.create(P, D);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/object/create.js\n// module id = 115\n// module chunks = 7","var $export = require('./_export');\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\n$export($export.S, 'Object', { create: require('./_object-create') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.object.create.js\n// module id = 116\n// module chunks = 7","module.exports = { \"default\": require(\"core-js/library/fn/object/get-own-property-descriptor\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/object/get-own-property-descriptor.js\n// module id = 117\n// module chunks = 7","require('../../modules/es6.object.get-own-property-descriptor');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function getOwnPropertyDescriptor(it, key) {\n  return $Object.getOwnPropertyDescriptor(it, key);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/object/get-own-property-descriptor.js\n// module id = 118\n// module chunks = 7","// 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\nvar toIObject = require('./_to-iobject');\nvar $getOwnPropertyDescriptor = require('./_object-gopd').f;\n\nrequire('./_object-sap')('getOwnPropertyDescriptor', function () {\n  return function getOwnPropertyDescriptor(it, key) {\n    return $getOwnPropertyDescriptor(toIObject(it), key);\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.object.get-own-property-descriptor.js\n// module id = 119\n// module chunks = 7","/**\r\n * @author       Timo Hausmann\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2014 Photon Storm Ltd.\r\n * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n */\r\n\r\n/**\r\n * A QuadTree implementation. The original code was a conversion of the Java code posted to GameDevTuts.\r\n * However I've tweaked it massively to add node indexing, removed lots of temp. var creation and significantly increased performance as a result.\r\n * Original version at https://github.com/timohausmann/quadtree-js/\r\n *\r\n * @class QuadTree\r\n * @constructor\r\n * @param {number} x - The top left coordinate of the quadtree.\r\n * @param {number} y - The top left coordinate of the quadtree.\r\n * @param {number} width - The width of the quadtree in pixels.\r\n * @param {number} height - The height of the quadtree in pixels.\r\n * @param {number} [maxObjects=10] - The maximum number of objects per node.\r\n * @param {number} [maxLevels=4] - The maximum number of levels to iterate to.\r\n * @param {number} [level=0] - Which level is this?\r\n */\r\nexport default function QuadTree(left, top, width, height, maxObjects, maxLevels, level, root) {\r\n\r\n  /**\r\n   * @property {number} maxObjects - The maximum number of objects per node.\r\n   * @default\r\n   */\r\n  this.maxObjects = 10;\r\n\r\n  /**\r\n   * @property {number} maxLevels - The maximum number of levels to break down to.\r\n   * @default\r\n   */\r\n  this.maxLevels = 4;\r\n\r\n  /**\r\n   * @property {number} level - The current level.\r\n   */\r\n  this.level = 0;\r\n\r\n  /**\r\n   * @property {object} bounds - Object that contains the quadtree bounds.\r\n   */\r\n  this.bounds = {};\r\n\r\n  /**\r\n   * @property {array} objects - Array of quadtree children.\r\n   */\r\n  this.objects = [];\r\n\r\n  /**\r\n   * @property {array} nodes - Array of associated child nodes.\r\n   */\r\n  this.nodes = [];\r\n\r\n  /**\r\n   * @property {array} _empty - Internal empty array.\r\n   * @private\r\n   */\r\n  this._empty = [];\r\n\r\n  this.root = root || this;\r\n  this.entityMap = {};\r\n\r\n  this.reset(left, top, width, height, maxObjects, maxLevels, level);\r\n\r\n};\r\n\r\nQuadTree.prototype = {\r\n\r\n  /**\r\n   * Resets the QuadTree.\r\n   *\r\n   * @method QuadTree#reset\r\n   * @param {number} x - The top left coordinate of the quadtree.\r\n   * @param {number} y - The top left coordinate of the quadtree.\r\n   * @param {number} width - The width of the quadtree in pixels.\r\n   * @param {number} height - The height of the quadtree in pixels.\r\n   * @param {number} [maxObjects=10] - The maximum number of objects per node.\r\n   * @param {number} [maxLevels=4] - The maximum number of levels to iterate to.\r\n   * @param {number} [level=0] - Which level is this?\r\n   */\r\n  reset: function (left, top, width, height, maxObjects, maxLevels, level) {\r\n\r\n    this.maxObjects = maxObjects || 10;\r\n    this.maxLevels = maxLevels || 4;\r\n    this.level = level || 0;\r\n\r\n    this.bounds = {\r\n      width: width,\r\n      height: height,\r\n      subWidth: Math.floor(width / 2),\r\n      subHeight: Math.floor(height / 2),\r\n      left: Math.round(left),\r\n      top: Math.round(top),\r\n      midX: Math.round(left + width / 2),\r\n      midY: Math.round(top + height / 2),\r\n      right: Math.round(left + width),\r\n      bottom: Math.round(top + height)\r\n    };\r\n\r\n    this.objects.length = 0;\r\n    this.nodes.length = 0;\r\n\r\n  },\r\n\r\n  /**\r\n   * Split the node into 4 subnodes\r\n   *\r\n   * @method QuadTree#split\r\n   */\r\n  split: function () {\r\n\r\n    //  top right node\r\n    this.nodes[0] = new QuadTree(\r\n      this.bounds.left + this.bounds.subWidth,\r\n      this.bounds.top,\r\n      this.bounds.subWidth, this.bounds.subHeight,\r\n      this.maxObjects, this.maxLevels, (this.level + 1), this.root\r\n    );\r\n\r\n    //  top left node\r\n    this.nodes[1] = new QuadTree(\r\n      this.bounds.left,\r\n      this.bounds.top,\r\n      this.bounds.subWidth, this.bounds.subHeight,\r\n      this.maxObjects, this.maxLevels, (this.level + 1), this.root\r\n    );\r\n\r\n    //  bottom left node\r\n    this.nodes[2] = new QuadTree(\r\n      this.bounds.left,\r\n      this.bounds.top + this.bounds.subHeight,\r\n      this.bounds.subWidth, this.bounds.subHeight,\r\n      this.maxObjects, this.maxLevels, (this.level + 1), this.root\r\n    );\r\n\r\n    //  bottom right node\r\n    this.nodes[3] = new QuadTree(\r\n      this.bounds.left + this.bounds.subWidth,\r\n      this.bounds.top + this.bounds.subHeight,\r\n      this.bounds.subWidth, this.bounds.subHeight,\r\n      this.maxObjects, this.maxLevels, (this.level + 1), this.root\r\n    );\r\n\r\n  },\r\n\r\n  /**\r\n   * Insert the object into the node. If the node exceeds the capacity, it will split and add all objects to their corresponding subnodes.\r\n   *\r\n   * @method QuadTree#insert\r\n   * @param {Phaser.Physics.Arcade.Body|object} body - The Body object to insert into the quadtree. Can be any object so long as it exposes x, y, right and bottom properties.\r\n   */\r\n  insert: function (body) {\r\n\r\n    var i = 0;\r\n    var index;\r\n\r\n    //  if we have subnodes ...\r\n    if (this.nodes[0] != null) {\r\n      index = this.getIndex(body);\r\n      if (index !== -1) {\r\n        this.nodes[index].insert(body);\r\n        return;\r\n      }\r\n    }\r\n\r\n    // Check if we already have this item in the quadtree structure.\r\n    var oldNode = this.root.entityMap[body.entityId];\r\n    if (oldNode === this) {\r\n      // If we have the item, and it's this current sub-tree, then just bail.\r\n      return;\r\n    }\r\n    if (oldNode) {\r\n      // If the item is known, but in another sub-tree, then delete it from there.\r\n      var objectIndex = oldNode.objects.indexOf(body);\r\n      if (objectIndex !== -1) {\r\n        oldNode.objects.splice(objectIndex, 1);\r\n      }\r\n    }\r\n\r\n    /*\r\n    // TODO: Need the opposite of split() to consolidate subtrees when they\r\n    // lose items.\r\n\r\n    this.root.entityMap[body.entityId] = this;\r\n    */\r\n\r\n    this.objects.push(body);\r\n\r\n    if (this.objects.length > this.maxObjects && this.level < this.maxLevels) {\r\n      //  Split if we don't already have subnodes\r\n      if (this.nodes[0] == null) {\r\n        this.split();\r\n      }\r\n      //  Add objects to subnodes\r\n      while (i < this.objects.length) {\r\n        index = this.getIndex(this.objects[i]);\r\n        if (index !== -1) {\r\n          //  this is expensive - see what we can do about it\r\n          this.nodes[index].insert(this.objects.splice(i, 1)[0]);\r\n        } else {\r\n          i++;\r\n        }\r\n      }\r\n    }\r\n\r\n  },\r\n\r\n  /**\r\n   * Determine which node the object belongs to.\r\n   *\r\n   * @method QuadTree#getIndex\r\n   * @param {Phaser.Rectangle|object} rect - The bounds in which to check.\r\n   * @return {number} index - Index of the subnode (0-3), or -1 if rect cannot completely fit within a subnode and is part of the parent node.\r\n   */\r\n  getIndex: function (rect) {\r\n    if (rect.left < this.bounds.midX && rect.right < this.bounds.midX) {\r\n      if (rect.top < this.bounds.midY && rect.bottom < this.bounds.midY) {\r\n        //  rect fits within the top-left quadrant of this quadtree\r\n        return 1;\r\n      } else if (rect.top > this.bounds.midY) {\r\n        //  rect fits within the bottom-left quadrant of this quadtree\r\n        return 2;\r\n      }\r\n    } else if (rect.left > this.bounds.midX) {\r\n      //  rect can completely fit within the right quadrants\r\n      if (rect.top < this.bounds.midY && rect.bottom < this.bounds.midY) {\r\n        //  rect fits within the top-right quadrant of this quadtree\r\n        return 0;\r\n      } else if (rect.top > this.bounds.midY) {\r\n        //  rect fits within the bottom-right quadrant of this quadtree\r\n        return 3;\r\n      }\r\n    }\r\n    // rect doesn't fit, i.e. it straddles the internal quadrants\r\n    return -1;\r\n  },\r\n\r\n  /**\r\n   * Iterate through all objects that could collide with the given Sprite or Rectangle.\r\n   *\r\n   * @method QuadTree#retrieve\r\n   * @param {Phaser.Sprite|Phaser.Rectangle} source - The source object to check the QuadTree against. Either a Sprite or Rectangle.\r\n   */\r\n  iterate: function (source, iteratorFn, optionalParam) {\r\n    var index = this.getIndex(source);\r\n\r\n    for (var i = 0; i < this.objects.length; i++) {\r\n      iteratorFn(this.objects[i], optionalParam);\r\n    }\r\n\r\n    if (this.nodes[0]) {\r\n      //  If rect fits into a subnode ..\r\n      if (index !== -1) {\r\n        this.nodes[index].iterate(source, iteratorFn, optionalParam);\r\n      } else {\r\n        //  If rect does not fit into a subnode, check it against all subnodes (unrolled for speed)\r\n        this.nodes[0].iterate(source, iteratorFn, optionalParam);\r\n        this.nodes[1].iterate(source, iteratorFn, optionalParam);\r\n        this.nodes[2].iterate(source, iteratorFn, optionalParam);\r\n        this.nodes[3].iterate(source, iteratorFn, optionalParam);\r\n      }\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Clear the quadtree.\r\n   * @method QuadTree#clear\r\n   */\r\n  clear: function () {\r\n    this.objects.length = 0;\r\n    var i = this.nodes.length;\r\n    while (i--) {\r\n      this.nodes[i].clear();\r\n      this.nodes.splice(i, 1);\r\n    }\r\n    this.nodes.length = 0;\r\n  }\r\n\r\n};\r\n\r\n/**\r\n * Javascript QuadTree\r\n * @version 1.0\r\n *\r\n * @version 1.3, March 11th 2014\r\n * @author Richard Davey\r\n * The original code was a conversion of the Java code posted to GameDevTuts. However I've tweaked\r\n * it massively to add node indexing, removed lots of temp. var creation and significantly\r\n * increased performance as a result.\r\n *\r\n * Original version at https://github.com/timohausmann/quadtree-js/\r\n */\r\n\r\n/**\r\n * @copyright © 2012 Timo Hausmann\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining\r\n * a copy of this software and associated documentation files (the\r\n * \"Software\"), to deal in the Software without restriction, including\r\n * without limitation the rights to use, copy, modify, merge, publish,\r\n * distribute, sublicense, and/or sell copies of the Software, and to\r\n * permit persons to whom the Software is furnished to do so, subject to\r\n * the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be\r\n * included in all copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\r\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\r\n * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\r\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n */\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/QuadTree.js","module.exports = require('./vendor/dat.gui')\nmodule.exports.color = require('./vendor/dat.color')\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/dat-gui/index.js\n// module id = 121\n// module chunks = 7","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\n/** @namespace */\nvar dat = module.exports = dat || {};\n\n/** @namespace */\ndat.gui = dat.gui || {};\n\n/** @namespace */\ndat.utils = dat.utils || {};\n\n/** @namespace */\ndat.controllers = dat.controllers || {};\n\n/** @namespace */\ndat.dom = dat.dom || {};\n\n/** @namespace */\ndat.color = dat.color || {};\n\ndat.utils.css = (function () {\n  return {\n    load: function (url, doc) {\n      doc = doc || document;\n      var link = doc.createElement('link');\n      link.type = 'text/css';\n      link.rel = 'stylesheet';\n      link.href = url;\n      doc.getElementsByTagName('head')[0].appendChild(link);\n    },\n    inject: function(css, doc) {\n      doc = doc || document;\n      var injected = document.createElement('style');\n      injected.type = 'text/css';\n      injected.innerHTML = css;\n      doc.getElementsByTagName('head')[0].appendChild(injected);\n    }\n  }\n})();\n\n\ndat.utils.common = (function () {\n  \n  var ARR_EACH = Array.prototype.forEach;\n  var ARR_SLICE = Array.prototype.slice;\n\n  /**\n   * Band-aid methods for things that should be a lot easier in JavaScript.\n   * Implementation and structure inspired by underscore.js\n   * http://documentcloud.github.com/underscore/\n   */\n\n  return { \n    \n    BREAK: {},\n  \n    extend: function(target) {\n      \n      this.each(ARR_SLICE.call(arguments, 1), function(obj) {\n        \n        for (var key in obj)\n          if (!this.isUndefined(obj[key])) \n            target[key] = obj[key];\n        \n      }, this);\n      \n      return target;\n      \n    },\n    \n    defaults: function(target) {\n      \n      this.each(ARR_SLICE.call(arguments, 1), function(obj) {\n        \n        for (var key in obj)\n          if (this.isUndefined(target[key])) \n            target[key] = obj[key];\n        \n      }, this);\n      \n      return target;\n    \n    },\n    \n    compose: function() {\n      var toCall = ARR_SLICE.call(arguments);\n            return function() {\n              var args = ARR_SLICE.call(arguments);\n              for (var i = toCall.length -1; i >= 0; i--) {\n                args = [toCall[i].apply(this, args)];\n              }\n              return args[0];\n            }\n    },\n    \n    each: function(obj, itr, scope) {\n\n      \n      if (ARR_EACH && obj.forEach === ARR_EACH) { \n        \n        obj.forEach(itr, scope);\n        \n      } else if (obj.length === obj.length + 0) { // Is number but not NaN\n        \n        for (var key = 0, l = obj.length; key < l; key++)\n          if (key in obj && itr.call(scope, obj[key], key) === this.BREAK) \n            return;\n            \n      } else {\n\n        for (var key in obj) \n          if (itr.call(scope, obj[key], key) === this.BREAK)\n            return;\n            \n      }\n            \n    },\n    \n    defer: function(fnc) {\n      setTimeout(fnc, 0);\n    },\n    \n    toArray: function(obj) {\n      if (obj.toArray) return obj.toArray();\n      return ARR_SLICE.call(obj);\n    },\n\n    isUndefined: function(obj) {\n      return obj === undefined;\n    },\n    \n    isNull: function(obj) {\n      return obj === null;\n    },\n    \n    isNaN: function(obj) {\n      return obj !== obj;\n    },\n    \n    isArray: Array.isArray || function(obj) {\n      return obj.constructor === Array;\n    },\n    \n    isObject: function(obj) {\n      return obj === Object(obj);\n    },\n    \n    isNumber: function(obj) {\n      return obj === obj+0;\n    },\n    \n    isString: function(obj) {\n      return obj === obj+'';\n    },\n    \n    isBoolean: function(obj) {\n      return obj === false || obj === true;\n    },\n    \n    isFunction: function(obj) {\n      return Object.prototype.toString.call(obj) === '[object Function]';\n    }\n  \n  };\n    \n})();\n\n\ndat.controllers.Controller = (function (common) {\n\n  /**\n   * @class An \"abstract\" class that represents a given property of an object.\n   *\n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   *\n   * @member dat.controllers\n   */\n  var Controller = function(object, property) {\n\n    this.initialValue = object[property];\n\n    /**\n     * Those who extend this class will put their DOM elements in here.\n     * @type {DOMElement}\n     */\n    this.domElement = document.createElement('div');\n\n    /**\n     * The object to manipulate\n     * @type {Object}\n     */\n    this.object = object;\n\n    /**\n     * The name of the property to manipulate\n     * @type {String}\n     */\n    this.property = property;\n\n    /**\n     * The function to be called on change.\n     * @type {Function}\n     * @ignore\n     */\n    this.__onChange = undefined;\n\n    /**\n     * The function to be called on finishing change.\n     * @type {Function}\n     * @ignore\n     */\n    this.__onFinishChange = undefined;\n\n  };\n\n  common.extend(\n\n      Controller.prototype,\n\n      /** @lends dat.controllers.Controller.prototype */\n      {\n\n        /**\n         * Specify that a function fire every time someone changes the value with\n         * this Controller.\n         *\n         * @param {Function} fnc This function will be called whenever the value\n         * is modified via this Controller.\n         * @returns {dat.controllers.Controller} this\n         */\n        onChange: function(fnc) {\n          this.__onChange = fnc;\n          return this;\n        },\n\n        /**\n         * Specify that a function fire every time someone \"finishes\" changing\n         * the value wih this Controller. Useful for values that change\n         * incrementally like numbers or strings.\n         *\n         * @param {Function} fnc This function will be called whenever\n         * someone \"finishes\" changing the value via this Controller.\n         * @returns {dat.controllers.Controller} this\n         */\n        onFinishChange: function(fnc) {\n          this.__onFinishChange = fnc;\n          return this;\n        },\n\n        /**\n         * Change the value of <code>object[property]</code>\n         *\n         * @param {Object} newValue The new value of <code>object[property]</code>\n         */\n        setValue: function(newValue) {\n          this.object[this.property] = newValue;\n          if (this.__onChange) {\n            this.__onChange.call(this, newValue);\n          }\n          this.updateDisplay();\n          return this;\n        },\n\n        /**\n         * Gets the value of <code>object[property]</code>\n         *\n         * @returns {Object} The current value of <code>object[property]</code>\n         */\n        getValue: function() {\n          return this.object[this.property];\n        },\n\n        /**\n         * Refreshes the visual display of a Controller in order to keep sync\n         * with the object's current value.\n         * @returns {dat.controllers.Controller} this\n         */\n        updateDisplay: function() {\n          return this;\n        },\n\n        /**\n         * @returns {Boolean} true if the value has deviated from initialValue\n         */\n        isModified: function() {\n          return this.initialValue !== this.getValue()\n        }\n\n      }\n\n  );\n\n  return Controller;\n\n\n})(dat.utils.common);\n\n\ndat.dom.dom = (function (common) {\n\n  var EVENT_MAP = {\n    'HTMLEvents': ['change'],\n    'MouseEvents': ['click','mousemove','mousedown','mouseup', 'mouseover'],\n    'KeyboardEvents': ['keydown']\n  };\n\n  var EVENT_MAP_INV = {};\n  common.each(EVENT_MAP, function(v, k) {\n    common.each(v, function(e) {\n      EVENT_MAP_INV[e] = k;\n    });\n  });\n\n  var CSS_VALUE_PIXELS = /(\\d+(\\.\\d+)?)px/;\n\n  function cssValueToPixels(val) {\n\n    if (val === '0' || common.isUndefined(val)) return 0;\n\n    var match = val.match(CSS_VALUE_PIXELS);\n\n    if (!common.isNull(match)) {\n      return parseFloat(match[1]);\n    }\n\n    // TODO ...ems? %?\n\n    return 0;\n\n  }\n\n  /**\n   * @namespace\n   * @member dat.dom\n   */\n  var dom = {\n\n    /**\n     * \n     * @param elem\n     * @param selectable\n     */\n    makeSelectable: function(elem, selectable) {\n\n      if (elem === undefined || elem.style === undefined) return;\n\n      elem.onselectstart = selectable ? function() {\n        return false;\n      } : function() {\n      };\n\n      elem.style.MozUserSelect = selectable ? 'auto' : 'none';\n      elem.style.KhtmlUserSelect = selectable ? 'auto' : 'none';\n      elem.unselectable = selectable ? 'on' : 'off';\n\n    },\n\n    /**\n     *\n     * @param elem\n     * @param horizontal\n     * @param vertical\n     */\n    makeFullscreen: function(elem, horizontal, vertical) {\n\n      if (common.isUndefined(horizontal)) horizontal = true;\n      if (common.isUndefined(vertical)) vertical = true;\n\n      elem.style.position = 'absolute';\n\n      if (horizontal) {\n        elem.style.left = 0;\n        elem.style.right = 0;\n      }\n      if (vertical) {\n        elem.style.top = 0;\n        elem.style.bottom = 0;\n      }\n\n    },\n\n    /**\n     *\n     * @param elem\n     * @param eventType\n     * @param params\n     */\n    fakeEvent: function(elem, eventType, params, aux) {\n      params = params || {};\n      var className = EVENT_MAP_INV[eventType];\n      if (!className) {\n        throw new Error('Event type ' + eventType + ' not supported.');\n      }\n      var evt = document.createEvent(className);\n      switch (className) {\n        case 'MouseEvents':\n          var clientX = params.x || params.clientX || 0;\n          var clientY = params.y || params.clientY || 0;\n          evt.initMouseEvent(eventType, params.bubbles || false,\n              params.cancelable || true, window, params.clickCount || 1,\n              0, //screen X\n              0, //screen Y\n              clientX, //client X\n              clientY, //client Y\n              false, false, false, false, 0, null);\n          break;\n        case 'KeyboardEvents':\n          var init = evt.initKeyboardEvent || evt.initKeyEvent; // webkit || moz\n          common.defaults(params, {\n            cancelable: true,\n            ctrlKey: false,\n            altKey: false,\n            shiftKey: false,\n            metaKey: false,\n            keyCode: undefined,\n            charCode: undefined\n          });\n          init(eventType, params.bubbles || false,\n              params.cancelable, window,\n              params.ctrlKey, params.altKey,\n              params.shiftKey, params.metaKey,\n              params.keyCode, params.charCode);\n          break;\n        default:\n          evt.initEvent(eventType, params.bubbles || false,\n              params.cancelable || true);\n          break;\n      }\n      common.defaults(evt, aux);\n      elem.dispatchEvent(evt);\n    },\n\n    /**\n     *\n     * @param elem\n     * @param event\n     * @param func\n     * @param bool\n     */\n    bind: function(elem, event, func, bool) {\n      bool = bool || false;\n      if (elem.addEventListener)\n        elem.addEventListener(event, func, bool);\n      else if (elem.attachEvent)\n        elem.attachEvent('on' + event, func);\n      return dom;\n    },\n\n    /**\n     *\n     * @param elem\n     * @param event\n     * @param func\n     * @param bool\n     */\n    unbind: function(elem, event, func, bool) {\n      bool = bool || false;\n      if (elem.removeEventListener)\n        elem.removeEventListener(event, func, bool);\n      else if (elem.detachEvent)\n        elem.detachEvent('on' + event, func);\n      return dom;\n    },\n\n    /**\n     *\n     * @param elem\n     * @param className\n     */\n    addClass: function(elem, className) {\n      if (elem.className === undefined) {\n        elem.className = className;\n      } else if (elem.className !== className) {\n        var classes = elem.className.split(/ +/);\n        if (classes.indexOf(className) == -1) {\n          classes.push(className);\n          elem.className = classes.join(' ').replace(/^\\s+/, '').replace(/\\s+$/, '');\n        }\n      }\n      return dom;\n    },\n\n    /**\n     *\n     * @param elem\n     * @param className\n     */\n    removeClass: function(elem, className) {\n      if (className) {\n        if (elem.className === undefined) {\n          // elem.className = className;\n        } else if (elem.className === className) {\n          elem.removeAttribute('class');\n        } else {\n          var classes = elem.className.split(/ +/);\n          var index = classes.indexOf(className);\n          if (index != -1) {\n            classes.splice(index, 1);\n            elem.className = classes.join(' ');\n          }\n        }\n      } else {\n        elem.className = undefined;\n      }\n      return dom;\n    },\n\n    hasClass: function(elem, className) {\n      return new RegExp('(?:^|\\\\s+)' + className + '(?:\\\\s+|$)').test(elem.className) || false;\n    },\n\n    /**\n     *\n     * @param elem\n     */\n    getWidth: function(elem) {\n\n      var style = getComputedStyle(elem);\n\n      return cssValueToPixels(style['border-left-width']) +\n          cssValueToPixels(style['border-right-width']) +\n          cssValueToPixels(style['padding-left']) +\n          cssValueToPixels(style['padding-right']) +\n          cssValueToPixels(style['width']);\n    },\n\n    /**\n     *\n     * @param elem\n     */\n    getHeight: function(elem) {\n\n      var style = getComputedStyle(elem);\n\n      return cssValueToPixels(style['border-top-width']) +\n          cssValueToPixels(style['border-bottom-width']) +\n          cssValueToPixels(style['padding-top']) +\n          cssValueToPixels(style['padding-bottom']) +\n          cssValueToPixels(style['height']);\n    },\n\n    /**\n     *\n     * @param elem\n     */\n    getOffset: function(elem) {\n      var offset = {left: 0, top:0};\n      if (elem.offsetParent) {\n        do {\n          offset.left += elem.offsetLeft;\n          offset.top += elem.offsetTop;\n        } while (elem = elem.offsetParent);\n      }\n      return offset;\n    },\n\n    // http://stackoverflow.com/posts/2684561/revisions\n    /**\n     * \n     * @param elem\n     */\n    isActive: function(elem) {\n      return elem === document.activeElement && ( elem.type || elem.href );\n    }\n\n  };\n\n  return dom;\n\n})(dat.utils.common);\n\n\ndat.controllers.OptionController = (function (Controller, dom, common) {\n\n  /**\n   * @class Provides a select input to alter the property of an object, using a\n   * list of accepted values.\n   *\n   * @extends dat.controllers.Controller\n   *\n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   * @param {Object|string[]} options A map of labels to acceptable values, or\n   * a list of acceptable string values.\n   *\n   * @member dat.controllers\n   */\n  var OptionController = function(object, property, options) {\n\n    OptionController.superclass.call(this, object, property);\n\n    var _this = this;\n\n    /**\n     * The drop down menu\n     * @ignore\n     */\n    this.__select = document.createElement('select');\n\n    if (common.isArray(options)) {\n      var map = {};\n      common.each(options, function(element) {\n        map[element] = element;\n      });\n      options = map;\n    }\n\n    common.each(options, function(value, key) {\n\n      var opt = document.createElement('option');\n      opt.innerHTML = key;\n      opt.setAttribute('value', value);\n      _this.__select.appendChild(opt);\n\n    });\n\n    // Acknowledge original value\n    this.updateDisplay();\n\n    dom.bind(this.__select, 'change', function() {\n      var desiredValue = this.options[this.selectedIndex].value;\n      _this.setValue(desiredValue);\n    });\n\n    this.domElement.appendChild(this.__select);\n\n  };\n\n  OptionController.superclass = Controller;\n\n  common.extend(\n\n      OptionController.prototype,\n      Controller.prototype,\n\n      {\n\n        setValue: function(v) {\n          var toReturn = OptionController.superclass.prototype.setValue.call(this, v);\n          if (this.__onFinishChange) {\n            this.__onFinishChange.call(this, this.getValue());\n          }\n          return toReturn;\n        },\n\n        updateDisplay: function() {\n          this.__select.value = this.getValue();\n          return OptionController.superclass.prototype.updateDisplay.call(this);\n        }\n\n      }\n\n  );\n\n  return OptionController;\n\n})(dat.controllers.Controller,\ndat.dom.dom,\ndat.utils.common);\n\n\ndat.controllers.NumberController = (function (Controller, common) {\n\n  /**\n   * @class Represents a given property of an object that is a number.\n   *\n   * @extends dat.controllers.Controller\n   *\n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   * @param {Object} [params] Optional parameters\n   * @param {Number} [params.min] Minimum allowed value\n   * @param {Number} [params.max] Maximum allowed value\n   * @param {Number} [params.step] Increment by which to change value\n   *\n   * @member dat.controllers\n   */\n  var NumberController = function(object, property, params) {\n\n    NumberController.superclass.call(this, object, property);\n\n    params = params || {};\n\n    this.__min = params.min;\n    this.__max = params.max;\n    this.__step = params.step;\n\n    if (common.isUndefined(this.__step)) {\n\n      if (this.initialValue == 0) {\n        this.__impliedStep = 1; // What are we, psychics?\n      } else {\n        // Hey Doug, check this out.\n        this.__impliedStep = Math.pow(10, Math.floor(Math.log(this.initialValue)/Math.LN10))/10;\n      }\n\n    } else {\n\n      this.__impliedStep = this.__step;\n\n    }\n\n    this.__precision = numDecimals(this.__impliedStep);\n\n\n  };\n\n  NumberController.superclass = Controller;\n\n  common.extend(\n\n      NumberController.prototype,\n      Controller.prototype,\n\n      /** @lends dat.controllers.NumberController.prototype */\n      {\n\n        setValue: function(v) {\n\n          if (this.__min !== undefined && v < this.__min) {\n            v = this.__min;\n          } else if (this.__max !== undefined && v > this.__max) {\n            v = this.__max;\n          }\n\n          if (this.__step !== undefined && v % this.__step != 0) {\n            v = Math.round(v / this.__step) * this.__step;\n          }\n\n          return NumberController.superclass.prototype.setValue.call(this, v);\n\n        },\n\n        /**\n         * Specify a minimum value for <code>object[property]</code>.\n         *\n         * @param {Number} minValue The minimum value for\n         * <code>object[property]</code>\n         * @returns {dat.controllers.NumberController} this\n         */\n        min: function(v) {\n          this.__min = v;\n          return this;\n        },\n\n        /**\n         * Specify a maximum value for <code>object[property]</code>.\n         *\n         * @param {Number} maxValue The maximum value for\n         * <code>object[property]</code>\n         * @returns {dat.controllers.NumberController} this\n         */\n        max: function(v) {\n          this.__max = v;\n          return this;\n        },\n\n        /**\n         * Specify a step value that dat.controllers.NumberController\n         * increments by.\n         *\n         * @param {Number} stepValue The step value for\n         * dat.controllers.NumberController\n         * @default if minimum and maximum specified increment is 1% of the\n         * difference otherwise stepValue is 1\n         * @returns {dat.controllers.NumberController} this\n         */\n        step: function(v) {\n          this.__step = v;\n          return this;\n        }\n\n      }\n\n  );\n\n  function numDecimals(x) {\n    x = x.toString();\n    if (x.indexOf('.') > -1) {\n      return x.length - x.indexOf('.') - 1;\n    } else {\n      return 0;\n    }\n  }\n\n  return NumberController;\n\n})(dat.controllers.Controller,\ndat.utils.common);\n\n\ndat.controllers.NumberControllerBox = (function (NumberController, dom, common) {\n\n  /**\n   * @class Represents a given property of an object that is a number and\n   * provides an input element with which to manipulate it.\n   *\n   * @extends dat.controllers.Controller\n   * @extends dat.controllers.NumberController\n   *\n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   * @param {Object} [params] Optional parameters\n   * @param {Number} [params.min] Minimum allowed value\n   * @param {Number} [params.max] Maximum allowed value\n   * @param {Number} [params.step] Increment by which to change value\n   *\n   * @member dat.controllers\n   */\n  var NumberControllerBox = function(object, property, params) {\n\n    this.__truncationSuspended = false;\n\n    NumberControllerBox.superclass.call(this, object, property, params);\n\n    var _this = this;\n\n    /**\n     * {Number} Previous mouse y position\n     * @ignore\n     */\n    var prev_y;\n\n    this.__input = document.createElement('input');\n    this.__input.setAttribute('type', 'text');\n\n    // Makes it so manually specified values are not truncated.\n\n    dom.bind(this.__input, 'change', onChange);\n    dom.bind(this.__input, 'blur', onBlur);\n    dom.bind(this.__input, 'mousedown', onMouseDown);\n    dom.bind(this.__input, 'keydown', function(e) {\n\n      // When pressing entire, you can be as precise as you want.\n      if (e.keyCode === 13) {\n        _this.__truncationSuspended = true;\n        this.blur();\n        _this.__truncationSuspended = false;\n      }\n\n    });\n\n    function onChange() {\n      var attempted = parseFloat(_this.__input.value);\n      if (!common.isNaN(attempted)) _this.setValue(attempted);\n    }\n\n    function onBlur() {\n      onChange();\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n\n    function onMouseDown(e) {\n      dom.bind(window, 'mousemove', onMouseDrag);\n      dom.bind(window, 'mouseup', onMouseUp);\n      prev_y = e.clientY;\n    }\n\n    function onMouseDrag(e) {\n\n      var diff = prev_y - e.clientY;\n      _this.setValue(_this.getValue() + diff * _this.__impliedStep);\n\n      prev_y = e.clientY;\n\n    }\n\n    function onMouseUp() {\n      dom.unbind(window, 'mousemove', onMouseDrag);\n      dom.unbind(window, 'mouseup', onMouseUp);\n    }\n\n    this.updateDisplay();\n\n    this.domElement.appendChild(this.__input);\n\n  };\n\n  NumberControllerBox.superclass = NumberController;\n\n  common.extend(\n\n      NumberControllerBox.prototype,\n      NumberController.prototype,\n\n      {\n\n        updateDisplay: function() {\n\n          this.__input.value = this.__truncationSuspended ? this.getValue() : roundToDecimal(this.getValue(), this.__precision);\n          return NumberControllerBox.superclass.prototype.updateDisplay.call(this);\n        }\n\n      }\n\n  );\n\n  function roundToDecimal(value, decimals) {\n    var tenTo = Math.pow(10, decimals);\n    return Math.round(value * tenTo) / tenTo;\n  }\n\n  return NumberControllerBox;\n\n})(dat.controllers.NumberController,\ndat.dom.dom,\ndat.utils.common);\n\n\ndat.controllers.NumberControllerSlider = (function (NumberController, dom, css, common, styleSheet) {\n\n  /**\n   * @class Represents a given property of an object that is a number, contains\n   * a minimum and maximum, and provides a slider element with which to\n   * manipulate it. It should be noted that the slider element is made up of\n   * <code>&lt;div&gt;</code> tags, <strong>not</strong> the html5\n   * <code>&lt;slider&gt;</code> element.\n   *\n   * @extends dat.controllers.Controller\n   * @extends dat.controllers.NumberController\n   * \n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   * @param {Number} minValue Minimum allowed value\n   * @param {Number} maxValue Maximum allowed value\n   * @param {Number} stepValue Increment by which to change value\n   *\n   * @member dat.controllers\n   */\n  var NumberControllerSlider = function(object, property, min, max, step) {\n\n    NumberControllerSlider.superclass.call(this, object, property, { min: min, max: max, step: step });\n\n    var _this = this;\n\n    this.__background = document.createElement('div');\n    this.__foreground = document.createElement('div');\n    \n\n\n    dom.bind(this.__background, 'mousedown', onMouseDown);\n    \n    dom.addClass(this.__background, 'slider');\n    dom.addClass(this.__foreground, 'slider-fg');\n\n    function onMouseDown(e) {\n\n      dom.bind(window, 'mousemove', onMouseDrag);\n      dom.bind(window, 'mouseup', onMouseUp);\n\n      onMouseDrag(e);\n    }\n\n    function onMouseDrag(e) {\n\n      e.preventDefault();\n\n      var offset = dom.getOffset(_this.__background);\n      var width = dom.getWidth(_this.__background);\n      \n      _this.setValue(\n        map(e.clientX, offset.left, offset.left + width, _this.__min, _this.__max)\n      );\n\n      return false;\n\n    }\n\n    function onMouseUp() {\n      dom.unbind(window, 'mousemove', onMouseDrag);\n      dom.unbind(window, 'mouseup', onMouseUp);\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n\n    this.updateDisplay();\n\n    this.__background.appendChild(this.__foreground);\n    this.domElement.appendChild(this.__background);\n\n  };\n\n  NumberControllerSlider.superclass = NumberController;\n\n  /**\n   * Injects default stylesheet for slider elements.\n   */\n  NumberControllerSlider.useDefaultStyles = function() {\n    css.inject(styleSheet);\n  };\n\n  common.extend(\n\n      NumberControllerSlider.prototype,\n      NumberController.prototype,\n\n      {\n\n        updateDisplay: function() {\n          var pct = (this.getValue() - this.__min)/(this.__max - this.__min);\n          this.__foreground.style.width = pct*100+'%';\n          return NumberControllerSlider.superclass.prototype.updateDisplay.call(this);\n        }\n\n      }\n\n\n\n  );\n\n  function map(v, i1, i2, o1, o2) {\n    return o1 + (o2 - o1) * ((v - i1) / (i2 - i1));\n  }\n\n  return NumberControllerSlider;\n  \n})(dat.controllers.NumberController,\ndat.dom.dom,\ndat.utils.css,\ndat.utils.common,\n\".slider {\\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\\n  height: 1em;\\n  border-radius: 1em;\\n  background-color: #eee;\\n  padding: 0 0.5em;\\n  overflow: hidden;\\n}\\n\\n.slider-fg {\\n  padding: 1px 0 2px 0;\\n  background-color: #aaa;\\n  height: 1em;\\n  margin-left: -0.5em;\\n  padding-right: 0.5em;\\n  border-radius: 1em 0 0 1em;\\n}\\n\\n.slider-fg:after {\\n  display: inline-block;\\n  border-radius: 1em;\\n  background-color: #fff;\\n  border:  1px solid #aaa;\\n  content: '';\\n  float: right;\\n  margin-right: -1em;\\n  margin-top: -1px;\\n  height: 0.9em;\\n  width: 0.9em;\\n}\");\n\n\ndat.controllers.FunctionController = (function (Controller, dom, common) {\n\n  /**\n   * @class Provides a GUI interface to fire a specified method, a property of an object.\n   *\n   * @extends dat.controllers.Controller\n   *\n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   *\n   * @member dat.controllers\n   */\n  var FunctionController = function(object, property, text) {\n\n    FunctionController.superclass.call(this, object, property);\n\n    var _this = this;\n\n    this.__button = document.createElement('div');\n    this.__button.innerHTML = text === undefined ? 'Fire' : text;\n    dom.bind(this.__button, 'click', function(e) {\n      e.preventDefault();\n      _this.fire();\n      return false;\n    });\n\n    dom.addClass(this.__button, 'button');\n\n    this.domElement.appendChild(this.__button);\n\n\n  };\n\n  FunctionController.superclass = Controller;\n\n  common.extend(\n\n      FunctionController.prototype,\n      Controller.prototype,\n      {\n        \n        fire: function() {\n          if (this.__onChange) {\n            this.__onChange.call(this);\n          }\n          if (this.__onFinishChange) {\n            this.__onFinishChange.call(this, this.getValue());\n          }\n          this.getValue().call(this.object);\n        }\n      }\n\n  );\n\n  return FunctionController;\n\n})(dat.controllers.Controller,\ndat.dom.dom,\ndat.utils.common);\n\n\ndat.controllers.BooleanController = (function (Controller, dom, common) {\n\n  /**\n   * @class Provides a checkbox input to alter the boolean property of an object.\n   * @extends dat.controllers.Controller\n   *\n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   *\n   * @member dat.controllers\n   */\n  var BooleanController = function(object, property) {\n\n    BooleanController.superclass.call(this, object, property);\n\n    var _this = this;\n    this.__prev = this.getValue();\n\n    this.__checkbox = document.createElement('input');\n    this.__checkbox.setAttribute('type', 'checkbox');\n\n\n    dom.bind(this.__checkbox, 'change', onChange, false);\n\n    this.domElement.appendChild(this.__checkbox);\n\n    // Match original value\n    this.updateDisplay();\n\n    function onChange() {\n      _this.setValue(!_this.__prev);\n    }\n\n  };\n\n  BooleanController.superclass = Controller;\n\n  common.extend(\n\n      BooleanController.prototype,\n      Controller.prototype,\n\n      {\n\n        setValue: function(v) {\n          var toReturn = BooleanController.superclass.prototype.setValue.call(this, v);\n          if (this.__onFinishChange) {\n            this.__onFinishChange.call(this, this.getValue());\n          }\n          this.__prev = this.getValue();\n          return toReturn;\n        },\n\n        updateDisplay: function() {\n          \n          if (this.getValue() === true) {\n            this.__checkbox.setAttribute('checked', 'checked');\n            this.__checkbox.checked = true;    \n          } else {\n              this.__checkbox.checked = false;\n          }\n\n          return BooleanController.superclass.prototype.updateDisplay.call(this);\n\n        }\n\n\n      }\n\n  );\n\n  return BooleanController;\n\n})(dat.controllers.Controller,\ndat.dom.dom,\ndat.utils.common);\n\n\ndat.color.toString = (function (common) {\n\n  return function(color) {\n\n    if (color.a == 1 || common.isUndefined(color.a)) {\n\n      var s = color.hex.toString(16);\n      while (s.length < 6) {\n        s = '0' + s;\n      }\n\n      return '#' + s;\n\n    } else {\n\n      return 'rgba(' + Math.round(color.r) + ',' + Math.round(color.g) + ',' + Math.round(color.b) + ',' + color.a + ')';\n\n    }\n\n  }\n\n})(dat.utils.common);\n\n\ndat.color.interpret = (function (toString, common) {\n\n  var result, toReturn;\n\n  var interpret = function() {\n\n    toReturn = false;\n\n    var original = arguments.length > 1 ? common.toArray(arguments) : arguments[0];\n\n    common.each(INTERPRETATIONS, function(family) {\n\n      if (family.litmus(original)) {\n\n        common.each(family.conversions, function(conversion, conversionName) {\n\n          result = conversion.read(original);\n\n          if (toReturn === false && result !== false) {\n            toReturn = result;\n            result.conversionName = conversionName;\n            result.conversion = conversion;\n            return common.BREAK;\n\n          }\n\n        });\n\n        return common.BREAK;\n\n      }\n\n    });\n\n    return toReturn;\n\n  };\n\n  var INTERPRETATIONS = [\n\n    // Strings\n    {\n\n      litmus: common.isString,\n\n      conversions: {\n\n        THREE_CHAR_HEX: {\n\n          read: function(original) {\n\n            var test = original.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);\n            if (test === null) return false;\n\n            return {\n              space: 'HEX',\n              hex: parseInt(\n                  '0x' +\n                      test[1].toString() + test[1].toString() +\n                      test[2].toString() + test[2].toString() +\n                      test[3].toString() + test[3].toString())\n            };\n\n          },\n\n          write: toString\n\n        },\n\n        SIX_CHAR_HEX: {\n\n          read: function(original) {\n\n            var test = original.match(/^#([A-F0-9]{6})$/i);\n            if (test === null) return false;\n\n            return {\n              space: 'HEX',\n              hex: parseInt('0x' + test[1].toString())\n            };\n\n          },\n\n          write: toString\n\n        },\n\n        CSS_RGB: {\n\n          read: function(original) {\n\n            var test = original.match(/^rgb\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/);\n            if (test === null) return false;\n\n            return {\n              space: 'RGB',\n              r: parseFloat(test[1]),\n              g: parseFloat(test[2]),\n              b: parseFloat(test[3])\n            };\n\n          },\n\n          write: toString\n\n        },\n\n        CSS_RGBA: {\n\n          read: function(original) {\n\n            var test = original.match(/^rgba\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\,\\s*(.+)\\s*\\)/);\n            if (test === null) return false;\n\n            return {\n              space: 'RGB',\n              r: parseFloat(test[1]),\n              g: parseFloat(test[2]),\n              b: parseFloat(test[3]),\n              a: parseFloat(test[4])\n            };\n\n          },\n\n          write: toString\n\n        }\n\n      }\n\n    },\n\n    // Numbers\n    {\n\n      litmus: common.isNumber,\n\n      conversions: {\n\n        HEX: {\n          read: function(original) {\n            return {\n              space: 'HEX',\n              hex: original,\n              conversionName: 'HEX'\n            }\n          },\n\n          write: function(color) {\n            return color.hex;\n          }\n        }\n\n      }\n\n    },\n\n    // Arrays\n    {\n\n      litmus: common.isArray,\n\n      conversions: {\n\n        RGB_ARRAY: {\n          read: function(original) {\n            if (original.length != 3) return false;\n            return {\n              space: 'RGB',\n              r: original[0],\n              g: original[1],\n              b: original[2]\n            };\n          },\n\n          write: function(color) {\n            return [color.r, color.g, color.b];\n          }\n\n        },\n\n        RGBA_ARRAY: {\n          read: function(original) {\n            if (original.length != 4) return false;\n            return {\n              space: 'RGB',\n              r: original[0],\n              g: original[1],\n              b: original[2],\n              a: original[3]\n            };\n          },\n\n          write: function(color) {\n            return [color.r, color.g, color.b, color.a];\n          }\n\n        }\n\n      }\n\n    },\n\n    // Objects\n    {\n\n      litmus: common.isObject,\n\n      conversions: {\n\n        RGBA_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.r) &&\n                common.isNumber(original.g) &&\n                common.isNumber(original.b) &&\n                common.isNumber(original.a)) {\n              return {\n                space: 'RGB',\n                r: original.r,\n                g: original.g,\n                b: original.b,\n                a: original.a\n              }\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              r: color.r,\n              g: color.g,\n              b: color.b,\n              a: color.a\n            }\n          }\n        },\n\n        RGB_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.r) &&\n                common.isNumber(original.g) &&\n                common.isNumber(original.b)) {\n              return {\n                space: 'RGB',\n                r: original.r,\n                g: original.g,\n                b: original.b\n              }\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              r: color.r,\n              g: color.g,\n              b: color.b\n            }\n          }\n        },\n\n        HSVA_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.h) &&\n                common.isNumber(original.s) &&\n                common.isNumber(original.v) &&\n                common.isNumber(original.a)) {\n              return {\n                space: 'HSV',\n                h: original.h,\n                s: original.s,\n                v: original.v,\n                a: original.a\n              }\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              h: color.h,\n              s: color.s,\n              v: color.v,\n              a: color.a\n            }\n          }\n        },\n\n        HSV_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.h) &&\n                common.isNumber(original.s) &&\n                common.isNumber(original.v)) {\n              return {\n                space: 'HSV',\n                h: original.h,\n                s: original.s,\n                v: original.v\n              }\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              h: color.h,\n              s: color.s,\n              v: color.v\n            }\n          }\n\n        }\n\n      }\n\n    }\n\n\n  ];\n\n  return interpret;\n\n\n})(dat.color.toString,\ndat.utils.common);\n\n\ndat.GUI = dat.gui.GUI = (function (css, saveDialogueContents, styleSheet, controllerFactory, Controller, BooleanController, FunctionController, NumberControllerBox, NumberControllerSlider, OptionController, ColorController, requestAnimationFrame, CenteredDiv, dom, common) {\n\n  css.inject(styleSheet);\n\n  /** Outer-most className for GUI's */\n  var CSS_NAMESPACE = 'dg';\n\n  var HIDE_KEY_CODE = 72;\n\n  /** The only value shared between the JS and SCSS. Use caution. */\n  var CLOSE_BUTTON_HEIGHT = 20;\n\n  var DEFAULT_DEFAULT_PRESET_NAME = 'Default';\n\n  var SUPPORTS_LOCAL_STORAGE = (function() {\n    try {\n      return 'localStorage' in window && window['localStorage'] !== null;\n    } catch (e) {\n      return false;\n    }\n  })();\n\n  var SAVE_DIALOGUE;\n\n  /** Have we yet to create an autoPlace GUI? */\n  var auto_place_virgin = true;\n\n  /** Fixed position div that auto place GUI's go inside */\n  var auto_place_container;\n\n  /** Are we hiding the GUI's ? */\n  var hide = false;\n\n  /** GUI's which should be hidden */\n  var hideable_guis = [];\n\n  /**\n   * A lightweight controller library for JavaScript. It allows you to easily\n   * manipulate variables and fire functions on the fly.\n   * @class\n   *\n   * @member dat.gui\n   *\n   * @param {Object} [params]\n   * @param {String} [params.name] The name of this GUI.\n   * @param {Object} [params.load] JSON object representing the saved state of\n   * this GUI.\n   * @param {Boolean} [params.auto=true]\n   * @param {dat.gui.GUI} [params.parent] The GUI I'm nested in.\n   * @param {Boolean} [params.closed] If true, starts closed\n   */\n  var GUI = function(params) {\n\n    var _this = this;\n\n    /**\n     * Outermost DOM Element\n     * @type DOMElement\n     */\n    this.domElement = document.createElement('div');\n    this.__ul = document.createElement('ul');\n    this.domElement.appendChild(this.__ul);\n\n    dom.addClass(this.domElement, CSS_NAMESPACE);\n\n    /**\n     * Nested GUI's by name\n     * @ignore\n     */\n    this.__folders = {};\n\n    this.__controllers = [];\n\n    /**\n     * List of objects I'm remembering for save, only used in top level GUI\n     * @ignore\n     */\n    this.__rememberedObjects = [];\n\n    /**\n     * Maps the index of remembered objects to a map of controllers, only used\n     * in top level GUI.\n     *\n     * @private\n     * @ignore\n     *\n     * @example\n     * [\n     *  {\n     *    propertyName: Controller,\n     *    anotherPropertyName: Controller\n     *  },\n     *  {\n     *    propertyName: Controller\n     *  }\n     * ]\n     */\n    this.__rememberedObjectIndecesToControllers = [];\n\n    this.__listening = [];\n\n    params = params || {};\n\n    // Default parameters\n    params = common.defaults(params, {\n      autoPlace: true,\n      width: GUI.DEFAULT_WIDTH\n    });\n\n    params = common.defaults(params, {\n      resizable: params.autoPlace,\n      hideable: params.autoPlace\n    });\n\n\n    if (!common.isUndefined(params.load)) {\n\n      // Explicit preset\n      if (params.preset) params.load.preset = params.preset;\n\n    } else {\n\n      params.load = { preset: DEFAULT_DEFAULT_PRESET_NAME };\n\n    }\n\n    if (common.isUndefined(params.parent) && params.hideable) {\n      hideable_guis.push(this);\n    }\n\n    // Only root level GUI's are resizable.\n    params.resizable = common.isUndefined(params.parent) && params.resizable;\n\n\n    if (params.autoPlace && common.isUndefined(params.scrollable)) {\n      params.scrollable = true;\n    }\n//    params.scrollable = common.isUndefined(params.parent) && params.scrollable === true;\n\n    // Not part of params because I don't want people passing this in via\n    // constructor. Should be a 'remembered' value.\n    var use_local_storage =\n        SUPPORTS_LOCAL_STORAGE &&\n            localStorage.getItem(getLocalStorageHash(this, 'isLocal')) === 'true';\n\n    Object.defineProperties(this,\n\n        /** @lends dat.gui.GUI.prototype */\n        {\n\n          /**\n           * The parent <code>GUI</code>\n           * @type dat.gui.GUI\n           */\n          parent: {\n            get: function() {\n              return params.parent;\n            }\n          },\n\n          scrollable: {\n            get: function() {\n              return params.scrollable;\n            }\n          },\n\n          /**\n           * Handles <code>GUI</code>'s element placement for you\n           * @type Boolean\n           */\n          autoPlace: {\n            get: function() {\n              return params.autoPlace;\n            }\n          },\n\n          /**\n           * The identifier for a set of saved values\n           * @type String\n           */\n          preset: {\n\n            get: function() {\n              if (_this.parent) {\n                return _this.getRoot().preset;\n              } else {\n                return params.load.preset;\n              }\n            },\n\n            set: function(v) {\n              if (_this.parent) {\n                _this.getRoot().preset = v;\n              } else {\n                params.load.preset = v;\n              }\n              setPresetSelectIndex(this);\n              _this.revert();\n            }\n\n          },\n\n          /**\n           * The width of <code>GUI</code> element\n           * @type Number\n           */\n          width: {\n            get: function() {\n              return params.width;\n            },\n            set: function(v) {\n              params.width = v;\n              setWidth(_this, v);\n            }\n          },\n\n          /**\n           * The name of <code>GUI</code>. Used for folders. i.e\n           * a folder's name\n           * @type String\n           */\n          name: {\n            get: function() {\n              return params.name;\n            },\n            set: function(v) {\n              // TODO Check for collisions among sibling folders\n              params.name = v;\n              if (title_row_name) {\n                title_row_name.innerHTML = params.name;\n              }\n            }\n          },\n\n          /**\n           * Whether the <code>GUI</code> is collapsed or not\n           * @type Boolean\n           */\n          closed: {\n            get: function() {\n              return params.closed;\n            },\n            set: function(v) {\n              params.closed = v;\n              if (params.closed) {\n                dom.addClass(_this.__ul, GUI.CLASS_CLOSED);\n              } else {\n                dom.removeClass(_this.__ul, GUI.CLASS_CLOSED);\n              }\n              // For browsers that aren't going to respect the CSS transition,\n              // Lets just check our height against the window height right off\n              // the bat.\n              this.onResize();\n\n              if (_this.__closeButton) {\n                _this.__closeButton.innerHTML = v ? GUI.TEXT_OPEN : GUI.TEXT_CLOSED;\n              }\n            }\n          },\n\n          /**\n           * Contains all presets\n           * @type Object\n           */\n          load: {\n            get: function() {\n              return params.load;\n            }\n          },\n\n          /**\n           * Determines whether or not to use <a href=\"https://developer.mozilla.org/en/DOM/Storage#localStorage\">localStorage</a> as the means for\n           * <code>remember</code>ing\n           * @type Boolean\n           */\n          useLocalStorage: {\n\n            get: function() {\n              return use_local_storage;\n            },\n            set: function(bool) {\n              if (SUPPORTS_LOCAL_STORAGE) {\n                use_local_storage = bool;\n                if (bool) {\n                  dom.bind(window, 'unload', saveToLocalStorage);\n                } else {\n                  dom.unbind(window, 'unload', saveToLocalStorage);\n                }\n                localStorage.setItem(getLocalStorageHash(_this, 'isLocal'), bool);\n              }\n            }\n\n          }\n\n        });\n\n    // Are we a root level GUI?\n    if (common.isUndefined(params.parent)) {\n\n      params.closed = false;\n\n      dom.addClass(this.domElement, GUI.CLASS_MAIN);\n      dom.makeSelectable(this.domElement, false);\n\n      // Are we supposed to be loading locally?\n      if (SUPPORTS_LOCAL_STORAGE) {\n\n        if (use_local_storage) {\n\n          _this.useLocalStorage = true;\n\n          var saved_gui = localStorage.getItem(getLocalStorageHash(this, 'gui'));\n\n          if (saved_gui) {\n            params.load = JSON.parse(saved_gui);\n          }\n\n        }\n\n      }\n\n      this.__closeButton = document.createElement('div');\n      this.__closeButton.innerHTML = GUI.TEXT_CLOSED;\n      dom.addClass(this.__closeButton, GUI.CLASS_CLOSE_BUTTON);\n      this.domElement.appendChild(this.__closeButton);\n\n      dom.bind(this.__closeButton, 'click', function() {\n\n        _this.closed = !_this.closed;\n\n\n      });\n\n\n      // Oh, you're a nested GUI!\n    } else {\n\n      if (params.closed === undefined) {\n        params.closed = true;\n      }\n\n      var title_row_name = document.createTextNode(params.name);\n      dom.addClass(title_row_name, 'controller-name');\n\n      var title_row = addRow(_this, title_row_name);\n\n      var on_click_title = function(e) {\n        e.preventDefault();\n        _this.closed = !_this.closed;\n        return false;\n      };\n\n      dom.addClass(this.__ul, GUI.CLASS_CLOSED);\n\n      dom.addClass(title_row, 'title');\n      dom.bind(title_row, 'click', on_click_title);\n\n      if (!params.closed) {\n        this.closed = false;\n      }\n\n    }\n\n    if (params.autoPlace) {\n\n      if (common.isUndefined(params.parent)) {\n\n        if (auto_place_virgin) {\n          auto_place_container = document.createElement('div');\n          dom.addClass(auto_place_container, CSS_NAMESPACE);\n          dom.addClass(auto_place_container, GUI.CLASS_AUTO_PLACE_CONTAINER);\n          document.body.appendChild(auto_place_container);\n          auto_place_virgin = false;\n        }\n\n        // Put it in the dom for you.\n        auto_place_container.appendChild(this.domElement);\n\n        // Apply the auto styles\n        dom.addClass(this.domElement, GUI.CLASS_AUTO_PLACE);\n\n      }\n\n\n      // Make it not elastic.\n      if (!this.parent) setWidth(_this, params.width);\n\n    }\n\n    dom.bind(window, 'resize', function() { _this.onResize() });\n    dom.bind(this.__ul, 'webkitTransitionEnd', function() { _this.onResize(); });\n    dom.bind(this.__ul, 'transitionend', function() { _this.onResize() });\n    dom.bind(this.__ul, 'oTransitionEnd', function() { _this.onResize() });\n    this.onResize();\n\n\n    if (params.resizable) {\n      addResizeHandle(this);\n    }\n\n    function saveToLocalStorage() {\n      localStorage.setItem(getLocalStorageHash(_this, 'gui'), JSON.stringify(_this.getSaveObject()));\n    }\n\n    var root = _this.getRoot();\n    function resetWidth() {\n        var root = _this.getRoot();\n        root.width += 1;\n        common.defer(function() {\n          root.width -= 1;\n        });\n      }\n\n      if (!params.parent) {\n        resetWidth();\n      }\n\n  };\n\n  GUI.toggleHide = function() {\n\n    hide = !hide;\n    common.each(hideable_guis, function(gui) {\n      gui.domElement.style.zIndex = hide ? -999 : 999;\n      gui.domElement.style.opacity = hide ? 0 : 1;\n    });\n  };\n\n  GUI.CLASS_AUTO_PLACE = 'a';\n  GUI.CLASS_AUTO_PLACE_CONTAINER = 'ac';\n  GUI.CLASS_MAIN = 'main';\n  GUI.CLASS_CONTROLLER_ROW = 'cr';\n  GUI.CLASS_TOO_TALL = 'taller-than-window';\n  GUI.CLASS_CLOSED = 'closed';\n  GUI.CLASS_CLOSE_BUTTON = 'close-button';\n  GUI.CLASS_DRAG = 'drag';\n\n  GUI.DEFAULT_WIDTH = 245;\n  GUI.TEXT_CLOSED = 'Close Controls';\n  GUI.TEXT_OPEN = 'Open Controls';\n\n  dom.bind(window, 'keydown', function(e) {\n\n    if (document.activeElement.type !== 'text' &&\n        (e.which === HIDE_KEY_CODE || e.keyCode == HIDE_KEY_CODE)) {\n      GUI.toggleHide();\n    }\n\n  }, false);\n\n  common.extend(\n\n      GUI.prototype,\n\n      /** @lends dat.gui.GUI */\n      {\n\n        /**\n         * @param object\n         * @param property\n         * @returns {dat.controllers.Controller} The new controller that was added.\n         * @instance\n         */\n        add: function(object, property) {\n\n          return add(\n              this,\n              object,\n              property,\n              {\n                factoryArgs: Array.prototype.slice.call(arguments, 2)\n              }\n          );\n\n        },\n\n        /**\n         * @param object\n         * @param property\n         * @returns {dat.controllers.ColorController} The new controller that was added.\n         * @instance\n         */\n        addColor: function(object, property) {\n\n          return add(\n              this,\n              object,\n              property,\n              {\n                color: true\n              }\n          );\n\n        },\n\n        /**\n         * @param controller\n         * @instance\n         */\n        remove: function(controller) {\n\n          // TODO listening?\n          this.__ul.removeChild(controller.__li);\n          this.__controllers.slice(this.__controllers.indexOf(controller), 1);\n          var _this = this;\n          common.defer(function() {\n            _this.onResize();\n          });\n\n        },\n\n        destroy: function() {\n\n          if (this.autoPlace) {\n            auto_place_container.removeChild(this.domElement);\n          }\n\n        },\n\n        /**\n         * @param name\n         * @returns {dat.gui.GUI} The new folder.\n         * @throws {Error} if this GUI already has a folder by the specified\n         * name\n         * @instance\n         */\n        addFolder: function(name) {\n\n          // We have to prevent collisions on names in order to have a key\n          // by which to remember saved values\n          if (this.__folders[name] !== undefined) {\n            throw new Error('You already have a folder in this GUI by the' +\n                ' name \"' + name + '\"');\n          }\n\n          var new_gui_params = { name: name, parent: this };\n\n          // We need to pass down the autoPlace trait so that we can\n          // attach event listeners to open/close folder actions to\n          // ensure that a scrollbar appears if the window is too short.\n          new_gui_params.autoPlace = this.autoPlace;\n\n          // Do we have saved appearance data for this folder?\n\n          if (this.load && // Anything loaded?\n              this.load.folders && // Was my parent a dead-end?\n              this.load.folders[name]) { // Did daddy remember me?\n\n            // Start me closed if I was closed\n            new_gui_params.closed = this.load.folders[name].closed;\n\n            // Pass down the loaded data\n            new_gui_params.load = this.load.folders[name];\n\n          }\n\n          var gui = new GUI(new_gui_params);\n          this.__folders[name] = gui;\n\n          var li = addRow(this, gui.domElement);\n          dom.addClass(li, 'folder');\n          return gui;\n\n        },\n\n        open: function() {\n          this.closed = false;\n        },\n\n        close: function() {\n          this.closed = true;\n        },\n\n        onResize: function() {\n\n          var root = this.getRoot();\n\n          if (root.scrollable) {\n\n            var top = dom.getOffset(root.__ul).top;\n            var h = 0;\n\n            common.each(root.__ul.childNodes, function(node) {\n              if (! (root.autoPlace && node === root.__save_row))\n                h += dom.getHeight(node);\n            });\n\n            if (window.innerHeight - top - CLOSE_BUTTON_HEIGHT < h) {\n              dom.addClass(root.domElement, GUI.CLASS_TOO_TALL);\n              root.__ul.style.height = window.innerHeight - top - CLOSE_BUTTON_HEIGHT + 'px';\n            } else {\n              dom.removeClass(root.domElement, GUI.CLASS_TOO_TALL);\n              root.__ul.style.height = 'auto';\n            }\n\n          }\n\n          if (root.__resize_handle) {\n            common.defer(function() {\n              root.__resize_handle.style.height = root.__ul.offsetHeight + 'px';\n            });\n          }\n\n          if (root.__closeButton) {\n            root.__closeButton.style.width = root.width + 'px';\n          }\n\n        },\n\n        /**\n         * Mark objects for saving. The order of these objects cannot change as\n         * the GUI grows. When remembering new objects, append them to the end\n         * of the list.\n         *\n         * @param {Object...} objects\n         * @throws {Error} if not called on a top level GUI.\n         * @instance\n         */\n        remember: function() {\n\n          if (common.isUndefined(SAVE_DIALOGUE)) {\n            SAVE_DIALOGUE = new CenteredDiv();\n            SAVE_DIALOGUE.domElement.innerHTML = saveDialogueContents;\n          }\n\n          if (this.parent) {\n            throw new Error(\"You can only call remember on a top level GUI.\");\n          }\n\n          var _this = this;\n\n          common.each(Array.prototype.slice.call(arguments), function(object) {\n            if (_this.__rememberedObjects.length == 0) {\n              addSaveMenu(_this);\n            }\n            if (_this.__rememberedObjects.indexOf(object) == -1) {\n              _this.__rememberedObjects.push(object);\n            }\n          });\n\n          if (this.autoPlace) {\n            // Set save row width\n            setWidth(this, this.width);\n          }\n\n        },\n\n        /**\n         * @returns {dat.gui.GUI} the topmost parent GUI of a nested GUI.\n         * @instance\n         */\n        getRoot: function() {\n          var gui = this;\n          while (gui.parent) {\n            gui = gui.parent;\n          }\n          return gui;\n        },\n\n        /**\n         * @returns {Object} a JSON object representing the current state of\n         * this GUI as well as its remembered properties.\n         * @instance\n         */\n        getSaveObject: function() {\n\n          var toReturn = this.load;\n\n          toReturn.closed = this.closed;\n\n          // Am I remembering any values?\n          if (this.__rememberedObjects.length > 0) {\n\n            toReturn.preset = this.preset;\n\n            if (!toReturn.remembered) {\n              toReturn.remembered = {};\n            }\n\n            toReturn.remembered[this.preset] = getCurrentPreset(this);\n\n          }\n\n          toReturn.folders = {};\n          common.each(this.__folders, function(element, key) {\n            toReturn.folders[key] = element.getSaveObject();\n          });\n\n          return toReturn;\n\n        },\n\n        save: function() {\n\n          if (!this.load.remembered) {\n            this.load.remembered = {};\n          }\n\n          this.load.remembered[this.preset] = getCurrentPreset(this);\n          markPresetModified(this, false);\n\n        },\n\n        saveAs: function(presetName) {\n\n          if (!this.load.remembered) {\n\n            // Retain default values upon first save\n            this.load.remembered = {};\n            this.load.remembered[DEFAULT_DEFAULT_PRESET_NAME] = getCurrentPreset(this, true);\n\n          }\n\n          this.load.remembered[presetName] = getCurrentPreset(this);\n          this.preset = presetName;\n          addPresetOption(this, presetName, true);\n\n        },\n\n        revert: function(gui) {\n\n          common.each(this.__controllers, function(controller) {\n            // Make revert work on Default.\n            if (!this.getRoot().load.remembered) {\n              controller.setValue(controller.initialValue);\n            } else {\n              recallSavedValue(gui || this.getRoot(), controller);\n            }\n          }, this);\n\n          common.each(this.__folders, function(folder) {\n            folder.revert(folder);\n          });\n\n          if (!gui) {\n            markPresetModified(this.getRoot(), false);\n          }\n\n\n        },\n\n        listen: function(controller) {\n\n          var init = this.__listening.length == 0;\n          this.__listening.push(controller);\n          if (init) updateDisplays(this.__listening);\n\n        }\n\n      }\n\n  );\n\n  function add(gui, object, property, params) {\n\n    if (object[property] === undefined) {\n      throw new Error(\"Object \" + object + \" has no property \\\"\" + property + \"\\\"\");\n    }\n\n    var controller;\n\n    if (params.color) {\n\n      controller = new ColorController(object, property);\n\n    } else {\n\n      var factoryArgs = [object,property].concat(params.factoryArgs);\n      controller = controllerFactory.apply(gui, factoryArgs);\n\n    }\n\n    if (params.before instanceof Controller) {\n      params.before = params.before.__li;\n    }\n\n    recallSavedValue(gui, controller);\n\n    dom.addClass(controller.domElement, 'c');\n\n    var name = document.createElement('span');\n    dom.addClass(name, 'property-name');\n    name.innerHTML = controller.property;\n\n    var container = document.createElement('div');\n    container.appendChild(name);\n    container.appendChild(controller.domElement);\n\n    var li = addRow(gui, container, params.before);\n\n    dom.addClass(li, GUI.CLASS_CONTROLLER_ROW);\n    dom.addClass(li, typeof controller.getValue());\n\n    augmentController(gui, li, controller);\n\n    gui.__controllers.push(controller);\n\n    return controller;\n\n  }\n\n  /**\n   * Add a row to the end of the GUI or before another row.\n   *\n   * @param gui\n   * @param [dom] If specified, inserts the dom content in the new row\n   * @param [liBefore] If specified, places the new row before another row\n   */\n  function addRow(gui, dom, liBefore) {\n    var li = document.createElement('li');\n    if (dom) li.appendChild(dom);\n    if (liBefore) {\n      gui.__ul.insertBefore(li, params.before);\n    } else {\n      gui.__ul.appendChild(li);\n    }\n    gui.onResize();\n    return li;\n  }\n\n  function augmentController(gui, li, controller) {\n\n    controller.__li = li;\n    controller.__gui = gui;\n\n    common.extend(controller, {\n\n      options: function(options) {\n\n        if (arguments.length > 1) {\n          controller.remove();\n\n          return add(\n              gui,\n              controller.object,\n              controller.property,\n              {\n                before: controller.__li.nextElementSibling,\n                factoryArgs: [common.toArray(arguments)]\n              }\n          );\n\n        }\n\n        if (common.isArray(options) || common.isObject(options)) {\n          controller.remove();\n\n          return add(\n              gui,\n              controller.object,\n              controller.property,\n              {\n                before: controller.__li.nextElementSibling,\n                factoryArgs: [options]\n              }\n          );\n\n        }\n\n      },\n\n      name: function(v) {\n        controller.__li.firstElementChild.firstElementChild.innerHTML = v;\n        return controller;\n      },\n\n      listen: function() {\n        controller.__gui.listen(controller);\n        return controller;\n      },\n\n      remove: function() {\n        controller.__gui.remove(controller);\n        return controller;\n      }\n\n    });\n\n    // All sliders should be accompanied by a box.\n    if (controller instanceof NumberControllerSlider) {\n\n      var box = new NumberControllerBox(controller.object, controller.property,\n          { min: controller.__min, max: controller.__max, step: controller.__step });\n\n      common.each(['updateDisplay', 'onChange', 'onFinishChange'], function(method) {\n        var pc = controller[method];\n        var pb = box[method];\n        controller[method] = box[method] = function() {\n          var args = Array.prototype.slice.call(arguments);\n          pc.apply(controller, args);\n          return pb.apply(box, args);\n        }\n      });\n\n      dom.addClass(li, 'has-slider');\n      controller.domElement.insertBefore(box.domElement, controller.domElement.firstElementChild);\n\n    }\n    else if (controller instanceof NumberControllerBox) {\n\n      var r = function(returned) {\n\n        // Have we defined both boundaries?\n        if (common.isNumber(controller.__min) && common.isNumber(controller.__max)) {\n\n          // Well, then lets just replace this with a slider.\n          controller.remove();\n          return add(\n              gui,\n              controller.object,\n              controller.property,\n              {\n                before: controller.__li.nextElementSibling,\n                factoryArgs: [controller.__min, controller.__max, controller.__step]\n              });\n\n        }\n\n        return returned;\n\n      };\n\n      controller.min = common.compose(r, controller.min);\n      controller.max = common.compose(r, controller.max);\n\n    }\n    else if (controller instanceof BooleanController) {\n\n      dom.bind(li, 'click', function() {\n        dom.fakeEvent(controller.__checkbox, 'click');\n      });\n\n      dom.bind(controller.__checkbox, 'click', function(e) {\n        e.stopPropagation(); // Prevents double-toggle\n      })\n\n    }\n    else if (controller instanceof FunctionController) {\n\n      dom.bind(li, 'click', function() {\n        dom.fakeEvent(controller.__button, 'click');\n      });\n\n      dom.bind(li, 'mouseover', function() {\n        dom.addClass(controller.__button, 'hover');\n      });\n\n      dom.bind(li, 'mouseout', function() {\n        dom.removeClass(controller.__button, 'hover');\n      });\n\n    }\n    else if (controller instanceof ColorController) {\n\n      dom.addClass(li, 'color');\n      controller.updateDisplay = common.compose(function(r) {\n        li.style.borderLeftColor = controller.__color.toString();\n        return r;\n      }, controller.updateDisplay);\n\n      controller.updateDisplay();\n\n    }\n\n    controller.setValue = common.compose(function(r) {\n      if (gui.getRoot().__preset_select && controller.isModified()) {\n        markPresetModified(gui.getRoot(), true);\n      }\n      return r;\n    }, controller.setValue);\n\n  }\n\n  function recallSavedValue(gui, controller) {\n\n    // Find the topmost GUI, that's where remembered objects live.\n    var root = gui.getRoot();\n\n    // Does the object we're controlling match anything we've been told to\n    // remember?\n    var matched_index = root.__rememberedObjects.indexOf(controller.object);\n\n    // Why yes, it does!\n    if (matched_index != -1) {\n\n      // Let me fetch a map of controllers for thcommon.isObject.\n      var controller_map =\n          root.__rememberedObjectIndecesToControllers[matched_index];\n\n      // Ohp, I believe this is the first controller we've created for this\n      // object. Lets make the map fresh.\n      if (controller_map === undefined) {\n        controller_map = {};\n        root.__rememberedObjectIndecesToControllers[matched_index] =\n            controller_map;\n      }\n\n      // Keep track of this controller\n      controller_map[controller.property] = controller;\n\n      // Okay, now have we saved any values for this controller?\n      if (root.load && root.load.remembered) {\n\n        var preset_map = root.load.remembered;\n\n        // Which preset are we trying to load?\n        var preset;\n\n        if (preset_map[gui.preset]) {\n\n          preset = preset_map[gui.preset];\n\n        } else if (preset_map[DEFAULT_DEFAULT_PRESET_NAME]) {\n\n          // Uhh, you can have the default instead?\n          preset = preset_map[DEFAULT_DEFAULT_PRESET_NAME];\n\n        } else {\n\n          // Nada.\n\n          return;\n\n        }\n\n\n        // Did the loaded object remember thcommon.isObject?\n        if (preset[matched_index] &&\n\n          // Did we remember this particular property?\n            preset[matched_index][controller.property] !== undefined) {\n\n          // We did remember something for this guy ...\n          var value = preset[matched_index][controller.property];\n\n          // And that's what it is.\n          controller.initialValue = value;\n          controller.setValue(value);\n\n        }\n\n      }\n\n    }\n\n  }\n\n  function getLocalStorageHash(gui, key) {\n    // TODO how does this deal with multiple GUI's?\n    return document.location.href + '.' + key;\n\n  }\n\n  function addSaveMenu(gui) {\n\n    var div = gui.__save_row = document.createElement('li');\n\n    dom.addClass(gui.domElement, 'has-save');\n\n    gui.__ul.insertBefore(div, gui.__ul.firstChild);\n\n    dom.addClass(div, 'save-row');\n\n    var gears = document.createElement('span');\n    gears.innerHTML = '&nbsp;';\n    dom.addClass(gears, 'button gears');\n\n    // TODO replace with FunctionController\n    var button = document.createElement('span');\n    button.innerHTML = 'Save';\n    dom.addClass(button, 'button');\n    dom.addClass(button, 'save');\n\n    var button2 = document.createElement('span');\n    button2.innerHTML = 'New';\n    dom.addClass(button2, 'button');\n    dom.addClass(button2, 'save-as');\n\n    var button3 = document.createElement('span');\n    button3.innerHTML = 'Revert';\n    dom.addClass(button3, 'button');\n    dom.addClass(button3, 'revert');\n\n    var select = gui.__preset_select = document.createElement('select');\n\n    if (gui.load && gui.load.remembered) {\n\n      common.each(gui.load.remembered, function(value, key) {\n        addPresetOption(gui, key, key == gui.preset);\n      });\n\n    } else {\n      addPresetOption(gui, DEFAULT_DEFAULT_PRESET_NAME, false);\n    }\n\n    dom.bind(select, 'change', function() {\n\n\n      for (var index = 0; index < gui.__preset_select.length; index++) {\n        gui.__preset_select[index].innerHTML = gui.__preset_select[index].value;\n      }\n\n      gui.preset = this.value;\n\n    });\n\n    div.appendChild(select);\n    div.appendChild(gears);\n    div.appendChild(button);\n    div.appendChild(button2);\n    div.appendChild(button3);\n\n    if (SUPPORTS_LOCAL_STORAGE) {\n\n      var saveLocally = document.getElementById('dg-save-locally');\n      var explain = document.getElementById('dg-local-explain');\n\n      saveLocally.style.display = 'block';\n\n      var localStorageCheckBox = document.getElementById('dg-local-storage');\n\n      if (localStorage.getItem(getLocalStorageHash(gui, 'isLocal')) === 'true') {\n        localStorageCheckBox.setAttribute('checked', 'checked');\n      }\n\n      function showHideExplain() {\n        explain.style.display = gui.useLocalStorage ? 'block' : 'none';\n      }\n\n      showHideExplain();\n\n      // TODO: Use a boolean controller, fool!\n      dom.bind(localStorageCheckBox, 'change', function() {\n        gui.useLocalStorage = !gui.useLocalStorage;\n        showHideExplain();\n      });\n\n    }\n\n    var newConstructorTextArea = document.getElementById('dg-new-constructor');\n\n    dom.bind(newConstructorTextArea, 'keydown', function(e) {\n      if (e.metaKey && (e.which === 67 || e.keyCode == 67)) {\n        SAVE_DIALOGUE.hide();\n      }\n    });\n\n    dom.bind(gears, 'click', function() {\n      newConstructorTextArea.innerHTML = JSON.stringify(gui.getSaveObject(), undefined, 2);\n      SAVE_DIALOGUE.show();\n      newConstructorTextArea.focus();\n      newConstructorTextArea.select();\n    });\n\n    dom.bind(button, 'click', function() {\n      gui.save();\n    });\n\n    dom.bind(button2, 'click', function() {\n      var presetName = prompt('Enter a new preset name.');\n      if (presetName) gui.saveAs(presetName);\n    });\n\n    dom.bind(button3, 'click', function() {\n      gui.revert();\n    });\n\n//    div.appendChild(button2);\n\n  }\n\n  function addResizeHandle(gui) {\n\n    gui.__resize_handle = document.createElement('div');\n\n    common.extend(gui.__resize_handle.style, {\n\n      width: '6px',\n      marginLeft: '-3px',\n      height: '200px',\n      cursor: 'ew-resize',\n      position: 'absolute'\n//      border: '1px solid blue'\n\n    });\n\n    var pmouseX;\n\n    dom.bind(gui.__resize_handle, 'mousedown', dragStart);\n    dom.bind(gui.__closeButton, 'mousedown', dragStart);\n\n    gui.domElement.insertBefore(gui.__resize_handle, gui.domElement.firstElementChild);\n\n    function dragStart(e) {\n\n      e.preventDefault();\n\n      pmouseX = e.clientX;\n\n      dom.addClass(gui.__closeButton, GUI.CLASS_DRAG);\n      dom.bind(window, 'mousemove', drag);\n      dom.bind(window, 'mouseup', dragStop);\n\n      return false;\n\n    }\n\n    function drag(e) {\n\n      e.preventDefault();\n\n      gui.width += pmouseX - e.clientX;\n      gui.onResize();\n      pmouseX = e.clientX;\n\n      return false;\n\n    }\n\n    function dragStop() {\n\n      dom.removeClass(gui.__closeButton, GUI.CLASS_DRAG);\n      dom.unbind(window, 'mousemove', drag);\n      dom.unbind(window, 'mouseup', dragStop);\n\n    }\n\n  }\n\n  function setWidth(gui, w) {\n    gui.domElement.style.width = w + 'px';\n    // Auto placed save-rows are position fixed, so we have to\n    // set the width manually if we want it to bleed to the edge\n    if (gui.__save_row && gui.autoPlace) {\n      gui.__save_row.style.width = w + 'px';\n    }if (gui.__closeButton) {\n      gui.__closeButton.style.width = w + 'px';\n    }\n  }\n\n  function getCurrentPreset(gui, useInitialValues) {\n\n    var toReturn = {};\n\n    // For each object I'm remembering\n    common.each(gui.__rememberedObjects, function(val, index) {\n\n      var saved_values = {};\n\n      // The controllers I've made for thcommon.isObject by property\n      var controller_map =\n          gui.__rememberedObjectIndecesToControllers[index];\n\n      // Remember each value for each property\n      common.each(controller_map, function(controller, property) {\n        saved_values[property] = useInitialValues ? controller.initialValue : controller.getValue();\n      });\n\n      // Save the values for thcommon.isObject\n      toReturn[index] = saved_values;\n\n    });\n\n    return toReturn;\n\n  }\n\n  function addPresetOption(gui, name, setSelected) {\n    var opt = document.createElement('option');\n    opt.innerHTML = name;\n    opt.value = name;\n    gui.__preset_select.appendChild(opt);\n    if (setSelected) {\n      gui.__preset_select.selectedIndex = gui.__preset_select.length - 1;\n    }\n  }\n\n  function setPresetSelectIndex(gui) {\n    for (var index = 0; index < gui.__preset_select.length; index++) {\n      if (gui.__preset_select[index].value == gui.preset) {\n        gui.__preset_select.selectedIndex = index;\n      }\n    }\n  }\n\n  function markPresetModified(gui, modified) {\n    var opt = gui.__preset_select[gui.__preset_select.selectedIndex];\n//    console.log('mark', modified, opt);\n    if (modified) {\n      opt.innerHTML = opt.value + \"*\";\n    } else {\n      opt.innerHTML = opt.value;\n    }\n  }\n\n  function updateDisplays(controllerArray) {\n\n\n    if (controllerArray.length != 0) {\n\n      requestAnimationFrame(function() {\n        updateDisplays(controllerArray);\n      });\n\n    }\n\n    common.each(controllerArray, function(c) {\n      c.updateDisplay();\n    });\n\n  }\n\n  return GUI;\n\n})(dat.utils.css,\n\"<div id=\\\"dg-save\\\" class=\\\"dg dialogue\\\">\\n\\n  Here's the new load parameter for your <code>GUI</code>'s constructor:\\n\\n  <textarea id=\\\"dg-new-constructor\\\"></textarea>\\n\\n  <div id=\\\"dg-save-locally\\\">\\n\\n    <input id=\\\"dg-local-storage\\\" type=\\\"checkbox\\\"/> Automatically save\\n    values to <code>localStorage</code> on exit.\\n\\n    <div id=\\\"dg-local-explain\\\">The values saved to <code>localStorage</code> will\\n      override those passed to <code>dat.GUI</code>'s constructor. This makes it\\n      easier to work incrementally, but <code>localStorage</code> is fragile,\\n      and your friends may not see the same values you do.\\n      \\n    </div>\\n    \\n  </div>\\n\\n</div>\",\n\".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear;border:0;position:absolute;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-x:hidden}.dg.a.has-save ul{margin-top:27px}.dg.a.has-save ul.closed{margin-top:0}.dg.a .save-row{position:fixed;top:0;z-index:1002}.dg li{-webkit-transition:height 0.1s ease-out;-o-transition:height 0.1s ease-out;-moz-transition:height 0.1s ease-out;transition:height 0.1s ease-out}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;overflow:hidden;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li > *{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:9px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2fa1d6}.dg .cr.number input[type=text]{color:#2fa1d6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2fa1d6}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\\n\",\ndat.controllers.factory = (function (OptionController, NumberControllerBox, NumberControllerSlider, StringController, FunctionController, BooleanController, common) {\n\n      return function(object, property) {\n\n        var initialValue = object[property];\n\n        // Providing options?\n        if (common.isArray(arguments[2]) || common.isObject(arguments[2])) {\n          return new OptionController(object, property, arguments[2]);\n        }\n\n        // Providing a map?\n\n        if (common.isNumber(initialValue)) {\n\n          if (common.isNumber(arguments[2]) && common.isNumber(arguments[3])) {\n\n            // Has min and max.\n            return new NumberControllerSlider(object, property, arguments[2], arguments[3]);\n\n          } else {\n\n            return new NumberControllerBox(object, property, { min: arguments[2], max: arguments[3] });\n\n          }\n\n        }\n\n        if (common.isString(initialValue)) {\n          return new StringController(object, property);\n        }\n\n        if (common.isFunction(initialValue)) {\n          return new FunctionController(object, property, '');\n        }\n\n        if (common.isBoolean(initialValue)) {\n          return new BooleanController(object, property);\n        }\n\n      }\n\n    })(dat.controllers.OptionController,\ndat.controllers.NumberControllerBox,\ndat.controllers.NumberControllerSlider,\ndat.controllers.StringController = (function (Controller, dom, common) {\n\n  /**\n   * @class Provides a text input to alter the string property of an object.\n   *\n   * @extends dat.controllers.Controller\n   *\n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   *\n   * @member dat.controllers\n   */\n  var StringController = function(object, property) {\n\n    StringController.superclass.call(this, object, property);\n\n    var _this = this;\n\n    this.__input = document.createElement('input');\n    this.__input.setAttribute('type', 'text');\n\n    dom.bind(this.__input, 'keyup', onChange);\n    dom.bind(this.__input, 'change', onChange);\n    dom.bind(this.__input, 'blur', onBlur);\n    dom.bind(this.__input, 'keydown', function(e) {\n      if (e.keyCode === 13) {\n        this.blur();\n      }\n    });\n    \n\n    function onChange() {\n      _this.setValue(_this.__input.value);\n    }\n\n    function onBlur() {\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n\n    this.updateDisplay();\n\n    this.domElement.appendChild(this.__input);\n\n  };\n\n  StringController.superclass = Controller;\n\n  common.extend(\n\n      StringController.prototype,\n      Controller.prototype,\n\n      {\n\n        updateDisplay: function() {\n          // Stops the caret from moving on account of:\n          // keyup -> setValue -> updateDisplay\n          if (!dom.isActive(this.__input)) {\n            this.__input.value = this.getValue();\n          }\n          return StringController.superclass.prototype.updateDisplay.call(this);\n        }\n\n      }\n\n  );\n\n  return StringController;\n\n})(dat.controllers.Controller,\ndat.dom.dom,\ndat.utils.common),\ndat.controllers.FunctionController,\ndat.controllers.BooleanController,\ndat.utils.common),\ndat.controllers.Controller,\ndat.controllers.BooleanController,\ndat.controllers.FunctionController,\ndat.controllers.NumberControllerBox,\ndat.controllers.NumberControllerSlider,\ndat.controllers.OptionController,\ndat.controllers.ColorController = (function (Controller, dom, Color, interpret, common) {\n\n  var ColorController = function(object, property) {\n\n    ColorController.superclass.call(this, object, property);\n\n    this.__color = new Color(this.getValue());\n    this.__temp = new Color(0);\n\n    var _this = this;\n\n    this.domElement = document.createElement('div');\n\n    dom.makeSelectable(this.domElement, false);\n\n    this.__selector = document.createElement('div');\n    this.__selector.className = 'selector';\n\n    this.__saturation_field = document.createElement('div');\n    this.__saturation_field.className = 'saturation-field';\n\n    this.__field_knob = document.createElement('div');\n    this.__field_knob.className = 'field-knob';\n    this.__field_knob_border = '2px solid ';\n\n    this.__hue_knob = document.createElement('div');\n    this.__hue_knob.className = 'hue-knob';\n\n    this.__hue_field = document.createElement('div');\n    this.__hue_field.className = 'hue-field';\n\n    this.__input = document.createElement('input');\n    this.__input.type = 'text';\n    this.__input_textShadow = '0 1px 1px ';\n\n    dom.bind(this.__input, 'keydown', function(e) {\n      if (e.keyCode === 13) { // on enter\n        onBlur.call(this);\n      }\n    });\n\n    dom.bind(this.__input, 'blur', onBlur);\n\n    dom.bind(this.__selector, 'mousedown', function(e) {\n\n      dom\n        .addClass(this, 'drag')\n        .bind(window, 'mouseup', function(e) {\n          dom.removeClass(_this.__selector, 'drag');\n        });\n\n    });\n\n    var value_field = document.createElement('div');\n\n    common.extend(this.__selector.style, {\n      width: '122px',\n      height: '102px',\n      padding: '3px',\n      backgroundColor: '#222',\n      boxShadow: '0px 1px 3px rgba(0,0,0,0.3)'\n    });\n\n    common.extend(this.__field_knob.style, {\n      position: 'absolute',\n      width: '12px',\n      height: '12px',\n      border: this.__field_knob_border + (this.__color.v < .5 ? '#fff' : '#000'),\n      boxShadow: '0px 1px 3px rgba(0,0,0,0.5)',\n      borderRadius: '12px',\n      zIndex: 1\n    });\n    \n    common.extend(this.__hue_knob.style, {\n      position: 'absolute',\n      width: '15px',\n      height: '2px',\n      borderRight: '4px solid #fff',\n      zIndex: 1\n    });\n\n    common.extend(this.__saturation_field.style, {\n      width: '100px',\n      height: '100px',\n      border: '1px solid #555',\n      marginRight: '3px',\n      display: 'inline-block',\n      cursor: 'pointer'\n    });\n\n    common.extend(value_field.style, {\n      width: '100%',\n      height: '100%',\n      background: 'none'\n    });\n    \n    linearGradient(value_field, 'top', 'rgba(0,0,0,0)', '#000');\n\n    common.extend(this.__hue_field.style, {\n      width: '15px',\n      height: '100px',\n      display: 'inline-block',\n      border: '1px solid #555',\n      cursor: 'ns-resize'\n    });\n\n    hueGradient(this.__hue_field);\n\n    common.extend(this.__input.style, {\n      outline: 'none',\n//      width: '120px',\n      textAlign: 'center',\n//      padding: '4px',\n//      marginBottom: '6px',\n      color: '#fff',\n      border: 0,\n      fontWeight: 'bold',\n      textShadow: this.__input_textShadow + 'rgba(0,0,0,0.7)'\n    });\n\n    dom.bind(this.__saturation_field, 'mousedown', fieldDown);\n    dom.bind(this.__field_knob, 'mousedown', fieldDown);\n\n    dom.bind(this.__hue_field, 'mousedown', function(e) {\n      setH(e);\n      dom.bind(window, 'mousemove', setH);\n      dom.bind(window, 'mouseup', unbindH);\n    });\n\n    function fieldDown(e) {\n      setSV(e);\n      // document.body.style.cursor = 'none';\n      dom.bind(window, 'mousemove', setSV);\n      dom.bind(window, 'mouseup', unbindSV);\n    }\n\n    function unbindSV() {\n      dom.unbind(window, 'mousemove', setSV);\n      dom.unbind(window, 'mouseup', unbindSV);\n      // document.body.style.cursor = 'default';\n    }\n\n    function onBlur() {\n      var i = interpret(this.value);\n      if (i !== false) {\n        _this.__color.__state = i;\n        _this.setValue(_this.__color.toOriginal());\n      } else {\n        this.value = _this.__color.toString();\n      }\n    }\n\n    function unbindH() {\n      dom.unbind(window, 'mousemove', setH);\n      dom.unbind(window, 'mouseup', unbindH);\n    }\n\n    this.__saturation_field.appendChild(value_field);\n    this.__selector.appendChild(this.__field_knob);\n    this.__selector.appendChild(this.__saturation_field);\n    this.__selector.appendChild(this.__hue_field);\n    this.__hue_field.appendChild(this.__hue_knob);\n\n    this.domElement.appendChild(this.__input);\n    this.domElement.appendChild(this.__selector);\n\n    this.updateDisplay();\n\n    function setSV(e) {\n\n      e.preventDefault();\n\n      var w = dom.getWidth(_this.__saturation_field);\n      var o = dom.getOffset(_this.__saturation_field);\n      var s = (e.clientX - o.left + document.body.scrollLeft) / w;\n      var v = 1 - (e.clientY - o.top + document.body.scrollTop) / w;\n\n      if (v > 1) v = 1;\n      else if (v < 0) v = 0;\n\n      if (s > 1) s = 1;\n      else if (s < 0) s = 0;\n\n      _this.__color.v = v;\n      _this.__color.s = s;\n\n      _this.setValue(_this.__color.toOriginal());\n\n\n      return false;\n\n    }\n\n    function setH(e) {\n\n      e.preventDefault();\n\n      var s = dom.getHeight(_this.__hue_field);\n      var o = dom.getOffset(_this.__hue_field);\n      var h = 1 - (e.clientY - o.top + document.body.scrollTop) / s;\n\n      if (h > 1) h = 1;\n      else if (h < 0) h = 0;\n\n      _this.__color.h = h * 360;\n\n      _this.setValue(_this.__color.toOriginal());\n\n      return false;\n\n    }\n\n  };\n\n  ColorController.superclass = Controller;\n\n  common.extend(\n\n      ColorController.prototype,\n      Controller.prototype,\n\n      {\n\n        updateDisplay: function() {\n\n          var i = interpret(this.getValue());\n\n          if (i !== false) {\n\n            var mismatch = false;\n\n            // Check for mismatch on the interpreted value.\n\n            common.each(Color.COMPONENTS, function(component) {\n              if (!common.isUndefined(i[component]) &&\n                  !common.isUndefined(this.__color.__state[component]) &&\n                  i[component] !== this.__color.__state[component]) {\n                mismatch = true;\n                return {}; // break\n              }\n            }, this);\n\n            // If nothing diverges, we keep our previous values\n            // for statefulness, otherwise we recalculate fresh\n            if (mismatch) {\n              common.extend(this.__color.__state, i);\n            }\n\n          }\n\n          common.extend(this.__temp.__state, this.__color.__state);\n\n          this.__temp.a = 1;\n\n          var flip = (this.__color.v < .5 || this.__color.s > .5) ? 255 : 0;\n          var _flip = 255 - flip;\n\n          common.extend(this.__field_knob.style, {\n            marginLeft: 100 * this.__color.s - 7 + 'px',\n            marginTop: 100 * (1 - this.__color.v) - 7 + 'px',\n            backgroundColor: this.__temp.toString(),\n            border: this.__field_knob_border + 'rgb(' + flip + ',' + flip + ',' + flip +')'\n          });\n\n          this.__hue_knob.style.marginTop = (1 - this.__color.h / 360) * 100 + 'px'\n\n          this.__temp.s = 1;\n          this.__temp.v = 1;\n\n          linearGradient(this.__saturation_field, 'left', '#fff', this.__temp.toString());\n\n          common.extend(this.__input.style, {\n            backgroundColor: this.__input.value = this.__color.toString(),\n            color: 'rgb(' + flip + ',' + flip + ',' + flip +')',\n            textShadow: this.__input_textShadow + 'rgba(' + _flip + ',' + _flip + ',' + _flip +',.7)'\n          });\n\n        }\n\n      }\n\n  );\n  \n  var vendors = ['-moz-','-o-','-webkit-','-ms-',''];\n  \n  function linearGradient(elem, x, a, b) {\n    elem.style.background = '';\n    common.each(vendors, function(vendor) {\n      elem.style.cssText += 'background: ' + vendor + 'linear-gradient('+x+', '+a+' 0%, ' + b + ' 100%); ';\n    });\n  }\n  \n  function hueGradient(elem) {\n    elem.style.background = '';\n    elem.style.cssText += 'background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);'\n    elem.style.cssText += 'background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);'\n    elem.style.cssText += 'background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);'\n    elem.style.cssText += 'background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);'\n    elem.style.cssText += 'background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);'\n  }\n\n\n  return ColorController;\n\n})(dat.controllers.Controller,\ndat.dom.dom,\ndat.color.Color = (function (interpret, math, toString, common) {\n\n  var Color = function() {\n\n    this.__state = interpret.apply(this, arguments);\n\n    if (this.__state === false) {\n      throw 'Failed to interpret color arguments';\n    }\n\n    this.__state.a = this.__state.a || 1;\n\n\n  };\n\n  Color.COMPONENTS = ['r','g','b','h','s','v','hex','a'];\n\n  common.extend(Color.prototype, {\n\n    toString: function() {\n      return toString(this);\n    },\n\n    toOriginal: function() {\n      return this.__state.conversion.write(this);\n    }\n\n  });\n\n  defineRGBComponent(Color.prototype, 'r', 2);\n  defineRGBComponent(Color.prototype, 'g', 1);\n  defineRGBComponent(Color.prototype, 'b', 0);\n\n  defineHSVComponent(Color.prototype, 'h');\n  defineHSVComponent(Color.prototype, 's');\n  defineHSVComponent(Color.prototype, 'v');\n\n  Object.defineProperty(Color.prototype, 'a', {\n\n    get: function() {\n      return this.__state.a;\n    },\n\n    set: function(v) {\n      this.__state.a = v;\n    }\n\n  });\n\n  Object.defineProperty(Color.prototype, 'hex', {\n\n    get: function() {\n\n      if (!this.__state.space !== 'HEX') {\n        this.__state.hex = math.rgb_to_hex(this.r, this.g, this.b);\n      }\n\n      return this.__state.hex;\n\n    },\n\n    set: function(v) {\n\n      this.__state.space = 'HEX';\n      this.__state.hex = v;\n\n    }\n\n  });\n\n  function defineRGBComponent(target, component, componentHexIndex) {\n\n    Object.defineProperty(target, component, {\n\n      get: function() {\n\n        if (this.__state.space === 'RGB') {\n          return this.__state[component];\n        }\n\n        recalculateRGB(this, component, componentHexIndex);\n\n        return this.__state[component];\n\n      },\n\n      set: function(v) {\n\n        if (this.__state.space !== 'RGB') {\n          recalculateRGB(this, component, componentHexIndex);\n          this.__state.space = 'RGB';\n        }\n\n        this.__state[component] = v;\n\n      }\n\n    });\n\n  }\n\n  function defineHSVComponent(target, component) {\n\n    Object.defineProperty(target, component, {\n\n      get: function() {\n\n        if (this.__state.space === 'HSV')\n          return this.__state[component];\n\n        recalculateHSV(this);\n\n        return this.__state[component];\n\n      },\n\n      set: function(v) {\n\n        if (this.__state.space !== 'HSV') {\n          recalculateHSV(this);\n          this.__state.space = 'HSV';\n        }\n\n        this.__state[component] = v;\n\n      }\n\n    });\n\n  }\n\n  function recalculateRGB(color, component, componentHexIndex) {\n\n    if (color.__state.space === 'HEX') {\n\n      color.__state[component] = math.component_from_hex(color.__state.hex, componentHexIndex);\n\n    } else if (color.__state.space === 'HSV') {\n\n      common.extend(color.__state, math.hsv_to_rgb(color.__state.h, color.__state.s, color.__state.v));\n\n    } else {\n\n      throw 'Corrupted color state';\n\n    }\n\n  }\n\n  function recalculateHSV(color) {\n\n    var result = math.rgb_to_hsv(color.r, color.g, color.b);\n\n    common.extend(color.__state,\n        {\n          s: result.s,\n          v: result.v\n        }\n    );\n\n    if (!common.isNaN(result.h)) {\n      color.__state.h = result.h;\n    } else if (common.isUndefined(color.__state.h)) {\n      color.__state.h = 0;\n    }\n\n  }\n\n  return Color;\n\n})(dat.color.interpret,\ndat.color.math = (function () {\n\n  var tmpComponent;\n\n  return {\n\n    hsv_to_rgb: function(h, s, v) {\n\n      var hi = Math.floor(h / 60) % 6;\n\n      var f = h / 60 - Math.floor(h / 60);\n      var p = v * (1.0 - s);\n      var q = v * (1.0 - (f * s));\n      var t = v * (1.0 - ((1.0 - f) * s));\n      var c = [\n        [v, t, p],\n        [q, v, p],\n        [p, v, t],\n        [p, q, v],\n        [t, p, v],\n        [v, p, q]\n      ][hi];\n\n      return {\n        r: c[0] * 255,\n        g: c[1] * 255,\n        b: c[2] * 255\n      };\n\n    },\n\n    rgb_to_hsv: function(r, g, b) {\n\n      var min = Math.min(r, g, b),\n          max = Math.max(r, g, b),\n          delta = max - min,\n          h, s;\n\n      if (max != 0) {\n        s = delta / max;\n      } else {\n        return {\n          h: NaN,\n          s: 0,\n          v: 0\n        };\n      }\n\n      if (r == max) {\n        h = (g - b) / delta;\n      } else if (g == max) {\n        h = 2 + (b - r) / delta;\n      } else {\n        h = 4 + (r - g) / delta;\n      }\n      h /= 6;\n      if (h < 0) {\n        h += 1;\n      }\n\n      return {\n        h: h * 360,\n        s: s,\n        v: max / 255\n      };\n    },\n\n    rgb_to_hex: function(r, g, b) {\n      var hex = this.hex_with_component(0, 2, r);\n      hex = this.hex_with_component(hex, 1, g);\n      hex = this.hex_with_component(hex, 0, b);\n      return hex;\n    },\n\n    component_from_hex: function(hex, componentIndex) {\n      return (hex >> (componentIndex * 8)) & 0xFF;\n    },\n\n    hex_with_component: function(hex, componentIndex, value) {\n      return value << (tmpComponent = componentIndex * 8) | (hex & ~ (0xFF << tmpComponent));\n    }\n\n  }\n\n})(),\ndat.color.toString,\ndat.utils.common),\ndat.color.interpret,\ndat.utils.common),\ndat.utils.requestAnimationFrame = (function () {\n\n  /**\n   * requirejs version of Paul Irish's RequestAnimationFrame\n   * http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n   */\n\n  return window.webkitRequestAnimationFrame ||\n      window.mozRequestAnimationFrame ||\n      window.oRequestAnimationFrame ||\n      window.msRequestAnimationFrame ||\n      function(callback, element) {\n\n        window.setTimeout(callback, 1000 / 60);\n\n      };\n})(),\ndat.dom.CenteredDiv = (function (dom, common) {\n\n\n  var CenteredDiv = function() {\n\n    this.backgroundElement = document.createElement('div');\n    common.extend(this.backgroundElement.style, {\n      backgroundColor: 'rgba(0,0,0,0.8)',\n      top: 0,\n      left: 0,\n      display: 'none',\n      zIndex: '1000',\n      opacity: 0,\n      WebkitTransition: 'opacity 0.2s linear'\n    });\n\n    dom.makeFullscreen(this.backgroundElement);\n    this.backgroundElement.style.position = 'fixed';\n\n    this.domElement = document.createElement('div');\n    common.extend(this.domElement.style, {\n      position: 'fixed',\n      display: 'none',\n      zIndex: '1001',\n      opacity: 0,\n      WebkitTransition: '-webkit-transform 0.2s ease-out, opacity 0.2s linear'\n    });\n\n\n    document.body.appendChild(this.backgroundElement);\n    document.body.appendChild(this.domElement);\n\n    var _this = this;\n    dom.bind(this.backgroundElement, 'click', function() {\n      _this.hide();\n    });\n\n\n  };\n\n  CenteredDiv.prototype.show = function() {\n\n    var _this = this;\n    \n\n\n    this.backgroundElement.style.display = 'block';\n\n    this.domElement.style.display = 'block';\n    this.domElement.style.opacity = 0;\n//    this.domElement.style.top = '52%';\n    this.domElement.style.webkitTransform = 'scale(1.1)';\n\n    this.layout();\n\n    common.defer(function() {\n      _this.backgroundElement.style.opacity = 1;\n      _this.domElement.style.opacity = 1;\n      _this.domElement.style.webkitTransform = 'scale(1)';\n    });\n\n  };\n\n  CenteredDiv.prototype.hide = function() {\n\n    var _this = this;\n\n    var hide = function() {\n\n      _this.domElement.style.display = 'none';\n      _this.backgroundElement.style.display = 'none';\n\n      dom.unbind(_this.domElement, 'webkitTransitionEnd', hide);\n      dom.unbind(_this.domElement, 'transitionend', hide);\n      dom.unbind(_this.domElement, 'oTransitionEnd', hide);\n\n    };\n\n    dom.bind(this.domElement, 'webkitTransitionEnd', hide);\n    dom.bind(this.domElement, 'transitionend', hide);\n    dom.bind(this.domElement, 'oTransitionEnd', hide);\n\n    this.backgroundElement.style.opacity = 0;\n//    this.domElement.style.top = '48%';\n    this.domElement.style.opacity = 0;\n    this.domElement.style.webkitTransform = 'scale(1.1)';\n\n  };\n\n  CenteredDiv.prototype.layout = function() {\n    this.domElement.style.left = window.innerWidth/2 - dom.getWidth(this.domElement) / 2 + 'px';\n    this.domElement.style.top = window.innerHeight/2 - dom.getHeight(this.domElement) / 2 + 'px';\n  };\n  \n  function lockScroll(e) {\n    console.log(e);\n  }\n\n  return CenteredDiv;\n\n})(dat.dom.dom,\ndat.utils.common),\ndat.dom.dom,\ndat.utils.common);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/dat-gui/vendor/dat.gui.js\n// module id = 122\n// module chunks = 7","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\n/** @namespace */\nvar dat = module.exports = dat || {};\n\n/** @namespace */\ndat.color = dat.color || {};\n\n/** @namespace */\ndat.utils = dat.utils || {};\n\ndat.utils.common = (function () {\n  \n  var ARR_EACH = Array.prototype.forEach;\n  var ARR_SLICE = Array.prototype.slice;\n\n  /**\n   * Band-aid methods for things that should be a lot easier in JavaScript.\n   * Implementation and structure inspired by underscore.js\n   * http://documentcloud.github.com/underscore/\n   */\n\n  return { \n    \n    BREAK: {},\n  \n    extend: function(target) {\n      \n      this.each(ARR_SLICE.call(arguments, 1), function(obj) {\n        \n        for (var key in obj)\n          if (!this.isUndefined(obj[key])) \n            target[key] = obj[key];\n        \n      }, this);\n      \n      return target;\n      \n    },\n    \n    defaults: function(target) {\n      \n      this.each(ARR_SLICE.call(arguments, 1), function(obj) {\n        \n        for (var key in obj)\n          if (this.isUndefined(target[key])) \n            target[key] = obj[key];\n        \n      }, this);\n      \n      return target;\n    \n    },\n    \n    compose: function() {\n      var toCall = ARR_SLICE.call(arguments);\n            return function() {\n              var args = ARR_SLICE.call(arguments);\n              for (var i = toCall.length -1; i >= 0; i--) {\n                args = [toCall[i].apply(this, args)];\n              }\n              return args[0];\n            }\n    },\n    \n    each: function(obj, itr, scope) {\n\n      \n      if (ARR_EACH && obj.forEach === ARR_EACH) { \n        \n        obj.forEach(itr, scope);\n        \n      } else if (obj.length === obj.length + 0) { // Is number but not NaN\n        \n        for (var key = 0, l = obj.length; key < l; key++)\n          if (key in obj && itr.call(scope, obj[key], key) === this.BREAK) \n            return;\n            \n      } else {\n\n        for (var key in obj) \n          if (itr.call(scope, obj[key], key) === this.BREAK)\n            return;\n            \n      }\n            \n    },\n    \n    defer: function(fnc) {\n      setTimeout(fnc, 0);\n    },\n    \n    toArray: function(obj) {\n      if (obj.toArray) return obj.toArray();\n      return ARR_SLICE.call(obj);\n    },\n\n    isUndefined: function(obj) {\n      return obj === undefined;\n    },\n    \n    isNull: function(obj) {\n      return obj === null;\n    },\n    \n    isNaN: function(obj) {\n      return obj !== obj;\n    },\n    \n    isArray: Array.isArray || function(obj) {\n      return obj.constructor === Array;\n    },\n    \n    isObject: function(obj) {\n      return obj === Object(obj);\n    },\n    \n    isNumber: function(obj) {\n      return obj === obj+0;\n    },\n    \n    isString: function(obj) {\n      return obj === obj+'';\n    },\n    \n    isBoolean: function(obj) {\n      return obj === false || obj === true;\n    },\n    \n    isFunction: function(obj) {\n      return Object.prototype.toString.call(obj) === '[object Function]';\n    }\n  \n  };\n    \n})();\n\n\ndat.color.toString = (function (common) {\n\n  return function(color) {\n\n    if (color.a == 1 || common.isUndefined(color.a)) {\n\n      var s = color.hex.toString(16);\n      while (s.length < 6) {\n        s = '0' + s;\n      }\n\n      return '#' + s;\n\n    } else {\n\n      return 'rgba(' + Math.round(color.r) + ',' + Math.round(color.g) + ',' + Math.round(color.b) + ',' + color.a + ')';\n\n    }\n\n  }\n\n})(dat.utils.common);\n\n\ndat.Color = dat.color.Color = (function (interpret, math, toString, common) {\n\n  var Color = function() {\n\n    this.__state = interpret.apply(this, arguments);\n\n    if (this.__state === false) {\n      throw 'Failed to interpret color arguments';\n    }\n\n    this.__state.a = this.__state.a || 1;\n\n\n  };\n\n  Color.COMPONENTS = ['r','g','b','h','s','v','hex','a'];\n\n  common.extend(Color.prototype, {\n\n    toString: function() {\n      return toString(this);\n    },\n\n    toOriginal: function() {\n      return this.__state.conversion.write(this);\n    }\n\n  });\n\n  defineRGBComponent(Color.prototype, 'r', 2);\n  defineRGBComponent(Color.prototype, 'g', 1);\n  defineRGBComponent(Color.prototype, 'b', 0);\n\n  defineHSVComponent(Color.prototype, 'h');\n  defineHSVComponent(Color.prototype, 's');\n  defineHSVComponent(Color.prototype, 'v');\n\n  Object.defineProperty(Color.prototype, 'a', {\n\n    get: function() {\n      return this.__state.a;\n    },\n\n    set: function(v) {\n      this.__state.a = v;\n    }\n\n  });\n\n  Object.defineProperty(Color.prototype, 'hex', {\n\n    get: function() {\n\n      if (!this.__state.space !== 'HEX') {\n        this.__state.hex = math.rgb_to_hex(this.r, this.g, this.b);\n      }\n\n      return this.__state.hex;\n\n    },\n\n    set: function(v) {\n\n      this.__state.space = 'HEX';\n      this.__state.hex = v;\n\n    }\n\n  });\n\n  function defineRGBComponent(target, component, componentHexIndex) {\n\n    Object.defineProperty(target, component, {\n\n      get: function() {\n\n        if (this.__state.space === 'RGB') {\n          return this.__state[component];\n        }\n\n        recalculateRGB(this, component, componentHexIndex);\n\n        return this.__state[component];\n\n      },\n\n      set: function(v) {\n\n        if (this.__state.space !== 'RGB') {\n          recalculateRGB(this, component, componentHexIndex);\n          this.__state.space = 'RGB';\n        }\n\n        this.__state[component] = v;\n\n      }\n\n    });\n\n  }\n\n  function defineHSVComponent(target, component) {\n\n    Object.defineProperty(target, component, {\n\n      get: function() {\n\n        if (this.__state.space === 'HSV')\n          return this.__state[component];\n\n        recalculateHSV(this);\n\n        return this.__state[component];\n\n      },\n\n      set: function(v) {\n\n        if (this.__state.space !== 'HSV') {\n          recalculateHSV(this);\n          this.__state.space = 'HSV';\n        }\n\n        this.__state[component] = v;\n\n      }\n\n    });\n\n  }\n\n  function recalculateRGB(color, component, componentHexIndex) {\n\n    if (color.__state.space === 'HEX') {\n\n      color.__state[component] = math.component_from_hex(color.__state.hex, componentHexIndex);\n\n    } else if (color.__state.space === 'HSV') {\n\n      common.extend(color.__state, math.hsv_to_rgb(color.__state.h, color.__state.s, color.__state.v));\n\n    } else {\n\n      throw 'Corrupted color state';\n\n    }\n\n  }\n\n  function recalculateHSV(color) {\n\n    var result = math.rgb_to_hsv(color.r, color.g, color.b);\n\n    common.extend(color.__state,\n        {\n          s: result.s,\n          v: result.v\n        }\n    );\n\n    if (!common.isNaN(result.h)) {\n      color.__state.h = result.h;\n    } else if (common.isUndefined(color.__state.h)) {\n      color.__state.h = 0;\n    }\n\n  }\n\n  return Color;\n\n})(dat.color.interpret = (function (toString, common) {\n\n  var result, toReturn;\n\n  var interpret = function() {\n\n    toReturn = false;\n\n    var original = arguments.length > 1 ? common.toArray(arguments) : arguments[0];\n\n    common.each(INTERPRETATIONS, function(family) {\n\n      if (family.litmus(original)) {\n\n        common.each(family.conversions, function(conversion, conversionName) {\n\n          result = conversion.read(original);\n\n          if (toReturn === false && result !== false) {\n            toReturn = result;\n            result.conversionName = conversionName;\n            result.conversion = conversion;\n            return common.BREAK;\n\n          }\n\n        });\n\n        return common.BREAK;\n\n      }\n\n    });\n\n    return toReturn;\n\n  };\n\n  var INTERPRETATIONS = [\n\n    // Strings\n    {\n\n      litmus: common.isString,\n\n      conversions: {\n\n        THREE_CHAR_HEX: {\n\n          read: function(original) {\n\n            var test = original.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);\n            if (test === null) return false;\n\n            return {\n              space: 'HEX',\n              hex: parseInt(\n                  '0x' +\n                      test[1].toString() + test[1].toString() +\n                      test[2].toString() + test[2].toString() +\n                      test[3].toString() + test[3].toString())\n            };\n\n          },\n\n          write: toString\n\n        },\n\n        SIX_CHAR_HEX: {\n\n          read: function(original) {\n\n            var test = original.match(/^#([A-F0-9]{6})$/i);\n            if (test === null) return false;\n\n            return {\n              space: 'HEX',\n              hex: parseInt('0x' + test[1].toString())\n            };\n\n          },\n\n          write: toString\n\n        },\n\n        CSS_RGB: {\n\n          read: function(original) {\n\n            var test = original.match(/^rgb\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/);\n            if (test === null) return false;\n\n            return {\n              space: 'RGB',\n              r: parseFloat(test[1]),\n              g: parseFloat(test[2]),\n              b: parseFloat(test[3])\n            };\n\n          },\n\n          write: toString\n\n        },\n\n        CSS_RGBA: {\n\n          read: function(original) {\n\n            var test = original.match(/^rgba\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\,\\s*(.+)\\s*\\)/);\n            if (test === null) return false;\n\n            return {\n              space: 'RGB',\n              r: parseFloat(test[1]),\n              g: parseFloat(test[2]),\n              b: parseFloat(test[3]),\n              a: parseFloat(test[4])\n            };\n\n          },\n\n          write: toString\n\n        }\n\n      }\n\n    },\n\n    // Numbers\n    {\n\n      litmus: common.isNumber,\n\n      conversions: {\n\n        HEX: {\n          read: function(original) {\n            return {\n              space: 'HEX',\n              hex: original,\n              conversionName: 'HEX'\n            }\n          },\n\n          write: function(color) {\n            return color.hex;\n          }\n        }\n\n      }\n\n    },\n\n    // Arrays\n    {\n\n      litmus: common.isArray,\n\n      conversions: {\n\n        RGB_ARRAY: {\n          read: function(original) {\n            if (original.length != 3) return false;\n            return {\n              space: 'RGB',\n              r: original[0],\n              g: original[1],\n              b: original[2]\n            };\n          },\n\n          write: function(color) {\n            return [color.r, color.g, color.b];\n          }\n\n        },\n\n        RGBA_ARRAY: {\n          read: function(original) {\n            if (original.length != 4) return false;\n            return {\n              space: 'RGB',\n              r: original[0],\n              g: original[1],\n              b: original[2],\n              a: original[3]\n            };\n          },\n\n          write: function(color) {\n            return [color.r, color.g, color.b, color.a];\n          }\n\n        }\n\n      }\n\n    },\n\n    // Objects\n    {\n\n      litmus: common.isObject,\n\n      conversions: {\n\n        RGBA_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.r) &&\n                common.isNumber(original.g) &&\n                common.isNumber(original.b) &&\n                common.isNumber(original.a)) {\n              return {\n                space: 'RGB',\n                r: original.r,\n                g: original.g,\n                b: original.b,\n                a: original.a\n              }\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              r: color.r,\n              g: color.g,\n              b: color.b,\n              a: color.a\n            }\n          }\n        },\n\n        RGB_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.r) &&\n                common.isNumber(original.g) &&\n                common.isNumber(original.b)) {\n              return {\n                space: 'RGB',\n                r: original.r,\n                g: original.g,\n                b: original.b\n              }\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              r: color.r,\n              g: color.g,\n              b: color.b\n            }\n          }\n        },\n\n        HSVA_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.h) &&\n                common.isNumber(original.s) &&\n                common.isNumber(original.v) &&\n                common.isNumber(original.a)) {\n              return {\n                space: 'HSV',\n                h: original.h,\n                s: original.s,\n                v: original.v,\n                a: original.a\n              }\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              h: color.h,\n              s: color.s,\n              v: color.v,\n              a: color.a\n            }\n          }\n        },\n\n        HSV_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.h) &&\n                common.isNumber(original.s) &&\n                common.isNumber(original.v)) {\n              return {\n                space: 'HSV',\n                h: original.h,\n                s: original.s,\n                v: original.v\n              }\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              h: color.h,\n              s: color.s,\n              v: color.v\n            }\n          }\n\n        }\n\n      }\n\n    }\n\n\n  ];\n\n  return interpret;\n\n\n})(dat.color.toString,\ndat.utils.common),\ndat.color.math = (function () {\n\n  var tmpComponent;\n\n  return {\n\n    hsv_to_rgb: function(h, s, v) {\n\n      var hi = Math.floor(h / 60) % 6;\n\n      var f = h / 60 - Math.floor(h / 60);\n      var p = v * (1.0 - s);\n      var q = v * (1.0 - (f * s));\n      var t = v * (1.0 - ((1.0 - f) * s));\n      var c = [\n        [v, t, p],\n        [q, v, p],\n        [p, v, t],\n        [p, q, v],\n        [t, p, v],\n        [v, p, q]\n      ][hi];\n\n      return {\n        r: c[0] * 255,\n        g: c[1] * 255,\n        b: c[2] * 255\n      };\n\n    },\n\n    rgb_to_hsv: function(r, g, b) {\n\n      var min = Math.min(r, g, b),\n          max = Math.max(r, g, b),\n          delta = max - min,\n          h, s;\n\n      if (max != 0) {\n        s = delta / max;\n      } else {\n        return {\n          h: NaN,\n          s: 0,\n          v: 0\n        };\n      }\n\n      if (r == max) {\n        h = (g - b) / delta;\n      } else if (g == max) {\n        h = 2 + (b - r) / delta;\n      } else {\n        h = 4 + (r - g) / delta;\n      }\n      h /= 6;\n      if (h < 0) {\n        h += 1;\n      }\n\n      return {\n        h: h * 360,\n        s: s,\n        v: max / 255\n      };\n    },\n\n    rgb_to_hex: function(r, g, b) {\n      var hex = this.hex_with_component(0, 2, r);\n      hex = this.hex_with_component(hex, 1, g);\n      hex = this.hex_with_component(hex, 0, b);\n      return hex;\n    },\n\n    component_from_hex: function(hex, componentIndex) {\n      return (hex >> (componentIndex * 8)) & 0xFF;\n    },\n\n    hex_with_component: function(hex, componentIndex, value) {\n      return value << (tmpComponent = componentIndex * 8) | (hex & ~ (0xFF << tmpComponent));\n    }\n\n  }\n\n})(),\ndat.color.toString,\ndat.utils.common);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/dat-gui/vendor/dat.color.js\n// module id = 123\n// module chunks = 7","// stats.js - http://github.com/mrdoob/stats.js\nvar Stats=function(){var l=Date.now(),m=l,g=0,n=Infinity,o=0,h=0,p=Infinity,q=0,r=0,s=0,f=document.createElement(\"div\");f.id=\"stats\";f.addEventListener(\"mousedown\",function(b){b.preventDefault();t(++s%2)},!1);f.style.cssText=\"width:80px;opacity:0.9;cursor:pointer\";var a=document.createElement(\"div\");a.id=\"fps\";a.style.cssText=\"padding:0 0 3px 3px;text-align:left;background-color:#002\";f.appendChild(a);var i=document.createElement(\"div\");i.id=\"fpsText\";i.style.cssText=\"color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px\";\ni.innerHTML=\"FPS\";a.appendChild(i);var c=document.createElement(\"div\");c.id=\"fpsGraph\";c.style.cssText=\"position:relative;width:74px;height:30px;background-color:#0ff\";for(a.appendChild(c);74>c.children.length;){var j=document.createElement(\"span\");j.style.cssText=\"width:1px;height:30px;float:left;background-color:#113\";c.appendChild(j)}var d=document.createElement(\"div\");d.id=\"ms\";d.style.cssText=\"padding:0 0 3px 3px;text-align:left;background-color:#020;display:none\";f.appendChild(d);var k=document.createElement(\"div\");\nk.id=\"msText\";k.style.cssText=\"color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px\";k.innerHTML=\"MS\";d.appendChild(k);var e=document.createElement(\"div\");e.id=\"msGraph\";e.style.cssText=\"position:relative;width:74px;height:30px;background-color:#0f0\";for(d.appendChild(e);74>e.children.length;)j=document.createElement(\"span\"),j.style.cssText=\"width:1px;height:30px;float:left;background-color:#131\",e.appendChild(j);var t=function(b){s=b;switch(s){case 0:a.style.display=\n\"block\";d.style.display=\"none\";break;case 1:a.style.display=\"none\",d.style.display=\"block\"}};return{REVISION:12,domElement:f,setMode:t,begin:function(){l=Date.now()},end:function(){var b=Date.now();g=b-l;n=Math.min(n,g);o=Math.max(o,g);k.textContent=g+\" MS (\"+n+\"-\"+o+\")\";var a=Math.min(30,30-30*(g/200));e.appendChild(e.firstChild).style.height=a+\"px\";r++;b>m+1E3&&(h=Math.round(1E3*r/(b-m)),p=Math.min(p,h),q=Math.max(q,h),i.textContent=h+\" FPS (\"+p+\"-\"+q+\")\",a=Math.min(30,30-30*(h/100)),c.appendChild(c.firstChild).style.height=\na+\"px\",m=b,r=0);return b},update:function(){l=this.end()}}};\"object\"===typeof module&&(module.exports=Stats);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/stats-js/build/stats.min.js\n// module id = 124\n// module chunks = 7","require('../../modules/es6.object.keys');\nmodule.exports = require('../../modules/_core').Object.keys;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/object/keys.js\n// module id = 125\n// module chunks = 7","// 19.1.2.14 Object.keys(O)\nvar toObject = require('./_to-object');\nvar $keys = require('./_object-keys');\n\nrequire('./_object-sap')('keys', function () {\n  return function keys(it) {\n    return $keys(toObject(it));\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.object.keys.js\n// module id = 126\n// module chunks = 7","/**\n * @author mrdoob / http://mrdoob.com/\n * @author jetienne / http://jetienne.com/\n * @author paulirish / http://paulirish.com/\n */\nfunction MemoryStats(){\n\n\tvar msMin\t= 100;\n\tvar msMax\t= 0;\n\n\tvar container\t= document.createElement( 'div' );\n\tcontainer.id\t= 'stats';\n\tcontainer.style.cssText = 'width:80px;opacity:0.9;cursor:pointer';\n\n\tvar msDiv\t= document.createElement( 'div' );\n\tmsDiv.id\t= 'ms';\n\tmsDiv.style.cssText = 'padding:0 0 3px 3px;text-align:left;background-color:#020;';\n\tcontainer.appendChild( msDiv );\n\n\tvar msText\t= document.createElement( 'div' );\n\tmsText.id\t= 'msText';\n\tmsText.style.cssText = 'color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px';\n\tmsText.innerHTML= 'Memory';\n\tmsDiv.appendChild( msText );\n\n\tvar msGraph\t= document.createElement( 'div' );\n\tmsGraph.id\t= 'msGraph';\n\tmsGraph.style.cssText = 'position:relative;width:74px;height:30px;background-color:#0f0';\n\tmsDiv.appendChild( msGraph );\n\n\twhile ( msGraph.children.length < 74 ) {\n\n\t\tvar bar = document.createElement( 'span' );\n\t\tbar.style.cssText = 'width:1px;height:30px;float:left;background-color:#131';\n\t\tmsGraph.appendChild( bar );\n\n\t}\n\n\tvar updateGraph = function ( dom, height, color ) {\n\n\t\tvar child = dom.appendChild( dom.firstChild );\n\t\tchild.style.height = height + 'px';\n\t\tif( color ) child.style.backgroundColor = color;\n\n\t}\n\n\t// polyfill usedJSHeapSize\n\tif (window.performance && !performance.memory){\n\t\tperformance.memory = { usedJSHeapSize : 0 };\n\t}\n\n\t// support of the API?\n\tif( performance.memory.totalJSHeapSize === 0 ){\n\t\tconsole.warn('totalJSHeapSize === 0... performance.memory is only available in Chrome .')\n\t}\n\n\t// TODO, add a sanity check to see if values are bucketed.\n\t// If so, reminde user to adopt the --enable-precise-memory-info flag.\n\t// open -a \"/Applications/Google Chrome.app\" --args --enable-precise-memory-info\n\n\tvar lastTime\t= Date.now();\n\tvar lastUsedHeap= performance.memory.usedJSHeapSize;\n\treturn {\n\t\tdomElement: container,\n\n\t\tupdate: function () {\n\n\t\t\t// refresh only 30time per second\n\t\t\tif( Date.now() - lastTime < 1000/30 )\treturn;\n\t\t\tlastTime\t= Date.now()\n\n\t\t\tvar delta\t= performance.memory.usedJSHeapSize - lastUsedHeap;\n\t\t\tlastUsedHeap\t= performance.memory.usedJSHeapSize;\n\t\t\tvar color\t= delta < 0 ? '#830' : '#131';\n\n\t\t\tvar ms\t= performance.memory.usedJSHeapSize;\n\t\t\tmsMin\t= Math.min( msMin, ms );\n\t\t\tmsMax\t= Math.max( msMax, ms );\n\t\t\tmsText.textContent = \"Mem: \" + bytesToSize(ms, 2);\n\n\t\t\tvar normValue\t= ms / (30*1024*1024);\n\t\t\tvar height\t= (1-(normValue% 1)) * 30;\n\t\t\tupdateGraph( msGraph, height, color);\n\n\t\t\tfunction bytesToSize( bytes, nFractDigit ){\n\t\t\t\tvar sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\n\t\t\t\tif (bytes == 0) return 'n/a';\n\t\t\t\tnFractDigit\t= nFractDigit !== undefined ? nFractDigit : 0;\n\t\t\t\tvar precision\t= Math.pow(10, nFractDigit);\n\t\t\t\tvar i \t\t= Math.floor(Math.log(bytes) / Math.log(1024));\n\t\t\t\treturn Math.round(bytes*precision / Math.pow(1024, i))/precision + ' ' + sizes[i];\n\t\t\t};\n\t\t}\n\n\t}\n\n};\n\nmodule.exports = MemoryStats;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/memory-stats/memory-stats.js\n// module id = 127\n// module chunks = 7","/* global PIXI */\nimport * as Core from '../lib/core';\nimport { lerp } from '../lib/utils';\n\n// import filters from 'pixi-filters';\n// import extraFilters from 'pixi-extra-filters';\n\nconst PI2 = Math.PI * 2;\n\nlet idx, p, entityId, position, sprite;\n\n// See also: http://phrogz.net/JS/wheeldelta.html\nconst wheelDistance = function(evt){\n  if (!evt) evt = event;\n  const w=evt.wheelDelta, d=evt.detail;\n  if (d){\n    if (w) return w/d/40*d>0?1:-1; // Opera\n    else return -d/3;              // Firefox;         TODO: do not /3 for OS X\n  } else return w/120;             // IE/Safari/Chrome TODO: /3 for Chrome OS X\n};\n\nexport class ViewportPixi extends Core.System {\n\n  defaultOptions() {\n    return {\n      lineWidth: 5,\n      zoom: 1.0,\n      zoomMin: 0.1,\n      zoomMax: 10.0,\n      zoomWheelFactor: 0.05,\n      gridEnabled: true,\n      gridSize: 250,\n      gridColor: 0x222222,\n      followEnabled: true,\n      followName: null,\n      followEntityId: null\n    };\n  }\n\n  initialize() {\n    this.container = document.querySelector(this.options.container);\n    this.renderer = PIXI.autoDetectRenderer(\n      this.container.offsetWidth,\n      this.container.offsetHeight,\n      { antialias: true }\n    );\n    this.renderer.autoResize = true;\n    this.canvas = this.renderer.view;\n    this.container.appendChild(this.canvas);\n    this.stage = new PIXI.Container();\n\n    this.stage.filters = [\n      // new PIXI.filters.VoidFilter(),\n      // new PIXI.filters.BlurFilter(1, 1, 5)\n    ];\n\n    this.healthBarGraphics = new PIXI.Graphics();\n    this.stage.addChild(this.healthBarGraphics);\n\n    this.backdrop = new PIXI.Graphics();\n    this.stage.addChild(this.backdrop);\n\n    this.graphics = {};\n\n    const events = {\n      'resize': (ev) => { this.updateMetrics(ev); },\n      'orientationchange': (ev) => { this.updateMetrics(ev); },\n      'mousedown': (ev) => { this.onMouseDown(ev); },\n      'mousemove': (ev) => { this.onMouseMove(ev); },\n      'mouseup': (ev) => { this.onMouseUp(ev); }\n    };\n\n    for (const name in events) {\n      this.canvas.addEventListener(name, events[name], false);\n    }\n\n    // See also: http://phrogz.net/JS/wheeldelta.html\n    const boundOnMouseWheel = (ev) => this.onMouseWheel(ev);\n    if (window.addEventListener){\n      window.addEventListener('mousewheel', boundOnMouseWheel, false); // Chrome/Safari/Opera\n      window.addEventListener('DOMMouseScroll', boundOnMouseWheel, false); // Firefox\n    } else if (window.attachEvent){\n      window.attachEvent('onmousewheel', boundOnMouseWheel); // IE\n    }\n\n    this.followEnabled = this.options.followEnabled;\n    this.zoom = this.options.zoom;\n    this.followEntityId = this.options.followEntityId;\n    this.gridEnabled = this.options.gridEnabled;\n    this.lineWidth = this.options.lineWidth;\n\n    this.cursorRawX = 0;\n    this.cursorRawY = 0;\n\n    this.cursorChanged = false;\n    this.cursorPosition = { x: 0, y: 0 };\n\n    this.cameraX = 0;\n    this.cameraY = 0;\n\n    this.debugDummySprite = { size: 100 };\n\n    this.updateMetrics();\n  }\n\n  onMouseWheel(ev) {\n    this.zoom += wheelDistance(ev) * this.options.zoomWheelFactor;\n    if (this.zoom < this.options.zoomMin) {\n      this.zoom = this.options.zoomMin;\n    }\n    if (this.zoom > this.options.zoomMax) {\n      this.zoom = this.options.zoomMax;\n    }\n  }\n\n  // TODO: Use a symbol for 'mouse{Down,Move,Up}' message?\n\n  onMouseDown(ev) {\n    this.setCursor(ev.clientX, ev.clientY);\n    this.world.publish('mouseDown', this.cursorPosition);\n  }\n\n  onMouseMove(ev) {\n    this.setCursor(ev.clientX, ev.clientY);\n    this.world.publish('mouseMove', this.cursorPosition);\n  }\n\n  onMouseUp(ev) {\n    this.setCursor(ev.clientX, ev.clientY);\n    this.world.publish('mouseUp', this.cursorPosition);\n  }\n\n  setCursor(x, y) {\n    const width = this.container.offsetWidth;\n    const height = this.container.offsetHeight;\n\n    this.cursorRawX = x;\n    this.cursorRawY = y;\n\n    const newX = ((x - (width / 2)) / this.zoom) + this.cameraX;\n    const newY = ((y - (height / 2)) / this.zoom) + this.cameraY;\n\n    this.cursorChanged = false;\n    if (newX !== this.cursorPosition.x || newY !== this.cursorPosition.y) {\n      this.cursorChanged = true;\n      this.cursorPosition.x = newX;\n      this.cursorPosition.y = newY;\n    }\n\n    return this.cursorPosition;\n  }\n\n  updateMetrics() {\n    const width = this.container.offsetWidth;\n    const height = this.container.offsetHeight;\n\n    this.visibleWidth = width / this.zoom;\n    this.visibleHeight = height / this.zoom;\n\n    this.visibleLeft = (0 - this.visibleWidth / 2) + this.cameraX;\n    this.visibleTop = (0 - this.visibleHeight / 2) + this.cameraY;\n    this.visibleRight = this.visibleLeft + this.visibleWidth;\n    this.visibleBottom = this.visibleTop + this.visibleHeight;\n  }\n\n  update(/*timeDelta*/) {\n    this.updateMetrics();\n\n    this.setCursor(this.cursorRawX, this.cursorRawY);\n    // FIXME: Should be able to skip doing this unless\n    // this.cursorChanged === true, but for some reason that's not working\n    this.world.publish('mouseMove', this.cursorPosition);\n\n    const sprites = this.world.get('Sprite') || {};\n\n    for (entityId in sprites) {\n      position = this.world.get('Position', entityId);\n      sprite = sprites[entityId];\n      sprite.visible = (\n        (position.right > this.visibleLeft) &&\n        (position.left < this.visibleRight) &&\n        (position.bottom > this.visibleTop) &&\n        (position.top < this.visibleBottom)\n      );\n    }\n\n    const toRemove = Object.keys(this.graphics).filter(key => !(key in sprites));\n    toRemove.forEach(entityId => {\n      this.stage.removeChild(this.graphics[entityId]);\n      delete this.graphics[entityId];\n    });\n\n    const toAdd = Object.keys(sprites).filter(key => !(key in this.graphics));\n    toAdd.forEach(entityId => {\n      this.stage.addChild(this.graphics[entityId] = new PIXI.Graphics());\n    });\n  }\n\n  draw(timeDelta) {\n    this.followEntity();\n    this.drawBackdrop(timeDelta);\n\n    for (const entityId in this.graphics) {\n      this.drawSprite(this.graphics[entityId], entityId, timeDelta);\n    }\n\n    this.stage.setTransform(\n      (this.container.offsetWidth / 2) - (this.cameraX * this.zoom),\n      (this.container.offsetHeight / 2) - (this.cameraY * this.zoom),\n      this.zoom,\n      this.zoom\n    );\n\n    this.renderer.resize(\n      this.container.offsetWidth,\n      this.container.offsetHeight\n    );\n\n    this.renderer.render(this.stage);\n  }\n\n  drawSprite(ctx, entityId, timeDelta) {\n    const sprite = this.world.get('Sprite', entityId);\n    if (!sprite) { return; }\n\n    const position = this.world.get('Position', entityId);\n\n    let spriteFn = getSprite(sprite.name);\n    if (!spriteFn) { spriteFn = getSprite('default'); }\n\n    ctx.position.x = Math.floor(position.x);\n    ctx.position.y = Math.floor(position.y);\n    ctx.rotation = position.rotation + (Math.PI / 2);\n    ctx.scale.x = ctx.scale.y = sprite.size / 100;\n    ctx.lineStyle(this.lineWidth / (sprite.size / 100), sprite.color);\n    spriteFn(ctx, sprite, entityId, timeDelta, this.world);\n\n      /*\n    const health = this.world.get('Health', entityId);\n    if (health) {\n      const perc = (health.current / health.max);\n      ctx.lineStyle(1.0, 0x333333);\n      ctx.moveTo(-50, -57);\n      ctx.drawRect(-50, -57, 100, 5);\n      ctx.moveTo(-50, -57);\n      ctx.beginFill(0x00ff00, 1.0);\n      ctx.drawRect(-50, -57, 100 * perc, 5);\n      ctx.endFill();\n    }\n    */\n\n    sprite.drawn = true;\n    return ctx;\n  }\n\n  followEntity() {\n    if (!this.followEnabled) {\n      this.cameraX = this.cameraY = 0;\n      return;\n    }\n    if (this.options.followName && !this.followEntityId) {\n      // Look up named entity, if necessary.\n      this.followEntityId = Core.getComponent('Name')\n        .findEntityByName(this.world, this.options.followName);\n    }\n    if (this.followEntityId) {\n      // Adjust the viewport center offset to the entity position\n      const position = this.world.get('Position', this.followEntityId);\n      if (position) {\n        this.cameraX = position.x;\n        this.cameraY = position.y;\n        this.setCursor(this.cursorRawX, this.cursorRawY);\n      }\n    }\n  }\n\n  drawBackdrop(/* timeDelta */) {\n    const ctx = this.backdrop;\n\n    if (!this.gridEnabled) {\n      ctx.visible = false;\n      return;\n    }\n\n    const gridSize = this.options.gridSize;\n    const gridOffsetX = this.visibleLeft % gridSize;\n    const gridOffsetY = this.visibleTop % gridSize;\n\n    ctx.visible = true;\n    ctx.clear();\n    ctx.lineStyle(5, this.options.gridColor);\n    ctx.position.x = this.visibleLeft;\n    ctx.position.y = this.visibleTop;\n\n    for (let x = -gridOffsetX; x < this.visibleWidth; x += gridSize) {\n      ctx.moveTo(x, 0);\n      ctx.lineTo(x, this.visibleHeight + gridSize);\n    }\n\n    for (let y = -gridOffsetY; y < this.visibleHeight; y += gridSize) {\n      ctx.moveTo(0, y);\n      ctx.lineTo(this.visibleWidth + gridSize, y);\n    }\n  }\n\n}\n\nCore.registerSystem('ViewportPixi', ViewportPixi);\n\nexport class CanvasSprite extends Core.Component {\n  static defaults() {\n    return {\n      name: null,\n      color: 0xffffff,\n      size: 100,\n      width: null,\n      height: null,\n      drawn: false,\n      visible: false\n    };\n  }\n  static create(attrs) {\n    const c = super.create(attrs);\n    if (!c.width) { c.width = c.size; }\n    if (!c.height) { c.height = c.size; }\n    return c;\n  }\n}\n\nCore.registerComponent('Sprite', CanvasSprite);\n\nconst spriteRegistry = {};\nexport function registerSprite(name, sprite) {\n  spriteRegistry[name] = sprite;\n}\nexport function getSprite(name) {\n  return spriteRegistry[name];\n}\n\nconst defaultShape = [ -50, 0, 50, 0, 0, 0, 0, -50, 0, 50, 0, 0 ];\nfor (let idx = 0; idx < 8; idx++) {\n  const rot = idx * (PI2 / 8);\n  defaultShape.push(50 * Math.cos(rot));\n  defaultShape.push(50 * Math.sin(rot));\n}\ndefaultShape.push(50);\ndefaultShape.push(0);\n\nregisterSprite('default', (g, sprite/*, entityId*/) => {\n  if (sprite.drawn) { return; }\n  g.drawPolygon(defaultShape);\n});\n\nregisterSprite('sun', (ctx, sprite/*, entityId*/) => {\n  if (sprite.drawn) { return; }\n\n  ctx.arc(0, 0, 50, 0, PI2, true);\n});\n\nregisterSprite('enemyscout', (ctx, sprite/*, entityId*/) => {\n  if (sprite.drawn) { return; }\n\n  ctx.moveTo(0, -50);\n  ctx.lineTo(-45, 50);\n  ctx.lineTo(-12.5, 12.5);\n  ctx.lineTo(0, 25);\n  ctx.lineTo(12.5, 12.5);\n  ctx.lineTo(45, 50);\n  ctx.lineTo(0, -50);\n  ctx.moveTo(0, -50);\n});\n\nregisterSprite('enemywing', (g, sprite/*, entityId*/) => {\n  if (sprite.drawn) { return; }\n\n  g.lineColor = 0x228822;\n\n  g.moveTo(-50, 0);\n  g.lineTo(-37.5, -37.5);\n  g.lineTo(0, 50);\n  g.lineTo(37.5, -37.5);\n  g.lineTo(50, 0);\n  g.lineTo(37.5, 50);\n  g.lineTo(25, 50);\n  g.lineTo(0, 0);\n  g.lineTo(-25, 50);\n  g.lineTo(-37.5, 50);\n  g.lineTo(-50, 0);\n});\n\nconst repulsorShape = [\n -50,  0,\n -37.5, -50,\n -25, -50,\n -6.25, 25,\n 6.25, 25,\n 25, -50,\n 37.5, -50,\n 50,  0,\n 37.5, 50,\n 25, 50,\n 6.25, -25,\n -6.25, -25,\n -25, 50,\n -37.5, 50,\n -50, 0\n];\nconst repulsorSides = 8;\nconst repulsorPoints = [];\nfor (let idx = 0; idx < repulsorSides; idx++) {\n  const rot = idx * (PI2 / repulsorSides);\n  repulsorPoints.push(Math.cos(rot));\n  repulsorPoints.push(Math.sin(rot));\n}\nrepulsorPoints.push(repulsorPoints[0]);\nrepulsorPoints.push(repulsorPoints[1]);\n\nregisterSprite('repulsor', (g, sprite, entityId, timeDelta, world) => {\n  if (!sprite.drawn) {\n    const t = 0; // Math.floor(Math.random() * 15) * 100;\n    sprite.rings = [\n      { t: t,       startR: 0, endR: 500, startO: 1.0, endO: 0.0, endT: 1500 },\n      { t: t + 250, startR: 0, endR: 500, startO: 1.0, endO: 0.0, endT: 1500 },\n      { t: t + 500, startR: 0, endR: 500, startO: 1.0, endO: 0.0, endT: 1500 }\n    ];\n  }\n\n  const repulsor = world.get('Repulsor', entityId);\n  if (repulsor) {\n    sprite.rings.forEach(ring => ring.endR = repulsor.range);\n  }\n\n  g.clear();\n  g.lineStyle(5 / (sprite.size / 100), 0x228822);\n  g.drawPolygon(repulsorShape);\n\n  const dt = Math.floor(timeDelta * 1000);\n  sprite.rings.forEach(ring => {\n    ring.t += dt;\n    if (ring.t >= ring.endT) { ring.t = 0; }\n\n    if (!sprite.visible) { return; }\n\n    const r = lerp(ring.startR, ring.endR, ring.t / ring.endT);\n    const a = lerp(ring.startO, ring.endO, ring.t / ring.endT);\n\n    g.lineStyle(5 / (sprite.size / 100), 0x228822, a);\n    g.moveTo(-r, 0);\n    g.drawPolygon(repulsorPoints.map(p => r * p));\n  });\n});\n\nconst heroShape = [\n  -50, 0,\n  -37.5, -37.5,\n  0, -50,\n  37.5, -37.5,\n  50, 0,\n  37.5, 50,\n  25, 50,\n  12.5, 12.5,\n  5, 25,\n  -5, 25,\n  -12.5, 12.5,\n  -25, 50,\n  -37.5, 50,\n  -50, 0\n];\n\nregisterSprite('hero', (g, sprite/*, entityId*/) => {\n  if (sprite.drawn) { return; }\n  g.drawPolygon(heroShape);\n});\n\nregisterSprite('asteroid', (g, sprite/*, entityId*/) => {\n  if (sprite.drawn) { return; }\n\n  const NUM_POINTS = 10 + Math.floor(8 * Math.random());\n  const MAX_RADIUS = 50;\n  const MIN_RADIUS = 35;\n  const ROTATION = PI2 / NUM_POINTS;\n\n  let idx;\n  const points = [];\n\n  for (idx = 0; idx < NUM_POINTS; idx++) {\n    const rot = idx * ROTATION;\n    const dist = (Math.random() * (MAX_RADIUS - MIN_RADIUS)) + MIN_RADIUS;\n    points.push(dist * Math.cos(rot));\n    points.push(dist * Math.sin(rot));\n  }\n  points.push(points[0]);\n  points.push(points[1]);\n\n  g.drawPolygon(points);\n});\n\nregisterSprite('mine', (g, sprite/*, entityId, timeDelta, world*/) => {\n  if (!sprite.drawn) {\n    let NUM_POINTS = 10 + Math.floor(10 * Math.random());\n    if (NUM_POINTS % 2 !== 0) { NUM_POINTS++; }\n    const ROTATION = PI2 / NUM_POINTS;\n    const MAX_RADIUS = 60;\n    const MIN_RADIUS = 10;\n\n    let even = false;\n\n    sprite.legs = [];\n    for (let idx = 0; idx < NUM_POINTS; idx++) {\n      const dist = even ? 10 : (Math.random() * (MAX_RADIUS - MIN_RADIUS)) + MIN_RADIUS;\n      const rot = idx * ROTATION;\n      sprite.legs.push(dist * Math.cos(rot));\n      sprite.legs.push(dist * Math.sin(rot));\n      even = !even;\n    }\n    sprite.legs.push(sprite.legs[0]);\n    sprite.legs.push(sprite.legs[1]);\n  }\n\n  if (sprite.drawn && Math.random() > 0.15) { return; }\n\n  g.clear();\n  g.lineStyle(5 / (sprite.size / 100), 0xFF2222);\n  g.drawPolygon(sprite.legs.map(p => p * (0.9 + 0.5 * Math.random())));\n});\n\nregisterSprite('explosion', (g, sprite, entityId, timeDelta) => {\n\n  if (!sprite.drawn) {\n    Object.assign(sprite, {\n      ttl: 2.0,\n      radius: 100,\n      maxParticles: 25,\n      maxParticleSize: 4,\n      maxVelocity: 300,\n      age: 0,\n      alpha: 0,\n      stop: false,\n      particles: []\n    }, sprite);\n    for (idx = 0; idx < sprite.maxParticles; idx++) {\n      sprite.particles.push({ free: true });\n    }\n  }\n\n  for (idx = 0; idx < sprite.particles.length; idx++) {\n    p = sprite.particles[idx];\n\n    if (!sprite.stop && p.free) {\n\n      p.velocity = sprite.maxVelocity * Math.random();\n      p.angle = (Math.PI * 2) * Math.random();\n      p.dx = 0 - (p.velocity * Math.sin(p.angle));\n      p.dy = p.velocity * Math.cos(p.angle);\n      p.distance = p.x = p.y = 0;\n      p.maxDistance = sprite.radius * Math.random();\n      p.size = sprite.maxParticleSize;\n      p.free = false;\n\n    } else if (!p.free) {\n\n      p.x += p.dx * timeDelta;\n      p.y += p.dy * timeDelta;\n\n      p.distance += p.velocity * timeDelta;\n      if (p.distance >= p.maxDistance) {\n        p.distance = p.maxDistance;\n        p.free = true;\n      }\n\n    }\n\n  }\n\n  sprite.age += timeDelta;\n\n  if (sprite.age >= sprite.ttl) {\n    sprite.stop = true;\n  }\n\n  sprite.alpha = Math.max(0, 1 - (sprite.age / sprite.ttl));\n\n  g.clear();\n\n  for (idx = 0; idx < sprite.particles.length; idx++) {\n    p = sprite.particles[idx];\n    if (p.free) { continue; }\n\n    g.lineStyle(5 / (sprite.size / 100), sprite.color,\n      (1 - (p.distance / p.maxDistance)) * sprite.alpha);\n    g.moveTo(0, 0);\n    g.lineTo(p.x, p.y);\n  }\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/viewportPixi.js","// Linear interpolation from v0 to v1 over t[0..1]\r\nexport function lerp(v0, v1, t) {\r\n  return (1-t)*v0 + t*v1;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/utils.js","\"use strict\";\n\nexports.__esModule = true;\n\nvar _from = require(\"../core-js/array/from\");\n\nvar _from2 = _interopRequireDefault(_from);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return (0, _from2.default)(arr);\n  }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/toConsumableArray.js\n// module id = 130\n// module chunks = 7","module.exports = { \"default\": require(\"core-js/library/fn/array/from\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/array/from.js\n// module id = 131\n// module chunks = 7","require('../../modules/es6.string.iterator');\nrequire('../../modules/es6.array.from');\nmodule.exports = require('../../modules/_core').Array.from;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/array/from.js\n// module id = 132\n// module chunks = 7","'use strict';\nvar ctx = require('./_ctx');\nvar $export = require('./_export');\nvar toObject = require('./_to-object');\nvar call = require('./_iter-call');\nvar isArrayIter = require('./_is-array-iter');\nvar toLength = require('./_to-length');\nvar createProperty = require('./_create-property');\nvar getIterFn = require('./core.get-iterator-method');\n\n$export($export.S + $export.F * !require('./_iter-detect')(function (iter) { Array.from(iter); }), 'Array', {\n  // 22.1.2.1 Array.from(arrayLike, mapfn = undefined, thisArg = undefined)\n  from: function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {\n    var O = toObject(arrayLike);\n    var C = typeof this == 'function' ? this : Array;\n    var aLen = arguments.length;\n    var mapfn = aLen > 1 ? arguments[1] : undefined;\n    var mapping = mapfn !== undefined;\n    var index = 0;\n    var iterFn = getIterFn(O);\n    var length, result, step, iterator;\n    if (mapping) mapfn = ctx(mapfn, aLen > 2 ? arguments[2] : undefined, 2);\n    // if object isn't iterable or it's array with default iterator - use simple case\n    if (iterFn != undefined && !(C == Array && isArrayIter(iterFn))) {\n      for (iterator = iterFn.call(O), result = new C(); !(step = iterator.next()).done; index++) {\n        createProperty(result, index, mapping ? call(iterator, mapfn, [step.value, index], true) : step.value);\n      }\n    } else {\n      length = toLength(O.length);\n      for (result = new C(length); length > index; index++) {\n        createProperty(result, index, mapping ? mapfn(O[index], index) : O[index]);\n      }\n    }\n    result.length = index;\n    return result;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.array.from.js\n// module id = 133\n// module chunks = 7","// call something on iterator step with safe closing on error\nvar anObject = require('./_an-object');\nmodule.exports = function (iterator, fn, value, entries) {\n  try {\n    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch (e) {\n    var ret = iterator['return'];\n    if (ret !== undefined) anObject(ret.call(iterator));\n    throw e;\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iter-call.js\n// module id = 134\n// module chunks = 7","// check on default Array iterator\nvar Iterators = require('./_iterators');\nvar ITERATOR = require('./_wks')('iterator');\nvar ArrayProto = Array.prototype;\n\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_is-array-iter.js\n// module id = 135\n// module chunks = 7","'use strict';\nvar $defineProperty = require('./_object-dp');\nvar createDesc = require('./_property-desc');\n\nmodule.exports = function (object, index, value) {\n  if (index in object) $defineProperty.f(object, index, createDesc(0, value));\n  else object[index] = value;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_create-property.js\n// module id = 136\n// module chunks = 7","var classof = require('./_classof');\nvar ITERATOR = require('./_wks')('iterator');\nvar Iterators = require('./_iterators');\nmodule.exports = require('./_core').getIteratorMethod = function (it) {\n  if (it != undefined) return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/core.get-iterator-method.js\n// module id = 137\n// module chunks = 7","// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = require('./_cof');\nvar TAG = require('./_wks')('toStringTag');\n// ES3 wrong here\nvar ARG = cof(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (e) { /* empty */ }\n};\n\nmodule.exports = function (it) {\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_classof.js\n// module id = 138\n// module chunks = 7","var ITERATOR = require('./_wks')('iterator');\nvar SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR]();\n  riter['return'] = function () { SAFE_CLOSING = true; };\n  // eslint-disable-next-line no-throw-literal\n  Array.from(riter, function () { throw 2; });\n} catch (e) { /* empty */ }\n\nmodule.exports = function (exec, skipClosing) {\n  if (!skipClosing && !SAFE_CLOSING) return false;\n  var safe = false;\n  try {\n    var arr = [7];\n    var iter = arr[ITERATOR]();\n    iter.next = function () { return { done: safe = true }; };\n    arr[ITERATOR] = function () { return iter; };\n    exec(arr);\n  } catch (e) { /* empty */ }\n  return safe;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iter-detect.js\n// module id = 139\n// module chunks = 7","module.exports = { \"default\": require(\"core-js/library/fn/object/values\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/object/values.js\n// module id = 140\n// module chunks = 7","require('../../modules/es7.object.values');\nmodule.exports = require('../../modules/_core').Object.values;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/object/values.js\n// module id = 141\n// module chunks = 7","// https://github.com/tc39/proposal-object-values-entries\nvar $export = require('./_export');\nvar $values = require('./_object-to-array')(false);\n\n$export($export.S, 'Object', {\n  values: function values(it) {\n    return $values(it);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es7.object.values.js\n// module id = 142\n// module chunks = 7","var getKeys = require('./_object-keys');\nvar toIObject = require('./_to-iobject');\nvar isEnum = require('./_object-pie').f;\nmodule.exports = function (isEntries) {\n  return function (it) {\n    var O = toIObject(it);\n    var keys = getKeys(O);\n    var length = keys.length;\n    var i = 0;\n    var result = [];\n    var key;\n    while (length > i) if (isEnum.call(O, key = keys[i++])) {\n      result.push(isEntries ? [key, O[key]] : O[key]);\n    } return result;\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-to-array.js\n// module id = 143\n// module chunks = 7"],"sourceRoot":""}